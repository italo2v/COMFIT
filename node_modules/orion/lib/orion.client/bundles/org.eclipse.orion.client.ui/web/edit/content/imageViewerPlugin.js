!function(e,t){"function"==typeof define&&define.amd?define("orion/Deferred",t):"object"==typeof exports?module.exports=t():(e.orion=e.orion||{},e.orion.Deferred=t())}(this,function(){function e(){for(var e;e=o.shift();)e();a=!1}function t(e){o.push(e),a||(a=!0,s())}function n(e){return function(t){e(t)}}function r(e,t,r){try{var i=e(t),o=i&&("object"==typeof i||"function"==typeof i)&&i.then;if("function"==typeof o)if(i===r.promise)r.reject(new TypeError);else{var a=i.cancel;"function"==typeof a?r._parentCancel=a.bind(i):delete r._parentCancel,o.call(i,n(r.resolve),n(r.reject),n(r.progress))}else r.resolve(i)}catch(s){r.reject(s)}}function i(){function e(){for(var e;e=l.shift();){var t=e.deferred,n="fulfilled"===u?"resolve":"reject",i=e[n];"function"==typeof i?r(i,s,t):t[n](s)}}function n(n){delete c._parentCancel,u="rejected",s=n,l.length&&t(e)}function o(r){function a(e){return function(t){u&&"assumed"!==u||e(t)}}delete c._parentCancel;try{var d=r&&("object"==typeof r||"function"==typeof r)&&r.then;if("function"==typeof d)if(r===c)n(new TypeError);else{u="assumed";var f=r&&r.cancel;if("function"!=typeof f){var h=new i;r=h.promise;try{d(h.resolve,h.reject,h.progress)}catch(p){h.reject(p)}f=r.cancel,d=r.then}s=r,d.call(r,a(o),a(n)),c._parentCancel=f.bind(r)}else u="fulfilled",s=r,l.length&&t(e)}catch(m){a(n)(m)}}function a(){var e=c._parentCancel;if(e)delete c._parentCancel,e();else if(!u){var t=new Error("Cancel");t.name="Cancel",n(t)}}var s,u,l=[],c=this;this.resolve=function(e){return u||o(e),c},this.reject=function(e){return u||n(e),c},this.progress=function(e){return u||l.forEach(function(t){if(t.progress)try{t.progress(e)}catch(n){}}),c.promise},this.cancel=function(){return c._parentCancel?setTimeout(a,0):a(),c},this.then=function(n,r,o){var a=new i;return a._parentCancel=c.promise.cancel,l.push({resolve:n,reject:r,progress:o,deferred:a}),("fulfilled"===u||"rejected"===u)&&t(e),a.promise},this.promise={then:c.then,cancel:c.cancel}}var o=[],a=!1,s=function(){if("undefined"!=typeof process&&"function"==typeof process.nextTick){var t=process.nextTick;return function(){t(e)}}if("function"==typeof MutationObserver){var n=document.createElement("div"),r=new MutationObserver(e);return r.observe(n,{attributes:!0}),function(){n.setAttribute("class","_tick")}}return function(){setTimeout(e,0)}}();return i.all=function(e,t){function n(e,t){s||(a[e]=t,0===--o&&u.resolve(a))}function r(e,r){if(!s){if(t)try{return void n(e,t(r))}catch(i){r=i}u.reject(r)}}var o=e.length,a=[],s=!1,u=new i;return u.then(void 0,function(){s=!0,e.forEach(function(e){e.cancel&&e.cancel()})}),0===o?u.resolve(a):e.forEach(function(e,t){e.then(n.bind(void 0,t),r.bind(void 0,t))}),u.promise},i.when=function(e,t,n,r){var o,a;return e&&"function"==typeof e.then?o=e:(a=new i,a.resolve(e),o=a.promise),o.then(t,n,r)},i}),function(e,t){"function"==typeof define&&define.amd?define("orion/plugin",["orion/Deferred"],t):"object"==typeof exports?module.exports=t(require("orion/Deferred")):(e.orion=e.orion||{},e.orion.PluginProvider=t(e.orion.Deferred))}(this,function(e){function t(e,t){this.__objectId=e,this.__methods=t}function n(n){function r(e){b&&("undefined"==typeof ArrayBuffer&&(e=JSON.stringify(e)),b===self?b.postMessage(e):b.postMessage(e,"*"))}function i(){var e=[];return Object.keys(w).forEach(function(t){var n=w[t];e.push({serviceId:t,names:n.names,methods:n.methods,properties:n.properties})}),{headers:d||{},services:e}}function o(e,t){if(t&&t instanceof XMLHttpRequest){var n,r;try{n=t.status,r=t.statusText}catch(i){n=0,r=""}return{status:n||0,statusText:r}}return t}function a(e){var t=e?JSON.parse(JSON.stringify(e,o)):e;return e instanceof Error&&(t.__isError=!0,t.message=t.message||e.message,t.name=t.name||e.name),t}function s(n){if(!b)return(new e).reject(new Error("plugin not connected"));n.id=String(h++);var r=new e;y[n.id]=r,r.then(null,function(e){f&&e instanceof Error&&"Cancel"===e.name&&E({requestId:n.id,method:"cancel",params:e.message?[e.message]:[]})});var i=Object.prototype.toString;return n.params.forEach(function(e,o){if("[object Object]"===i.call(e)&&!(e instanceof t)){var a,s;for(a in e)"[object Function]"===i.call(e[a])&&(s=s||[],s.push(a));if(s){var u=p++;v[u]=e;var l=function(){delete v[u]};r.then(l,l),n.params[o]=new t(u,s)}}}),E(n),r.promise}function u(e,t){e||0===e?E({id:e,result:null,error:t}):console.log(t)}function l(e,t,n,r){r.forEach(function(e,t){if(e&&"undefined"!=typeof e.__objectId){var n={};e.__methods.forEach(function(t){n[t]=function(){return s({objectId:e.__objectId,method:t,params:Array.prototype.slice.call(arguments)})}}),r[t]=n}});var i="undefined"==typeof e?null:{id:e,result:null,error:null};try{var o=n.apply(t,r);if(!i)return;o&&"function"==typeof o.then?(g[e]=o,o.then(function(t){delete g[e],i.result=t,E(i)},function(t){g[e]&&(delete g[e],i.error=a(t),E(i))},function(){E({responseId:e,method:"progress",params:Array.prototype.slice.call(arguments)})})):(i.result=o,E(i))}catch(u){i&&(i.error=a(u),E(i))}}function c(e){if(e.source===b||"undefined"==typeof window){var t="string"!=typeof e.data?e.data:JSON.parse(e.data);try{if(t.method){var n=t.method,r=t.params||[];if("serviceId"in t){var i=w[t.serviceId];i||u(t.id,"service not found"),i=i.implementation,n in i?l(t.id,i,i[n],r):u(t.id,"method not found")}else if("objectId"in t){var o=v[t.objectId];o||u(t.id,"object not found"),!n in o?l(t.id,o,o[n],r):u(t.id,"method not found")}else if("requestId"in t){var a=g[t.requestId];a&&"cancel"===n&&a.cancel&&a.cancel.apply(a,r)}else{if(!("responseId"in t))throw new Error("Bad method: "+t.method);var s=y[t.responseId];s&&"progress"===n&&s.progress&&s.progress.apply(s,r)}}else{var c=y[String(t.id)];delete y[String(t.id)],t.error?c.reject(t.error):c.resolve(t.result)}}catch(d){console.log("Plugin._messageHandler "+d)}}}var d=n,f=!1,h=0,p=0,m=0,g={},y={},v={},w={},b=null;"undefined"==typeof window?b=self:window!==window.parent?b=window.parent:null!==window.opener&&(b=window.opener);var E=r;r({method:"loading"}),this.updateHeaders=function(e){if(f)throw new Error("Cannot update headers. Plugin Provider is connected");d=e},this.registerService=function(e,t,n){if(f)throw new Error("Cannot register service. Plugin Provider is connected");"string"==typeof e?e=[e]:Array.isArray(e)||(e=[]);var r=null,i=[];for(r in t)"function"==typeof t[r]&&i.push(r);w[m++]={names:e,methods:i,implementation:t,properties:n||{},listeners:{}}},this.registerServiceProvider=this.registerService,this.connect=function(e,t){if(f)return void(e&&e());if(!b)return void(t&&t("No valid plugin target"));addEventListener("message",c,!1);var n={method:"plugin",params:[i()]};r(n),f=!0,e&&e()},this.disconnect=function(){f&&(removeEventListener("message",c),b=null,f=!1)}}return n}),define("orion/util",[],function(){function e(e){var t=arguments;return e.replace(/\$\{([^\}]+)\}/g,function(e,n){return t[(n<<0)+1]})}function t(e,t){return e.createElementNS?e.createElementNS(v,t):e.createElement(t)}var n=navigator.userAgent,r=-1!==n.indexOf("MSIE")||-1!==n.indexOf("Trident")?document.documentMode:void 0,i=parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0,o=-1!==n.indexOf("Opera")?parseFloat(n.split("Version/")[1]):void 0,a=parseFloat(n.split("Chrome/")[1])||void 0,s=-1!==n.indexOf("Safari")&&!a,u=parseFloat(n.split("WebKit/")[1])||void 0,l=-1!==n.indexOf("Android"),c=-1!==n.indexOf("iPad"),d=-1!==n.indexOf("iPhone"),f=c||d,h=-1!==navigator.platform.indexOf("Mac"),p=-1!==navigator.platform.indexOf("Win"),m=-1!==navigator.platform.indexOf("Linux"),g="undefined"!=typeof document&&"ontouchstart"in document.createElement("input"),y=p?"\r\n":"\n",v="http://www.w3.org/1999/xhtml";return{formatMessage:e,createElement:t,isIE:r,isFirefox:i,isOpera:o,isChrome:a,isSafari:s,isWebkit:u,isAndroid:l,isIPad:c,isIPhone:d,isIOS:f,isMac:h,isWindows:p,isLinux:m,isTouch:g,platformDelimiter:y}}),define("orion/webui/littlelib",["orion/util"],function(e){function t(e,t){return t||(t=document),t.querySelector(e)}function n(e,t){return t||(t=document),t.querySelectorAll(e)}function r(e,t){return Array.prototype.slice.call(n(e,t))}function i(e){var t=e;return"string"==typeof e&&(t=document.getElementById(e)),t}function o(e,t){if(!e||!t)return!1;if(e===t)return!0;var n=e.compareDocumentPosition(t);return Boolean(16&n)}function a(e){var t=e.getBoundingClientRect(),n=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),r=Math.max(document.documentElement.scrollTop,document.body.scrollTop);return{left:t.left+n,top:t.top+r,width:t.width,height:t.height}}function s(e){for(;e.hasChildNodes();){var t=e.firstChild;e.removeChild(t)}}function u(t){var n=t.tabIndex;if(0===n&&e.isIE){var r={a:!0,body:!0,button:!0,frame:!0,iframe:!0,img:!0,input:!0,isindex:!0,object:!0,select:!0,textarea:!0};r[t.nodeName.toLowerCase()]||t.attributes.tabIndex||(n=-1)}return n}function l(e){if(u(e)>=0)return e;if(e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++){var n=l(e.childNodes[t]);if(n)return n}return null}function c(e){if(u(e)>=0)return e;if(e.hasChildNodes())for(var t=e.childNodes.length-1;t>=0;t--){var n=c(e.childNodes[t]);if(n)return n}return null}function d(e,t){if(3===e.nodeType){var n=E.exec(e.nodeValue);n&&n.length>1&&t(e,n)}if(e.hasChildNodes())for(var r=0;r<e.childNodes.length;r++)d(e.childNodes[r],t)}function f(e,t){d(e,function(e,n){var r=t[n[1]]||n[1];e.parentNode.replaceChild(document.createTextNode(r),e)})}function h(e,t){d(e,function(e,n){var r=t[n[1]];if(r){var i=document.createRange(),o=n.index;i.setStart(e,o),i.setEnd(e,o+n[0].length),i.deleteContents(),i.insertNode(r)}})}function p(t,n){function r(e){k.forEach(function(t){var n=!1,r=t.excludeNodes.some(function(t){return document.body.contains(t)?(n=!0,t.contains(e.target)):!1});if(n&&!r)try{t.dismiss(e)}catch(i){"undefined"!=typeof console&&console&&console.error(i&&i.message)}}),k=k.filter(function(e){return e.excludeNodes.some(function(e){return document.body.contains(e)})})}null===k&&(k=[],document.addEventListener("click",r,!0),e.isIOS&&document.addEventListener("touchend",function(e){function t(){e.target.removeEventListener("click",t)}0===e.touches.length&&e.target.addEventListener("click",t)},!1)),k.push({excludeNodes:t,dismiss:n})}function m(e){k=k.filter(function(t){return e!==t.dismiss})}function g(e){for(var t=e.parentNode,n=document.documentElement;t&&t!==n;){var r=window.getComputedStyle(t,null);if(!r)break;var i=r.getPropertyValue("overflow-y");if("auto"===i||"scroll"===i)break;t=t.parentNode}return t}function y(e){window.document.all&&(e.keyCode=0),e.preventDefault&&(e.preventDefault(),e.stopPropagation())}function v(e){for(var t=document.getElementsByTagName("iframe"),n=0;n<t.length;n++)t[n].parentNode.style.pointerEvents=e?"":"none"}function w(e){return C[e]||null}function b(e,t){var n=t,r=null;return void 0===n&&(n=document.createElement("div")),n.innerHTML=e,r=1<n.childNodes.length?n.childNodes:n.firstChild}var E=/\$\{([^\}]+)\}/,k=null,_={BKSPC:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DEL:46},C=Object.create(null);return Object.keys(_).forEach(function(e){C[_[e]]=e}),{$:t,$$:n,$$array:r,node:i,contains:o,bounds:a,empty:s,firstTabbable:l,lastTabbable:c,stop:y,processTextNodes:f,processDOMNodes:h,addAutoDismiss:p,setFramesEnabled:v,getOffsetParent:g,removeAutoDismiss:m,keyName:w,KEY:_,createNodes:b}}),define("orion/commandsProxy",["orion/util","orion/webui/littlelib"],function(e,t){function n(t,n){function r(t){if(e.isMac){if(t.metaKey&&!t.altKey)return t.shiftKey||t.ctrlKey||65!==t.keyCode&&67!==t.keyCode&&86!==t.keyCode&&88!==t.keyCode&&90!==t.keyCode?!1:!0;if(t.ctrlKey)return!1}else{if(t.ctrlKey&&!t.altKey)return t.shiftKey||65!==t.keyCode&&67!==t.keyCode&&86!==t.keyCode&&88!==t.keyCode&&90!==t.keyCode?!1:!0;if(t.altKey&&!t.ctrlKey)return!1;if(t.ctrlKey&&t.altKey)return!1}if(t["char"])return t["char"].length>0;if(t.charCode||t.keyCode){var n=t.charCode||t.keyCode;switch(n){case 8:case 9:case 13:case 46:return!0;default:return n>=32&&112>n||n>123}}return!1}if(t=t||window.event,r(t)){if("true"===t.target.contentEditable)return;var i=t.target.nodeName.toLowerCase();if("input"===i){var o=t.target.type.toLowerCase();switch(o){case"text":case"password":case"search":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"range":case"tel":case"time":case"url":case"week":return}}else if("textarea"===i)return}n(t)}function r(){this._init()}return r.prototype={destroy:function(){this._listener&&(document.removeEventListener("keydown",this._listener),this._listener=null)},setProxy:function(e){this.proxy=e},setKeyBindings:function(e){this.bindings=e},_init:function(){var e=this;document.addEventListener("keydown",this._listener=function(r){return n(r,function(n){var r=e.proxy,i=e.bindings;if(i&&r)for(var o=0;o<i.length;o++)i[o].match(n)&&(r.processKey({type:n.type,keyCode:n.keyCode,altKey:n.altKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,shiftKey:n.shiftKey}),t.stop(n))})})}},{handleKeyEvent:n,CommandsProxy:r}}),define("orion/keyBinding",["orion/util"],function(e){function t(e,t,n,r,i,o){this.type=o||"keydown",this.keyCode="string"==typeof e&&"keydown"===this.type?e.toUpperCase().charCodeAt(0):e,this.mod1=void 0!==t&&null!==t?t:!1,this.mod2=void 0!==n&&null!==n?n:!1,this.mod3=void 0!==r&&null!==r?r:!1,this.mod4=void 0!==i&&null!==i?i:!1}function n(e){this.keys=e}return t.prototype={getKeys:function(){return[this]},match:function(t,n){if(void 0!==n){if(0!==n)return!1}else if(t instanceof Array){if(t.length>1)return!1;t=t[0]}if(t.type!==this.type)return!1;if(this.keyCode===t.keyCode||this.keyCode===String.fromCharCode(e.isOpera?t.which:void 0!==t.charCode?t.charCode:t.keyCode)){var r=e.isMac?t.metaKey:t.ctrlKey;return this.mod1!==r?!1:"keydown"===this.type&&this.mod2!==t.shiftKey?!1:this.mod3!==t.altKey?!1:e.isMac&&this.mod4!==t.ctrlKey?!1:!0}return!1},equals:function(e){return e?this.keyCode!==e.keyCode?!1:this.mod1!==e.mod1?!1:this.mod2!==e.mod2?!1:this.mod3!==e.mod3?!1:this.mod4!==e.mod4?!1:this.type!==e.type?!1:!0:!1}},n.prototype={getKeys:function(){return this.keys.slice(0)},match:function(e,t){var n=this.keys;if(void 0!==t)return t>n.length?!1:n[t].match(e)?t===n.length-1?!0:t+1:!1;if(e instanceof Array||(e=[e]),e.length>n.length)return!1;var r;for(r=0;r<e.length;r++)if(!n[r].match(e[r]))return!1;return r===n.length?!0:r},equals:function(e){if(!e.keys)return!1;if(e.keys.length!==this.keys.length)return!1;for(var t=0;t<e.keys.length;t++)if(!e.keys[t].equals(this.keys[t]))return!1;return!0}},{KeyBinding:t,KeyStroke:t,KeySequence:n}}),function(){function e(e,t,n,r,i,o){t[e]&&(n.push(e),(t[e]===!0||1===t[e])&&r.push(i+e+"/"+o))}function t(e,t,n,r,i){var o=r+t+"/"+i;require._fileExists(e.toUrl(o+".js"))&&n.push(o)}function n(e,t,r){var i;for(i in t)!t.hasOwnProperty(i)||e.hasOwnProperty(i)&&!r?"object"==typeof t[i]&&(!e[i]&&t[i]&&(e[i]={}),n(e[i],t[i],r)):e[i]=t[i]}var r=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var o=i.config?i.config():{};return{version:"2.0.4",load:function(i,a,s,u){u=u||{},u.locale&&(o.locale=u.locale);var l,c,d,f=r.exec(i),h=f[1],p=f[4],m=f[5],g=p.split("-"),y=[],v={},w="";if(f[5]?(h=f[1],l=h+m):(l=i,m=f[4],p=o.locale,p||(p=o.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),g=p.split("-")),u.isBuild){for(y.push(l),t(a,"root",y,h,m),c=0;c<g.length;c++)d=g[c],w+=(w?"-":"")+d,t(a,w,y,h,m);if(u.locales){var b,E;for(b=0;b<u.locales.length;b++)for(p=u.locales[b],g=p.split("-"),w="",E=0;E<g.length;E++)d=g[E],w+=(w?"-":"")+d,t(a,w,y,h,m)}a(y,function(){s()})}else a([l],function(t){var r,i=[];for(e("root",t,i,y,h,m),c=0;c<g.length;c++)r=g[c],w+=(w?"-":"")+r,e(w,t,i,y,h,m);a(y,function(){var e,r,o;for(e=i.length-1;e>-1&&i[e];e--)o=i[e],r=t[o],(r===!0||1===r)&&(r=a(h+o+"/"+m)),n(v,r);s(v)})})}}})}(),define("orion/nls/messages",{root:!0}),define("orion/nls/root/messages",{Navigator:"Navigator",Sites:"Sites",Shell:"Shell",ShellLinkWorkspace:"Shell","Get Plugins":"Get Plugins",Global:"Global",Editor:"Editor",EditorRelatedLink:"Show Current Folder",EditorRelatedLinkParent:"Show Enclosing Folder",EditorLinkWorkspace:"Edit",EditorRelatedLinkProj:"Show Project","Filter bindings":"Filter bindings","Orion Editor":"Orion Editor","Orion Image Viewer":"Orion Image Viewer","Orion Markdown Editor":"Orion Markdown Editor","Orion Markdown Viewer":"Orion Markdown Viewer","Orion JSON Editor":"Orion JSON Editor","View on Site":"View on Site","View this file or folder on a web site hosted by Orion":"View this file or folder on a web site hosted by Orion.",ShowAllKeyBindings:"Show a list of all the keybindings on this page","Show Keys":"Show Keys",HideShowBannerFooter:"Hide or show the page banner and footer","Toggle banner and footer":"Toggle banner and footer",ChooseFileOpenEditor:"Choose a file by name and open an editor on it",FindFile:"Find File Named...","System Configuration Details":"System Configuration Details","System Config Tooltip":"Go to the System Configuration Details page","Background Operations":"Background Operations","Background Operations Tooltip":"Go to the Background Operations page","Operation status is unknown":"Operation status is unknown","Unknown item":"Unknown item",NoSearchAvailableErr:"Can't search: no search service is available",Related:"Related",Options:"Options",FAQ:"FAQ","Report a Bug":"Bugs","Privacy Policy":"Privacy","Terms of Use":"Terms","Copyright Agent":"Copyright","Orion Logo":"Orion Logo","Orion is in Beta. Please try it out but BEWARE your data may be lost.":"@buildLabel@","LOG: ":"LOG: ",View:"View","no parent":"no parent","no tree model":"no tree model","no renderer":"no renderer","could not find table row ":"could not find table row ",Operations:"Operations","Operations running":"Operations running",SomeOpWarning:"Some operations finished with warning",SomeOpErr:"Some operations finished with error","no service registry":"no service registry",Tasks:"Tasks",Close:"Close","Expand all":"Expand all","Collapse all":"Collapse all",Search:"Search","Advanced search":"Advanced search",Submit:"Submit",More:"More","Recent searches":"Recent searches","Regular expression":"Regular expression","Search options":"Search options","Global search":"Global search","Orion Home":"Orion Home","Close notification":"Close notification",OpPressSpaceMsg:"Operations - Press spacebar to show current operations","Toggle side panel":"Toggle side panel","Open or close the side panel":"Open or close the side panel",Projects:"Projects","Toggle Sidebar":"Toggle Sidebar","Sample HTML5 Site":"Sample HTML5 Site","Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.":"Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.","Sample Orion Plugin":"Sample Orion Plugin","Generate a sample plugin for integrating with Orion.":"Generate a sample plugin for integrating with Orion.",Browser:"Web Browser",OutlineProgress:"Getting outline for ${0} from ${1}",outlineTimeout:"Outline service timed out. Try reloading the page and opening the outline again.",UnknownError:"An unknown error occurred.",UnknownWarning:"An unknown warning occurred.",Filter:"Filter (* = any string, ? = any character)",TemplateExplorerLabel:"Templates",OpenTemplateExplorer:"Open Template Explorer",Edit:"Edit",CentralNavTooltip:"Toggle Navigation Menu","Wrote: ${0}":"Wrote: ${0}",GenerateHTML:"Generate HTML file",GenerateHTMLTooltip:"Write an HTML file generated from the current Markdown editor content","alt text":"alt text",blockquote:"blockquote",code:"code","code (block)":"code (block)","code (span)":"code (span)",emphasis:"emphasis","fenced code (${0})":"fenced code (${0})","header (${0})":"header (${0})","horizontal rule":"horizontal rule",label:"label","link (auto)":"link (auto)","link (image)":"link (image)","link (inline)":"link (inline)","link label":"link label","link label (optional)":"link label (optional)","link (ref)":"link (ref)","list item (bullet)":"list item (bullet)","list item (numbered)":"list item (numbered)","strikethrough (${0})":"strikethrough (${0})",strong:"strong","table (${0})":"table (${0})",text:"text","title (optional)":"title (optional)",url:"url",TogglePaneOrientationTooltip:"Toggle split pane orientation",WarningHeaderTooDeep:"Header level cannot exceed 6",WarningUnorderedListItem:"Unordered list item within ordered list",WarningOrderedListItem:"Ordered list item within unordered list",WarningOrderedListShouldStartAt1:"The first item in an ordered list should have index 1",WarningLinkHasNoText:"Link has no text",WarningLinkHasNoURL:"Link has no URL",WarningUndefinedLinkId:"Undefined link ID: ${0}",PageTitleFormat:"${0} - ${1}",KeyCTRL:"Ctrl",KeySHIFT:"Shift",KeyALT:"Alt",KeyBKSPC:"Backspace",KeyDEL:"Del",KeyEND:"End",KeyENTER:"Enter",KeyESCAPE:"Esc",KeyHOME:"Home",KeyINSERT:"Ins",KeyPAGEDOWN:"Page Down",KeyPAGEUP:"Page Up",KeySPACE:"Space",KeyTAB:"Tab"}),function(){function e(e){if("string"!=typeof e)throw new TypeError}function t(e){return e?e.split("&"):[]}function n(e){return 0===e.length?"":e.join("&")}function r(e){var t=/([^=]*)(?:=?)(.*)/.exec(e),n=t[1]?decodeURIComponent(t[1]):"",r=t[2]?decodeURIComponent(t[2]):"";return[n,r]}function i(e){var t=encodeURIComponent(e[0]);return e[1]&&(t+="="+encodeURIComponent(e[1])),t}function o(e,n){var i="",o=[],a=0;return{next:function(){if(i!==e.query&&(i=e.query,o=t(i)),a<o.length){var s=r(o[a++]);switch(n){case"keys":return s[0];case"values":return s[1];case"keys+values":return[s[0],s[1]];default:throw new TypeError}}throw L}}}function a(e){Object.defineProperty(this,"_url",{get:function(){return e._url}})}function s(e,t){if(!e.scheme&&t&&(e.scheme=t.scheme,!e.host&&t.host&&(e.userinfo=t.userinfo,e.host=t.host,e.port=t.port,e.pathRelative=!0)),e.pathRelative)if(e.path){if("/"!==e.path[0]){var n=/^(.*\/)[^\/]*$/.exec(t.path)[1]||"/";e.path=n+e.path}}else e.path=t.path}function u(e){return e.toLowerCase()}function l(e){return e?/[1-9]\d*$/.exec(e)[0]:""}function c(e){var t=[];return e.split("/").forEach(function(e){".."===e?t.pop():"."!==e&&t.push(e)}),t.join("/")}function d(e){e.scheme&&(e.scheme=u(e.scheme)),e.port&&(e.port=l(e.port)),e.host&&e.path&&(e.path=c(e.path))}function f(e){return e.replace(/\s/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function h(e,t){if("string"!=typeof e)throw new TypeError;e=f(e);var n=v.exec(e);if(!n)return null;var r={};if(r.scheme=n[1]||"",r.scheme&&!E.test(r.scheme))return null;var i=n[2];if(i){var o=w.exec(i);if(r.userinfo=o[1],r.host=o[2],r.port=o[3],r.port&&!k.test(r.port))return null}return r.path=n[3],r.query=n[4],r.fragment=n[5],s(r,t),d(r),r}function p(e){var t=e.scheme?e.scheme+":":"";return e.host&&(t+="//",e.userinfo&&(t+=e.userinfo+"@"),t+=e.host,e.port&&(t+=":"+e.port)),t+=e.path,e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t}function m(e,t){var n;if(t){if(t=t.href||t,n=h(t),!n||!n.scheme)throw new SyntaxError;Object.defineProperty(this,"_baseURL",{value:n})}var r=h(e,n);if(!r)throw new SyntaxError;Object.defineProperty(this,"_input",{value:e,writable:!0}),Object.defineProperty(this,"_url",{value:r,writable:!0});var i=new a(this);Object.defineProperty(this,"query",{get:function(){return this._url?i:null},enumerable:!0})}try{var g;if("function"==typeof window.URL&&0!==window.URL.length&&"http:"===(g=new window.URL("http://www.w3.org?q")).protocol&&g.query)return}catch(y){}var v=/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/,w=/^(?:(.*)@)?(\[[^\]]*\]|[^:]*)(?::(.*))?$/,b=/^\S*$/,E=/^([a-zA-Z](?:[a-zA-Z0-9+-.])*)$/,k=/^\d*$/,_=/^(\[[^\]\/?#\s]*\]|[^:\/?#\s]*)$/,C=/^(\[[^\]\/?#\s]*\]|[^:\/?#\s]*)(?::(\d*))?$/,O=/^([^?#\s]*)$/,S=/^([^\s]*)$/,x=b,T=/([^:]*):?(.*)/,L="undefined"!=typeof StopIteration?StopIteration:new Error("Stop Iteration"),P={"ftp:":"21","gopher:":"70","http:":"80","https:":"443","ws:":"80","wss:":"443"};Object.defineProperties(a.prototype,{get:{value:function(n){e(n);var i,o=t(this._url.query);return o.some(function(e){var t=r(e);return t[0]===n?(i=t[1],!0):void 0}),i},enumerable:!0},set:{value:function(o,a){e(o),e(a);var s=t(this._url.query),u=s.some(function(e,t){var n=r(e);return n[0]===o?(n[1]=a,s[t]=i(n),!0):void 0});u||s.push(i([o,a])),this._url.query=n(s)},enumerable:!0},has:{value:function(n){e(n);var i=t(this._url.query);return i.some(function(e){var t=r(e);return t[0]===n?!0:void 0})},enumerable:!0},"delete":{value:function(i){e(i);var o=t(this._url.query),a=o.filter(function(e){var t=r(e);return t[0]!==i});return a.length!==o.length?(this._url.query=n(a),!0):!1},enumerable:!0},clear:{value:function(){this._url.query=""},enumerable:!0},forEach:{value:function(e,t){if("function"!=typeof e)throw new TypeError;var n=o(this._url,"keys+values");try{for(;;){var r=n.next();e.call(t,r[1],r[0],this)}}catch(i){if(i!==L)throw i}},enumerable:!0},keys:{value:function(){return o(this._url,"keys")},enumerable:!0},values:{value:function(){return o(this._url,"values")},enumerable:!0},items:{value:function(){return o(this._url,"keys+values")}},size:{get:function(){return t(this._url.query).length},enumerable:!0},getAll:{value:function(n){e(n);var i=[],o=t(this._url.query);return o.forEach(function(e){var t=r(e);t[0]===n&&i.push(t[1])}),i},enumerable:!0},append:{value:function(r,o){e(r),e(o);var a=t(this._url.query);a.push(i([r,o])),this._url.query=n(a)},enumerable:!0}}),Object.defineProperties(m.prototype,{href:{get:function(){return this._url?p(this._url):this._input},set:function(t){e(t),this._input=t,this._url=h(this._input,this._baseURL)},enumerable:!0},origin:{get:function(){return this._url&&this._url.host?this.protocol+"//"+this.host:""},enumerable:!0},protocol:{get:function(){return this._url?this._url.scheme+":":":"},set:function(t){if(e(t),this._url){var n=":"===t.slice(-1)?t.substring(0,t.length-1):t;(""===n||E.test(n))&&(this._url.scheme=u(n))}},enumerable:!0},_userinfo:{get:function(){return this._url?this._url.userinfo:""},set:function(t){e(t),this._url&&(this._url.userinfo=t)}},username:{get:function(){if(!this._url)return"";var e=T.exec(this._userinfo),t=decodeURIComponent(e[1]||"");return t},set:function(t){if(e(t),this._url){var n=T.exec(this._userinfo),r=[encodeURIComponent(t||"")];n[2]&&r.push(n[2]),this._userinfo=r.join(":")}},enumerable:!0},password:{get:function(){if(!this._url)return"";var e=T.exec(this._userinfo),t=decodeURIComponent(e[2]||"");return t},set:function(t){if(e(t),this._url){var n=T.exec(this._userinfo),r=[n[1]||""];t&&r.push(encodeURIComponent(t)),this._userinfo=r.join(":")}},enumerable:!0},host:{get:function(){var e="";return this._url&&this._url.host&&(e+=this._url.host,this._url.port&&(e+=":"+this._url.port)),e},set:function(t){if(e(t),this._url){var n=C.exec(t);n&&(this._url.host=n[1],this._url.port=l(n[2]))}},enumerable:!0},hostname:{get:function(){return this._url?this._url.host:""},set:function(t){if(e(t),this._url){var n=_.exec(t);n&&(this._url.host=t)}},enumerable:!0},port:{get:function(){var e=this._url?this._url.port||"":"";return e&&e===P[this.protocol]&&(e=""),e},set:function(t){if(e(t),this._url){var n=k.exec(t);n&&(this._url.port=l(t))}},enumerable:!0},pathname:{get:function(){return this._url?this._url.path:""},set:function(t){if(e(t),this._url){var n=O.exec(t);n&&(this._url.host&&t&&"/"!==t[0]&&(t="/"+t),this._url.path=t?c(t):"")}},enumerable:!0},search:{get:function(){return this._url&&this._url.query?"?"+this._url.query:""},set:function(t){if(e(t),this._url){t&&"?"===t[0]&&(t=t.substring(1));var n=S.exec(t);n&&(this._url.query=t)}},enumerable:!0},hash:{get:function(){return this._url&&this._url.fragment?"#"+this._url.fragment:""},set:function(t){if(e(t),this._url){t&&"#"===t[0]&&(t=t.substring(1));var n=x.exec(t);n&&(this._url.fragment=t)}},enumerable:!0}});var j=window.URL||window.webkitURL;j&&j.createObjectURL&&(Object.defineProperty(m,"createObjectURL",{value:j.createObjectURL.bind(j),enumerable:!1}),Object.defineProperty(m,"revokeObjectURL",{value:j.revokeObjectURL.bind(j),enumerable:!1})),window.URL=m}(),define("orion/URL-shim",function(){}),define("edit/content/imageViewerPlugin",["orion/plugin","orion/Deferred","orion/commandsProxy","orion/keyBinding","orion/webui/littlelib","i18n!orion/nls/messages","orion/URL-shim"],function(e,t,n,r,i,o){function a(){if(d){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,n=e-2*u,r=t-2*l;c>n&&(n=c),c>r&&(r=c);var o=f>0&&h>0?f/h:1,a=n/r;o>=a?(d.width=f>n?n:f,d.height=d.width/o):(d.height=h>r?r:h,d.width=d.height*o);var p=document.getElementById("imageContainer");p.style.left=(e-d.width)/2+"px",p.style.top=(t-d.height)/2-s+"px";var m=document.getElementById("imageTitle");i.empty(m),m.appendChild(document.createTextNode(f+" x "+h+" pixels -- "+Math.floor(d.width/f*100)+"%"))}}var s=25,u=20,l=s+u,c=20,d=null,f=c,h=c;window.onresize=a;var p=new n.CommandsProxy,m="orion.viewer.image",g={name:"Orion Image Viewer Plugin",version:"1.0",description:"This plugin provides viewer for image files."},y=new e(g);y.registerService("orion.edit.editor",{setBlob:function(e){d=document.createElement("img");var t=URL.createObjectURL(e);d.src=t,d.onload=function(){URL.revokeObjectURL(t),f=d.width,h=d.height,a()};var n=document.getElementById("imageContent");i.empty(n),n.appendChild(d)},setTextModel:function(e){return p.setProxy(e),new t},onChanged:function(){},registerKeys:function(e){var t=[];e.forEach(function(e){t.push(new r.KeyBinding(e.keyCode,e.mod1,e.mod2,e.mod3,e.mod4))}),p.setKeyBindings(t)}},{id:m,"default":!0,name:o["Orion Image Viewer"],nls:"orion/nls/messages",uriTemplate:"../edit/edit.html#{,Location,params*},editor="+m}),y.registerService("orion.navigate.openWith",{},{editor:m,contentType:["image/gif","image/jpeg","image/ico","image/png","image/tiff","image/svg"]}),y.connect()});