!function(e,n){"function"==typeof define&&define.amd?define("orion/Deferred",n):"object"==typeof exports?module.exports=n():(e.orion=e.orion||{},e.orion.Deferred=n())}(this,function(){function e(){for(var e;e=i.shift();)e();s=!1}function n(e){i.push(e),s||(s=!0,a())}function t(e){return function(n){e(n)}}function o(e,n,o){try{var r=e(n),i=r&&("object"==typeof r||"function"==typeof r)&&r.then;if("function"==typeof i)if(r===o.promise)o.reject(new TypeError);else{var s=r.cancel;"function"==typeof s?o._parentCancel=s.bind(r):delete o._parentCancel,i.call(r,t(o.resolve),t(o.reject),t(o.progress))}else o.resolve(r)}catch(a){o.reject(a)}}function r(){function e(){for(var e;e=c.shift();){var n=e.deferred,t="fulfilled"===l?"resolve":"reject",r=e[t];"function"==typeof r?o(r,a,n):n[t](a)}}function t(t){delete d._parentCancel,l="rejected",a=t,c.length&&n(e)}function i(o){function s(e){return function(n){l&&"assumed"!==l||e(n)}}delete d._parentCancel;try{var p=o&&("object"==typeof o||"function"==typeof o)&&o.then;if("function"==typeof p)if(o===d)t(new TypeError);else{l="assumed";var u=o&&o.cancel;if("function"!=typeof u){var f=new r;o=f.promise;try{p(f.resolve,f.reject,f.progress)}catch(g){f.reject(g)}u=o.cancel,p=o.then}a=o,p.call(o,s(i),s(t)),d._parentCancel=u.bind(o)}else l="fulfilled",a=o,c.length&&n(e)}catch(h){s(t)(h)}}function s(){var e=d._parentCancel;if(e)delete d._parentCancel,e();else if(!l){var n=new Error("Cancel");n.name="Cancel",t(n)}}var a,l,c=[],d=this;this.resolve=function(e){return l||i(e),d},this.reject=function(e){return l||t(e),d},this.progress=function(e){return l||c.forEach(function(n){if(n.progress)try{n.progress(e)}catch(t){}}),d.promise},this.cancel=function(){return d._parentCancel?setTimeout(s,0):s(),d},this.then=function(t,o,i){var s=new r;return s._parentCancel=d.promise.cancel,c.push({resolve:t,reject:o,progress:i,deferred:s}),("fulfilled"===l||"rejected"===l)&&n(e),s.promise},this.promise={then:d.then,cancel:d.cancel}}var i=[],s=!1,a=function(){if("undefined"!=typeof process&&"function"==typeof process.nextTick){var n=process.nextTick;return function(){n(e)}}if("function"==typeof MutationObserver){var t=document.createElement("div"),o=new MutationObserver(e);return o.observe(t,{attributes:!0}),function(){t.setAttribute("class","_tick")}}return function(){setTimeout(e,0)}}();return r.all=function(e,n){function t(e,n){a||(s[e]=n,0===--i&&l.resolve(s))}function o(e,o){if(!a){if(n)try{return void t(e,n(o))}catch(r){o=r}l.reject(o)}}var i=e.length,s=[],a=!1,l=new r;return l.then(void 0,function(){a=!0,e.forEach(function(e){e.cancel&&e.cancel()})}),0===i?l.resolve(s):e.forEach(function(e,n){e.then(t.bind(void 0,n),o.bind(void 0,n))}),l.promise},r.when=function(e,n,t,o){var i,s;return e&&"function"==typeof e.then?i=e:(s=new r,s.resolve(e),i=s.promise),i.then(n,t,o)},r}),function(e,n){"function"==typeof define&&define.amd?define("orion/plugin",["orion/Deferred"],n):"object"==typeof exports?module.exports=n(require("orion/Deferred")):(e.orion=e.orion||{},e.orion.PluginProvider=n(e.orion.Deferred))}(this,function(e){function n(e,n){this.__objectId=e,this.__methods=n}function t(t){function o(e){b&&("undefined"==typeof ArrayBuffer&&(e=JSON.stringify(e)),b===self?b.postMessage(e):b.postMessage(e,"*"))}function r(){var e=[];return Object.keys(w).forEach(function(n){var t=w[n];e.push({serviceId:n,names:t.names,methods:t.methods,properties:t.properties})}),{headers:p||{},services:e}}function i(e,n){if(n&&n instanceof XMLHttpRequest){var t,o;try{t=n.status,o=n.statusText}catch(r){t=0,o=""}return{status:t||0,statusText:o}}return n}function s(e){var n=e?JSON.parse(JSON.stringify(e,i)):e;return e instanceof Error&&(n.__isError=!0,n.message=n.message||e.message,n.name=n.name||e.name),n}function a(t){if(!b)return(new e).reject(new Error("plugin not connected"));t.id=String(f++);var o=new e;v[t.id]=o,o.then(null,function(e){u&&e instanceof Error&&"Cancel"===e.name&&k({requestId:t.id,method:"cancel",params:e.message?[e.message]:[]})});var r=Object.prototype.toString;return t.params.forEach(function(e,i){if("[object Object]"===r.call(e)&&!(e instanceof n)){var s,a;for(s in e)"[object Function]"===r.call(e[s])&&(a=a||[],a.push(s));if(a){var l=g++;y[l]=e;var c=function(){delete y[l]};o.then(c,c),t.params[i]=new n(l,a)}}}),k(t),o.promise}function l(e,n){e||0===e?k({id:e,result:null,error:n}):console.log(n)}function c(e,n,t,o){o.forEach(function(e,n){if(e&&"undefined"!=typeof e.__objectId){var t={};e.__methods.forEach(function(n){t[n]=function(){return a({objectId:e.__objectId,method:n,params:Array.prototype.slice.call(arguments)})}}),o[n]=t}});var r="undefined"==typeof e?null:{id:e,result:null,error:null};try{var i=t.apply(n,o);if(!r)return;i&&"function"==typeof i.then?(m[e]=i,i.then(function(n){delete m[e],r.result=n,k(r)},function(n){m[e]&&(delete m[e],r.error=s(n),k(r))},function(){k({responseId:e,method:"progress",params:Array.prototype.slice.call(arguments)})})):(r.result=i,k(r))}catch(l){r&&(r.error=s(l),k(r))}}function d(e){if(e.source===b||"undefined"==typeof window){var n="string"!=typeof e.data?e.data:JSON.parse(e.data);try{if(n.method){var t=n.method,o=n.params||[];if("serviceId"in n){var r=w[n.serviceId];r||l(n.id,"service not found"),r=r.implementation,t in r?c(n.id,r,r[t],o):l(n.id,"method not found")}else if("objectId"in n){var i=y[n.objectId];i||l(n.id,"object not found"),!t in i?c(n.id,i,i[t],o):l(n.id,"method not found")}else if("requestId"in n){var s=m[n.requestId];s&&"cancel"===t&&s.cancel&&s.cancel.apply(s,o)}else{if(!("responseId"in n))throw new Error("Bad method: "+n.method);var a=v[n.responseId];a&&"progress"===t&&a.progress&&a.progress.apply(a,o)}}else{var d=v[String(n.id)];delete v[String(n.id)],n.error?d.reject(n.error):d.resolve(n.result)}}catch(p){console.log("Plugin._messageHandler "+p)}}}var p=t,u=!1,f=0,g=0,h=0,m={},v={},y={},w={},b=null;"undefined"==typeof window?b=self:window!==window.parent?b=window.parent:null!==window.opener&&(b=window.opener);var k=o;o({method:"loading"}),this.updateHeaders=function(e){if(u)throw new Error("Cannot update headers. Plugin Provider is connected");p=e},this.registerService=function(e,n,t){if(u)throw new Error("Cannot register service. Plugin Provider is connected");"string"==typeof e?e=[e]:Array.isArray(e)||(e=[]);var o=null,r=[];for(o in n)"function"==typeof n[o]&&r.push(o);w[h++]={names:e,methods:r,implementation:n,properties:t||{},listeners:{}}},this.registerServiceProvider=this.registerService,this.connect=function(e,n){if(u)return void(e&&e());if(!b)return void(n&&n("No valid plugin target"));addEventListener("message",d,!1);var t={method:"plugin",params:[r()]};o(t),u=!0,e&&e()},this.disconnect=function(){u&&(removeEventListener("message",d),b=null,u=!1)}}return t}),define("orion/i18nUtil",["require","orion/Deferred"],function(){function e(e){var n=/\$\{([^\}]+)\}/g,t=arguments;return 2===t.length&&t[1]&&"object"==typeof t[1]?e.replace(n,function(e,n){return t[1][n]}):e.replace(n,function(e,n){return t[(n<<0)+1]})}return{formatMessage:e}}),function(){function e(e,n,t,o,r,i){n[e]&&(t.push(e),(n[e]===!0||1===n[e])&&o.push(r+e+"/"+i))}function n(e,n,t,o,r){var i=o+n+"/"+r;require._fileExists(e.toUrl(i+".js"))&&t.push(i)}function t(e,n,o){var r;for(r in n)!n.hasOwnProperty(r)||e.hasOwnProperty(r)&&!o?"object"==typeof n[r]&&(!e[r]&&n[r]&&(e[r]={}),t(e[r],n[r],o)):e[r]=n[r]}var o=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(r){var i=r.config?r.config():{};return{version:"2.0.4",load:function(r,s,a,l){l=l||{},l.locale&&(i.locale=l.locale);var c,d,p,u=o.exec(r),f=u[1],g=u[4],h=u[5],m=g.split("-"),v=[],y={},w="";if(u[5]?(f=u[1],c=f+h):(c=r,h=u[4],g=i.locale,g||(g=i.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),m=g.split("-")),l.isBuild){for(v.push(c),n(s,"root",v,f,h),d=0;d<m.length;d++)p=m[d],w+=(w?"-":"")+p,n(s,w,v,f,h);if(l.locales){var b,k;for(b=0;b<l.locales.length;b++)for(g=l.locales[b],m=g.split("-"),w="",k=0;k<m.length;k++)p=m[k],w+=(w?"-":"")+p,n(s,w,v,f,h)}s(v,function(){a()})}else s([c],function(n){var o,r=[];for(e("root",n,r,v,f,h),d=0;d<m.length;d++)o=m[d],w+=(w?"-":"")+o,e(w,n,r,v,f,h);s(v,function(){var e,o,i;for(e=r.length-1;e>-1&&r[e];e--)i=r[e],o=n[i],(o===!0||1===o)&&(o=s(f+i+"/"+h)),t(y,o);a(y)})})}}})}(),define("orion/nls/messages",{root:!0}),define("orion/nls/root/messages",{Navigator:"Navigator",Sites:"Sites",Shell:"Shell",ShellLinkWorkspace:"Shell","Get Plugins":"Get Plugins",Global:"Global",Editor:"Editor",EditorRelatedLink:"Show Current Folder",EditorRelatedLinkParent:"Show Enclosing Folder",EditorLinkWorkspace:"Edit",EditorRelatedLinkProj:"Show Project","Filter bindings":"Filter bindings","Orion Editor":"Orion Editor","Orion Image Viewer":"Orion Image Viewer","Orion Markdown Editor":"Orion Markdown Editor","Orion Markdown Viewer":"Orion Markdown Viewer","Orion JSON Editor":"Orion JSON Editor","View on Site":"View on Site","View this file or folder on a web site hosted by Orion":"View this file or folder on a web site hosted by Orion.",ShowAllKeyBindings:"Show a list of all the keybindings on this page","Show Keys":"Show Keys",HideShowBannerFooter:"Hide or show the page banner and footer","Toggle banner and footer":"Toggle banner and footer",ChooseFileOpenEditor:"Choose a file by name and open an editor on it",FindFile:"Find File Named...","System Configuration Details":"System Configuration Details","System Config Tooltip":"Go to the System Configuration Details page","Background Operations":"Background Operations","Background Operations Tooltip":"Go to the Background Operations page","Operation status is unknown":"Operation status is unknown","Unknown item":"Unknown item",NoSearchAvailableErr:"Can't search: no search service is available",Related:"Related",Options:"Options",FAQ:"FAQ","Report a Bug":"Bugs","Privacy Policy":"Privacy","Terms of Use":"Terms","Copyright Agent":"Copyright","Orion Logo":"Orion Logo","Orion is in Beta. Please try it out but BEWARE your data may be lost.":"@buildLabel@","LOG: ":"LOG: ",View:"View","no parent":"no parent","no tree model":"no tree model","no renderer":"no renderer","could not find table row ":"could not find table row ",Operations:"Operations","Operations running":"Operations running",SomeOpWarning:"Some operations finished with warning",SomeOpErr:"Some operations finished with error","no service registry":"no service registry",Tasks:"Tasks",Close:"Close","Expand all":"Expand all","Collapse all":"Collapse all",Search:"Search","Advanced search":"Advanced search",Submit:"Submit",More:"More","Recent searches":"Recent searches","Regular expression":"Regular expression","Search options":"Search options","Global search":"Global search","Orion Home":"Orion Home","Close notification":"Close notification",OpPressSpaceMsg:"Operations - Press spacebar to show current operations","Toggle side panel":"Toggle side panel","Open or close the side panel":"Open or close the side panel",Projects:"Projects","Toggle Sidebar":"Toggle Sidebar","Sample HTML5 Site":"Sample HTML5 Site","Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.":"Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.","Sample Orion Plugin":"Sample Orion Plugin","Generate a sample plugin for integrating with Orion.":"Generate a sample plugin for integrating with Orion.",Browser:"Web Browser",OutlineProgress:"Getting outline for ${0} from ${1}",outlineTimeout:"Outline service timed out. Try reloading the page and opening the outline again.",UnknownError:"An unknown error occurred.",UnknownWarning:"An unknown warning occurred.",Filter:"Filter (* = any string, ? = any character)",TemplateExplorerLabel:"Templates",OpenTemplateExplorer:"Open Template Explorer",Edit:"Edit",CentralNavTooltip:"Toggle Navigation Menu","Wrote: ${0}":"Wrote: ${0}",GenerateHTML:"Generate HTML file",GenerateHTMLTooltip:"Write an HTML file generated from the current Markdown editor content","alt text":"alt text",blockquote:"blockquote",code:"code","code (block)":"code (block)","code (span)":"code (span)",emphasis:"emphasis","fenced code (${0})":"fenced code (${0})","header (${0})":"header (${0})","horizontal rule":"horizontal rule",label:"label","link (auto)":"link (auto)","link (image)":"link (image)","link (inline)":"link (inline)","link label":"link label","link label (optional)":"link label (optional)","link (ref)":"link (ref)","list item (bullet)":"list item (bullet)","list item (numbered)":"list item (numbered)","strikethrough (${0})":"strikethrough (${0})",strong:"strong","table (${0})":"table (${0})",text:"text","title (optional)":"title (optional)",url:"url",TogglePaneOrientationTooltip:"Toggle split pane orientation",WarningHeaderTooDeep:"Header level cannot exceed 6",WarningUnorderedListItem:"Unordered list item within ordered list",WarningOrderedListItem:"Ordered list item within unordered list",WarningOrderedListShouldStartAt1:"The first item in an ordered list should have index 1",WarningLinkHasNoText:"Link has no text",WarningLinkHasNoURL:"Link has no URL",WarningUndefinedLinkId:"Undefined link ID: ${0}",PageTitleFormat:"${0} - ${1}",KeyCTRL:"Ctrl",KeySHIFT:"Shift",KeyALT:"Alt",KeyBKSPC:"Backspace",KeyDEL:"Del",KeyEND:"End",KeyENTER:"Enter",KeyESCAPE:"Esc",KeyHOME:"Home",KeyINSERT:"Ins",KeyPAGEDOWN:"Page Down",KeyPAGEUP:"Page Up",KeySPACE:"Space",KeyTAB:"Tab"}),define("plugins/languages/markdown/markdownPlugin",["orion/plugin","orion/i18nUtil","i18n!orion/nls/messages"],function(e,n,t){function o(){var n={name:"Orion Extended Markdown Language Tool Support",version:"1.0",description:"This plugin provides extended Markdown language tools support for Orion."},t=new e(n);r(t),t.connect()}function r(e){e.registerServiceProvider("orion.core.contenttype",{},{contentTypes:[{id:"text/x-markdown","extends":"text/plain",name:"Markdown",extension:["md"]}]}),e.registerServiceProvider("orion.edit.contentAssist",{computeProposals:function(e,o,r){var i=r.selection.start!==r.selection.end?e.substring(r.selection.start,r.selection.end):null,s=r.delimiter,a=i&&-1!==i.indexOf(s),l=/^[ ]{0,3}$/.test(r.line),c=[];if(c.push({description:t.emphasis,escapePosition:i?null:o+1,proposal:"*"+(i?i:"")+"*"}),c.push({description:t.strong,escapePosition:i?null:o+2,proposal:"**"+(i?i:"")+"**"}),!a){var d=l&&!i?t.text:"";c.push({description:n.formatMessage(t["header (${0})"],"atx"),positions:l?[{offset:o+1,length:d.length}]:null,proposal:(l?"":s)+"#"+d+(i?i:"")})}a||c.push({description:t["link (auto)"],escapePosition:i?null:o+1,proposal:"<"+(i?i:"")+">"});var p=i||t.text,u=t.url,f=t["title (optional)"];c.push({description:t["link (inline)"],positions:[{offset:o+1,length:p.length},{offset:o+3+p.length,length:u.length},{offset:o+5+p.length+u.length,length:f.length}],proposal:"["+p+"]("+u+' "'+f+'")'});var g=i||t["alt text"],h=t.url,m=t["title (optional)"];c.push({description:t["link (image)"],positions:[{offset:o+2,length:g.length},{offset:o+4+g.length,length:h.length},{offset:o+6+g.length+h.length,length:m.length}],proposal:"!["+g+"]("+h+' "'+m+'")'});var v=i||t.text,y=t["link label (optional)"];if(c.push({description:t["link (ref)"],positions:[{offset:o+1,length:v.length},{offset:o+3+v.length,length:y.length}],proposal:"["+v+"]["+y+"]"}),!a){var w=i||t.label,b=t.url,k=t["title (optional)"],S=l?"":s;c.push({description:t["link label"],positions:[{offset:o+S.length+1,length:w.length},{offset:o+S.length+4+w.length,length:b.length},{offset:o+S.length+5+w.length+b.length,length:k.length}],proposal:S+"["+w+"]: "+b+" "+k+s})}if(!a){var O=l&&!i?t.code:"",E=l?"    ".substring(0,4-r.indentation.length):s+s+"    ";c.push({description:t["code (block)"],positions:O?[{offset:o+E.length,length:O.length}]:null,proposal:E+O+(i?i:"")})}if(c.push({description:t["code (span)"],escapePosition:i?null:o+1,proposal:"`"+(i?i:"")+"`"}),c.push({description:t["horizontal rule"],proposal:(l?"":s)+"- - -"+s+(i?i:"")}),!a){var T=l&&!i?t.text:"";c.push({description:t.blockquote,positions:l?[{offset:o+2,length:T.length}]:null,proposal:(l?"":s)+"> "+T+(i?i:"")})}var P=l&&!i?t.text:"";c.push({description:t["list item (numbered)"],positions:l?[{offset:o+3,length:P.length}]:null,proposal:(l?"":s)+"1. "+P+(i?i:"")}),c.push({description:t["list item (bullet)"],positions:l?[{offset:o+2,length:P.length}]:null,proposal:(l?"":s)+"* "+P+(i?i:"")}),c.push({style:"hr"}),c.push({description:n.formatMessage(t["strikethrough (${0})"],"gfm"),escapePosition:i?null:o+2,proposal:"~~"+(i?i:"")+"~~"});var x=l?"":s;return c.push({description:n.formatMessage(t["table (${0})"],"gfm"),positions:[{offset:o+x.length,length:5},{offset:o+x.length+7,length:9},{offset:o+x.length+16+s.length,length:6},{offset:o+x.length+23+s.length,length:9},{offset:o+x.length+32+2*s.length,length:4},{offset:o+x.length+39+2*s.length,length:4}],proposal:x+"hLeft |hCentered"+s+":-----|:-------:"+s+"item  |item     "+s+(i?i:"")}),c.push({description:n.formatMessage(t["fenced code (${0})"],"gfm"),escapePosition:i?null:o+3,proposal:"```"+(i?i:"")+"```"}),c}},{name:"Markdown content assist",contentType:["text/x-markdown"]})}return{connect:o,registerServiceProviders:r}});