!function(e,n){"function"==typeof define&&define.amd?define("orion/Deferred",n):"object"==typeof exports?module.exports=n():(e.orion=e.orion||{},e.orion.Deferred=n())}(this,function(){function e(){for(var e;e=r.shift();)e();a=!1}function n(e){r.push(e),a||(a=!0,s())}function i(e){return function(n){e(n)}}function t(e,n,t){try{var o=e(n),r=o&&("object"==typeof o||"function"==typeof o)&&o.then;if("function"==typeof r)if(o===t.promise)t.reject(new TypeError);else{var a=o.cancel;"function"==typeof a?t._parentCancel=a.bind(o):delete t._parentCancel,r.call(o,i(t.resolve),i(t.reject),i(t.progress))}else t.resolve(o)}catch(s){t.reject(s)}}function o(){function e(){for(var e;e=d.shift();){var n=e.deferred,i="fulfilled"===l?"resolve":"reject",o=e[i];"function"==typeof o?t(o,s,n):n[i](s)}}function i(i){delete c._parentCancel,l="rejected",s=i,d.length&&n(e)}function r(t){function a(e){return function(n){l&&"assumed"!==l||e(n)}}delete c._parentCancel;try{var p=t&&("object"==typeof t||"function"==typeof t)&&t.then;if("function"==typeof p)if(t===c)i(new TypeError);else{l="assumed";var f=t&&t.cancel;if("function"!=typeof f){var u=new o;t=u.promise;try{p(u.resolve,u.reject,u.progress)}catch(g){u.reject(g)}f=t.cancel,p=t.then}s=t,p.call(t,a(r),a(i)),c._parentCancel=f.bind(t)}else l="fulfilled",s=t,d.length&&n(e)}catch(m){a(i)(m)}}function a(){var e=c._parentCancel;if(e)delete c._parentCancel,e();else if(!l){var n=new Error("Cancel");n.name="Cancel",i(n)}}var s,l,d=[],c=this;this.resolve=function(e){return l||r(e),c},this.reject=function(e){return l||i(e),c},this.progress=function(e){return l||d.forEach(function(n){if(n.progress)try{n.progress(e)}catch(i){}}),c.promise},this.cancel=function(){return c._parentCancel?setTimeout(a,0):a(),c},this.then=function(i,t,r){var a=new o;return a._parentCancel=c.promise.cancel,d.push({resolve:i,reject:t,progress:r,deferred:a}),("fulfilled"===l||"rejected"===l)&&n(e),a.promise},this.promise={then:c.then,cancel:c.cancel}}var r=[],a=!1,s=function(){if("undefined"!=typeof process&&"function"==typeof process.nextTick){var n=process.nextTick;return function(){n(e)}}if("function"==typeof MutationObserver){var i=document.createElement("div"),t=new MutationObserver(e);return t.observe(i,{attributes:!0}),function(){i.setAttribute("class","_tick")}}return function(){setTimeout(e,0)}}();return o.all=function(e,n){function i(e,n){s||(a[e]=n,0===--r&&l.resolve(a))}function t(e,t){if(!s){if(n)try{return void i(e,n(t))}catch(o){t=o}l.reject(t)}}var r=e.length,a=[],s=!1,l=new o;return l.then(void 0,function(){s=!0,e.forEach(function(e){e.cancel&&e.cancel()})}),0===r?l.resolve(a):e.forEach(function(e,n){e.then(i.bind(void 0,n),t.bind(void 0,n))}),l.promise},o.when=function(e,n,i,t){var r,a;return e&&"function"==typeof e.then?r=e:(a=new o,a.resolve(e),r=a.promise),r.then(n,i,t)},o}),function(e,n){"function"==typeof define&&define.amd?define("orion/plugin",["orion/Deferred"],n):"object"==typeof exports?module.exports=n(require("orion/Deferred")):(e.orion=e.orion||{},e.orion.PluginProvider=n(e.orion.Deferred))}(this,function(e){function n(e,n){this.__objectId=e,this.__methods=n}function i(i){function t(e){S&&("undefined"==typeof ArrayBuffer&&(e=JSON.stringify(e)),S===self?S.postMessage(e):S.postMessage(e,"*"))}function o(){var e=[];return Object.keys(y).forEach(function(n){var i=y[n];e.push({serviceId:n,names:i.names,methods:i.methods,properties:i.properties})}),{headers:p||{},services:e}}function r(e,n){if(n&&n instanceof XMLHttpRequest){var i,t;try{i=n.status,t=n.statusText}catch(o){i=0,t=""}return{status:i||0,statusText:t}}return n}function a(e){var n=e?JSON.parse(JSON.stringify(e,r)):e;return e instanceof Error&&(n.__isError=!0,n.message=n.message||e.message,n.name=n.name||e.name),n}function s(i){if(!S)return(new e).reject(new Error("plugin not connected"));i.id=String(u++);var t=new e;v[i.id]=t,t.then(null,function(e){f&&e instanceof Error&&"Cancel"===e.name&&b({requestId:i.id,method:"cancel",params:e.message?[e.message]:[]})});var o=Object.prototype.toString;return i.params.forEach(function(e,r){if("[object Object]"===o.call(e)&&!(e instanceof n)){var a,s;for(a in e)"[object Function]"===o.call(e[a])&&(s=s||[],s.push(a));if(s){var l=g++;w[l]=e;var d=function(){delete w[l]};t.then(d,d),i.params[r]=new n(l,s)}}}),b(i),t.promise}function l(e,n){e||0===e?b({id:e,result:null,error:n}):console.log(n)}function d(e,n,i,t){t.forEach(function(e,n){if(e&&"undefined"!=typeof e.__objectId){var i={};e.__methods.forEach(function(n){i[n]=function(){return s({objectId:e.__objectId,method:n,params:Array.prototype.slice.call(arguments)})}}),t[n]=i}});var o="undefined"==typeof e?null:{id:e,result:null,error:null};try{var r=i.apply(n,t);if(!o)return;r&&"function"==typeof r.then?(h[e]=r,r.then(function(n){delete h[e],o.result=n,b(o)},function(n){h[e]&&(delete h[e],o.error=a(n),b(o))},function(){b({responseId:e,method:"progress",params:Array.prototype.slice.call(arguments)})})):(o.result=r,b(o))}catch(l){o&&(o.error=a(l),b(o))}}function c(e){if(e.source===S||"undefined"==typeof window){var n="string"!=typeof e.data?e.data:JSON.parse(e.data);try{if(n.method){var i=n.method,t=n.params||[];if("serviceId"in n){var o=y[n.serviceId];o||l(n.id,"service not found"),o=o.implementation,i in o?d(n.id,o,o[i],t):l(n.id,"method not found")}else if("objectId"in n){var r=w[n.objectId];r||l(n.id,"object not found"),!i in r?d(n.id,r,r[i],t):l(n.id,"method not found")}else if("requestId"in n){var a=h[n.requestId];a&&"cancel"===i&&a.cancel&&a.cancel.apply(a,t)}else{if(!("responseId"in n))throw new Error("Bad method: "+n.method);var s=v[n.responseId];s&&"progress"===i&&s.progress&&s.progress.apply(s,t)}}else{var c=v[String(n.id)];delete v[String(n.id)],n.error?c.reject(n.error):c.resolve(n.result)}}catch(p){console.log("Plugin._messageHandler "+p)}}}var p=i,f=!1,u=0,g=0,m=0,h={},v={},w={},y={},S=null;"undefined"==typeof window?S=self:window!==window.parent?S=window.parent:null!==window.opener&&(S=window.opener);var b=t;t({method:"loading"}),this.updateHeaders=function(e){if(f)throw new Error("Cannot update headers. Plugin Provider is connected");p=e},this.registerService=function(e,n,i){if(f)throw new Error("Cannot register service. Plugin Provider is connected");"string"==typeof e?e=[e]:Array.isArray(e)||(e=[]);var t=null,o=[];for(t in n)"function"==typeof n[t]&&o.push(t);y[m++]={names:e,methods:o,implementation:n,properties:i||{},listeners:{}}},this.registerServiceProvider=this.registerService,this.connect=function(e,n){if(f)return void(e&&e());if(!S)return void(n&&n("No valid plugin target"));addEventListener("message",c,!1);var i={method:"plugin",params:[o()]};t(i),f=!0,e&&e()},this.disconnect=function(){f&&(removeEventListener("message",c),S=null,f=!1)}}return i}),function(){function e(e,n,i,t,o,r){n[e]&&(i.push(e),(n[e]===!0||1===n[e])&&t.push(o+e+"/"+r))}function n(e,n,i,t,o){var r=t+n+"/"+o;require._fileExists(e.toUrl(r+".js"))&&i.push(r)}function i(e,n,t){var o;for(o in n)!n.hasOwnProperty(o)||e.hasOwnProperty(o)&&!t?"object"==typeof n[o]&&(!e[o]&&n[o]&&(e[o]={}),i(e[o],n[o],t)):e[o]=n[o]}var t=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(o){var r=o.config?o.config():{};return{version:"2.0.4",load:function(o,a,s,l){l=l||{},l.locale&&(r.locale=l.locale);var d,c,p,f=t.exec(o),u=f[1],g=f[4],m=f[5],h=g.split("-"),v=[],w={},y="";if(f[5]?(u=f[1],d=u+m):(d=o,m=f[4],g=r.locale,g||(g=r.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),h=g.split("-")),l.isBuild){for(v.push(d),n(a,"root",v,u,m),c=0;c<h.length;c++)p=h[c],y+=(y?"-":"")+p,n(a,y,v,u,m);if(l.locales){var S,b;for(S=0;S<l.locales.length;S++)for(g=l.locales[S],h=g.split("-"),y="",b=0;b<h.length;b++)p=h[b],y+=(y?"-":"")+p,n(a,y,v,u,m)}a(v,function(){s()})}else a([d],function(n){var t,o=[];for(e("root",n,o,v,u,m),c=0;c<h.length;c++)t=h[c],y+=(y?"-":"")+t,e(y,n,o,v,u,m);a(v,function(){var e,t,r;for(e=o.length-1;e>-1&&o[e];e--)r=o[e],t=n[r],(t===!0||1===t)&&(t=a(u+r+"/"+m)),i(w,t);s(w)})})}}})}(),define("orion/nls/messages",{root:!0}),define("orion/nls/root/messages",{Navigator:"Navigator",Sites:"Sites",Shell:"Shell",ShellLinkWorkspace:"Shell","Get Plugins":"Get Plugins",Global:"Global",Editor:"Editor",EditorRelatedLink:"Show Current Folder",EditorRelatedLinkParent:"Show Enclosing Folder",EditorLinkWorkspace:"Edit",EditorRelatedLinkProj:"Show Project","Filter bindings":"Filter bindings","Orion Editor":"Orion Editor","Orion Image Viewer":"Orion Image Viewer","Orion Markdown Editor":"Orion Markdown Editor","Orion Markdown Viewer":"Orion Markdown Viewer","Orion JSON Editor":"Orion JSON Editor","View on Site":"View on Site","View this file or folder on a web site hosted by Orion":"View this file or folder on a web site hosted by Orion.",ShowAllKeyBindings:"Show a list of all the keybindings on this page","Show Keys":"Show Keys",HideShowBannerFooter:"Hide or show the page banner and footer","Toggle banner and footer":"Toggle banner and footer",ChooseFileOpenEditor:"Choose a file by name and open an editor on it",FindFile:"Find File Named...","System Configuration Details":"System Configuration Details","System Config Tooltip":"Go to the System Configuration Details page","Background Operations":"Background Operations","Background Operations Tooltip":"Go to the Background Operations page","Operation status is unknown":"Operation status is unknown","Unknown item":"Unknown item",NoSearchAvailableErr:"Can't search: no search service is available",Related:"Related",Options:"Options",FAQ:"FAQ","Report a Bug":"Bugs","Privacy Policy":"Privacy","Terms of Use":"Terms","Copyright Agent":"Copyright","Orion Logo":"Orion Logo","Orion is in Beta. Please try it out but BEWARE your data may be lost.":"@buildLabel@","LOG: ":"LOG: ",View:"View","no parent":"no parent","no tree model":"no tree model","no renderer":"no renderer","could not find table row ":"could not find table row ",Operations:"Operations","Operations running":"Operations running",SomeOpWarning:"Some operations finished with warning",SomeOpErr:"Some operations finished with error","no service registry":"no service registry",Tasks:"Tasks",Close:"Close","Expand all":"Expand all","Collapse all":"Collapse all",Search:"Search","Advanced search":"Advanced search",Submit:"Submit",More:"More","Recent searches":"Recent searches","Regular expression":"Regular expression","Search options":"Search options","Global search":"Global search","Orion Home":"Orion Home","Close notification":"Close notification",OpPressSpaceMsg:"Operations - Press spacebar to show current operations","Toggle side panel":"Toggle side panel","Open or close the side panel":"Open or close the side panel",Projects:"Projects","Toggle Sidebar":"Toggle Sidebar","Sample HTML5 Site":"Sample HTML5 Site","Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.":"Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.","Sample Orion Plugin":"Sample Orion Plugin","Generate a sample plugin for integrating with Orion.":"Generate a sample plugin for integrating with Orion.",Browser:"Web Browser",OutlineProgress:"Getting outline for ${0} from ${1}",outlineTimeout:"Outline service timed out. Try reloading the page and opening the outline again.",UnknownError:"An unknown error occurred.",UnknownWarning:"An unknown warning occurred.",Filter:"Filter (* = any string, ? = any character)",TemplateExplorerLabel:"Templates",OpenTemplateExplorer:"Open Template Explorer",Edit:"Edit",CentralNavTooltip:"Toggle Navigation Menu","Wrote: ${0}":"Wrote: ${0}",GenerateHTML:"Generate HTML file",GenerateHTMLTooltip:"Write an HTML file generated from the current Markdown editor content","alt text":"alt text",blockquote:"blockquote",code:"code","code (block)":"code (block)","code (span)":"code (span)",emphasis:"emphasis","fenced code (${0})":"fenced code (${0})","header (${0})":"header (${0})","horizontal rule":"horizontal rule",label:"label","link (auto)":"link (auto)","link (image)":"link (image)","link (inline)":"link (inline)","link label":"link label","link label (optional)":"link label (optional)","link (ref)":"link (ref)","list item (bullet)":"list item (bullet)","list item (numbered)":"list item (numbered)","strikethrough (${0})":"strikethrough (${0})",strong:"strong","table (${0})":"table (${0})",text:"text","title (optional)":"title (optional)",url:"url",TogglePaneOrientationTooltip:"Toggle split pane orientation",WarningHeaderTooDeep:"Header level cannot exceed 6",WarningUnorderedListItem:"Unordered list item within ordered list",WarningOrderedListItem:"Ordered list item within unordered list",WarningOrderedListShouldStartAt1:"The first item in an ordered list should have index 1",WarningLinkHasNoText:"Link has no text",WarningLinkHasNoURL:"Link has no URL",WarningUndefinedLinkId:"Undefined link ID: ${0}",PageTitleFormat:"${0} - ${1}",KeyCTRL:"Ctrl",KeySHIFT:"Shift",KeyALT:"Alt",KeyBKSPC:"Backspace",KeyDEL:"Del",KeyEND:"End",KeyENTER:"Enter",KeyESCAPE:"Esc",KeyHOME:"Home",KeyINSERT:"Ins",KeyPAGEDOWN:"Page Down",KeyPAGEUP:"Page Up",KeySPACE:"Space",KeyTAB:"Tab"}),define("plugins/webEditingPlugin",["orion/plugin","i18n!orion/nls/messages"],function(e,n){var i={name:"Orion Web Editing Plugin",version:"1.0",description:"This plugin provides editor link support for the navigator."},t=new e(i);t.registerService("orion.core.contenttype",{},{contentTypes:[{id:"text/plain",name:"Text",extension:["txt"],imageClass:"file-sprite-text modelDecorationSprite"},{id:"application/xml","extends":"text/plain",name:"XML",extension:["xml"],imageClass:"file-sprite-xml modelDecorationSprite"},{id:"text/x-markdown","extends":"text/plain",name:"Markdown",extension:["md"]},{id:"text/conf","extends":"text/plain",name:"Conf",extension:["conf"]},{id:"text/sh","extends":"text/plain",name:"sh",extension:["sh"]},{id:"application/pdf","extends":"application/browser-renderable",name:"PDF",extension:["pdf"]},{id:"application/octet-stream",name:"octet-stream",extension:["exe","bin","doc","ppt"]},{id:"application/zip","extends":"application/octet-stream",name:"ZIP",extension:["war","jar","zip","rar"]},{id:"image/gif",name:"GIF",extension:["gif"],imageClass:"file-sprite-image modelDecorationSprite"},{id:"image/jpeg",name:"JPG",extension:["jpg","jpeg","jpe"],imageClass:"file-sprite-image modelDecorationSprite"},{id:"image/ico",name:"ICO",extension:["ico"],imageClass:"file-sprite-image modelDecorationSprite"},{id:"image/png",name:"PNG",extension:["png"],imageClass:"file-sprite-image modelDecorationSprite"},{id:"image/tiff",name:"TIFF",extension:["tif","tiff"],imageClass:"file-sprite-image modelDecorationSprite"},{id:"image/svg",name:"SVG",extension:["svg"],imageClass:"file-sprite-image modelDecorationSprite"}]}),t.registerService("orion.edit.editor",{},{id:"orion.editor","default":!0,name:n["Orion Editor"],nls:"orion/nls/messages",uriTemplate:"../edit/edit.html#{,Location,params*}",orionTemplate:"../edit/edit.html#{,Location,params*}",validationProperties:[{source:"!Projects"}]}),t.registerService("orion.navigate.openWith",{},{editor:"orion.editor",excludedContentTypes:["image/*"]});var o="orion.viewer.markdown";t.registerService("orion.edit.editor",{},{id:o,name:n["Orion Markdown Viewer"],nls:"orion/nls/messages",uriTemplate:"../edit/edit.html#{,Location,params*},editor="+o}),t.registerService("orion.navigate.openWith",{},{editor:o,contentType:["text/x-markdown"]});var r="orion.editor.markdown";t.registerService("orion.edit.editor",{},{id:r,name:n["Orion Markdown Editor"],nls:"orion/nls/messages","default":!0,uriTemplate:"../edit/edit.html#{,Location,params*},editor="+r}),t.registerService("orion.navigate.openWith",{},{editor:r,contentType:["text/x-markdown"]}),t.registerService("orion.edit.editor",{},{id:"orion.viewer.raw",name:n.Browser,nls:"orion/nls/messages",uriTemplate:"{+Location}",validationProperties:[{source:"!Projects"}]}),t.connect()});