!function(e,n){"function"==typeof define&&define.amd?define("orion/Deferred",n):"object"==typeof exports?module.exports=n():(e.orion=e.orion||{},e.orion.Deferred=n())}(this,function(){function e(){for(var e;e=o.shift();)e();s=!1}function n(e){o.push(e),s||(s=!0,a())}function r(e){return function(n){e(n)}}function t(e,n,t){try{var i=e(n),o=i&&("object"==typeof i||"function"==typeof i)&&i.then;if("function"==typeof o)if(i===t.promise)t.reject(new TypeError);else{var s=i.cancel;"function"==typeof s?t._parentCancel=s.bind(i):delete t._parentCancel,o.call(i,r(t.resolve),r(t.reject),r(t.progress))}else t.resolve(i)}catch(a){t.reject(a)}}function i(){function e(){for(var e;e=c.shift();){var n=e.deferred,r="fulfilled"===l?"resolve":"reject",i=e[r];"function"==typeof i?t(i,a,n):n[r](a)}}function r(r){delete u._parentCancel,l="rejected",a=r,c.length&&n(e)}function o(t){function s(e){return function(n){l&&"assumed"!==l||e(n)}}delete u._parentCancel;try{var f=t&&("object"==typeof t||"function"==typeof t)&&t.then;if("function"==typeof f)if(t===u)r(new TypeError);else{l="assumed";var d=t&&t.cancel;if("function"!=typeof d){var p=new i;t=p.promise;try{f(p.resolve,p.reject,p.progress)}catch(h){p.reject(h)}d=t.cancel,f=t.then}a=t,f.call(t,s(o),s(r)),u._parentCancel=d.bind(t)}else l="fulfilled",a=t,c.length&&n(e)}catch(g){s(r)(g)}}function s(){var e=u._parentCancel;if(e)delete u._parentCancel,e();else if(!l){var n=new Error("Cancel");n.name="Cancel",r(n)}}var a,l,c=[],u=this;this.resolve=function(e){return l||o(e),u},this.reject=function(e){return l||r(e),u},this.progress=function(e){return l||c.forEach(function(n){if(n.progress)try{n.progress(e)}catch(r){}}),u.promise},this.cancel=function(){return u._parentCancel?setTimeout(s,0):s(),u},this.then=function(r,t,o){var s=new i;return s._parentCancel=u.promise.cancel,c.push({resolve:r,reject:t,progress:o,deferred:s}),("fulfilled"===l||"rejected"===l)&&n(e),s.promise},this.promise={then:u.then,cancel:u.cancel}}var o=[],s=!1,a=function(){if("undefined"!=typeof process&&"function"==typeof process.nextTick){var n=process.nextTick;return function(){n(e)}}if("function"==typeof MutationObserver){var r=document.createElement("div"),t=new MutationObserver(e);return t.observe(r,{attributes:!0}),function(){r.setAttribute("class","_tick")}}return function(){setTimeout(e,0)}}();return i.all=function(e,n){function r(e,n){a||(s[e]=n,0===--o&&l.resolve(s))}function t(e,t){if(!a){if(n)try{return void r(e,n(t))}catch(i){t=i}l.reject(t)}}var o=e.length,s=[],a=!1,l=new i;return l.then(void 0,function(){a=!0,e.forEach(function(e){e.cancel&&e.cancel()})}),0===o?l.resolve(s):e.forEach(function(e,n){e.then(r.bind(void 0,n),t.bind(void 0,n))}),l.promise},i.when=function(e,n,r,t){var o,s;return e&&"function"==typeof e.then?o=e:(s=new i,s.resolve(e),o=s.promise),o.then(n,r,t)},i}),function(e,n){"function"==typeof define&&define.amd?define("orion/plugin",["orion/Deferred"],n):"object"==typeof exports?module.exports=n(require("orion/Deferred")):(e.orion=e.orion||{},e.orion.PluginProvider=n(e.orion.Deferred))}(this,function(e){function n(e,n){this.__objectId=e,this.__methods=n}function r(r){function t(e){w&&("undefined"==typeof ArrayBuffer&&(e=JSON.stringify(e)),w===self?w.postMessage(e):w.postMessage(e,"*"))}function i(){var e=[];return Object.keys(b).forEach(function(n){var r=b[n];e.push({serviceId:n,names:r.names,methods:r.methods,properties:r.properties})}),{headers:f||{},services:e}}function o(e,n){if(n&&n instanceof XMLHttpRequest){var r,t;try{r=n.status,t=n.statusText}catch(i){r=0,t=""}return{status:r||0,statusText:t}}return n}function s(e){var n=e?JSON.parse(JSON.stringify(e,o)):e;return e instanceof Error&&(n.__isError=!0,n.message=n.message||e.message,n.name=n.name||e.name),n}function a(r){if(!w)return(new e).reject(new Error("plugin not connected"));r.id=String(p++);var t=new e;m[r.id]=t,t.then(null,function(e){d&&e instanceof Error&&"Cancel"===e.name&&S({requestId:r.id,method:"cancel",params:e.message?[e.message]:[]})});var i=Object.prototype.toString;return r.params.forEach(function(e,o){if("[object Object]"===i.call(e)&&!(e instanceof n)){var s,a;for(s in e)"[object Function]"===i.call(e[s])&&(a=a||[],a.push(s));if(a){var l=h++;y[l]=e;var c=function(){delete y[l]};t.then(c,c),r.params[o]=new n(l,a)}}}),S(r),t.promise}function l(e,n){e||0===e?S({id:e,result:null,error:n}):console.log(n)}function c(e,n,r,t){t.forEach(function(e,n){if(e&&"undefined"!=typeof e.__objectId){var r={};e.__methods.forEach(function(n){r[n]=function(){return a({objectId:e.__objectId,method:n,params:Array.prototype.slice.call(arguments)})}}),t[n]=r}});var i="undefined"==typeof e?null:{id:e,result:null,error:null};try{var o=r.apply(n,t);if(!i)return;o&&"function"==typeof o.then?(v[e]=o,o.then(function(n){delete v[e],i.result=n,S(i)},function(n){v[e]&&(delete v[e],i.error=s(n),S(i))},function(){S({responseId:e,method:"progress",params:Array.prototype.slice.call(arguments)})})):(i.result=o,S(i))}catch(l){i&&(i.error=s(l),S(i))}}function u(e){if(e.source===w||"undefined"==typeof window){var n="string"!=typeof e.data?e.data:JSON.parse(e.data);try{if(n.method){var r=n.method,t=n.params||[];if("serviceId"in n){var i=b[n.serviceId];i||l(n.id,"service not found"),i=i.implementation,r in i?c(n.id,i,i[r],t):l(n.id,"method not found")}else if("objectId"in n){var o=y[n.objectId];o||l(n.id,"object not found"),!r in o?c(n.id,o,o[r],t):l(n.id,"method not found")}else if("requestId"in n){var s=v[n.requestId];s&&"cancel"===r&&s.cancel&&s.cancel.apply(s,t)}else{if(!("responseId"in n))throw new Error("Bad method: "+n.method);var a=m[n.responseId];a&&"progress"===r&&a.progress&&a.progress.apply(a,t)}}else{var u=m[String(n.id)];delete m[String(n.id)],n.error?u.reject(n.error):u.resolve(n.result)}}catch(f){console.log("Plugin._messageHandler "+f)}}}var f=r,d=!1,p=0,h=0,g=0,v={},m={},y={},b={},w=null;"undefined"==typeof window?w=self:window!==window.parent?w=window.parent:null!==window.opener&&(w=window.opener);var S=t;t({method:"loading"}),this.updateHeaders=function(e){if(d)throw new Error("Cannot update headers. Plugin Provider is connected");f=e},this.registerService=function(e,n,r){if(d)throw new Error("Cannot register service. Plugin Provider is connected");"string"==typeof e?e=[e]:Array.isArray(e)||(e=[]);var t=null,i=[];for(t in n)"function"==typeof n[t]&&i.push(t);b[g++]={names:e,methods:i,implementation:n,properties:r||{},listeners:{}}},this.registerServiceProvider=this.registerService,this.connect=function(e,n){if(d)return void(e&&e());if(!w)return void(n&&n("No valid plugin target"));addEventListener("message",u,!1);var r={method:"plugin",params:[i()]};t(r),d=!0,e&&e()},this.disconnect=function(){d&&(removeEventListener("message",u),w=null,d=!1)}}return r}),function(){function e(e,n,r,t,i,o){n[e]&&(r.push(e),(n[e]===!0||1===n[e])&&t.push(i+e+"/"+o))}function n(e,n,r,t,i){var o=t+n+"/"+i;require._fileExists(e.toUrl(o+".js"))&&r.push(o)}function r(e,n,t){var i;for(i in n)!n.hasOwnProperty(i)||e.hasOwnProperty(i)&&!t?"object"==typeof n[i]&&(!e[i]&&n[i]&&(e[i]={}),r(e[i],n[i],t)):e[i]=n[i]}var t=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var o=i.config?i.config():{};return{version:"2.0.4",load:function(i,s,a,l){l=l||{},l.locale&&(o.locale=l.locale);var c,u,f,d=t.exec(i),p=d[1],h=d[4],g=d[5],v=h.split("-"),m=[],y={},b="";if(d[5]?(p=d[1],c=p+g):(c=i,g=d[4],h=o.locale,h||(h=o.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),v=h.split("-")),l.isBuild){for(m.push(c),n(s,"root",m,p,g),u=0;u<v.length;u++)f=v[u],b+=(b?"-":"")+f,n(s,b,m,p,g);if(l.locales){var w,S;for(w=0;w<l.locales.length;w++)for(h=l.locales[w],v=h.split("-"),b="",S=0;S<v.length;S++)f=v[S],b+=(b?"-":"")+f,n(s,b,m,p,g)}s(m,function(){a()})}else s([c],function(n){var t,i=[];for(e("root",n,i,m,p,g),u=0;u<v.length;u++)t=v[u],b+=(b?"-":"")+t,e(b,n,i,m,p,g);s(m,function(){var e,t,o;for(e=i.length-1;e>-1&&i[e];e--)o=i[e],t=n[o],(t===!0||1===t)&&(t=s(p+o+"/"+g)),r(y,t);a(y)})})}}})}(),define("orion/shell/nls/messages",{root:!0}),define("orion/shell/nls/root/messages",{Shell:"Shell","Changed to: ":"Changed to: ","Initial directory: ":"Initial directory: ",ChangeCurrDir:"Changes the current directory",DirName:"The name of the directory",EditFile:"Edits a file",FileName:"The name of the file",CurDirFileList:"Lists the files in the current directory",CurDirLocation:"Prints the current directory location",ClearShellScreen:"Clears the shell screen",notValid:"'${0}' is not valid",Err:"Error: ${0}",NoResponseFromServer:"No response from server for ${0}. Check your internet connection and try again.",ServerError:"Server error: ${0} returned ${1} ${2}",Succeeded:"Succeeded",Aborted:"Aborted",PlugName:"The name of the plug-in",ContributedPlugName:"The name of the contributed plug-in",RegisteredPlugsList:"Lists all registered plug-ins","Reloads a plug-in":"Reloads a plug-in",DisableContributedPlug:"Disables a contributed plug-in",EnableContributedPlug:"Enables a contributed plug-in",UninstallContributedPlugFrmConfig:"Uninstalls a contributed plug-in from the configuration",PlugAlreadyInstalled:"Plug-in is already installed","Invalid plug-in URL":"Invalid plug-in URL",InstallPlugFrmURL:"Installs a plug-in from a URL","The plug-in URL":"The plug-in URL",CmdForPlugs:"Commands for working with plug-ins",UninstallAllPlugsMsg:"Are you sure you want to uninstall all contributed plug-ins?",DisplayPlugServices:"Displays a plug-in's services",CmdsForService:"Commands for working with a service",DisplayPlugsForService:"Displays all plug-in contributions for a service","The service identifier":"The service identifier",disabled:"disabled","Open Shell":"Open Shell","Open Shell page":"Open the Shell page with this folder as the current directory.",AlreadyExist:"'${0}' already exists",NotSupportFileSystem:"${0} is not supported in this file system",SrcNotSupportBinRead:"Source file service does not support binary read",TargetNotSupportBinWrite:"Target file service does not support binary write",AlreadyExistsInDirErr:"Cannot create file, it already exists as a directory",WroteMsg:"Wrote ${0}",WriteFailMsg:"Failed to write ${0}",WriteFailNotDescendentOfOutputDir:"Cannot write ${0}, it is not a descendent of the output directory",FileOrDirRedirectOutput:"The file or directory to re-direct output to"}),define("shell/plugins/shellPagePlugin",["orion/plugin","i18n!orion/shell/nls/messages"],function(e,n){var r={name:"Orion Shell Page Service",version:"1.0",description:"This plugin integrates access to Orion's Shell page into other Orion pages."},t=new e(r);t.registerService("orion.navigate.command",{},{name:n.Shell,id:"eclipse.shell.open",tooltip:n["Open Shell page"],validationProperties:[{source:"ChildrenLocation|ContentLocation",variableName:"ShellLocation",replacements:[{pattern:"\\?depth=1$",replacement:""}]}],uriTemplate:"{+OrionHome}/shell/shellPage.html#{,ShellLocation}",forceSingleItem:!0}),t.registerService("orion.page.link.related",null,{id:"eclipse.shell.open",category:"shell",order:10}),t.connect()});