!function(){function e(e,t,n,i,r,o){t[e]&&(n.push(e),(t[e]===!0||1===t[e])&&i.push(r+e+"/"+o))}function t(e,t,n,i,r){var o=i+t+"/"+r;require._fileExists(e.toUrl(o+".js"))&&n.push(o)}function n(e,t,i){var r;for(r in t)!t.hasOwnProperty(r)||e.hasOwnProperty(r)&&!i?"object"==typeof t[r]&&(!e[r]&&t[r]&&(e[r]={}),n(e[r],t[r],i)):e[r]=t[r]}var i=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(r){var o=r.config?r.config():{};return{version:"2.0.4",load:function(r,s,a,l){l=l||{},l.locale&&(o.locale=l.locale);var c,u,h,d=i.exec(r),p=d[1],f=d[4],m=d[5],g=f.split("-"),v=[],y={},_="";if(d[5]?(p=d[1],c=p+m):(c=r,m=d[4],f=o.locale,f||(f=o.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),g=f.split("-")),l.isBuild){for(v.push(c),t(s,"root",v,p,m),u=0;u<g.length;u++)h=g[u],_+=(_?"-":"")+h,t(s,_,v,p,m);if(l.locales){var b,C;for(b=0;b<l.locales.length;b++)for(f=l.locales[b],g=f.split("-"),_="",C=0;C<g.length;C++)h=g[C],_+=(_?"-":"")+h,t(s,_,v,p,m)}s(v,function(){a()})}else s([c],function(t){var i,r=[];for(e("root",t,r,v,p,m),u=0;u<g.length;u++)i=g[u],_+=(_?"-":"")+i,e(_,t,r,v,p,m);s(v,function(){var e,i,o;for(e=r.length-1;e>-1&&r[e];e--)o=r[e],i=t[o],(i===!0||1===i)&&(i=s(p+o+"/"+m)),n(y,i);a(y)})})}}})}(),define("orion/shell/nls/messages",{root:!0}),define("orion/shell/nls/root/messages",{Shell:"Shell","Changed to: ":"Changed to: ","Initial directory: ":"Initial directory: ",ChangeCurrDir:"Changes the current directory",DirName:"The name of the directory",EditFile:"Edits a file",FileName:"The name of the file",CurDirFileList:"Lists the files in the current directory",CurDirLocation:"Prints the current directory location",ClearShellScreen:"Clears the shell screen",notValid:"'${0}' is not valid",Err:"Error: ${0}",NoResponseFromServer:"No response from server for ${0}. Check your internet connection and try again.",ServerError:"Server error: ${0} returned ${1} ${2}",Succeeded:"Succeeded",Aborted:"Aborted",PlugName:"The name of the plug-in",ContributedPlugName:"The name of the contributed plug-in",RegisteredPlugsList:"Lists all registered plug-ins","Reloads a plug-in":"Reloads a plug-in",DisableContributedPlug:"Disables a contributed plug-in",EnableContributedPlug:"Enables a contributed plug-in",UninstallContributedPlugFrmConfig:"Uninstalls a contributed plug-in from the configuration",PlugAlreadyInstalled:"Plug-in is already installed","Invalid plug-in URL":"Invalid plug-in URL",InstallPlugFrmURL:"Installs a plug-in from a URL","The plug-in URL":"The plug-in URL",CmdForPlugs:"Commands for working with plug-ins",UninstallAllPlugsMsg:"Are you sure you want to uninstall all contributed plug-ins?",DisplayPlugServices:"Displays a plug-in's services",CmdsForService:"Commands for working with a service",DisplayPlugsForService:"Displays all plug-in contributions for a service","The service identifier":"The service identifier",disabled:"disabled","Open Shell":"Open Shell","Open Shell page":"Open the Shell page with this folder as the current directory.",AlreadyExist:"'${0}' already exists",NotSupportFileSystem:"${0} is not supported in this file system",SrcNotSupportBinRead:"Source file service does not support binary read",TargetNotSupportBinWrite:"Target file service does not support binary write",AlreadyExistsInDirErr:"Cannot create file, it already exists as a directory",WroteMsg:"Wrote ${0}",WriteFailMsg:"Failed to write ${0}",WriteFailNotDescendentOfOutputDir:"Cannot write ${0}, it is not a descendent of the output directory",FileOrDirRedirectOutput:"The file or directory to re-direct output to"}),function(e,t){"function"==typeof define&&define.amd?define("orion/Deferred",t):"object"==typeof exports?module.exports=t():(e.orion=e.orion||{},e.orion.Deferred=t())}(this,function(){function e(){for(var e;e=o.shift();)e();s=!1}function t(e){o.push(e),s||(s=!0,a())}function n(e){return function(t){e(t)}}function i(e,t,i){try{var r=e(t),o=r&&("object"==typeof r||"function"==typeof r)&&r.then;if("function"==typeof o)if(r===i.promise)i.reject(new TypeError);else{var s=r.cancel;"function"==typeof s?i._parentCancel=s.bind(r):delete i._parentCancel,o.call(r,n(i.resolve),n(i.reject),n(i.progress))}else i.resolve(r)}catch(a){i.reject(a)}}function r(){function e(){for(var e;e=c.shift();){var t=e.deferred,n="fulfilled"===l?"resolve":"reject",r=e[n];"function"==typeof r?i(r,a,t):t[n](a)}}function n(n){delete u._parentCancel,l="rejected",a=n,c.length&&t(e)}function o(i){function s(e){return function(t){l&&"assumed"!==l||e(t)}}delete u._parentCancel;try{var h=i&&("object"==typeof i||"function"==typeof i)&&i.then;if("function"==typeof h)if(i===u)n(new TypeError);else{l="assumed";var d=i&&i.cancel;if("function"!=typeof d){var p=new r;i=p.promise;try{h(p.resolve,p.reject,p.progress)}catch(f){p.reject(f)}d=i.cancel,h=i.then}a=i,h.call(i,s(o),s(n)),u._parentCancel=d.bind(i)}else l="fulfilled",a=i,c.length&&t(e)}catch(m){s(n)(m)}}function s(){var e=u._parentCancel;if(e)delete u._parentCancel,e();else if(!l){var t=new Error("Cancel");t.name="Cancel",n(t)}}var a,l,c=[],u=this;this.resolve=function(e){return l||o(e),u},this.reject=function(e){return l||n(e),u},this.progress=function(e){return l||c.forEach(function(t){if(t.progress)try{t.progress(e)}catch(n){}}),u.promise},this.cancel=function(){return u._parentCancel?setTimeout(s,0):s(),u},this.then=function(n,i,o){var s=new r;return s._parentCancel=u.promise.cancel,c.push({resolve:n,reject:i,progress:o,deferred:s}),("fulfilled"===l||"rejected"===l)&&t(e),s.promise},this.promise={then:u.then,cancel:u.cancel}}var o=[],s=!1,a=function(){if("undefined"!=typeof process&&"function"==typeof process.nextTick){var t=process.nextTick;return function(){t(e)}}if("function"==typeof MutationObserver){var n=document.createElement("div"),i=new MutationObserver(e);return i.observe(n,{attributes:!0}),function(){n.setAttribute("class","_tick")}}return function(){setTimeout(e,0)}}();return r.all=function(e,t){function n(e,t){a||(s[e]=t,0===--o&&l.resolve(s))}function i(e,i){if(!a){if(t)try{return void n(e,t(i))}catch(r){i=r}l.reject(i)}}var o=e.length,s=[],a=!1,l=new r;return l.then(void 0,function(){a=!0,e.forEach(function(e){e.cancel&&e.cancel()})}),0===o?l.resolve(s):e.forEach(function(e,t){e.then(n.bind(void 0,t),i.bind(void 0,t))}),l.promise},r.when=function(e,t,n,i){var o,s;return e&&"function"==typeof e.then?o=e:(s=new r,s.resolve(e),o=s.promise),o.then(t,n,i)},r}),define("orion/EventTarget",[],function(){function e(){this._namedListeners={}}return e.prototype={dispatchEvent:function(e){if(!e.type)throw new Error("unspecified type");var t=this._namedListeners[e.type];return t&&t.forEach(function(t){try{"function"==typeof t?t(e):t.handleEvent(e)}catch(n){"undefined"!=typeof console&&console.log(n)}}),!e.defaultPrevented},addEventListener:function(e,t){("function"==typeof t||t.handleEvent)&&(this._namedListeners[e]=this._namedListeners[e]||[],this._namedListeners[e].push(t))},removeEventListener:function(e,t){var n=this._namedListeners[e];if(n)for(var i=0;i<n.length;i++)if(n[i]===t){1===n.length?delete this._namedListeners[e]:n.splice(i,1);break}}},e.prototype.constructor=e,e.attach=function(t){var n=new e;t.dispatchEvent=n.dispatchEvent.bind(n),t.addEventListener=n.addEventListener.bind(n),t.removeEventListener=n.removeEventListener.bind(n)},e}),define("orion/serviceregistry",["orion/Deferred","orion/EventTarget"],function(e,t){function n(e,t,n){this._properties=n||{},this._properties["service.id"]=e,this._properties.objectClass=t,this._properties["service.names"]=t}function i(e,t,n){this._serviceId=e,this._serviceReference=t,this._internalRegistry=n}function r(t,n){function i(i){return function(){var r;try{if(!n())throw new Error("Service was unregistered");var o=t[i].apply(t,Array.prototype.slice.call(arguments));if(o&&"function"==typeof o.then)return o;r=new e,r.resolve(o)}catch(s){r=new e,r.reject(s)}return r.promise}}var r;for(r in t)"function"==typeof t[r]&&(this[r]=i(r))}function o(e,t){this.type=e,this.serviceReference=t}function s(){this._entries=[],this._namedReferences={},this._serviceEventTarget=new t;var e=this;this._internalRegistry={isRegistered:function(t){return e._entries[t]?!0:!1},unregisterService:function(t){var n=e._entries[t];if(!n)throw new Error("Service has already been unregistered: "+t);var i=n.reference;e._serviceEventTarget.dispatchEvent(new o("unregistering",i)),e._entries[t]=null;var r=i.getProperty("objectClass");r.forEach(function(t){for(var n=e._namedReferences[t],r=0;r<n.length;r++)if(n[r]===i){1===n.length?delete e._namedReferences[t]:n.splice(r,1);break}})},modifyService:function(t){var n=e._entries[t];if(!n)throw new Error("Service not found while trying to send modified event: "+t);var i=n.reference;e._serviceEventTarget.dispatchEvent(new o("modified",i))}}}return n.prototype={getPropertyKeys:function(){var e,t=[];for(e in this._properties)this._properties.hasOwnProperty(e)&&t.push(e);return t},getProperty:function(e){return this._properties[e]}},n.prototype.constructor=n,i.prototype={unregister:function(){this._internalRegistry.unregisterService(this._serviceId)},getReference:function(){if(!this._internalRegistry.isRegistered(this._serviceId))throw new Error("Service has already been unregistered: "+this._serviceId);return this._serviceReference},setProperties:function(e){var t=this._serviceReference._properties;this._serviceReference._properties=e||{},e["service.id"]=this._serviceId,e.objectClass=t.objectClass,e["service.names"]=t["service.names"],this._internalRegistry.modifyService(this._serviceId)}},i.prototype.constructor=i,s.prototype={getService:function(e){var t;if("string"==typeof e){var n=this._namedReferences[e];n&&n.some(function(e){return t=this._entries[e.getProperty("service.id")].service,!!t},this)}else{var i=this._entries[e.getProperty("service.id")];i&&(t=i.service)}return t||null},getServiceReferences:function(e){if(e)return this._namedReferences[e]?this._namedReferences[e]:[];var t=[];return this._entries.forEach(function(e){e&&t.push(e.reference)}),t},registerService:function(e,t,s){if("undefined"==typeof t||null===t)throw new Error("invalid service");"string"==typeof e?e=[e]:Array.isArray(e)||(e=[]);var a=this._entries.length,l=new n(a,e,s),c=this._namedReferences;e.forEach(function(e){c[e]=c[e]||[],c[e].push(l)});var u=new r(t,this._internalRegistry.isRegistered.bind(null,a));this._entries.push({reference:l,service:u});var h=this._internalRegistry;return this._serviceEventTarget.dispatchEvent(new o("registered",l)),new i(a,l,h)},addEventListener:function(e,t){this._serviceEventTarget.addEventListener(e,t)},removeEventListener:function(e,t){this._serviceEventTarget.removeEventListener(e,t)}},s.prototype.constructor=s,{ServiceRegistry:s}}),define("orion/xsrfUtils",[],function(){function e(){var e,t,n,r=document.cookie.split(";");for(e=0;e<r.length;e++)if(t=r[e].substr(0,r[e].indexOf("=")).trim(),n=r[e].substr(r[e].indexOf("=")+1).trim(),t==i)return n}function t(t){var n=e();n&&(t[i]=n)}function n(t){var n=e();n&&t.setRequestHeader(i,n)}var i="x-csrf-token";return{XSRF_TOKEN:i,getCSRFToken:e,setNonceHeader:t,addCSRFNonce:n}}),function(){function e(e){if("string"!=typeof e)throw new TypeError}function t(e){return e?e.split("&"):[]}function n(e){return 0===e.length?"":e.join("&")}function i(e){var t=/([^=]*)(?:=?)(.*)/.exec(e),n=t[1]?decodeURIComponent(t[1]):"",i=t[2]?decodeURIComponent(t[2]):"";return[n,i]}function r(e){var t=encodeURIComponent(e[0]);return e[1]&&(t+="="+encodeURIComponent(e[1])),t}function o(e,n){var r="",o=[],s=0;return{next:function(){if(r!==e.query&&(r=e.query,o=t(r)),s<o.length){var a=i(o[s++]);switch(n){case"keys":return a[0];case"values":return a[1];case"keys+values":return[a[0],a[1]];default:throw new TypeError}}throw N}}}function s(e){Object.defineProperty(this,"_url",{get:function(){return e._url}})}function a(e,t){if(!e.scheme&&t&&(e.scheme=t.scheme,!e.host&&t.host&&(e.userinfo=t.userinfo,e.host=t.host,e.port=t.port,e.pathRelative=!0)),e.pathRelative)if(e.path){if("/"!==e.path[0]){var n=/^(.*\/)[^\/]*$/.exec(t.path)[1]||"/";e.path=n+e.path}}else e.path=t.path}function l(e){return e.toLowerCase()}function c(e){return e?/[1-9]\d*$/.exec(e)[0]:""}function u(e){var t=[];return e.split("/").forEach(function(e){".."===e?t.pop():"."!==e&&t.push(e)}),t.join("/")}function h(e){e.scheme&&(e.scheme=l(e.scheme)),e.port&&(e.port=c(e.port)),e.host&&e.path&&(e.path=u(e.path))}function d(e){return e.replace(/\s/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function p(e,t){if("string"!=typeof e)throw new TypeError;e=d(e);var n=y.exec(e);if(!n)return null;var i={};if(i.scheme=n[1]||"",i.scheme&&!C.test(i.scheme))return null;var r=n[2];if(r){var o=_.exec(r);if(i.userinfo=o[1],i.host=o[2],i.port=o[3],i.port&&!w.test(i.port))return null}return i.path=n[3],i.query=n[4],i.fragment=n[5],a(i,t),h(i),i}function f(e){var t=e.scheme?e.scheme+":":"";return e.host&&(t+="//",e.userinfo&&(t+=e.userinfo+"@"),t+=e.host,e.port&&(t+=":"+e.port)),t+=e.path,e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t}function m(e,t){var n;if(t){if(t=t.href||t,n=p(t),!n||!n.scheme)throw new SyntaxError;Object.defineProperty(this,"_baseURL",{value:n})}var i=p(e,n);if(!i)throw new SyntaxError;Object.defineProperty(this,"_input",{value:e,writable:!0}),Object.defineProperty(this,"_url",{value:i,writable:!0});var r=new s(this);Object.defineProperty(this,"query",{get:function(){return this._url?r:null},enumerable:!0})}try{var g;if("function"==typeof window.URL&&0!==window.URL.length&&"http:"===(g=new window.URL("http://www.w3.org?q")).protocol&&g.query)return}catch(v){}var y=/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/,_=/^(?:(.*)@)?(\[[^\]]*\]|[^:]*)(?::(.*))?$/,b=/^\S*$/,C=/^([a-zA-Z](?:[a-zA-Z0-9+-.])*)$/,w=/^\d*$/,S=/^(\[[^\]\/?#\s]*\]|[^:\/?#\s]*)$/,E=/^(\[[^\]\/?#\s]*\]|[^:\/?#\s]*)(?::(\d*))?$/,x=/^([^?#\s]*)$/,L=/^([^\s]*)$/,T=b,k=/([^:]*):?(.*)/,N="undefined"!=typeof StopIteration?StopIteration:new Error("Stop Iteration"),A={"ftp:":"21","gopher:":"70","http:":"80","https:":"443","ws:":"80","wss:":"443"};Object.defineProperties(s.prototype,{get:{value:function(n){e(n);var r,o=t(this._url.query);return o.some(function(e){var t=i(e);return t[0]===n?(r=t[1],!0):void 0}),r},enumerable:!0},set:{value:function(o,s){e(o),e(s);var a=t(this._url.query),l=a.some(function(e,t){var n=i(e);return n[0]===o?(n[1]=s,a[t]=r(n),!0):void 0});l||a.push(r([o,s])),this._url.query=n(a)},enumerable:!0},has:{value:function(n){e(n);var r=t(this._url.query);return r.some(function(e){var t=i(e);return t[0]===n?!0:void 0})},enumerable:!0},"delete":{value:function(r){e(r);var o=t(this._url.query),s=o.filter(function(e){var t=i(e);return t[0]!==r});return s.length!==o.length?(this._url.query=n(s),!0):!1},enumerable:!0},clear:{value:function(){this._url.query=""},enumerable:!0},forEach:{value:function(e,t){if("function"!=typeof e)throw new TypeError;var n=o(this._url,"keys+values");try{for(;;){var i=n.next();e.call(t,i[1],i[0],this)}}catch(r){if(r!==N)throw r}},enumerable:!0},keys:{value:function(){return o(this._url,"keys")},enumerable:!0},values:{value:function(){return o(this._url,"values")},enumerable:!0},items:{value:function(){return o(this._url,"keys+values")}},size:{get:function(){return t(this._url.query).length},enumerable:!0},getAll:{value:function(n){e(n);var r=[],o=t(this._url.query);return o.forEach(function(e){var t=i(e);t[0]===n&&r.push(t[1])}),r},enumerable:!0},append:{value:function(i,o){e(i),e(o);var s=t(this._url.query);s.push(r([i,o])),this._url.query=n(s)},enumerable:!0}}),Object.defineProperties(m.prototype,{href:{get:function(){return this._url?f(this._url):this._input},set:function(t){e(t),this._input=t,this._url=p(this._input,this._baseURL)},enumerable:!0},origin:{get:function(){return this._url&&this._url.host?this.protocol+"//"+this.host:""},enumerable:!0},protocol:{get:function(){return this._url?this._url.scheme+":":":"},set:function(t){if(e(t),this._url){var n=":"===t.slice(-1)?t.substring(0,t.length-1):t;(""===n||C.test(n))&&(this._url.scheme=l(n))}},enumerable:!0},_userinfo:{get:function(){return this._url?this._url.userinfo:""},set:function(t){e(t),this._url&&(this._url.userinfo=t)}},username:{get:function(){if(!this._url)return"";var e=k.exec(this._userinfo),t=decodeURIComponent(e[1]||"");return t},set:function(t){if(e(t),this._url){var n=k.exec(this._userinfo),i=[encodeURIComponent(t||"")];n[2]&&i.push(n[2]),this._userinfo=i.join(":")}},enumerable:!0},password:{get:function(){if(!this._url)return"";var e=k.exec(this._userinfo),t=decodeURIComponent(e[2]||"");return t},set:function(t){if(e(t),this._url){var n=k.exec(this._userinfo),i=[n[1]||""];t&&i.push(encodeURIComponent(t)),this._userinfo=i.join(":")}},enumerable:!0},host:{get:function(){var e="";return this._url&&this._url.host&&(e+=this._url.host,this._url.port&&(e+=":"+this._url.port)),e},set:function(t){if(e(t),this._url){var n=E.exec(t);n&&(this._url.host=n[1],this._url.port=c(n[2]))}},enumerable:!0},hostname:{get:function(){return this._url?this._url.host:""},set:function(t){if(e(t),this._url){var n=S.exec(t);n&&(this._url.host=t)}},enumerable:!0},port:{get:function(){var e=this._url?this._url.port||"":"";return e&&e===A[this.protocol]&&(e=""),e},set:function(t){if(e(t),this._url){var n=w.exec(t);n&&(this._url.port=c(t))}},enumerable:!0},pathname:{get:function(){return this._url?this._url.path:""},set:function(t){if(e(t),this._url){var n=x.exec(t);n&&(this._url.host&&t&&"/"!==t[0]&&(t="/"+t),this._url.path=t?u(t):"")}},enumerable:!0},search:{get:function(){return this._url&&this._url.query?"?"+this._url.query:""},set:function(t){if(e(t),this._url){t&&"?"===t[0]&&(t=t.substring(1));var n=L.exec(t);n&&(this._url.query=t)}},enumerable:!0},hash:{get:function(){return this._url&&this._url.fragment?"#"+this._url.fragment:""},set:function(t){if(e(t),this._url){t&&"#"===t[0]&&(t=t.substring(1));var n=T.exec(t);n&&(this._url.fragment=t)}},enumerable:!0}});var P=window.URL||window.webkitURL;P&&P.createObjectURL&&(Object.defineProperty(m,"createObjectURL",{value:P.createObjectURL.bind(P),enumerable:!1}),Object.defineProperty(m,"revokeObjectURL",{value:P.revokeObjectURL.bind(P),enumerable:!1})),window.URL=m}(),define("orion/URL-shim",function(){}),define("orion/xhr",["orion/Deferred","orion/xsrfUtils","orion/URL-shim"],function(e,t){function n(e,t,n,i){var r,o="undefined"!=typeof n.response?n.response:n.responseText,s="string"==typeof o?o:null;try{r=n.status}catch(a){r=0}var l={args:t,response:o,responseText:s,status:r,url:e,xhr:n};return"undefined"!=typeof i&&(l.error=i),l}function i(e){return new URL(location.href).origin===new URL(e,location.href).origin}function r(r,o,s){s=s||{};var a=arguments.length>3&&arguments[3]?arguments[3]:new XMLHttpRequest,l=new e,c=s.headers||{};i(o)&&t.setNonceHeader(c);var u,h=s.log||!1;"undefined"==typeof c["X-Requested-With"]&&(c["X-Requested-With"]="XMLHttpRequest"),"undefined"==typeof s.data||"POST"!==r&&"PUT"!==r||(u=s.data);var d=!1,p=!1;l.promise.then(void 0,function(e){d=!0,!p&&e instanceof Error&&"Cancel"===e.name&&a.abort()}),a.onabort=function(){if(p=!0,!d){var e=new Error("Cancel");e.name="Cancel",l.reject(e)}},a.onload=function(){var e=n(o,s,a);200<=a.status&&a.status<400?l.resolve(e):(l.reject(e),h&&"undefined"!=typeof console&&console.log(new Error(a.statusText)))},a.onerror=function(){var e=n(o,s,a);l.reject(e),h&&"undefined"!=typeof console&&console.log(new Error(a.statusText))},a.onprogress=function(e){e.xhr=a,l.progress(e)};try{if(a.open(r,o,!0),"string"==typeof s.responseType&&(a.responseType=s.responseType),"number"==typeof s.timeout)if("number"==typeof a.timeout)a.timeout=s.timeout,a.addEventListener("timeout",function(){l.reject(n(o,s,a,"Timeout exceeded"))});else{var f=setTimeout(function(){l.reject(n(o,s,a,"Timeout exceeded"))},s.timeout);l.promise.then(clearTimeout.bind(null,f),clearTimeout.bind(null,f))}Object.keys(c).forEach(function(e){a.setRequestHeader(e,c[e])}),a.send(u||null)}catch(m){l.reject(n(o,s,a,m))}return l.promise}return r}),define("orion/metrics",["orion/Deferred"],function(){function e(e,t,n,i){window[r]?window[r]("send","event",e,t,n,i):o&&o.push({command:"send",arg0:"event",arg1:e,arg2:t,arg3:n,arg4:i})}function t(e,t){window.performance&&window.performance.getEntriesByName&&window.performance.mark&&!window.performance.getEntriesByName(e).length&&(window.performance.mark(e),n("page",e,window.performance.now(),t))}function n(e,t,n,i){window[r]?window[r]("send","timing",e,t,Math.round(n),i):o&&o.push({command:"send",arg0:"timing",arg1:e,arg2:t,arg3:Math.round(n),arg4:i})}function i(e,t){window[r]?window[r]("set",e,t):o&&o.push({command:"set",arg0:e,arg1:t})}var r="OrionGA",o=[],s=function(e,t){var n=e.shift();return n?void(n.init?n.init().then(function(e){return e.tid?(function(e,t,n,i,r,o,s){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,o=t.createElement(n),s=t.getElementsByTagName(n)[0],o.async=1,o.src=i,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js",r),t=t||{},e.siteSpeedSampleRate&&(t.siteSpeedSampleRate=e.siteSpeedSampleRate),window[r]("create",e.tid,t),window[r]("send","pageview"),o.forEach(function(e){window[r](e.command,e.arg0,e.arg1,e.arg2,e.arg3,e.arg4)}),void(o=null)):void(o=null)},function(){s(e,t)}):s(e,t)):void(o=null)},a=function(e,t){var n=e.getServiceReferences("orion.analytics.google"),i=[];n.forEach(function(t){i.push(e.getService(t))}),s(i,t)};return{init:s,initFromRegistry:a,logEvent:e,logPageLoadTiming:t,logTiming:n,setDimension:i}}),define("orion/preferences",["require","orion/Deferred","orion/xhr","orion/metrics"],function(e,t,n){function i(e,t,n){this._name=e,this._providers=t,this._changeCallback=n,this._flushPending=!1,this._cached=null,this._stores=[],this._pendingDeletes=[],this._dirty=[]}function r(e,t){return{get:function(n,i){if(0===t)return null;var r=localStorage.getItem(e+n);if(null===r)return null;var o=JSON.parse(r);return i||-1===t||o._expires&&o._expires>(new Date).getTime()?(delete o._expires,o):null},set:function(n,i){if(0!==t)if(-1!==t&&(i._expires=(new Date).getTime()+1e3*t),0===Object.keys(i).length)localStorage.removeItem(e+n);else{var r=JSON.stringify(i);localStorage.setItem(e+n,r),delete i._expires}},remove:function(t){localStorage.removeItem(e+t)}}}function o(e){this._currentPromises={},this._cache=new r("/orion/preferences/user",3600),this._service=null,this.available=function(){if(!this._service){var t=e.getServiceReferences("orion.core.preference.provider");t.length>0&&(this._service=e.getService(t[0]))}return!!this._service}}function s(e){this._location=e,this._currentPromise=null,this._cache=new r("/orion/preferences/default",3600)}function a(){this._cache=new r("/orion/preferences/local",-1)}function l(t,n){this._userProvider=new o(t),this._localProvider=new a,this._changeListeners=[],n=n||"defaults.pref",-1===n.indexOf("://")&&(n=e.toUrl(n)),this._defaultsProvider=new s(n),this._serviceRegistration=t.registerService("orion.core.preference",this)}return i.prototype={_flush:function(){for(var e=[],n=0;n<this._stores.length;++n){var i=this._stores[n];if(-1!==this._dirty.indexOf(i)&&e.push(this._providers[n].put(this._name,i)),this._pendingDeletes[n]&&this._pendingDeletes[n].length>0){for(var r=0;r<this._pendingDeletes[n].length;r++)e.push(this._providers[n].remove(this._name,this._pendingDeletes[n][r]));delete this._pendingDeletes[n]}}return this._dirty=[],t.all(e)},_scheduleFlush:function(e){e&&-1===this._dirty.indexOf(e)&&this._dirty.push(e),this._flushPending||(this._flushPending=!0,window.setTimeout(function(){this._flushPending&&(this._flushPending=!1,this._flush())}.bind(this),0))},_getCached:function(){if(!this._cached){this._cached={};for(var e=0;e<this._stores.length;++e){var t=this._stores[e];for(var n in t)t.hasOwnProperty(n)&&"undefined"==typeof this._cached[n]&&(this._cached[n]=t[n])}}return this._cached},keys:function(){return Object.keys(this._getCached())},get:function(e){var t=this._getCached();return t[e]},put:function(e,t){if(0!==this._stores.length){var n=this._stores[0];n[e]!==t&&(this.valueChanged(e,t),n[e]=t,this._cached=null,this._scheduleFlush(n))}},remove:function(e){for(var t=0;t<this._stores.length;++t){var n=this._stores[t];if(n.hasOwnProperty(e))return delete n[e],this._pendingDeletes[t]||(this._pendingDeletes[t]=[]),this._pendingDeletes[t].push(e),this._cached=null,this._scheduleFlush(),!0}return!1},clear:function(){for(var e=0;e<this._stores.length;++e)this._stores[e]={},this._scheduleFlush(this._stores[e]);this._cached=null},sync:function(e){if(this._flushPending)return this._flushPending=!1,this._flush();for(var n=this,i=[],r=0;r<this._providers.length;++r)i.push(this._providers[r].get(this._name,e).then(function(e){return function(t){n._stores[e]=t}}(r)));return t.all(i).then(function(){n._cached=null,n._getCached()})},flush:function(){this._flush()},valueChanged:function(e,t){var n=this._name+"/"+e;if("string"==typeof t)this._changeCallback(n,t);else{var i=this._stores[0];for(var r in t)if("pid"!==r&&(!i[e]||i[e][r]!==t[r])){var o=String(t[r]);this._changeCallback(n+"/"+r,o)}}}},o.prototype={get:function(e,n){if(this._currentPromises[e])return this._currentPromises[e];var i=new t,r=null;if(n?this._cache.remove(e):r=this._cache.get(e),null!==r)i.resolve(r);else{this._currentPromises[e]=i;var o=this;this._service.get(e).then(function(t){o._cache.set(e,t),delete o._currentPromises[e],i.resolve(t)},function(t){if(404===t.status){var n={};o._cache.set(e,n),delete o._currentPromises[e],i.resolve(n)}else delete o._currentPromises[e],i.resolve(o._cache.get(e,!0)||{})})}return i},put:function(e,t){return this._cache.set(e,t),this._service.put(e,t)},remove:function(e,t){var n=this._cache.get(e);return delete n[t],this._cache.set(e,n),this._service.remove(e,t)}},s.prototype={get:function(e,i){if(this._currentPromise)return this._currentPromise;var r=new t,o=null;if(i?this._cache.remove(e):o=this._cache.get(e),null!==o)r.resolve(o);else{this._currentPromise=r;var s=this;n("GET",this._location,{headers:{"Orion-Version":"1"},timeout:15e3}).then(function(t){var n=JSON.parse(t.response);s._cache.set(e,n[e]||{}),s._currentPromise=null,r.resolve(n[e]||{})},function(t){if(401===t.xhr.status||404===t.xhr.status)s._cache.set(e,{}),s._currentPromise=null,r.resolve({});else{s._currentPromise=null;var n=s._cache.get(e,!0);r.resolve(null!==n?n[e]||{}:{})}})}return r},put:function(){var e=new t;return e.resolve(),e},remove:function(e,t){var n=this._cache.get(e);delete n[t],this.put(e,n)}},a.prototype={get:function(e){var n=new t,i=this._cache.get(e);return n.resolve(null!==i?i:{}),n},put:function(e,n){var i=new t;return this._cache.set(e,n),i.resolve(),i},remove:function(e,t){var n=this._cache.get(e);delete n[t],this.put(e,n)}},l.DEFAULT_SCOPE=1,l.LOCAL_SCOPE=2,l.USER_SCOPE=4,l.prototype={listenForChangedSettings:function(e,t,n){return(!t||"number"!=typeof t||t>7||1>t)&&(n=t,t=l.DEFAULT_SCOPE|l.LOCAL_SCOPE|l.USER_SCOPE),window.addEventListener("storage",n,!1),0!==(l.USER_SCOPE&t)?"/orion/preferences/user"+e:0!==(l.LOCAL_SCOPE&t)?"/orion/preferences/local"+e:"/orion/preferences/default"+e},addChangeListener:function(e){"function"==typeof e&&this._changeListeners.push(e)},getPreferences:function(e,t){(!t||"number"!=typeof t||t>7||1>t)&&(t=l.DEFAULT_SCOPE|l.LOCAL_SCOPE|l.USER_SCOPE);var n=[];l.USER_SCOPE&t&&this._userProvider.available()&&n.push(this._userProvider),l.LOCAL_SCOPE&t&&n.push(this._localProvider),l.DEFAULT_SCOPE&t&&n.push(this._defaultsProvider);var r=new i(e,n,this._prefChangeListener.bind(this)),o=r.sync().then(function(){return r});return o},getSetting:function(e,t,n){for(var i,r=0;r<e.length;r++)if(e[r].label===t)for(var o=0;o<e[r].data.length;o++)if(e[r].data[o].label===n){i=e[r].data[o].value;break}return i},removeChangeListener:function(e){if("function"==typeof e)for(var t=0;t<this._changeListeners.length;t++)if(this._changeListeners[t]===e)return void this._changeListeners.splice(t,1)},_prefChangeListener:function(e,t){this._changeListeners.forEach(function(n){n(e,t)})}},{PreferencesService:l}}),define("orion/pluginregistry",["orion/Deferred","orion/EventTarget","orion/URL-shim"],function(e,t){function n(e,t){var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;n.sort(),i.sort();for(var r=0,o=n.length;o>r;r++){var s=n[r];if(s!==i[r])return!1;var a=e[s],l=t[s];if(a!==l&&JSON.stringify(a)!==JSON.stringify(l))return!1}return!0}function i(e){if(-1===e.indexOf("://"))try{return new URL(e,location.href).href}catch(t){}return e}function r(e){function t(){return n=n||Object.keys(e)}var n=null,i={key:function(e){return t()[e]},getItem:function(t){return e[t]},setItem:function(t,i){e[t]=i,n=null},removeItem:function(t){delete e[t],n=null},clear:function(){t().forEach(function(t){delete e[t]}.bind(this)),n=null}};return Object.defineProperty(i,"length",{get:function(){return t().length}}),i}function o(e,t){if(t&&t instanceof XMLHttpRequest){var n,i;try{n=t.status,i=t.statusText}catch(r){n=0,i=""}return{status:n||0,statusText:i}}return t}function s(e){var t=e?JSON.parse(JSON.stringify(e,o)):e;return e instanceof Error&&(t.__isError=!0,t.message=t.message||e.message,t.name=t.name||e.name),t}function a(e,t){this.type=e,this.plugin=t}function l(e,t){this.__objectId=e,this.__methods=t}function c(i,r,o){function c(e){C&&o.postMessage(e,C)}function u(t){if(!C)return(new e).reject(new Error("plugin not connected"));t.id=String(P++);var n=new e;I[t.id]=n,n.then(null,function(e){"active"===N&&e instanceof Error&&"Cancel"===e.name&&c({requestId:t.id,method:"cancel",params:e.message?[e.message]:[]})});var i=Object.prototype.toString;return t.params.forEach(function(e,r){if("[object Object]"===i.call(e)&&!(e instanceof l)){var o,s;for(o in e)"[object Function]"===i.call(e[o])&&(s=s||[],s.push(o));if(s){var a=O++;D[a]=e;var c=function(){delete D[a]};n.then(c,c),t.params[r]=new l(a,s)}}}),o.postMessage(t,C),n.promise}function h(e,t){e||0===e?c({id:e,result:null,error:t}):console.log(t)}function d(e,t,n,i){i.forEach(function(e,t){if(e&&"undefined"!=typeof e.__objectId){var n={};e.__methods.forEach(function(t){n[t]=function(){return u({objectId:e.__objectId,method:t,params:Array.prototype.slice.call(arguments)})}}),i[t]=n}});var r="undefined"==typeof e?null:{id:e,result:null,error:null};try{var o=n.apply(t,i);if(!r)return;o&&"function"==typeof o.then?(R[e]=o,o.then(function(t){delete R[e],r.result=t,c(r)},function(t){R[e]&&(delete R[e],r.error=s(t),c(r))},function(){c({responseId:e,method:"progress",params:Array.prototype.slice.call(arguments)})})):(r.result=o,c(r))}catch(a){r&&(r.error=s(a),c(r))}}function p(e){try{if(e.method){var t=e.method,n=e.params||[];if("serviceId"in e){var i=M[e.serviceId];i||h(e.id,"service not found"),t in i?d(e.id,i,i[t],n):h(e.id,"method not found")}else if("objectId"in e){var r=D[e.objectId];r||h(e.id,"object not found"),t in r?d(e.id,r,r[t],n):h(e.id,"method not found")}else if("requestId"in e){var s=R[e.requestId];s&&"cancel"===t&&s.cancel&&s.cancel.apply(s,n)}else if("responseId"in e){var a=I[e.responseId];a&&"progress"===t&&a.progress&&a.progress.apply(a,n)}else if("loading"===e.method)C.loading();else if("plugin"===e.method){C.connected();var l=e.params[0];S({headers:l.headers,services:l.services}).then(function(){b&&b.resolve(y)})}else{if("timeout"!==e.method)throw new Error("Bad method: "+e.method);b&&b.reject(e.error)}}else{var c=I[String(e.id)];if(delete I[String(e.id)],e.error){var u=o.handleServiceError(y,e.error);c.reject(u)}else c.resolve(e.result)}}catch(p){console.log("Plugin._messageHandler "+p)}}function f(e){var n={};if(e.methods&&(e.methods.forEach(function(t){n[t]=function(){var n={serviceId:e.serviceId,method:t,params:Array.prototype.slice.call(arguments)};return"active"===N?u(n):y.start({"transient":!0}).then(function(){return u(n)})}}),n.addEventListener&&n.removeEventListener)){var i=new t,r=O++;
D[r]={handleEvent:i.dispatchEvent.bind(i)};var o=new l(r,["handleEvent"]),s=n.addEventListener;n.addEventListener=function(e,t){i._namedListeners[e]||s(e,o),i.addEventListener(e,t)};var a=n.removeEventListener;n.removeEventListener=function(e,t){i.removeEventListener(e,t),i._namedListeners[e]||a(e,o)}}return n}function m(e){var t=JSON.parse(JSON.stringify(e.properties));t.__plugin__=i;var n=e.names||e.type||[];return Array.isArray(n)||(n=[n]),t.objectClass=n,t}function g(e){var t=f(e),n=m(e),i=o.registerService(e.names||e.type,t,n);A[e.serviceId]={registration:i,proxy:t}}function v(){o.persist(i,{created:E,headers:x,services:L,autostart:T,lastModified:k})}var y=this;r=r||{};var _,b,C,w,S,E=r.created||(new Date).getTime(),x=r.headers||{},L=r.services||[],T=r.autostart,k=r.lastModified||0,N="installed",A={},P=0,O=0,R={},I={},D={},M={};this._default=!1,this._persist=v,this._resolve=function(){N="resolved",o.dispatchEvent(new a("resolved",y))},this._getAutostart=function(){return T},this._getCreated=function(){return E},this.getLocation=function(){return i},this.getHeaders=function(){return JSON.parse(JSON.stringify(x))},this.getName=function(){var e=this.getHeaders();return e?e.name||"":null},this.getVersion=function(){var e=this.getHeaders();return e?e.version||"0.0.0":null},this.getLastModified=function(){return k},this.getServiceReferences=function(){var e=[];return Object.keys(A).forEach(function(t){e.push(A[t].registration.getReference())}),e},this.setParent=function(t){return w!==t?(w=t,y.stop({"transient":!0}).then(function(){return"started"===T?y.start({"transient":!0}):"lazy"===T?y.start({lazy:!0,"transient":!0}):void 0})):(new e).resolve()},this.getState=function(){return N},this.getProblemLoading=function(){return y._problemLoading?!0:!1},this.start=function(t){if("uninstalled"===N)return(new e).reject(new Error("Plugin is uninstalled"));if(_)return _.promise.then(this.start.bind(this,t));if("active"===N)return(new e).resolve();if(!t||!t.transient){var n=t&&t.lazy?"lazy":"started";n!==T&&(T=n,v())}var r=o.getState();if("starting"!==r&&"active"!==r)return t.transient?(new e).reject(new Error("start transient error")):(new e).resolve();if("installed"===N)try{this._resolve()}catch(s){return(new e).reject(s)}if("resolved"===N&&L.forEach(function(e){g(e)}),t&&t.lazy)return"starting"!==N&&(N="starting",o.dispatchEvent(new a("lazy activation",y))),(new e).resolve();var l=new e;return _=l,N="starting",y._problemLoading=null,o.dispatchEvent(new a("starting",y)),b=new e,C=o.connect(i,p,w),b.then(function(){b=null,N="active",o.dispatchEvent(new a("started",y)),_=null,l.resolve()},function(){b=null,N="stopping",o.dispatchEvent(new a("stopping",y)),Object.keys(A).forEach(function(e){A[e].registration.unregister(),delete A[e]}),o.disconnect(C),C=null,N="resolved",_=null,o.dispatchEvent(new a("stopped",y)),y._problemLoading=!0,l.reject(new Error("Failed to load plugin: "+i)),y._default&&(k=0,v())}),l.promise},this.stop=function(t){if("uninstalled"===N)return(new e).reject(new Error("Plugin is uninstalled"));if(_)return _.promise.then(this.stop.bind(this,t));if(t&&t.transient||"stopped"!==T&&(T="stopped",v()),"active"!==N&&"starting"!==N)return(new e).resolve();var n=new e;return _=n,N="stopping",o.dispatchEvent(new a("stopping",y)),Object.keys(A).forEach(function(e){A[e].registration.unregister(),delete A[e]}),C&&(o.disconnect(C),C=null),N="resolved",_=null,o.dispatchEvent(new a("stopped",y)),n.resolve(),n.promise},S=function(t){if(y.problemLoading=null,"uninstalled"===N)return(new e).reject(new Error("Plugin is uninstalled"));if(!t)return 0===k&&(k=(new Date).getTime(),v()),o.loadManifest(i).then(S,function(){y._problemLoading=!0,y._default&&(k=0,v()),console.log("Failed to load plugin: "+i)});var r=x,s=L,l=T;if(x=t.headers||{},L=t.services||[],T=t.autostart||T,t.lastModified?k=t.lastModified:(k=(new Date).getTime(),v()),n(x,r)&&n(L,s)&&T===l)return(new e).resolve();if("active"===N||"starting"===N){var c=[];Object.keys(L).forEach(function(e){var t=L[e];c.push(e);var i=A[e];if(i){if(n(t.methods,Object.keys(i.proxy))){var r=m(t),o=i.registration.getReference(),s={};return o.getPropertyKeys().forEach(function(e){s[e]=o.getProperty(e)}),void(n(r,s)||i.registration.setProperties(r))}i.registration.unregister(),delete A[e]}g(t)}),Object.keys(A).forEach(function(e){-1===c.indexOf(e)&&(A[e].registration.unregister(),delete A[e])})}return"active"===N&&(o.disconnect(C),b=new e,C=o.connect(i,p,w),b.then(function(){b=null},function(){b=null,N="stopping",o.dispatchEvent(new a("stopping"),y),Object.keys(A).forEach(function(e){A[e].registration.unregister(),delete A[e]}),o.disconnect(C),C=null,N="resolved",o.dispatchEvent(new a("stopped",y))})),(new e).resolve()},this.update=function(e){return S(e).then(function(){o.dispatchEvent(new a("updated",y))})},this.uninstall=function(){return"uninstalled"===N?(new e).reject(new Error("Plugin is uninstalled")):"active"===N||"starting"===N||"stopping"===N?this.stop().then(this.uninstall.bind(this),this.uninstall.bind(this)):(o.removePlugin(this),N="uninstalled",o.dispatchEvent(new a("uninstalled",y)),(new e).resolve())}}function u(n,o){function s(e){var t=e.source;f.some(function(n){if(t===n.target){try{var i;if("undefined"==typeof n.useStructuredClone){var r="string"!=typeof e.data;i=r?e.data:JSON.parse(e.data),n.useStructuredClone=r}else i=n.useStructuredClone?e.data:JSON.parse(e.data);n.handler(i)}catch(o){}return!0}})}o=o||{};var l=o.storage||localStorage;l.getItem||(l=r(l));var u,d="installed",p=[],f=[],m=new t,g={},v={registerService:n.registerService.bind(n),connect:function(e,t,n,i){function r(e){var n=new Error(e);n.name="timeout",t({method:"timeout",error:n})}var o={handler:t,url:e},s=setTimeout(r.bind(null,"Load timeout for: "+e),i||15e3),a=document.createElement("iframe");return a.name=e+"_"+(new Date).getTime(),a.src=e,a.onload=function(){clearTimeout(s),s=setTimeout(r.bind(null,"Plugin handshake timeout for: "+e),5e3)},a.sandbox="allow-scripts allow-same-origin allow-forms",a.style.width=a.style.height="100%",a.frameBorder=0,(n||u).appendChild(a),o.target=a.contentWindow,o.connected=function(){clearTimeout(s)},o.loading=function(){clearTimeout(s),s=setTimeout(r.bind(null,"Plugin handshake timeout for: "+e),6e4)},o.close=function(){if(clearTimeout(s),a){var e=a.parentNode;e&&e.removeChild(a),a=null}},f.push(o),o},disconnect:function(e){for(var t=0;t<f.length;t++)if(e===f[t]){f.splice(t,1);try{e.close()}catch(n){}break}},removePlugin:function(e){for(var t=0;t<p.length;t++)if(e===p[t]){p.splice(t,1);break}l.removeItem("plugin."+e.getLocation())},persist:function(e,t){l.setItem("plugin."+e,JSON.stringify(t))},postMessage:function(e,t){t.target.postMessage(t.useStructuredClone?e:JSON.stringify(e),t.url)},dispatchEvent:function(e){try{m.dispatchEvent(e)}catch(t){console&&console.log("PluginRegistry.dispatchEvent "+t)}},loadManifest:function(t){var n=new e,i=v.connect(t,function(e){if(i&&e.method)if("manifest"===e.method||"plugin"===e.method){var t=e.params[0];v.disconnect(i),i=null,n.resolve(t)}else"timeout"===e.method&&(v.disconnect(i),i=null,n.reject(e.error))});return n.promise},getState:function(){return d},handleServiceError:function(e,t){if(t&&401===t.status){var n=e.getHeaders(),i=e.getName()||e.getLocation(),r=document.createElement("span");if(r.appendChild(document.createTextNode("Authentication required for: "+i+".")),n.login){r.appendChild(document.createTextNode(" "));var o=document.createElement("a");o.target="_blank",o.textContent="Login",o.href=n.login,h.test(o.href)?(r.appendChild(o),r.appendChild(document.createTextNode(" and re-try the request."))):console.log("Illegal Login URL: "+n.login)}var s=new XMLSerializer;return{Severity:"Error",HTML:!0,Message:s.serializeToString(r)}}if(t.__isError){var a=t;t=new Error(a.message),Object.keys(a).forEach(function(e){t[e]=a[e]}),delete t.__isError}return t}};this.getLocation=function(){return"System"},this.getHeaders=function(){return{}},this.getName=function(){return"System"},this.getVersion=function(){return"0.0.0"},this.getLastModified=function(){return 0},this.getState=v.getState,this.init=function(){if("starting"!==d&&"active"!==d&&"stopping"!==d){addEventListener("message",s,!1);for(var e=[],t=0,n=l.length;n>t;t++)e.push(l.key(t));e.forEach(function(e){if(0===e.indexOf("plugin.")){var t=e.substring("plugin.".length),n=JSON.parse(l.getItem(e));n.created&&p.push(new c(t,n,v))}}),p.sort(function(e,t){return e._getCreated()<t._getCreated()?-1:1}),o.parent?u=o.parent:(u=document.createElement("div"),o.visible||(u.style.display="none",u.style.visibility="hidden"),document.body.appendChild(u)),o.plugins&&Object.keys(o.plugins).forEach(function(e){e=i(e);var t=this.getPlugin(e);if(t)t._default=!0;else{var n=o.plugins[e];"object"!=typeof n&&(n={}),n.autostart=n.autostart||o.defaultAutostart||"lazy",t=new c(e,n,v),t._default=!0,p.push(t)}}.bind(this)),d="starting"}},this.start=function(){if("starting"!==d&&this.init(),"starting"!==d)return(new e).reject("Cannot start framework. Framework is already "+d+".");var t=[],n=(new Date).getTime();return p.forEach(function(e){var i=e._getAutostart();return 0===e.getLastModified()?void t.push(e.update().then(function(){return"started"===i?e.start({"transient":!0}):"lazy"===i?e.start({lazy:!0,"transient":!0}):void e._resolve()})):void("started"===i?t.push(e.start({"transient":!0})):"lazy"===i?(t.push(e.start({lazy:!0,"transient":!0})),n>e.getLastModified()+864e5&&e.update()):e._resolve())}),e.all(t,function(e){console.log("PluginRegistry.stop "+e)}).then(function(){d="active"})},this.stop=function(){if("starting"!==d&&"active"!==d)return(new e).reject("Cannot stop registry. Registry is already "+d+".");d="stopping";var t=[];return p.forEach(function(e){t.push(e.stop({"transient":!0}))}),e.all(t,function(e){console.log("PluginRegistry.stop "+e)}).then(function(){if(!o.parent){var e=u.parentNode;e&&e.removeChild(u)}u=null,removeEventListener("message",s),d="resolved"})},this.update=function(){this.stop().then(this.start.bind(this))},this.uninstall=function(){return(new e).reject("Cannot uninstall registry")},this.installPlugin=function(t,n){t=i(t);var r=this.getPlugin(t);if(r)return(new e).resolve(r);if(g[t])return g[t];if(n)return r=new c(t,n,v),p.push(r),r._persist(),v.dispatchEvent(new a("installed",r)),(new e).resolve(r);var o=v.loadManifest(t).then(function(e){return r=new c(t,e,v),p.push(r),r._persist(),delete g[t],v.dispatchEvent(new a("installed",r)),r},function(e){throw delete g[t],e});return g[t]=o,o},this.getPlugins=function(){return p.slice()},this.getPlugin=function(e){var t=null;return e=i(e),p.some(function(n){return e===n.getLocation()?(t=n,!0):void 0}),t},this.addEventListener=m.addEventListener.bind(m),this.removeEventListener=m.removeEventListener.bind(m),this.resolvePlugins=function(){var e=!0;return p.forEach(function(t){e=e&&t._resolve()}),e}}var h=new RegExp("^http[s]?","i");return{Plugin:c,PluginRegistry:u}}),define("orion/objects",[],function(){function e(e){for(var t=Object.prototype.hasOwnProperty,n=1,i=arguments.length;i>n;n++){var r=arguments[n];for(var o in r)t.call(r,o)&&(e[o]=r[o])}return e}return{clone:function(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var n=Object.create(Object.getPrototypeOf(t));return e(n,t),n},mixin:e,toArray:function(e){return Array.isArray(e)?e:[e]}}}),define("orion/serviceTracker",[],function(){function e(e,i){function r(e){var t=e.getProperty("service.id"),n=this.addingService(e);n&&(c[t]=e,u[t]=n)}function o(e){var t=e.getProperty("service.id"),n=u[t];delete c[t],delete u[t],this.removedService(e,n)}function s(e){return-1!==e.getProperty("objectClass").indexOf(i)}this.serviceRegistry=e;var a,l,c={},u={},h=t;this.close=function(){if(h!==n)throw"Already closed";h=t,e.removeEventListener("registered",a),e.removeEventListener("unregistering",l),a=null,l=null;var i=this;this.getServiceReferences().forEach(function(e){o.call(i,e)}),"function"==typeof this.onClose&&this.onClose()},this.getServiceReferences=function(){var e=Object.keys(c);return e.length?e.map(function(e){return c[e]}):null},this.open=function(){if(h!==t)throw"Already open";h=n;var c=this;a=function(e){return s(e.serviceReference)&&(r.call(c,e.serviceReference),"function"==typeof c.onServiceAdded)?c.onServiceAdded(e.serviceReference,c.serviceRegistry.getService(e.serviceReference)):void 0},l=function(e){s(e.serviceReference)&&o.call(c,e.serviceReference)},e.addEventListener("registered",a),e.addEventListener("unregistering",l),e.getServiceReferences(i).forEach(function(t){return r.call(c,t),"function"==typeof c.onServiceAdded?c.onServiceAdded(t,e.getService(t)):void 0}),"function"==typeof this.onOpen&&this.onOpen()}}var t=0,n=1;return e.prototype={addingService:function(e){return this.serviceRegistry.getService(e)},onOpen:null,onClose:null,onServiceAdded:null,removedService:function(){}},e}),define("orion/config",["orion/Deferred","orion/objects","orion/preferences","orion/serviceTracker"],function(e,t,n,i){var r,o,s,a,l,c=n.PreferencesService,u=c.DEFAULT_SCOPE,h="pid",d="orion.cm.managedservice",p="/cm/configurations";return r=function(t,n,r){function o(e,t,n){u[e]||(u[e]=[]),p[e]||(p[e]=[]),u[e].push(t),p[e].push(n)}function s(e,t,n){var i=u[e],r=p[e];i.length>1?i.splice(i.indexOf(t),1):delete u[e],r.length>1?r.splice(r.indexOf(n),1):delete p[e]}function a(e){return u[e]||[]}function l(e){return p[e]||[]}function c(e,t,i){t.forEach(function(r,o){try{var s=e[o].getProperty("__plugin__"),a=s&&n.getPlugin(s);(!s||a&&"active"===a.getState())&&t[o].updated(i)}catch(l){"undefined"!=typeof console&&console.log(l)}})}i.call(this,t,d);var u={},p={},f=function(n){var i=[];return n.plugin.getServiceReferences().forEach(function(e){if(-1!==e.getProperty("objectClass").indexOf(d)){var n=e.getProperty(h),o=t.getService(e);if(n&&o){var s=r._find(n),a=s&&s.getProperties();i.push(o.updated(a))}}}),e.all(i)};this.addingService=function(e){var n=e.getProperty(h),i=t.getService(e);return n&&i?(o(n,e,i),i):null},this.onServiceAdded=function(e,t){var n=e.getProperty(h),i=r._find(n);c([e],[t],i&&i.getProperties())},this.onOpen=function(){n.addEventListener("started",f)},this.onClose=function(){n.removeEventListener("started",f)},this.notifyUpdated=function(e){var t=e.getPid();c(a(t),l(t),e.getProperties())},this.notifyDeleted=function(e){var t=e.getPid();c(a(t),l(t),null)},this.removedService=function(e,t){var n=e.getProperty(h);s(n,e,t)}},o=function(){function e(e,t,n){this.store=new s(this,n),this.configAdmin=new a(this,this.store),this.tracker=new r(e,t,this.store)}return e.prototype={getConfigurationAdmin:function(){var e=this;return this.configAdmin._init().then(function(t){return e.tracker.open(),t})},notifyDeleted:function(e){this.tracker.notifyDeleted(e)},notifyUpdated:function(e){this.tracker.notifyUpdated(e)}},e}(),a=function(){function e(e,t){this.factory=e,this.store=t}return e.prototype={_prefName:p,_init:function(){var e=this;return this.store._init().then(function(){return e})},getConfiguration:function(e){return this.store.get(e)},getDefaultConfiguration:function(e){return this.store._find(e,u)},listConfigurations:function(){return this.store.list()}},e}(),s=function(){function t(t,n){this.factory=t,this.prefsService=n,this.configs=this.defaultConfigs=null,this.pref=null;var i=this;this.initPromise=e.all([this.prefsService.getPreferences(p,u),this.prefsService.getPreferences(p)]).then(function(e){var t=e[0];i.pref=e[1],i.defaultConfigs=i._toConfigs(t,!0),i.configs=i._toConfigs(i.pref,!1,t)})}return t.prototype={_toConfigs:function(e,t,n){var i=Object.create(null),r=this;return e.keys().forEach(function(o){if(!i[o]){var s=e.get(o),a=n&&n.get(o);"object"==typeof s&&null!==s&&Object.keys(s).length>0&&(s[h]=o,i[o]=new l(r.factory,r,s,t,a))}}),i},_init:function(){return this.initPromise},_find:function(e,t){return t===c.DEFAULT_SCOPE?this.defaultConfigs[e]||null:this.configs[e]||null},get:function(e){var t=this._find(e),n=this._find(e,u);if(!t){var i=n&&n.getProperties(!0);t=new l(this.factory,this,e,!1,i),this.configs[e]=t}return t},list:function(){var e=this,t=[];return this.pref.keys().forEach(function(n){var i=e._find(n);i&&null!==i.getProperties()&&t.push(i)}),t},remove:function(e){this.pref.remove(e),delete this.configs[e]},save:function(e,t){var n=t.getProperties(!0)||{},i=this._find(e,u);if(i){var r=i.getProperties(!0);Object.keys(r).forEach(function(e){Object.prototype.hasOwnProperty.call(n,e)&&n[e]===r[e]&&delete n[e]})}this.pref.put(e,n)}},t}(),l=function(){function e(e,n){n=t.clone(n),delete n[h],e.properties=n}function n(t,n,i,r,o){if(this.factory=t,this.store=n,this.readOnly=r,null!==i&&"object"==typeof i)this.pid=i[h],e(this,i);else{if("string"!=typeof i)throw new Error("Invalid pid/properties "+i);this.pid=i,this.properties=null}if(o){var s=this;Object.keys(o).forEach(function(e){e===h||Object.prototype.hasOwnProperty.call(s.properties,e)||(s.properties[e]=o[e])})}}return n.prototype={_checkReadOnly:function(){if(this.readOnly)throw new Error("Configuration is read only")},_checkRemoved:function(){if(this.removed)throw new Error("Configuration was removed")},getPid:function(){return this._checkRemoved(),this.pid},getProperties:function(e){this._checkRemoved();var n=null;return this.properties&&(n=t.clone(this.properties),e||(n[h]=this.pid)),n},remove:function(){this._checkReadOnly(),this._checkRemoved(),this.factory.notifyDeleted(this),this.store.remove(this.pid),this.removed=!0},update:function(t){this._checkReadOnly(),this._checkRemoved(),e(this,t),this.store.save(this.pid,this),this.factory.notifyUpdated(this)},toString:function(){return"[ConfigImpl pid: "+this.pid+", properties: "+JSON.stringify(this.properties)+"]"}},n}(),{ConfigurationAdminFactory:o}}),define("orion/bootstrap",["require","orion/Deferred","orion/serviceregistry","orion/preferences","orion/pluginregistry","orion/config"],function(e,t,n,i,r,o){function s(){if(a)return a;a=new t;var s=new n.ServiceRegistry,l=new i.PreferencesService(s);return l.getPreferences("/plugins").then(function(n){var i={plugins:{}};n.keys().forEach(function(t){var r=e.toUrl(t);i.plugins[r]=n[t]});var c=new r.PluginRegistry(s,i);return c.start().then(function(){return s.getServiceReferences("orion.core.preference.provider").length>0?l.getPreferences("/plugins",l.USER_SCOPE).then(function(n){var i=[];return n.keys().forEach(function(t){var n=e.toUrl(t);c.getPlugin(n)||i.push(c.installPlugin(n,{autostart:"lazy"}).then(function(e){return e.update().then(function(){return e.start({lazy:!0})})}))}),t.all(i,function(e){console.log(e)})}):void 0}).then(function(){return new o.ConfigurationAdminFactory(s,c,l).getConfigurationAdmin().then(s.registerService.bind(s,"orion.cm.configadmin"))}).then(function(){var e=s.getService("orion.core.auth");if(e){var t=e.getUser().then(function(t){return t?void localStorage.setItem("lastLogin",(new Date).getTime()):e.getAuthForm(window.location.href).then(function(e){setTimeout(function(){window.location=e},0)})}),n=localStorage.getItem("lastLogin");if(!n||n<(new Date).getTime()-9e5)return t}}).then(function(){var e={serviceRegistry:s,preferences:l,pluginRegistry:c};return a.resolve(e),e})})}var a;return{startup:s}}),define("orion/util",[],function(){function e(e){var t=arguments;return e.replace(/\$\{([^\}]+)\}/g,function(e,n){return t[(n<<0)+1]})}function t(e,t){return e.createElementNS?e.createElementNS(y,t):e.createElement(t)}var n=navigator.userAgent,i=-1!==n.indexOf("MSIE")||-1!==n.indexOf("Trident")?document.documentMode:void 0,r=parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0,o=-1!==n.indexOf("Opera")?parseFloat(n.split("Version/")[1]):void 0,s=parseFloat(n.split("Chrome/")[1])||void 0,a=-1!==n.indexOf("Safari")&&!s,l=parseFloat(n.split("WebKit/")[1])||void 0,c=-1!==n.indexOf("Android"),u=-1!==n.indexOf("iPad"),h=-1!==n.indexOf("iPhone"),d=u||h,p=-1!==navigator.platform.indexOf("Mac"),f=-1!==navigator.platform.indexOf("Win"),m=-1!==navigator.platform.indexOf("Linux"),g="undefined"!=typeof document&&"ontouchstart"in document.createElement("input"),v=f?"\r\n":"\n",y="http://www.w3.org/1999/xhtml";return{formatMessage:e,createElement:t,isIE:i,isFirefox:r,isOpera:o,isChrome:s,isSafari:a,isWebkit:l,isAndroid:c,isIPad:u,isIPhone:h,isIOS:d,isMac:p,isWindows:f,isLinux:m,isTouch:g,platformDelimiter:v}}),define("orion/webui/littlelib",["orion/util"],function(e){function t(e,t){return t||(t=document),t.querySelector(e)}function n(e,t){return t||(t=document),t.querySelectorAll(e)}function i(e,t){return Array.prototype.slice.call(n(e,t))}function r(e){var t=e;return"string"==typeof e&&(t=document.getElementById(e)),t}function o(e,t){if(!e||!t)return!1;if(e===t)return!0;var n=e.compareDocumentPosition(t);return Boolean(16&n)}function s(e){var t=e.getBoundingClientRect(),n=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),i=Math.max(document.documentElement.scrollTop,document.body.scrollTop);return{left:t.left+n,top:t.top+i,width:t.width,height:t.height}}function a(e){for(;e.hasChildNodes();){var t=e.firstChild;e.removeChild(t)}}function l(t){var n=t.tabIndex;if(0===n&&e.isIE){var i={a:!0,body:!0,button:!0,frame:!0,iframe:!0,img:!0,input:!0,isindex:!0,object:!0,select:!0,textarea:!0};i[t.nodeName.toLowerCase()]||t.attributes.tabIndex||(n=-1)}return n}function c(e){if(l(e)>=0)return e;if(e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++){var n=c(e.childNodes[t]);if(n)return n}return null}function u(e){if(l(e)>=0)return e;if(e.hasChildNodes())for(var t=e.childNodes.length-1;t>=0;t--){var n=u(e.childNodes[t]);if(n)return n}return null}function h(e,t){if(3===e.nodeType){var n=C.exec(e.nodeValue);n&&n.length>1&&t(e,n)}if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++)h(e.childNodes[i],t)}function d(e,t){h(e,function(e,n){var i=t[n[1]]||n[1];e.parentNode.replaceChild(document.createTextNode(i),e)})}function p(e,t){h(e,function(e,n){var i=t[n[1]];if(i){var r=document.createRange(),o=n.index;r.setStart(e,o),r.setEnd(e,o+n[0].length),r.deleteContents(),r.insertNode(i)}})}function f(t,n){function i(e){w.forEach(function(t){var n=!1,i=t.excludeNodes.some(function(t){return document.body.contains(t)?(n=!0,t.contains(e.target)):!1});if(n&&!i)try{t.dismiss(e)}catch(r){"undefined"!=typeof console&&console&&console.error(r&&r.message)}}),w=w.filter(function(e){return e.excludeNodes.some(function(e){return document.body.contains(e)})})}null===w&&(w=[],document.addEventListener("click",i,!0),e.isIOS&&document.addEventListener("touchend",function(e){function t(){e.target.removeEventListener("click",t)}0===e.touches.length&&e.target.addEventListener("click",t)},!1)),w.push({excludeNodes:t,dismiss:n})}function m(e){w=w.filter(function(t){return e!==t.dismiss})}function g(e){for(var t=e.parentNode,n=document.documentElement;t&&t!==n;){var i=window.getComputedStyle(t,null);if(!i)break;var r=i.getPropertyValue("overflow-y");if("auto"===r||"scroll"===r)break;t=t.parentNode}return t}function v(e){window.document.all&&(e.keyCode=0),e.preventDefault&&(e.preventDefault(),e.stopPropagation())}function y(e){for(var t=document.getElementsByTagName("iframe"),n=0;n<t.length;n++)t[n].parentNode.style.pointerEvents=e?"":"none"}function _(e){return E[e]||null}function b(e,t){var n=t,i=null;return void 0===n&&(n=document.createElement("div")),n.innerHTML=e,i=1<n.childNodes.length?n.childNodes:n.firstChild}var C=/\$\{([^\}]+)\}/,w=null,S={BKSPC:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DEL:46},E=Object.create(null);return Object.keys(S).forEach(function(e){E[S[e]]=e}),{$:t,$$:n,$$array:i,node:r,contains:o,bounds:s,empty:a,firstTabbable:c,lastTabbable:u,stop:v,processTextNodes:d,processDOMNodes:p,addAutoDismiss:f,setFramesEnabled:y,getOffsetParent:g,removeAutoDismiss:m,keyName:_,KEY:S,createNodes:b}}),define("orion/commandsProxy",["orion/util","orion/webui/littlelib"],function(e,t){function n(t,n){function i(t){if(e.isMac){if(t.metaKey&&!t.altKey)return t.shiftKey||t.ctrlKey||65!==t.keyCode&&67!==t.keyCode&&86!==t.keyCode&&88!==t.keyCode&&90!==t.keyCode?!1:!0;if(t.ctrlKey)return!1}else{if(t.ctrlKey&&!t.altKey)return t.shiftKey||65!==t.keyCode&&67!==t.keyCode&&86!==t.keyCode&&88!==t.keyCode&&90!==t.keyCode?!1:!0;if(t.altKey&&!t.ctrlKey)return!1;if(t.ctrlKey&&t.altKey)return!1}if(t["char"])return t["char"].length>0;if(t.charCode||t.keyCode){var n=t.charCode||t.keyCode;switch(n){case 8:case 9:case 13:case 46:return!0;default:return n>=32&&112>n||n>123}}return!1}if(t=t||window.event,i(t)){if("true"===t.target.contentEditable)return;var r=t.target.nodeName.toLowerCase();if("input"===r){var o=t.target.type.toLowerCase();switch(o){case"text":case"password":case"search":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"range":case"tel":case"time":case"url":case"week":return}}else if("textarea"===r)return}n(t)}function i(){this._init()}return i.prototype={destroy:function(){this._listener&&(document.removeEventListener("keydown",this._listener),this._listener=null)},setProxy:function(e){this.proxy=e},setKeyBindings:function(e){this.bindings=e},_init:function(){var e=this;document.addEventListener("keydown",this._listener=function(i){return n(i,function(n){var i=e.proxy,r=e.bindings;if(r&&i)for(var o=0;o<r.length;o++)r[o].match(n)&&(i.processKey({type:n.type,keyCode:n.keyCode,altKey:n.altKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,shiftKey:n.shiftKey}),t.stop(n))})})}},{handleKeyEvent:n,CommandsProxy:i}}),define("orion/webui/dropdown",["orion/webui/littlelib","orion/EventTarget"],function(e,t){function n(e){t.attach(this),this._init(e)}function i(e,t){t=void 0===t?"span":t;var n=document.createElement(t);if(n.tabIndex=0,n.className="dropdownMenuItem",n.role="menuitem",e){var i=document.createElement("span");i.appendChild(document.createTextNode(e)),i.classList.add("dropdownCommandName"),n.appendChild(i)}var r=document.createElement("li");return r.appendChild(n),r}function r(){var e=document.createElement("li");return e.classList.add("dropdownSeparator"),e}function o(e,t){var n=document.createElement("span");n.classList.add("dropdownKeyBinding"),n.appendChild(document.createTextNode(t)),e.appendChild(n)}return n.prototype={_init:function(t){if(this._dropdownNode=e.node(t.dropdown),!this._dropdownNode)throw"no dom node for dropdown found";if(this._populate=t.populate,this._selectionClass=t.selectionClass,this._parentDropdown=t.parentDropdown,this._positioningNode=t.positioningNode,!this._parentDropdown)for(var n=this._dropdownNode.parentNode;n&&document!==n;){if(n.classList&&n.classList.contains("dropdownMenu")){this._parentDropdown=n.dropdown;break}n=n.parentNode}if(this._dropdownNode.tabIndex=0,this._triggerNode=t.triggerNode?t.triggerNode:e.$(".dropdownTrigger",this._dropdownNode.parentNode),!this._triggerNode)throw"no dom node for dropdown trigger found";var i=function(t){var n=!1;n=this._triggerNode.classList.contains("dropdownMenuItem")?this.open(t):this.toggle(t),n&&e.stop(t)}.bind(this);t.skipTriggerEventListeners||(this._triggerNode.addEventListener("click",i,!1),"span"===this._triggerNode.tagName.toLowerCase()&&this._triggerNode.addEventListener("keydown",function(t){(t.keyCode===e.KEY.ENTER||t.keyCode===e.KEY.SPACE)&&i(t)}.bind(this),!1)),this._dropdownNode.addEventListener("keydown",this._dropdownKeyDown.bind(this),!1)},addTriggerNode:function(t){var n=this;t.addEventListener("click",function(t){n.toggle(t)&&e.stop(t)},!1)},toggle:function(e){return this.isVisible()?this.close():this.open(e)},isVisible:function(){return this._isVisible},open:function(t){var n=!1;if(!this.isVisible()){this.dispatchEvent({type:"triggered",dropdown:this,event:t}),e.setFramesEnabled(!1),this._populate&&(this.empty(),this._populate(this._dropdownNode));var i=this.getItems();if(i.length>0){this._boundAutoDismiss&&e.removeAutoDismiss(this._boundAutoDismiss),this._boundAutoDismiss=this._autoDismiss.bind(this);var r=e.$$array(".dropdownSubMenu",this._dropdownNode);e.addAutoDismiss([this._triggerNode].concat(r),this._boundAutoDismiss),this._triggerNode.classList.add("dropdownTriggerOpen"),this._selectionClass&&this._triggerNode.classList.add(this._selectionClass),this._dropdownNode.classList.add("dropdownMenuOpen"),this._isVisible=!0,this._positionDropdown(t),this._focusDropdownNode(),n=!0,this._parentDropdown&&this._parentDropdown.submenuOpen(this)}}return n},_focusDropdownNode:function(){this._dropdownNode.focus()},_autoDismiss:function(e){if(this.close(!1)&&this._dropdownNode.contains(e.target))for(var t=this._parentDropdown;t;)t.close(!1),t=t._parentDropdown},_positionDropdown:function(){if(this._dropdownNode.style.left="",this._dropdownNode.style.top="",this._positioningNode)return void(this._dropdownNode.style.left=this._positioningNode.offsetLeft+"px");var t=e.bounds(this._dropdownNode),n=e.bounds(document.body);if(t.left+t.width>n.left+n.width)if(this._triggerNode.classList.contains("dropdownMenuItem"))this._dropdownNode.style.left=-t.width+"px";else{var i=e.bounds(this._boundingNode(this._triggerNode)),r=e.bounds(this._triggerNode);this._dropdownNode.style.left=r.left-i.left-t.width+r.width+"px"}var o=t.top+t.height-(n.top+n.height);o>0&&(this._dropdownNode.style.top=Math.floor(this._dropdownNode.style.top-o)+"px")},_boundingNode:function(e){var t=window.getComputedStyle(e,null);if(null===t)return e;var n=t.getPropertyValue("position");return"absolute"!==n&&e.parentNode&&e!==document.body?this._boundingNode(e.parentNode):e},close:function(t){var n=!1;return this.isVisible()&&(this._triggerNode.classList.remove("dropdownTriggerOpen"),this._selectionClass&&this._triggerNode.classList.remove(this._selectionClass),this._dropdownNode.classList.remove("dropdownMenuOpen"),e.setFramesEnabled(!0),t&&this._triggerNode.focus(),this._isVisible=!1,this._selectedItem&&(this._selectedItem.classList.remove("dropdownMenuItemSelected"),this._selectedItem=null),this._boundAutoDismiss&&(e.removeAutoDismiss(this._boundAutoDismiss),this._boundAutoDismiss=null),n=!0),n},getItems:function(){var t=e.$$array("li:not(.dropdownSeparator) > .dropdownMenuItem",this._dropdownNode,!0),n=[],i=this;return t.forEach(function(e){e.parentNode.parentNode===i._dropdownNode&&n.push(e)}),n.forEach(function(t){t._hasDropdownMouseover||(t.addEventListener("mouseover",function(n){t.dropdown?t.dropdown.open(n):(i._closeSelectedSubmenu(),e.stop(n)),i._selectItem(t)}),t._hasDropdownMouseover=!0)}),n},empty:function(){var t=e.$$array("li",this._dropdownNode),n=this;t.forEach(function(e){e.parentNode===n._dropdownNode&&e.parentNode.removeChild(e)})},_dropdownKeyDown:function(t){if(t.keyCode===e.KEY.UP||t.keyCode===e.KEY.DOWN||t.keyCode===e.KEY.RIGHT||t.keyCode===e.KEY.ENTER||t.keyCode===e.KEY.LEFT){var n=this.getItems();if(n.length&&n.length>0){if(this._selectedItem){var i=n.indexOf(this._selectedItem);0>i&&(i=n.indexOf(this._selectedItem.parentNode)),i>=0&&(t.keyCode===e.KEY.UP&&i>0?(i--,this._selectItem(n[i])):t.keyCode===e.KEY.DOWN&&i<n.length-1?(i++,this._selectItem(n[i])):t.keyCode===e.KEY.ENTER||t.keyCode===e.KEY.RIGHT?this._selectedItem.classList.contains("dropdownTrigger")&&this._selectedItem.dropdown?(this._selectedItem.dropdown.open(),this._selectedItem.dropdown._selectItem()):t.keyCode===e.KEY.ENTER&&this._selectedItem.click():t.keyCode===e.KEY.LEFT&&this._selectedItem.parentNode.parentNode.classList.contains("dropdownMenuOpen")&&(this.close(!0),this._parentDropdown&&this._parentDropdown._dropdownNode.focus()))}else this._selectItem(n[0]);e.stop(t)}}else t.keyCode===e.KEY.ESCAPE&&(this.close(!0),e.stop(t))},_selectItem:function(e){var t=e||this.getItems()[0];t&&(this._selectedItem&&this._selectedItem.classList.remove("dropdownMenuItemSelected"),this._selectedItem=t,this._selectedItem.classList.add("dropdownMenuItemSelected")),document.activeElement!==this._dropdownNode&&this._dropdownNode.focus()},submenuOpen:function(e){e!==this._selectedSubmenu&&(this._closeSelectedSubmenu(),this._selectedSubmenu=e)
},_closeSelectedSubmenu:function(){for(var e=this._selectedSubmenu;e;)e.close(),e=e._selectedSubmenu},destroy:function(){this.empty(),this._boundAutoDismiss&&(e.removeAutoDismiss(this._boundAutoDismiss),this._boundAutoDismiss=null)},appendMenuItem:function(e,t){var n=i(e,t);return this._dropdownNode.appendChild(n),n},appendSeparator:function(){var e=r();return this._dropdownNode.appendChild(e),e}},n.prototype.constructor=n,{Dropdown:n,appendKeyBindingString:o,createMenuItem:i,createSeparator:r}}),define("text",["module"],function(e){var t,n,i,r,o,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,u=c&&location.protocol&&location.protocol.replace(/\:/,""),h=c&&location.hostname,d=c&&(location.port||void 0),p={},f=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(i){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,i,r=!1,o=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!s||o>1)?(t=e.substring(0,o),n=e.substring(o+1,e.length)):t=e,i=n||t,o=i.indexOf("!"),-1!==o&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,r){var o,s,a,l=t.xdRegExp.exec(e);return l?(o=l[2],s=l[3],s=s.split(":"),a=s[1],s=s[0],!(o&&o!==n||s&&s.toLowerCase()!==i.toLowerCase()||(a||s)&&a!==r)):!0},finishLoad:function(e,n,i,r){i=n?t.strip(i):i,f.isBuild&&(p[e]=i),r(i)},load:function(e,n,i,r){if(r&&r.isBuild&&!r.inlineText)return void i();f.isBuild=r&&r.isBuild;var o=t.parseName(e),s=o.moduleName+(o.ext?"."+o.ext:""),a=n.toUrl(s),l=f.useXhr||t.useXhr;return 0===a.indexOf("empty:")?void i():void(!c||l(a,u,h,d)?t.get(a,function(n){t.finishLoad(e,o.strip,n,i)},function(e){i.error&&i.error(e)}):n([s],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)}))},write:function(e,n,i){if(p.hasOwnProperty(n)){var r=t.jsEscape(p[n]);i.asModule(e+"!"+n,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,n,i,r,o){var s=t.parseName(n),a=s.ext?"."+s.ext:"",l=s.moduleName+a,c=i.toUrl(s.moduleName+a)+".js";t.load(l,i,function(){var n=function(e){return r(c,e)};n.asModule=function(e,t){return r.asModule(e,c,t)},t.write(e,l,n,o)},o)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var r=n.readFileSync(e,"utf8");0===r.indexOf("")&&(r=r.substring(1)),t(r)}catch(o){i&&i(o)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,i,r){var o,s=t.createXhr();if(s.open("GET",e,!0),r)for(o in r)r.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),r[o]);f.onXhr&&f.onXhr(s,e),s.onreadystatechange=function(){var t,r;4===s.readyState&&(t=s.status||0,t>399&&600>t?(r=new Error(e+" HTTP status: "+t),r.xhr=s,i&&i(r)):n(s.responseText),f.onXhrComplete&&f.onXhrComplete(s,e))},s.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,r="utf-8",o=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),l="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(s),n.append(i);l=String(n.toString())}finally{a.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,r=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,s,a,l={};o&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),n.init(a,1,0,!1),s=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),s.init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),l),s.close(),n.close(),t(l.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),t}),define("text!orion/webui/dropdowntriggerbutton.html",[],function(){return'<button class="dropdownTrigger">${ButtonText}<!--span class="dropdownArrowDown core-sprite-openarrow"></span--></button><ul class="dropdownMenu"></ul>'}),define("text!orion/webui/dropdowntriggerbuttonwitharrow.html",[],function(){return'<button class="dropdownTrigger dropdownDefaultButton">${ButtonText}<span class="dropdownArrowDown core-sprite-openarrow"></span></button><ul class="dropdownMenu"></ul>'}),define("text!orion/webui/checkedmenuitem.html",[],function(){return'<li><label class="dropdownMenuItem"><input class="checkedMenuItem" role="menuitem" type="checkbox" />${ItemText}</label></li>'}),define("orion/webui/tooltip",["orion/webui/littlelib"],function(e){function t(e){this._init(e)}return t.prototype={_init:function(t){if(this._node=e.node(t.node),!this._node)throw"no dom node for tooltip found";this._position=t.position||["right","above","below","left"],this._text=t.text,this._hideDelay=void 0===t.hideDelay?200:t.hideDelay,this._tailSize=t.tailSize||10,this._trigger=t.trigger||"mouseover",this._afterShowing=t.afterShowing,this._afterHiding=t.afterHiding;var n=this;if("click"===this._trigger)this._showDelay=0,this._node.addEventListener("click",this._clickHandler=function(t){t.target===n._node&&(n.show(),e.stop(t))},!1);else if("mouseover"===this._trigger){this._showDelay=void 0===t.showDelay?500:t.showDelay;var i=["mouseout","click"];this._node.addEventListener("mouseover",this._mouseoverHandler=function(t){e.contains(n._node,t.target)&&(n.show(),e.stop(t))},!1),this._leaveHandler=function(t){e.contains(n._node,t.target)&&n.hide()};for(var r=0;r<i.length;r++)this._node.addEventListener(i[r],this._leaveHandler,!1)}else"focus"===this._trigger&&(this._showDelay=void 0===t.showDelay?0:t.showDelay,this._hideDelay=void 0===t.hideDelay?0:t.hideDelay,this._node.addEventListener("focus",this._focusHandler=function(t){e.contains(n._node,t.target)&&n.show()},!1),this._blurHandler=function(t){e.contains(n._node,t.target)&&n.hide()},this._node.addEventListener("blur",this._blurHandler,!1))},_makeTipNode:function(){if(!this._tip){if(this._tip=document.createElement("span"),this._tip.classList.add("tooltipContainer"),this._tipInner=document.createElement("div"),this._tipInner.classList.add("tooltip"),this._text){this._tipTextContent=document.createElement("div"),this._tipTextContent.classList.add("textContent"),this._tipInner.appendChild(this._tipTextContent);var t=document.createTextNode(this._text);this._tipTextContent.appendChild(t)}this._tip.appendChild(this._tipInner),document.body.appendChild(this._tip);var n=this;e.addAutoDismiss([this._tip,this._node],function(){n.hide()}),"mouseover"===this._trigger&&(this._tipInner.role="tooltip",this._tipInner.id="tooltip"+(new Date).getTime().toString(),this._node.setAttribute("aria-describedby",this._tipInner.id),this._tip.addEventListener("mouseover",function(){n._timeout&&(window.clearTimeout(n._timeout),n._timeout=null),n._tip.addEventListener("mouseout",function(t){e.contains(n._tip,t.target)&&(n.hide(),e.stop(t))},!1)},!1))}return this._tip},_positionTip:function(t,n){this._makeTipNode(),this._tip.classList.add("tooltipShowing"),"left"===t?this._tipInner.classList.add("left"):this._tipInner.classList.remove("left");var i,r=this._node;for(i=e.bounds(r);r&&!i.width&&!i.height;r=r.parentNode)i=e.bounds(r);var o,s,a=e.bounds(this._tipInner);switch(t){case"above":o=i.top-a.height-this._tailSize-1,s=i.left-this._tailSize;break;case"below":o=i.top+i.height+this._tailSize+1,s=i.left-this._tailSize;break;case"left":o=i.top-this._tailSize/2,s=i.left-a.width-this._tailSize-1;break;default:o=i.top-this._tailSize/2,s=i.left+i.width+this._tailSize+1}var l=e.bounds(document.documentElement);if(o+a.height>l.height){if(!n)return!1;o=l.height-a.height-1}if(s+a.width>l.width){if(!n)return!1;s=l.width-a.width-1}if(0>s){if(!n)return!1;s=4}if(0>o){if(!n)return!1;o=4}return this._tail&&this._tail.previousPosition!==t&&(this._tip.removeChild(this._tail),this._tail=null),this._tail||(this._tail=document.createElement("span"),this._tail.classList.add("tooltipTailFrom"+t),"above"===t||"left"===t?this._tip.appendChild(this._tail):this._tip.insertBefore(this._tail,this._tipInner),this._tail.previousPosition=t),this._tip.style.top=o+"px",this._tip.style.left=s+"px",!0},contentContainer:function(){return this._makeTipNode(),this._tipInner},isShowing:function(){return this._tip&&this._tip.classList.contains("tooltipShowing")},show:function(){this.isShowing()||(this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),this._showDelay?this._timeout=window.setTimeout(this._showImmediately.bind(this),this._showDelay):this._showImmediately())},_showImmediately:function(){for(var e=!1,t=0;!e&&t<this._position.length;)e=this._positionTip(this._position[t]),t++;e||this._positionTip(this._position[0],!0),this._afterShowing&&this._afterShowing()},hide:function(e){if(this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),this.isShowing()){void 0===e&&(e=this._hideDelay);var t=this;this._timeout=window.setTimeout(function(){t._tip.classList.remove("tooltipShowing"),t._tip.removeAttribute("style"),t._afterHiding&&t._afterHiding()},e)}},destroy:function(){if(this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),this._tip&&(document.body.removeChild(this._tip),this._tip=null,this._tipInner=null,this._tipTextContent=null,this._tail=null),this._node){this._node.removeEventListener("click",this._clickHandler,!1),this._node.removeEventListener("mouseover",this._mouseoverHandler,!1),this._node.removeEventListener("focus",this._focusHandler,!1),this._node.removeEventListener("blur",this._blurHandler,!1);for(var e=["mouseout","click"],t=0;t<e.length;t++)this._node.removeEventListener(e[t],this._leaveHandler,!1)}}},t.prototype.constructor=t,{Tooltip:t}}),define("orion/commands",["orion/webui/littlelib","orion/commandsProxy","orion/webui/dropdown","text!orion/webui/dropdowntriggerbutton.html","text!orion/webui/dropdowntriggerbuttonwitharrow.html","text!orion/webui/checkedmenuitem.html","orion/webui/tooltip"],function(e,t,n,i,r,o,s){function a(e){b=e}function l(e){var t=e.invocation;if(t){var n=e.command;if(n.hrefCallback){var i=n.hrefCallback.call(t.handler||window,t);return i.then?i.then(function(e){window.open(e)}):window.open(i),!0}if(t.commandRegistry)return t.commandRegistry._invoke(t),!0;if(n.onClick||n.callback)return window.setTimeout(function(){(n.onClick||n.callback).call(t.handler||window,t)},0),!0}return!1}function c(t,n){for(var i in n)if(n[i]&&n[i].keyBinding&&n[i].command&&n[i].keyBinding.match(t)){var r=n[i],o=r.keyBinding;if((!o.domScope||e.contains(e.node(o.domScope),t.target))&&l(r))return void e.stop(t)}}function u(){var e={};if(b){var t,n,i;for(n=Object.keys(C),t=0;t<n.length;t++)i=n[t],e[i]=C[i];var r=b();for(n=Object.keys(r),t=0;t<n.length;t++)i=n[t],e[i]=r[i]}else e=C;return e}function h(e){c(e,u())}function d(e,t,n){t.classList.add("commandImage");var i;return e.imageClass?e.addImageClassToElement?t.classList.add(e.imageClass):(i=document.createElement("span"),t.appendChild(i),i.classList.add(e.spriteClass),i.classList.add(e.imageClass)):(i=new Image,i.alt=e.name,i.name=n,i.id=n,i.src=e.image,t.appendChild(i)),i}function p(t,o,s,a,l,c,u,h,p,f){if(t=e.node(t),!t)throw"no parent node was specified";var m=document.createRange();m.selectNode(t);var g=m.createContextualFragment(p?r:i);e.processTextNodes(g,{ButtonText:o}),t.appendChild(g);var v,y,_=t.lastChild;return p?(v=_.previousSibling,y=v.lastChild):v=_.previousSibling,a?v.classList.add(a):(v.classList.add("orionButton"),v.classList.add("commandButton")),f&&f.split(" ").forEach(v.classList.add.bind(v.classList)),l&&(c||(v.textContent="",v.setAttribute("aria-label",o)),d({spriteClass:"commandSprite",imageClass:l},v,o),v.classList.add("orionButton")),v.dropdown=new n.Dropdown({dropdown:_,populate:s,selectionClass:u,skipTriggerEventListeners:!!y,positioningNode:h}),_.dropdown=v.dropdown,{menuButton:v,menu:_,dropdown:v.dropdown,dropdownArrow:y}}function f(t,n,i,r){if(t=e.node(t),!t)throw"no parent node was specified";var s=document.createRange();s.selectNode(t);var a=s.createContextualFragment(o);e.processTextNodes(a,{ItemText:n}),t.appendChild(a);var l=t.lastChild,c=e.$(".checkedMenuItem",l);return c.checked=i,c.addEventListener("change",r,!1),c}function m(t,n,i,r,o,a,l){var c,u;a=a||!n.name&&n.hasImage();var h=function(){if(a)n.hasImage()?(d(n,c,r),n.name&&c.setAttribute("aria-label",n.name)):(c.classList.add("commandButton"),c.classList.add("commandMissingImageButton"),c.appendChild(document.createTextNode(n.name)));else{c.classList.add("commandButton");var e=document.createTextNode(n.name);c.appendChild(e)}};if(n.hrefCallback){c=u=document.createElement("a"),c.id=r,a&&n.hasImage()?d(n,c,r):(c.className="commandLink",c.appendChild(document.createTextNode(n.name)));var p=n.hrefCallback.call(i.handler,i);p.then?p.then(function(e){c.href=e}):c.href=p?p:"#"}else{if("switch"===n.type){c=document.createElement("div"),c.tabIndex=0,c.className="orionSwitch";var f=u=document.createElement("input");f.type="checkbox",f.className="orionSwitchCheck",f.id="orionSwitchCheck"+n.id,t.id&&(f.id=f.id+t.id),c.appendChild(f);var m=document.createElement("label");m.className="orionSwitchLabel",m.setAttribute("for",f.id);var g=document.createElement("span");g.className="orionSwitchInner";var v=document.createElement("span");v.className="orionSwitchSwitch",m.appendChild(g),m.appendChild(v),c.appendChild(m),c.addEventListener("keydown",function(t){(t.keyCode===e.KEY.ENTER||t.keyCode===e.KEY.SPACE)&&f.click()},!1),f.checked=n.checked,g.classList.add(n.imageClass)}else"toggle"===n.type?(c=u=document.createElement("button"),c.className="orionButton",c.classList.add(n.checked?"orionToggleOn":"orionToggleOff"),c.id="orionToggle"+n.id,t.id&&(c.id=c.id+t.id),h()):(c=u=document.createElement("button"),c.className="orionButton",n.extraClass&&c.classList.add(n.extraClass),h());var y=l||n.callback;if(y){var _=function(){y.call(i.handler,i)};n.onClick=y,u.addEventListener("click",function(e){var t;t="switch"===n.type||"toggle"===n.type?function(e){"toggle"===n.type?(e&&(n.checked=!n.checked),n.checked?(c.classList.remove("orionToggleOff"),c.classList.add("orionToggleOn"),c.classList.add("orionToggleAnimate")):(c.classList.remove("orionToggleOn"),c.classList.add("orionToggleOff"),c.classList.add("orionToggleAnimate"))):e?n.checked=f.checked:f.checked=!f.checked,e&&window.setTimeout(_,250)}:function(e){e&&_()},n.preCallback?n.preCallback(i).then(function(e){t(e)}):t(!0),e.stopPropagation()},!1)}}if("ul"===t.nodeName.toLowerCase()){var b=document.createElement("li");t.appendChild(b),t=b}else c.classList.add("commandMargins");return t.appendChild(c),n.tooltip&&(c.commandTooltip=new s.Tooltip({node:c,text:n.tooltip,position:["above","below","right","left"]})),o&&(C[n.id]={keyBinding:o,command:n,invocation:i}),c}function g(t,i,r,o,a,l){var c,u,h=t.dropdown;if(i.hrefCallback){u=n.createMenuItem(i.name,"a"),c=u.firstElementChild;var d=i.hrefCallback.call(r.handler,r);d.then?d.then(function(e){c.href=e}):c.href=d?d:"#",c.addEventListener("keydown",function(t){(t.keyCode===e.KEY.ENTER||t.keyCode===e.KEY.SPACE)&&c.click()},!1)}else{u=n.createMenuItem(i.name),c=u.firstElementChild;var p=a||i.callback;p&&(i.onClick=p,c.addEventListener("click",function(){h&&h.close(!0),p.call(r.handler,r)},!1),c.addEventListener("keydown",function(t){(t.keyCode===e.KEY.ENTER||t.keyCode===e.KEY.SPACE)&&(t.preventDefault(),c.click())},!1))}return i.tooltip&&(c.commandTooltip=new s.Tooltip({node:c,text:i.tooltip,position:["above","below","right","left"]})),l&&n.appendKeyBindingString(c,l),t.appendChild(u),o&&(C[i.id]={keyBinding:o,command:i,invocation:r}),c}function v(e,t,n,i,r){this.commandRegistry=r,this.handler=e,this.items=t,this.userData=n,this.command=i,i.parameters&&(this.parameters=i.parameters.makeCopy()),this.id=i.id}function y(e){this._init(e)}var _="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAAtJREFUCNdjIBEAAAAwAAFletZ8AAAAAElFTkSuQmCC",b=null,C={};return window.document.addEventListener("keydown",function(e){return t.handleKeyEvent(e,h)},!1),v.prototype={collectsParameters:function(){return this.commandRegistry&&this.commandRegistry.collectsParameters()},makeCopy:function(e){var t=new v(this.handler,this.items,this.userData,this.command,this.commandRegistry);return t.domNode=this.domNode,t.domParent=this.domParent,e?t.parameters=e.makeCopy():this.parameters&&(t.parameters=this.parameters.makeCopy()),t}},v.prototype.constructor=v,y.prototype={_init:function(e){this.id=e.id,this.name=e.name,this.tooltip=e.tooltip,this.callback=e.callback,this.preCallback=e.preCallback,this.hrefCallback=e.hrefCallback,this.choiceCallback=e.choiceCallback,this.positioningNode=e.positioningNode,this.image=e.image||_,this.imageClass=e.imageClass,this.addImageClassToElement=e.addImageClassToElement,this.extraClass=e.extraClass,this.selectionClass=e.selectionClass,this.spriteClass=e.spriteClass||"commandSprite",this.visibleWhen=e.visibleWhen,this.parameters=e.parameters,this.isEditor=e.isEditor,this.type=e.type,this.checked=e.checked,this.track=e.track},populateChoicesMenu:function(t,n,i,r,o){var s=this.getChoices(n,i,r),a=s.some(function(e){return e.checked});s.forEach(function(i){if(i.name){var r=document.createElement("li");t.appendChild(r);var s=document.createElement("span");if(s.tabIndex=0,s.role="menuitem",s.classList.add("dropdownMenuItem"),a){var l=document.createElement("span");l.classList.add("check"),l.appendChild(document.createTextNode(i.checked?"":"")),s.appendChild(l)}var c=document.createTextNode(i.name);s.appendChild(c),r.appendChild(s),s.choice=i,s.addEventListener("click",function(e){e.target.choice&&e.target.choice.callback.call(e.target.choice,n)},!1),s.addEventListener("keydown",function(t){(t.keyCode===e.KEY.ENTER||t.keyCode===e.KEY.SPACE)&&t.target.choice&&t.target.choice.callback.call(t.target.choice,n)},!1)}else o._generateMenuSeparator(t)})},getChoices:function(e,t,n){return this.choiceCallback?this.choiceCallback.call(t,e,n):null},makeChoiceCallback:function(e,t){return function(n){e.callback&&e.callback.call(e,t,n)}},hasImage:function(){return this.imageClass||this.image!==_}},y.prototype.constructor=y,{Command:y,CommandInvocation:v,createDropdownMenu:p,createCheckedMenuItem:f,createCommandItem:m,createCommandMenuItem:g,executeBinding:l,setKeyBindingProvider:a,localKeyBindings:C,getKeyBindings:u,processKey:h,NO_IMAGE:_,_testMethodProcessKey:c}}),define("orion/explorers/navigationUtils",[],function(){function e(e,t){r||e&&(e.push({domNode:t}),t.style.outline="none")}function t(t,n,i){if(t){var r=t.getGridNavHolder(n,!0);r&&e(r,i)}}function n(e,t){if(e)for(var n=0;n<e.length;n++)if(e[n].domNode===t)return void e.splice(n,1)}var i=navigator.userAgent,r=-1!==i.indexOf("iPad");return{addNavGrid:t,generateNavGrid:e,removeNavGrid:n}}),define("orion/PageUtil",[],function(){function e(){var e=window.location.href.split("#")[1];return e=e?"#"+e:""}function t(e){e=e||window.location.toString();var t={resource:""},n=e.indexOf("#");if(-1!==n){var i=e.substring(n+1);if(0!==i.length){var r=i.split(",");t.resource=decodeURIComponent(r[0]);for(var o=1;o<r.length;o++){var s=r[o],a=/([^=]*)(=?)(.*)/.exec(s),l=decodeURIComponent(a[1]||""),c=decodeURIComponent(a[3]||"");""!==l&&"resource"!==l&&(t[l]=c)}}}return t}function n(e,t){var n=e;if(-1===e.indexOf("://")){var r=document.createElement("a");r.href=e,n=r.href}var o=!1;return o=t?t.some(function(e){return new RegExp("^"+e+":","i").test(n)}):i.test(n),o?e:(console.log("Illegal URL Scheme: '"+e+"'"),"")}var i=new RegExp("^http[s]?","i");return{hash:e,matchResourceParameters:t,validateURLScheme:n}}),define("orion/nls/messages",{root:!0}),define("orion/nls/root/messages",{Navigator:"Navigator",Sites:"Sites",Shell:"Shell",ShellLinkWorkspace:"Shell","Get Plugins":"Get Plugins",Global:"Global",Editor:"Editor",EditorRelatedLink:"Show Current Folder",EditorRelatedLinkParent:"Show Enclosing Folder",EditorLinkWorkspace:"Edit",EditorRelatedLinkProj:"Show Project","Filter bindings":"Filter bindings","Orion Editor":"Orion Editor","Orion Image Viewer":"Orion Image Viewer","Orion Markdown Editor":"Orion Markdown Editor","Orion Markdown Viewer":"Orion Markdown Viewer","Orion JSON Editor":"Orion JSON Editor","View on Site":"View on Site","View this file or folder on a web site hosted by Orion":"View this file or folder on a web site hosted by Orion.",ShowAllKeyBindings:"Show a list of all the keybindings on this page","Show Keys":"Show Keys",HideShowBannerFooter:"Hide or show the page banner and footer","Toggle banner and footer":"Toggle banner and footer",ChooseFileOpenEditor:"Choose a file by name and open an editor on it",FindFile:"Find File Named...","System Configuration Details":"System Configuration Details","System Config Tooltip":"Go to the System Configuration Details page","Background Operations":"Background Operations","Background Operations Tooltip":"Go to the Background Operations page","Operation status is unknown":"Operation status is unknown","Unknown item":"Unknown item",NoSearchAvailableErr:"Can't search: no search service is available",Related:"Related",Options:"Options",FAQ:"FAQ","Report a Bug":"Bugs","Privacy Policy":"Privacy","Terms of Use":"Terms","Copyright Agent":"Copyright","Orion Logo":"Orion Logo","Orion is in Beta. Please try it out but BEWARE your data may be lost.":"@buildLabel@","LOG: ":"LOG: ",View:"View","no parent":"no parent","no tree model":"no tree model","no renderer":"no renderer","could not find table row ":"could not find table row ",Operations:"Operations","Operations running":"Operations running",SomeOpWarning:"Some operations finished with warning",SomeOpErr:"Some operations finished with error","no service registry":"no service registry",Tasks:"Tasks",Close:"Close","Expand all":"Expand all","Collapse all":"Collapse all",Search:"Search","Advanced search":"Advanced search",Submit:"Submit",More:"More","Recent searches":"Recent searches","Regular expression":"Regular expression","Search options":"Search options","Global search":"Global search","Orion Home":"Orion Home","Close notification":"Close notification",OpPressSpaceMsg:"Operations - Press spacebar to show current operations","Toggle side panel":"Toggle side panel","Open or close the side panel":"Open or close the side panel",Projects:"Projects","Toggle Sidebar":"Toggle Sidebar","Sample HTML5 Site":"Sample HTML5 Site","Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.":"Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.","Sample Orion Plugin":"Sample Orion Plugin","Generate a sample plugin for integrating with Orion.":"Generate a sample plugin for integrating with Orion.",Browser:"Web Browser",OutlineProgress:"Getting outline for ${0} from ${1}",outlineTimeout:"Outline service timed out. Try reloading the page and opening the outline again.",UnknownError:"An unknown error occurred.",UnknownWarning:"An unknown warning occurred.",Filter:"Filter (* = any string, ? = any character)",TemplateExplorerLabel:"Templates",OpenTemplateExplorer:"Open Template Explorer",Edit:"Edit",CentralNavTooltip:"Toggle Navigation Menu","Wrote: ${0}":"Wrote: ${0}",GenerateHTML:"Generate HTML file",GenerateHTMLTooltip:"Write an HTML file generated from the current Markdown editor content","alt text":"alt text",blockquote:"blockquote",code:"code","code (block)":"code (block)","code (span)":"code (span)",emphasis:"emphasis","fenced code (${0})":"fenced code (${0})","header (${0})":"header (${0})","horizontal rule":"horizontal rule",label:"label","link (auto)":"link (auto)","link (image)":"link (image)","link (inline)":"link (inline)","link label":"link label","link label (optional)":"link label (optional)","link (ref)":"link (ref)","list item (bullet)":"list item (bullet)","list item (numbered)":"list item (numbered)","strikethrough (${0})":"strikethrough (${0})",strong:"strong","table (${0})":"table (${0})",text:"text","title (optional)":"title (optional)",url:"url",TogglePaneOrientationTooltip:"Toggle split pane orientation",WarningHeaderTooDeep:"Header level cannot exceed 6",WarningUnorderedListItem:"Unordered list item within ordered list",WarningOrderedListItem:"Ordered list item within unordered list",WarningOrderedListShouldStartAt1:"The first item in an ordered list should have index 1",WarningLinkHasNoText:"Link has no text",WarningLinkHasNoURL:"Link has no URL",WarningUndefinedLinkId:"Undefined link ID: ${0}",PageTitleFormat:"${0} - ${1}",KeyCTRL:"Ctrl",KeySHIFT:"Shift",KeyALT:"Alt",KeyBKSPC:"Backspace",KeyDEL:"Del",KeyEND:"End",KeyENTER:"Enter",KeyESCAPE:"Esc",KeyHOME:"Home",KeyINSERT:"Ins",KeyPAGEDOWN:"Page Down",KeyPAGEUP:"Page Up",KeySPACE:"Space",KeyTAB:"Tab"}),define("orion/uiUtils",["i18n!orion/nls/messages","orion/webui/littlelib"],function(e,t){function n(n){var i="";if(h)n.mod4&&(i+=""),n.mod3&&(i+=""),n.mod2&&(i+=""),n.mod1&&(i+="");else{var r="+";n.mod1&&(i+=e.KeyCTRL+r),n.mod2&&(i+=e.KeySHIFT+r),n.mod3&&(i+=e.KeyALT+r)}if(n.alphaKey)return i+n.alphaKey;if("keypress"===n.type)return i+n.keyCode;var o=n.keyCode,s=d[o];if(s)return i+s;var a=t.keyName(o);if(a)return a=e["Key"+a]||a,i+a;var l;switch(n.keyCode){case 59:l=n.mod2?":":";";break;case 61:l=n.mod2?"+":"=";break;case 188:l=n.mod2?"<":",";break;case 190:l=n.mod2?">":".";break;case 191:l=n.mod2?"?":"/";break;case 192:l=n.mod2?"~":"`";break;case 219:l=n.mod2?"{":"[";break;case 220:l=n.mod2?"|":"\\";break;case 221:l=n.mod2?"}":"]";break;case 222:l=n.mod2?'"':"'"}return l?i+l:n.keyCode>=112&&n.keyCode<=123?i+"F"+(n.keyCode-111):i+String.fromCharCode(n.keyCode)}function i(e){for(var t="",i=e.getKeys(),r=0;r<i.length;r++)0!==r&&(t+=" "),t+=n(i[r]);return t}function r(e){var n=e.id,i=e.refNode,r=e.hideRefNode,o=e.initialText,s=e.onComplete,a=e.onEditDestroy,l=e.selectTo,c=e.isInitialValid,u=e.insertAsChild,h=!1,d=function(e){return function(l){if(!h){var u=t.node(n),d=u.value;if(u)return e&&l.keyCode===t.KEY.ESCAPE?(r&&(i.style.display="inline"),h=!0,u.parentNode.removeChild(u),void(a&&a())):void(e&&l.keyCode!==t.KEY.ENTER||(0===d.length||!c&&d===o?(r&&(i.style.display="inline"),h=!0):(s(d),r&&i.parentNode&&(i.style.display="inline"),h=!0),u.parentNode&&u.parentNode.removeChild(u),a&&a()))}}},p=document.createElement("input");p.id=n,p.value=o||"",u?i.appendChild(p):i.parentNode.insertBefore(p,i.nextSibling),p.classList.add("userEditBoxPrompt"),r&&(i.style.display="none"),p.addEventListener("keydown",d(!0),!1),p.addEventListener("blur",d(!1),!1),window.setTimeout(function(){if(p.focus(),o){var e=t.node(n),i=l?o.indexOf(l):-1;if(i>0)if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",0),r.moveEnd("character",i),r.select()}else e.setSelectionRange?e.setSelectionRange(0,i):void 0!==e.selectionStart&&(e.selectionStart=0,e.selectionEnd=i);else e.select()}},0)}function o(e){var t=-1!==window.navigator.platform.indexOf("Mac");return t&&e.metaKey||!t&&e.ctrlKey}function s(e,t){t&&o(t)?window.open(e):window.location=e}function a(e,n){var i=document.createElement("button");return i.className="orionButton commandButton commandMargins",i.addEventListener("click",function(e){n(),t.stop(e)},!1),e&&i.appendChild(document.createTextNode(e)),i}function l(){}function c(e,t){if(!e||!e.tagName)return!1;switch(e.tagName.toLowerCase()){case"button":case"fieldset":case"form":case"input":case"keygen":case"label":case"legend":case"meter":case"optgroup":case"output":case"progress":case"select":case"textarea":return!0}return e.parentNode===t?!1:e.parentNode&&c(e.parentNode,t)}function u(e,t,n){var i=n?0:1;return e.substring(0,e.length-encodeURIComponent(t).length-i)}var h=-1!==navigator.platform.indexOf("Mac"),d=Object.create(null);return d[t.KEY.DOWN]="",d[t.KEY.UP]="",d[t.KEY.RIGHT]="",d[t.KEY.LEFT]="",h&&(d[t.KEY.BKSPC]="",d[t.KEY.DEL]="",d[t.KEY.END]="",d[t.KEY.ENTER]="",d[t.KEY.ESCAPE]="",d[t.KEY.HOME]="",d[t.KEY.PAGEDOWN]="",d[t.KEY.PAGEUP]="",d[t.KEY.SPACE]="",d[t.KEY.TAB]=""),{getUserKeyString:i,getUserText:r,openInNewWindow:o,followLink:s,createButton:a,createDropdownButton:l,isFormElement:c,path2FolderName:u}}),define("text!orion/webui/submenutriggerbutton.html",[],function(){return'<li class="dropdownSubMenu"><span class="dropdownTrigger dropdownMenuItem" role="menuitem" tabindex="0"><span class="dropdownCommandName">${ButtonText}</span><span class="dropdownArrowRight core-sprite-closedarrow"></span></span><ul class="dropdownMenu"></ul></li>'}),define("orion/commandRegistry",["orion/commands","orion/explorers/navigationUtils","orion/PageUtil","orion/uiUtils","orion/webui/littlelib","orion/webui/dropdown","orion/webui/tooltip","text!orion/webui/submenutriggerbutton.html","orion/metrics"],function(e,t,n,i,r,o,s,a,l){function c(e){this._commandList={},this._contributionsByScopeId={},this._activeBindings={},this._urlBindings={},this._pendingBindings={},this._init(e),this._parameterCollector=null}function u(e,t){this.token=e,this.parameterName=t}function h(e,t,n){this.event=e,this.handler=t,this.capture=n||!1}function d(e,t,n,i,r,o,s){this.name=e,this.type=t,this.label=n,this.value=i,this.lines=r||1,this.validator=s,this.eventListeners=Array.isArray(o)?o:o?[o]:[]}function p(e,t,n){this._storeParameters(e),this._hasOptionalParameters=t&&t.hasOptionalParameters,this._options=t,this.optionsRequested=!1,this.getParameters=n,this.clientCollect=t&&t.clientCollect,this.getParameterElement=t&&t.getParameterElement,this.getSubmitName=t&&t.getSubmitName,this.getCancelName=t&&t.getCancelName,this.message=t&&t.message}return c.prototype={_init:function(t){this._selectionService=t.selection;var n=this;e.setKeyBindingProvider(function(){return n._activeBindings})},processURL:function(e){for(var t in this._urlBindings)if(this._urlBindings[t]&&this._urlBindings[t].urlBinding&&this._urlBindings[t].command){var n=this._urlBindings[t].urlBinding.match(e);if(n){var i=this._urlBindings[t],r=i.command,o=i.invocation;if(o&&o.parameters&&r.callback){o.parameters.setValue(n.parameterName,n.parameterValue);var s=this;return void window.setTimeout(function(){s._invoke(o)},0)}}}},findCommand:function(e){return this._commandList[e]},runCommand:function(t,n,i,r,o,s){var a=this;if(n){var l=this._commandList[t],c=l&&(l.visibleWhen?l.visibleWhen(n):!0);if(c&&l.callback){var u=new e.CommandInvocation(i,n,o,l,a);return u.domParent=s,a._invoke(u,r)}}else{var h=this._urlBindings[t];if(h&&h.command&&h.command.callback)return a._invoke(h.invocation,r)}},getSelectionService:function(){return this._selectionService},setParameterCollector:function(e){this._parameterCollector=e},openParameterCollector:function(e,t,n){this._parameterCollector&&(this._parameterCollector.close(),this._parameterCollector.open(e,t,n))},confirm:function(e,t,n,i,r,o){var a=!1;if(!this._parameterCollector||r)a=window.confirm(t),o(a);else{var l=this,c=function(){o(a)},u=function(){l._parameterCollector.close()},h=function(e,r){var o=document.createElement("span");o.classList.add("parameterPrompt"),o.textContent=t,e.appendChild(o);
var s=document.createElement("button");s.addEventListener("click",function(){a=!0,c(),u()},!1),r.appendChild(s),s.appendChild(document.createTextNode(n)),s.className="dismissButton";var l=document.createElement("button");return l.addEventListener("click",function(){a=!1,u()},!1),r.appendChild(l),l.appendChild(document.createTextNode(i)),l.className="dismissButton",s};this._parameterCollector.close();var d=this._parameterCollector.open(e,h,function(){});if(!d){var p=new s.Tooltip({node:e,afterHiding:function(){this.destroy()},trigger:"click",position:["below","right","above","left"]}),f=p.contentContainer();f.classList.add("parameterPopup");var m=window.document.activeElement;u=function(){m&&m.focus(),p.destroy()};var g=document.createElement("div");g.classList.add("parameterMessage"),f.appendChild(g);var v=document.createElement("div");f.appendChild(v),v.classList.add("layoutRight"),v.classList.add("parametersDismiss");var y=h(g,v);p.show(),y&&window.setTimeout(function(){y.focus(),y.select&&y.select()},0)}}},closeParameterCollector:function(){this._parameterCollector&&this._parameterCollector.close()},collectsParameters:function(){return this._parameterCollector},_invoke:function(e,t){return this._collectAndInvoke(e.makeCopy(t),!1)},_collectAndInvoke:function(e,t,n){if(e){if(!(this._parameterCollector&&e.parameters&&e.parameters.hasParameters()&&(t||e.parameters.shouldCollectParameters())))return l.logEvent("command","invoke",e.command.id),e.command.callback.call(e.handler||window,e);var i=!1;if(e.parameters.updateParameters(e),e.parameters.shouldCollectParameters()&&(i=this._parameterCollector.collectParameters(e,n),!i)){var r=new s.Tooltip({node:e.domNode||e.domParent,afterHiding:function(){this.destroy()},trigger:"click",position:["below","right","above","left"]}),o=r.contentContainer();o.classList.add("parameterPopup");var a=window.document.activeElement,c=this._parameterCollector.getFillFunction(e,function(){a&&a.focus(),r.destroy()},n)(o);r.show(),c&&window.setTimeout(function(){c.focus(),c.select&&c.select()},0),i=!0}if(!i)return l.logEvent("command","invoke",e.command.id),e.command.callback.call(e.handler||window,e)}else window.console.log("Client attempted to invoke command without an available (rendered) command invocation")},collectParameters:function(e,t){this._collectAndInvoke(e,!0,t)},showKeyBindings:function(t){function n(t){return function(){e.executeBinding(t)}}var r,o,s={},a=[];for(var l in this._activeBindings)o=this._activeBindings[l],o&&o.keyBinding&&o.command&&(o.command.name||o.command.tooltip)&&a.push(o);a.sort(function(e,t){var n=e.command.name||e.command.tooltip,i=t.command.name||t.command.tooltip;return n.localeCompare(i)});for(var c=0;c<a.length;c++)o=a[c],o.keyBinding.scopeName?(s[o.keyBinding.scopeName]||(s[o.keyBinding.scopeName]=[]),s[o.keyBinding.scopeName].push(o)):(r=i.getUserKeyString(o.keyBinding),t.createItem(r,o.command.name||o.command.tooltip,n(o)));for(var u in s)s[u].length&&s[u].length>0&&(t.createHeader(u),s[u].forEach(function(e){r=i.getUserKeyString(e.keyBinding),t.createItem(r,e.command.name||e.command.tooltip,n(e))}))},addCommand:function(e){this._commandList[e.id]=e;var t=this._pendingBindings[e.id];if(t){var n=this;t.forEach(function(t){n._addBinding(e,t.type,t.binding,t.bindingOnly)}),delete this._pendingBindings[e.id]}},addCommandGroup:function(e,t,n,i,r,o,s,a,l,c,u){this._contributionsByScopeId[e]||(this._contributionsByScopeId[e]={});var h=this._contributionsByScopeId[e];r&&(h=this._createEntryForPath(h,r)),h[t]?(i&&(h[t].title=i),n&&(h[t].position=n),s&&(h[t].imageClass=s),a&&(h[t].tooltip=a),l&&(h[t].selectionClass=l),u&&(h[t].extraClass=u),c===!0?h[t].pretendDefaultActionId=!0:h[t].defaultActionId=c,h[t].emptyGroupMessage=o):(h[t]={title:i,position:n,emptyGroupMessage:o,imageClass:s,tooltip:a,selectionClass:l,defaultActionId:c===!0?null:c,pretendDefaultActionId:c===!0,children:{},extraClasses:u},h.sortedContributions=null)},_createEntryForPath:function(e,t){if(t){var n=t.split("/");n.forEach(function(t){t.length>1&&(e[t]||(e[t]={position:0,children:{}},e.sortedContributions=null),e=e[t].children)})}return e},registerSelectionService:function(e,t){this._contributionsByScopeId[e]||(this._contributionsByScopeId[e]={}),this._contributionsByScopeId[e].localSelectionService=t},registerCommandContribution:function(e,t,n,i,r,o,s){this._contributionsByScopeId[e]||(this._contributionsByScopeId[e]={});var a=this._contributionsByScopeId[e];i&&(a=this._createEntryForPath(a,i)),a[t]={position:n};var l;o&&(l=this._commandList[t],l?this._addBinding(l,"key",o,r):this._addPendingBinding(t,"key",o,r)),s&&(l=this._commandList[t],l?this._addBinding(l,"url",s,r):this._addPendingBinding(t,"url",s,r)),a.sortedContributions=null},unregisterCommandContribution:function(e,t,n){if(this._contributionsByScopeId[e]){delete this._commandList[t],delete this._activeBindings[t],delete this._urlBindings[t],delete this._pendingBindings[t];var i=this._contributionsByScopeId[e];if(n){var r=n.split("/");r.forEach(function(e){if(e.length>1){if(!i[e])return;i=i[e].children}})}delete i[t],i.sortedContributions=null}},_addBinding:function(e,t,n,i){if(!e.id)throw new Error("No command id: "+e);"key"===t?this._activeBindings[e.id]={command:e,keyBinding:n,bindingOnly:i}:"url"===t&&(this._urlBindings[e.id]={command:e,urlBinding:n,bindingOnly:i})},_addPendingBinding:function(e,t,n,i){this._pendingBindings[e]=this._pendingBindings[e]||[],this._pendingBindings[e].push({type:t,binding:n,bindingOnly:i})},_checkForTrailingSeparator:function(e,t,n){var i;if(("tool"===t||"button"===t)&&(i=e.childNodes.length>0?e.childNodes[e.childNodes.length-1]:null,i&&i.classList.contains("commandSeparator")))return n?(e.removeChild(i),!1):!0;if("menu"===t){var o=r.$$array("li > *",e);if(o.length>0&&o[o.length-1].classList.contains("dropdownSeparator"))return i=o[o.length-1],n?(i.parentNode.parentNode.removeChild(i.parentNode),!1):!0}return!1},renderCommands:function(e,t,n,i,o,s,a){if("string"!=typeof e)throw"a scope id for rendering must be specified";if(t=r.node(t),!t)throw"no parent";var l=this._contributionsByScopeId[e];if(!n&&l){var c=l.localSelectionService||this._selectionService,u=this;return void(c&&c.getSelections(function(n){u.renderCommands(e,t,n,i,o,s)}))}l&&(this._render(l,t,n,i,o||"button",s,a),this._checkForTrailingSeparator(t,o,!0))},destroy:function(e){if(e=r.node(e),!e)throw"no parent";for(;e.hasChildNodes();){var t=e.firstChild;t.commandTooltip&&t.commandTooltip.destroy(),t.emptyGroupTooltip&&t.emptyGroupTooltip.destroy(),this.destroy(t),e.removeChild(t)}},_render:function(n,r,o,a,l,c,u){var h=n.sortedContributions;if(!h){h=[];var d=!1;for(var p in n)if(Object.prototype.hasOwnProperty.call(n,p)){var f=n[p];f&&"number"==typeof f.position&&(f.id=p,h.push(f),d=!0)}d&&(h.sort(function(e,t){return e.position-t.position}),n.sortedContributions=h)}var m=0,g=this;h.forEach(function(n){function h(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var d,p;if(n.imageClass||(n.imageClass=null),n.children&&Object.getOwnPropertyNames(n.children).length>0){var f,v=n.children;if("tool"===l||"button"===l)if(n.title){var y;if(n.defaultActionId){n.pretendDefaultActionId=n.defaultActionId===!0;var _=g._commandList[n.defaultActionId];_&&(_.visibleWhen?_.visibleWhen(o):!0)?(y=new e.CommandInvocation(a,o,c,_,g),y.domParent=r):n.pretendDefaultActionId=!0}f=g._createDropdownMenu(r,n.title,null,null,n.imageClass,n.tooltip,n.selectionClass,null,y,n.pretendDefaultActionId,n.extraClasses),u&&t.generateNavGrid(u,f.menuButton),f&&(g._render(n.children,f.menu,o,a,"menu",c,u),g._checkForTrailingSeparator(f.menu,"menu",!0),0===f.menu.childNodes.length?n.emptyGroupMessage?f.menuButton.emptyGroupTooltip||(f.menuButton.emptyGroupTooltip=new s.Tooltip({node:f.menuButton,text:n.emptyGroupMessage,trigger:"click",position:["below","right","above","left"]})):(u&&t.removeNavGrid(u,f.menuButton),h(f.menu),h(f.menuButton),h(f.destroyButton)):f.menuButton.style.visibility="visible")}else{var b;if(r.childNodes.length>0&&!g._checkForTrailingSeparator(r,l)&&(b=g.generateSeparatorImage(r)),g._render(v,r,o,a,l,c,u),r.childNodes.length>0){var C=r.childNodes[r.childNodes.length-1];C!==b&&(b=g.generateSeparatorImage(r))}}else if(n.title){var w=g._createDropdownMenu(r,n.title,!0,null,null,n.imageClass);w&&(g._render(v,w.menu,o,a,"menu",c,u),g._checkForTrailingSeparator(w.menu,"menu",!0),0===w.menu.childNodes.length&&w.destroyButton&&r.removeChild(w.destroyButton))}else r.childNodes.length>0&&g._generateMenuSeparator(r),g._render(v,r,o,a,l,c,u),r.childNodes.length>0&&g._generateMenuSeparator(r)}else{var S=g._commandList[n.id],E=S?!0:!1,x=null,L=null;if(S){p=new e.CommandInvocation(a,o,c,S,g),p.domParent=r;var T=!1;try{T=E&&(S.visibleWhen?S.visibleWhen(o):!0)}catch(k){throw console.log(k),k}g._activeBindings[S.id]&&g._activeBindings[S.id].keyBinding&&(x=g._activeBindings[S.id],x.invocation=T?p:null,x.bindingOnly&&(E=!1)),g._urlBindings[S.id]&&g._urlBindings[S.id].urlBinding&&(L=g._urlBindings[S.id],L.invocation=T?p:null,L.bindingOnly&&(E=!1)),E=E&&T}if(E)if(S.choiceCallback){var N,A;"tool"===l||"button"===l?(N=r,A=!1,"ul"===r.nodeName.toLowerCase()&&(N=document.createElement("li"),r.appendChild(N))):(N=r,A=!0);var P=function(e){S.populateChoicesMenu(e,o,a,c,g)};g._createDropdownMenu(N,S.name,A,P.bind(S),S.imageClass,S.tooltip||S.title,S.selectionClass,S.positioningNode)}else{p.handler=p.handler||this,p.domParent=r;var O,R=function(){g._invoke(p)};if("menu"===l){var I=null;x&&x.keyBinding&&(I=i.getUserKeyString(x.keyBinding)),O=e.createCommandMenuItem(r,S,p,null,R,I)}else if("quickfix"===l){d=l+S.id+m;var D=document.createElement("div");r.appendChild(D),O=e.createCommandItem(D,S,p,d,null,"button"===l,R)}else d=l+S.id+m,O=e.createCommandItem(r,S,p,d,null,"tool"===l,R);t.generateNavGrid(u,O),p.domNode=O,m++}}})},_createDropdownMenu:function(t,n,i,l,c,u,h,d,p,f,m){if(t=r.node(t),!t||!r.contains(document.body,t))return null;var g,v,y,_,b=t;if(i){var C=document.createRange();C.selectNode(t);var w=C.createContextualFragment(a);r.processTextNodes(w,{ButtonText:n}),t.appendChild(w),_=t.lastChild,v=_.lastChild,g=v.previousSibling,g.dropdown=new o.Dropdown({dropdown:v,populate:l,parentDropdown:t.dropdown}),v.dropdown=g.dropdown}else{"ul"===t.nodeName.toLowerCase()&&(b=document.createElement("li"),t.appendChild(b),_=b);var S=null;c&&(S="dropdownButtonWithIcon",u=u||n),u=c?u||n:u;var E=e.createDropdownMenu(b,n,l,S,c,!1,h,d,p||f,m);if(y=E.dropdownArrow,g=E.menuButton,y){p&&(p.domNode=E.menuButton);var x=this;g.onclick=function(e){var t=r.bounds(y);(e.clientX>=t.left||f===!0)&&E.dropdown?E.dropdown.toggle(e):x._invoke(p)},E.dropdown&&(g.onkeydown=function(e){r.KEY.DOWN===e.keyCode&&(E.dropdown.toggle(e),r.stop(e))})}v=E.menu;var L,T=p&&p.command&&(p.command.tooltip||p.command.name);T?L=p.command.tooltip||p.command.name:T&&(L=u),L&&(g.commandTooltip=new s.Tooltip({node:g,text:L,position:["above","below","right","left"]}))}return{menuButton:g,menu:v,dropdown:g.dropdown,destroyButton:_,dropdownArrow:y}},_generateMenuSeparator:function(e){if(!this._checkForTrailingSeparator(e,"menu")){var t=document.createElement("li");t.classList.add("dropdownSeparator");var n=document.createElement("span");n.classList.add("dropdownSeparator"),t.appendChild(n),e.appendChild(t)}},generateSeparatorImage:function(e){var t;return"ul"===e.nodeName.toLowerCase()?(t=document.createElement("li"),e.appendChild(t)):(t=document.createElement("span"),e.appendChild(t)),t.classList.add("core-sprite-sep"),t.classList.add("imageSprite"),t.classList.add("commandSeparator"),t}},c.prototype.constructor=c,u.prototype={match:function(e){var t=n.matchResourceParameters(e);return"undefined"!=typeof t[this.token]?(this.parameterValue=t[this.token],this):null}},u.prototype.constructor=u,h.prototype.constructor=h,d.prototype={optionsRequested:function(){return this.optionsRequested}},d.prototype.constructor=d,p.prototype={_storeParameters:function(e){if(this.parameterTable=null,e){var t=this.parameterTable={};e.forEach(function(e){t[e.name]=e})}},updateParameters:function(e){"function"==typeof this.getParameters&&this._storeParameters(this.getParameters(e))},hasParameters:function(){return null!==this.parameterTable},shouldCollectParameters:function(){return!this.clientCollect&&this.hasParameters()},parameterNamed:function(e){return this.parameterTable[e]},valueFor:function(e){var t=this.parameterTable[e];return t?t.value:null},setValue:function(e,t){var n=this.parameterTable[e];n&&(n.value=t)},forEach:function(e){for(var t in this.parameterTable)this.parameterTable[t].type&&this.parameterTable[t].name&&e(this.parameterTable[t])},validate:function(e,t){var n=this.parameterTable[e];return n&&n.validator?n.validator(t):!0},makeCopy:function(){var e=[];this.forEach(function(t){var n=new d(t.name,t.type,t.label,t.value,t.lines,t.eventListeners,t.validator);e.push(n)});var t=new p(e,this._options,this.getParameters);return t.clientCollect=this.clientCollect,t.message=this.message,t},hasOptionalParameters:function(){return this._hasOptionalParameters}},p.prototype.constructor=p,{CommandRegistry:c,URLBinding:u,ParametersDescription:p,CommandParameter:d,CommandEventListener:h}}),define("orion/navigate/nls/messages",{root:!0}),define("orion/navigate/nls/root/messages",{Navigator:"Navigator","Strings Xtrnalizr":"Strings Xtrnalizr","Externalize strings":"Externalize strings from JavaScript files in this folder.",NotSupportFileSystem:"${0} is not supported in this file system",SrcNotSupportBinRead:"Source file service does not support binary read",TargetNotSupportBinWrite:"Target file service does not support binary write",NoFileSrv:"No matching file service for location: ${0}","Choose a Folder":"Choose a Folder","Copy of ${0}":"Copy of ${0}",EnterName:"Enter a new name for '${0}'",ChooseFolder:"Choose folder...",Rename:"Rename",RenameFilesFolders:"Rename the selected files or folders",CompareEach:"Compare with each other","Compare 2 files":"Compare the selected 2 files with each other","Compare with...":"Compare with...",CompareFolders:"Compare the selected folder with a specified folder",Delete:"Delete","Unknown item":"Unknown item","delete item msg":"Are you sure you want to delete these ${0} items?",DeleteTrg:"Are you sure you want to delete '${0}'?",Zip:"Zip",ZipDL:"Create a zip file of the folder contents and download it","New File":"File","Create a new file":"Create a new file","Name:":"Name:","New Folder":"Folder","Folder name:":"Folder name:","Create a new folder":"Create a new folder","Creating folder":"Creating folder",Folder:"Folder","Create an empty folder":"Create an empty folder",CreateEmptyMsg:"Create an empty folder on the Orion server. You can import, upload, or create content in the editor.","Sample HTML5 Site":"Sample HTML5 Site","Generate a sample":"Generate a sample",'Generate an HTML5 "Hello World" website, including JavaScript, HTML, and CSS files.':'Generate an HTML5 "Hello World" website, including JavaScript, HTML, and CSS files.',"Creating a folder for ${0}":"Creating a folder for ${0}","SFTP Import":"SFTP Import","Import content from SFTP":"Import content from SFTP","Imported Content":"Imported Content","Upload a Zip":"Upload a Zip","Upload content from a local zip file":"Upload content from a local zip file","Uploaded Content":"Uploaded Content","Clone Git Repository":"Clone Git Repository","Clone a git repository":"Clone a git repository","Link to Server":"Link to Server",LinkContent:"Link to existing content on the server",CreateLinkedFolder:"Create a folder that links to an existing folder on the server.","Server path:":"Server path:",NameLocationNotClear:"The name and server location were not specified.","Go Up":"Go Up",GoUpToParent:"Move up to the parent folder","Go Into":"Go Into",GoSelectedFolder:"Move into the selected folder","File or zip archive":"File or zip archive",ImportLcFile:"Import a file or zip archive from your local file system","SFTP from...":"SFTP",CpyFrmSftp:"Copy files and folders from a specified SFTP connection","Importing from ${0}":"Importing from ${0}","SFTP to...":"SFTP",CpyToSftp:"Copy files and folders to a specified SFTP location",Exporting:"Exporting to ${0}","Pasting ${0}":"Pasting ${0}","Copy to":"Copy to","Move to":"Move to","Copying ${0}":"Copying ${0}","Moving ${0}":"Moving ${0}","Renaming ${0}":"Renaming ${0}","Deleting ${0}":"Deleting ${0}","Creating ${0}":"Creating ${0}","Linking to ${0}":"Linking to ${0}",MvToLocation:"Move files and folders to a new location",Cut:"Cut",Copy:"Copy","Fetching children of ":"Fetching children of ",Paste:"Paste","Open With":"Open With","Loading ":"Loading ",New:"New",File:"File",Actions:"Actions","Orion Content":"Orion Content","Create new content":"Create new content","Import from HTTP...":"HTTP","File URL:":"File URL:",ImportURL:"Import a file from a URL and optionally unzip it","Unzip *.zip files:":"Unzip *.zip files:","Extracted from:":"Extracted from:",FolderDropNotSupported:"Did not drop ${0}. Folder drop is not supported in this browser.",CreateFolderErr:"You cannot copy files directly into the workspace. Create a folder first.","Unzip ${0}?":"Unzip ${0}?","Upload progress: ":"Upload progress: ","Uploading ":"Uploading ","Cancel upload":"Cancel upload",UploadingFileErr:"Uploading the following file failed: ","Enter project name:":"Enter project name:","Create new project":"Create new project","Creating project ${0}":"Creating project ${0}",NoFile:"Use the ${0} menu to create new files and folders. Click a file to start coding.",Download:"Download",Download_tooltips:"Download the file contents as the displayed name","Downloading...":"Reading file contents...","Download not supported":"Contents download is not supported in this browser.",gettingContentFrom:"Getting content from ",deletingLaunchConfiguration:"Deleting launch configuration...",deployTo:"Deploy to ",deploy:"Deploy ",connect:"Connect",fetchContent:"Fetch content",fetchContentOf:"Fetch content of ",disconnectFromProject:"Disconnect from project",doNotTreatThisFolder:"Do not treat this folder as a part of the project",checkStatus:"Check status",checkApplicationStatus:"Check application status",checkApplicationState:"Check application state",stop:"Stop",start:"Start",stopApplication:"Stop application",startApplication:"Start application",manage:"Manage",manageThisApplicationOnRemote:"Manage this application on remote server",deleteLaunchConfiguration:"Delete this launch configuration",deployThisApplication:"Deploy this application",associatedFolder:"Associated Folder",associateAFolderFromThe:"Associate a folder from the workspace with this project.",convertToProject:"Convert to project",convertThisFolderIntoA:"Convert this folder into a project",thisFolderIsAProject:"This folder is a project already.",basic:"Basic","createAnEmptyProject.":"Create an empty project.",sFTP:"SFTP",createAProjectFromAn:"Create a project from an SFTP site.",readMeCommandName:"Readme File",readMeCommandTooltip:"Create a README.md file in this project",zipArchiveCommandName:"Zip archive",zipArchiveCommandTooltip:"Create a project from a local zip archive.","Url:":"Url:",notZip:"The following files are not zip files: ${0}. Would you like to continue the import?",notZipMultiple:"There are multiple non-zip files being uploaded. Would you like to continue the import?",Cancel:"Cancel",Ok:"Ok",missingCredentials:"Enter the ${0} authentication credentials associated with ${1} to check its status.",deploying:"deploying",starting:"starting",stopping:"stopping",checkingStateShortMessage:"checking status"}),define("orion/i18nUtil",["require","orion/Deferred"],function(){function e(e){var t=/\$\{([^\}]+)\}/g,n=arguments;return 2===n.length&&n[1]&&"object"==typeof n[1]?e.replace(t,function(e,t){return n[1][t]}):e.replace(t,function(e,t){return n[(t<<0)+1]})}return{formatMessage:e}}),define("orion/fileClient",["i18n!orion/navigate/nls/messages","orion/Deferred","orion/i18nUtil"],function(e,t,n){function i(t,i,r){if(!t[i])throw new Error(n.formatMessage(e.NotSupportFileSystem,i));return t[i].apply(t,r)}function r(n,o,s,a){if(!n.readBlob)throw new Error(e.SrcNotSupportBinRead);if(!s.writeBlob)throw new Error(e.TargetNotSupportBinWrite);if("/"!==o[o.length-1])return i(n,"readBlob",[o]).then(function(e){return i(s,"writeBlob",[a,e])});var l=a.substring(0,a.length-1),c=decodeURIComponent(l.substring(l.lastIndexOf("/")+1)),u=l.substring(0,l.lastIndexOf("/")+1);return i(s,"createFolder",[u,c]).then(function(){},function(){}).then(function(){return i(n,"fetchChildren",[o]).then(function(e){for(var i=[],o=0;o<e.length;++o){var l=e[o].Location,c=l;e[o].Directory&&(c=l.substring(0,l.length-1));var u=decodeURIComponent(c.substring(c.lastIndexOf("/")+1)),h=a+encodeURIComponent(u);e[o].Directory&&(h+="/"),i[o]=r(n,l,s,h)}return t.all(i)})})}function o(i,r){function o(n){var i=new t;return i.reject(e["No Matching FileService for location:"]+n),i}var s=i.getServiceReferences("orion.core.file"),a=s;if(r){a=[];for(var l=0;l<s.length;++l)r(s[l])&&a.push(s[l])}a.sort(function(e,t){var n=e.getProperty("ranking")||0,i=t.getProperty("ranking")||0;return n-i});for(var c=[],u=[],h=[],d=[],p={fetchChildren:function(){var e=new t;return e.resolve(d),e},createWorkspace:function(){var n=new t;return n.reject(e["no file service"]),n},loadWorkspaces:function(){var n=new t;return n.reject(e["no file service"]),n},loadWorkspace:function(){var n=new t;return window.setTimeout(function(){n.resolve({Directory:!0,Length:0,LocalTimeStamp:0,Name:e["File Servers"],Location:"/",Children:d,ChildrenLocation:"/"})},100),n},search:o,createProject:o,createFolder:o,createFile:o,deleteFile:o,moveFile:o,copyFile:o,read:o,write:o},f=0;f<a.length;++f){d[f]={Directory:!0,Length:0,LocalTimeStamp:0,Location:a[f].getProperty("top"),ChildrenLocation:a[f].getProperty("top"),Name:a[f].getProperty("Name")||a[f].getProperty("NameKey")};var m=a[f].getProperty("pattern")||a[f].getProperty("top").replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");Array.isArray(m)||(m=[m]);for(var g=[],v=0;v<m.length;v++){var y=m[v];"^"!==y[0]&&(y="^"+y),g.push(new RegExp(y))}c[f]=g,u[f]=i.getService(a[f]),h[f]=a[f].getProperty("Name")||a[f].getProperty("NameKey")}this._getServiceIndex=function(t){if("/"===t)return-1;if(!t||t.length&&0===t.length)return u[0]?0:-1;for(var i=0;i<c.length;++i)for(var r=0;r<c[i].length;r++)if(c[i][r].test(t))return i;throw new Error(n.formatMessage(e.NoFileSrv,t))},this._getService=function(e){var t=this._getServiceIndex(e);return-1===t?p:u[t]},this._getServiceName=function(e){var t=this._getServiceIndex(e);return-1===t?p.Name:h[t]},this._getServiceRootURL=function(e){var t=this._getServiceIndex(e);return-1===t?p.Location:d[t].Location}}return o.prototype={getService:function(e){return this._getService(e)},fileServiceName:function(e){return this._getServiceName(e)},fileServiceRootURL:function(e){return this._getServiceRootURL(e)},fetchChildren:function(e){return i(this._getService(e),"fetchChildren",arguments)},createWorkspace:function(){return i(this._getService(),"createWorkspace",arguments)},loadWorkspaces:function(){return i(this._getService(),"loadWorkspaces",arguments)},loadWorkspace:function(e){return i(this._getService(e),"loadWorkspace",arguments)},createProject:function(e){return i(this._getService(e),"createProject",arguments)},createFolder:function(e){return i(this._getService(e),"createFolder",arguments)},createFile:function(e){return i(this._getService(e),"createFile",arguments)},deleteFile:function(e){return i(this._getService(e),"deleteFile",arguments)},moveFile:function(e,t,n){var o=this._getService(e),s=this._getService(t);if(o===s)return i(o,"moveFile",arguments);var a="/"===e[e.length-1],l=t;if("/"!==l[l.length-1]&&(l+="/"),n)l+=encodeURIComponent(n);else{var c=e;a&&(c=c.substring(0,c.length-1)),l+=c.substring(c.lastIndexOf("/")+1)}return a&&"/"!==l[l.length-1]&&(l+="/"),r(o,e,s,l).then(function(){return i(o,"deleteFile",[e])})},copyFile:function(e,t,n){var o=this._getService(e),s=this._getService(t);if(o===s)return i(o,"copyFile",arguments);var a="/"===e[e.length-1],l=t;if("/"!==l[l.length-1]&&(l+="/"),n)l+=encodeURIComponent(n);else{var c=e;a&&(c=c.substring(0,c.length-1)),l+=c.substring(c.lastIndexOf("/")+1)}return a&&"/"!==l[l.length-1]&&(l+="/"),r(o,e,s,l)},read:function(e){return i(this._getService(e),"read",arguments)},readBlob:function(e){return i(this._getService(e),"readBlob",arguments)},write:function(e){return i(this._getService(e),"write",arguments)},remoteImport:function(e){return i(this._getService(e),"remoteImport",arguments)},remoteExport:function(e){return i(this._getService(e),"remoteExport",arguments)},search:function(e){return i(this._getService(e.resource),"search",arguments)}},o.prototype.constructor=o,{FileClient:o}}),define("orion/search/nls/messages",{root:!0}),define("orion/search/nls/root/messages",{"Find:":"Find:","Find With":"Find With","ReplaceWith:":"ReplaceWith:","Replace With":"Replace With","Show all":"Show all","Wrap search":"Wrap search","Incremental search":"Incremental search","Whole Word":"Whole Word","Regular expression":"Regular expression","Find after replace":"Find after replace",Options:"Options","Find next match":"Find next match","Find previous match":"Find previous match",Next:"Next",Previous:"Previous",Replace:"Replace","Replace...":"Replace...","Replace All":"Replace All","Show Replace":"Switch to Replace Mode","Hide Replace":"Switch to Search Mode","Search ${0}":"Search ${0}",TypeKeyOrWildCard:"Type a keyword or wild card to search in ","Search failed.":"Search failed.",NoMatchFound:"No matches found for ${0}","Searching...":"Searching...","ResourceChanged.":"Resource has been changed by others.","Failed to write file.":"Failed to write file.",Results:"Results",FilesAofBmatchingC:'Files ${0} of ${1} matching "${2}"',ReplaceAwithBforCofD:'Replace "${0}" with "${1}" for files ${2} of ${3}',Location:"Location","Click to compare":"Click to compare",'Search again in this folder with "${0}"':'Search again in this folder with "${0}"',"Files replaced":"Files replaced",Status:"Status",matchesReplacedMsg:"${0} out of ${1}  matches replaced.","Replace all matches with...":"Replace all matches with...","Apply Changes":"Replace Selected","Replace all selected matches":"Replace all selected matches","Hide Compare":"Hide Compare","Hide compare view of changes":"Hide compare view of changes","Show Compare":"Show Compare","Show compare view of changes":"Show compare view of changes","Show All":"Show All","Show all the results in one page":"Show all the results in one page","< Previous Page":"< Previous Page","Show previous page of search result":"Show previous page of search result","Next Page >":"Next Page >","Show next page of search result":"Show next page of search result","Next result":"Next result","Previous result":"Previous result","Expand all results":"Expand all results","Collapse all results":"Collapse all results","Writing files...":"Writing files...","Preparing preview...":"Preparing preview...","Replaced File (${0})":"Replaced File (${0})","Original File (${0})":"Original File (${0})","Sort by Name":"Sort by Name","Compare changes":"Compare changes","Search Results":"Search Results","Replace All Matches":"Replace All Matches","No matches":"No matches",Rename:"Rename",Search:"Search","All types":"All types","File type":"File type","All ${0} files":"All ${0} files","${0} is already saved":"${0} is already saved","Type a search term":"Type a search term","Type a replace term":"Type a replace term","Case sensitive":"Case sensitive","File name":"File name","Path name":"Path name",Save:"Save","Type filter text":"Type filter text","Scope Search":"Scoped Search","Open in Search page for this directory":"Open the Search page for this folder.","${0}. Try your search again.":"${0}. Try your search again.",DeleteSearchTrmMsg:"Click or use delete key to delete the search term","${0} matches":"${0} matches",regexOptionOff:"Regular expressions are off. Click here or use the options to turn them on for replacement",regexOptionOn:"Regular expressions are on. Click here or use the options to turn them off",Scope:"Scope","Show previous search terms":"Show previous search terms","Show previous replace terms":"Show previous replace terms","Show replacement preview":"Show replacement preview","File name patterns (comma-separated)":"File name patterns (comma-separated)","(* = any string, ? = any character)":"(* = any string, ? = any character)","Choose a Folder":"Choose a Folder","Remove from search results":"Remove from search results","^ Edit Search":"^ Edit Search","Preview: ":"Preview: ",fullPath:"Show Full Path",switchFullPath:"Show/hide full path"}),define("orion/regex",[],function(){function e(e){return e.replace(/([\\$\^*\/+?\.\(\)|{}\[\]])/g,"\\$&")}function t(e){var t=/^\s*\/(.+)\/([gim]{0,3})\s*$/.exec(e);return t?{pattern:t[1],flags:t[2]}:null}return{escape:e,parse:t}}),define("orion/URITemplate",[],function(){function e(e){this._text=e}function t(e){return e.replace("%25","%")}function n(e,n){if("U"===n)return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()});if("U+R"===n)return encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(h,t);if("U+R-,"===n)return encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/,/g,"%2C");throw new Error("Unknown allowed character set: "+n)}function i(e,t,i){for(var r=[],o=0;o<e.length;o++)"undefined"!=typeof e[o]&&r.push(n(e[o],t));return r.join(i)}function r(e,t,i,r){for(var o=Object.keys(e),s=[],a=0;a<o.length;a++)"undefined"!=typeof e[o[a]]&&s.push(n(o[a],t)+i+n(e[o[a]],t));return s.join(r)}function o(e){for(var t=[],n=e.split(","),i=0;i<n.length;i++){var r=n[i].match(u);if(null===r)throw new Error("Bad VarSpec: "+e);t.push({name:r[1],explode:!!r[2],prefix:r[3]?parseInt(r[3],10):-1})}return t}function s(e){if(0===e.length)throw new Error("Invalid Expression: 0 length expression");this._operator=c[e[0]],this._operator?e=e.substring(1):this._operator=c.NUL,this._varSpecList=o(e)}function a(t){for(var n=[],i=0,r=t.indexOf("{",i);-1!==r;){n.push(new e(t.substring(i,r)));var o=t.indexOf("}",r+1);if(-1===o)throw new Error("Invalid template: "+t);n.push(new s(t.substring(r+1,o))),i=o+1,r=t.indexOf("{",i)}return n.push(new e(t.substring(i))),n}function l(e){this._templateComponents=a(e)}var c={NUL:{first:"",sep:",",named:!1,ifemp:"",allow:"U"},"+":{first:"",sep:",",named:!1,ifemp:"",allow:"U+R"},".":{first:".",sep:",",named:!1,ifemp:"",allow:"U"},"/":{first:"/",sep:"/",named:!1,ifemp:"",allow:"U"},";":{first:";",sep:";",named:!0,ifemp:"",allow:"U"},"?":{first:"?",sep:"&",named:!0,ifemp:"=",allow:"U"},"&":{first:"&",sep:"&",named:!0,ifemp:"=",allow:"U"},"#":{first:"#",sep:",",named:!1,ifemp:"",allow:"U+R"},",":{first:"",sep:",",named:!1,ifemp:"",allow:"U+R-,"}},u=/^((?:(?:[a-zA-Z0-9_])|(?:%[0-9A-F][0-9A-F]))(?:(?:[a-zA-Z0-9_.])|(?:%[0-9A-F][0-9A-F]))*)(?:(\*)|:([0-9]+))?$/,h=/%25[0-9A-F][0-9A-F]/g;return e.prototype={expand:function(){return encodeURI(this._text)}},s.prototype={expand:function(e){for(var t=[],o=0;o<this._varSpecList.length;o++){var s=this._varSpecList[o],a=s.name,l=e[a],c=typeof l;if("undefined"!==c&&null!==l){var u=0===t.length?this._operator.first:this._operator.sep;if("string"===c)this._operator.named&&(u+=n(a,"U+R"),u+=0===l.length?this._operator.ifemp:"="),-1!==s.prefix&&s.prefix<l.length&&(l=l.substring(0,s.prefix)),u+=n(l,this._operator.allow);else if(Array.isArray(l)){if(0===l.length)continue;if(s.explode)u+=i(l,this._operator.allow,this._operator.sep);else{var h=i(l,this._operator.allow,",");this._operator.named&&(u+=n(a,"U+R"),u+=0===h.length?this._operator.ifemp:"="),u+=h}}else{if("object"!==c)throw new Error("bad param type: "+a+" : "+c);if(0===Object.keys(l).length)continue;if(s.explode)u+=r(l,this._operator.allow,"=",this._operator.sep);else{var d=r(l,this._operator.allow,",",",");this._operator.named&&(u+=n(a,"U+R"),u+=0===d.length?this._operator.ifemp:"="),u+=d
}}t.push(u)}}return t.join("")}},l.prototype={expand:function(e){for(var t=[],n=0;n<this._templateComponents.length;n++)t.push(this._templateComponents[n].expand(e));return t.join("")}},l}),define("orion/searchUtils",["i18n!orion/nls/messages","require","orion/regex","orion/URITemplate"],function(e,t,n,i){function r(e,t,i){var r="";i&&(r="^");var o=n.parse("/"+r+e.searchStr+"/");if(o){var s=o.pattern,a=o.flags;-1!==a.indexOf("i")||t.caseSensitive||(a+="i"),e.regExp={pattern:s,flags:a},e.wildCard=!0}}var o={};return o.ALL_FILE_TYPE="*.*",o.getSearchParams=function(t,n,i){if(t){var r=n,s=!0;if("*"===r&&(r=""),""===r&&(s=i&&i.type!==o.ALL_FILE_TYPE),s){var a=t.createSearchParams(r,!1,!1,i);return a}}else window.alert(e.NoSearchAvailableErr);return null},o.generateSearchHelper=function(e,t){var n=e.keyword,i=n,s={};if(e.fileType&&e.fileType!==o.ALL_FILE_TYPE&&""===n&&(i="*."+e.fileType),e.regEx)s.searchStr=n,r(s,e,t);else{var a=n.indexOf("*")>-1,l=n.indexOf("?")>-1;a&&(n=n.split("*").join(".*")),l&&(n=n.split("?").join(".")),a||l||e.nameSearch?(s.searchStr=e.caseSensitive?n:n.toLowerCase(),r(s,e,t),s.wildCard=!0):(s.searchStr=e.caseSensitive?n.split("\\").join(""):n.split("\\").join("").toLowerCase(),s.wildCard=!1)}return s.searchStrLength=s.searchStr.length,{params:e,inFileQuery:s,displayedSearchTerm:i}},o.convertSearchParams=function(e){void 0!==e.rows&&(e.rows=parseInt(e.rows,10)),void 0!==e.start&&(e.start=parseInt(e.start,10)),"string"==typeof e.regEx&&(e.regEx="true"===e.regEx.toLowerCase()),"string"==typeof e.caseSensitive&&(e.caseSensitive="true"===e.caseSensitive.toLowerCase()),"string"==typeof e.nameSearch&&(e.nameSearch="true"===e.nameSearch.toLowerCase()),void 0!==e.fileNamePatterns&&(e.fileNamePatterns=o.getFileNamePatternsArray(e.fileNamePatterns))},o.getFileNamePatternsArray=function(e){var t=void 0;if(e){var n=e.trim();n=n.replace(/^(\s*,\s*)+/g,""),n=n.replace(/([^\\]),(\s*,\s*)*/g,"$1/"),n=n.replace(/(\s*\/\s*)/g,"/"),n=n.replace(/\/\/+/g,"/"),n=n.replace(/\/+$/g,""),t=n.split("/")}return t},o.copySearchParams=function(e,t){var n={};for(var i in e)if(void 0!==e[i]&&null!==e[i]){if(!t&&"replace"===i)continue;n[i]=e[i]}return n},o.generateFindURLBinding=function(e,t,n,r,o){var s={find:t.searchStr,regEx:t.wildCard?!0:void 0,caseSensitive:e.caseSensitive?!0:void 0,replaceWith:"string"==typeof r?r:void 0,atLine:"number"==typeof n?n:void 0};if(o)return s;var a=new i("{,params*}").expand({params:s});return","+a},o.convertFindURLBinding=function(e){"string"==typeof e.regEx&&(e.regEx="true"===e.regEx.toLowerCase()),"string"==typeof e.caseSensitive&&(e.caseSensitive="true"===e.caseSensitive.toLowerCase()),"string"==typeof e.atLine&&(e.atLine=parseInt(e.atLine,10))},o.replaceRegEx=function(e,t,n){var i=new RegExp(t.pattern,t.flags);return e.replace(i,n)},o.replaceStringLiteral=function(e,t,i){var r=n.parse("/"+t+"/gim");return o.replaceRegEx(e,r,i)},o.searchOnelineLiteral=function(e,t,n){for(var i,r=0,o=!1,s=[];;){if(i=t.indexOf(e.searchStr,r),0>i)break;if(s.push({startIndex:i,length:e.searchStrLength}),o=!0,n)break;r=i+e.searchStrLength}return o?s:null},o.findRegExp=function(e,t,n,i){if(!t)return null;n=n||"",n+=(-1===n.indexOf("g")?"g":"")+(-1===n.indexOf("m")?"m":"");var r=new RegExp(t,n),o=null;return o=r.exec(e.substring(i)),o&&{startIndex:o.index+i,length:o[0].length}},o.searchOnelineRegEx=function(e,t,n){for(var i=0,r=!1,s=[];;){var a=o.findRegExp(t,e.regExp.pattern,e.regExp.flags,i);if(!a)break;if(s.push(a),r=!0,n)break;i=a.startIndex+a.length}return r?s:null},o.generateNewContents=function(e,t,n,i,r,s){if(i&&t){e||(n.contents=[]);for(var a=0;a<t.length;a++){for(var l,c,u=t[a],h=!1,d=!1,p=[],f=0,m=0;m<i.children.length;m++){var g=i.children[m].lineNumber-1;if(g===a){for(f=m,c=0;c<i.children[m].matches.length;c++)i.children[m+c].checked!==!1&&p.push(c);d=p.length>0,l=i.children[m].matches,h=!0;break}}if(h){var v;if(d){var y=o.replaceCheckedMatches(u,r,l,p,s);for(v=y.replacedStr,c=0;c<i.children[f].matches.length;c++)i.children[f+c].newMatches=y.newMatches}else for(v=u,c=0;c<i.children[f].matches.length;c++)i.children[f+c].newMatches=i.children[f+c].matches;e?n.contents[a]=v:n.contents.push(v)}else e||n.contents.push(u)}}},o.generateMatchContext=function(e,t,n){var i,r,o=[],s=2*e+1;t.length<=s?(i=0,r=t.length-1):(i=n-e,0>i?(i=0,r=i+s-1):(r=n+e,r>t.length-1&&(r=t.length-1,i=r-s+1)));for(var a=i;r>=a;a++)o.push({context:t[a],current:a===n});return o},o.splitFile=function(e){for(var t=0,n=0,i=0,r=0,o=[];;){if(-1!==t&&i>=t&&(t=e.indexOf("\r",i)),-1!==n&&i>=n&&(n=e.indexOf("\n",i)),-1===n&&-1===t){o.push(e.substring(r));break}var s=1;-1!==t&&-1!==n?t+1===n?(s=2,i=n+1):i=(n>t?t:n)+1:i=-1!==t?t+1:n+1,o.push(e.substring(r,i-s)),r=i}return o},o.searchWithinFile=function(e,t,n,i,r,s){var a=o.splitFile(n);if(r&&(t.contents=a),t){t.children=[];for(var l=0,c=0;c<a.length;c++){var u=a[c];if(u&&u.length>0){var h,d=s?u:u.toLowerCase();if(h=e.wildCard?o.searchOnelineRegEx(e,d):o.searchOnelineLiteral(e,d)){var p,f=c+1;if(r)for(var m=0;m<h.length;m++){var g=m+1;p={parent:t,checked:t.checked,type:"detail",matches:h,lineNumber:f,matchNumber:g,name:u,location:t.location+"-"+f+"-"+g},t.children.push(p)}else p={parent:t,context:o.generateMatchContext(2,a,c),checked:t.checked,type:"detail",matches:h,lineNumber:f,name:u,location:t.location+"-"+f},t.children.push(p);l+=h.length}}}t.totalMatches=l}},o.replaceCheckedMatches=function(e,t,n,i,r){for(var o=r,s=0,a="",l=[],c=0;c<n.length;c++){s!==n[c].startIndex&&(a+=e.substring(s,n[c].startIndex)),n[c].length&&(o=n[c].length);for(var u=!1,h=0;h<i.length;h++)if(i[h]===c){u=!0;break}u?(l.push({startIndex:a.length,length:t.length}),a+=t):(l.push({startIndex:a.length,length:o}),a+=e.substring(n[c].startIndex,n[c].startIndex+o)),s=n[c].startIndex+o}return s<e.length&&(a+=e.substring(s)),{replacedStr:a,newMatches:l}},o.fullPathNameByMeta=function(e){var t=e.length,n="";if(t>0)for(var i=t-1;i>-1;i--){var r=""===n?"":"/";n=n+r+e[i].Name}return n},o}),define("orion/crawler/nls/messages",{root:!0}),define("orion/crawler/nls/root/messages",{filesFound:"${0} files found out of ${1}",searchCancelled:"Search cancelled by user",Cancel:"Cancel"}),define("orion/contentTypes",[],function(){function e(e,t){return-1!==e.indexOf(t)}function t(e){switch(e&&e.id){case"image/jpeg":case"image/png":case"image/gif":case"image/ico":case"image/tiff":case"image/svg":return!0}return!1}function n(e){return e?"application/octet-stream"===e.id||"application/octet-stream"===e["extends"]:!1}function i(t,n){if("string"!=typeof t)return null;var i,r=null,o=t.indexOf(".");o++;for(var s=t.substring(o).toLowerCase(),a=0;a<n.length;a++){if(i=n[a],i.filename.indexOf(t)>=0){r=i;break}e(i.extension,s)&&(r=i)}if(!r)for(o=s.indexOf(".");!r&&o>=0;){for(o++,s=s.substring(o),a=0;a<n.length;a++)if(i=n[a],e(i.extension,s)){r=i;break}o=s.indexOf(".")}return r}function r(e){return null===e||"undefined"==typeof e?[]:Array.isArray(e)?e:[e]}function o(e){return r(e).map(function(e){return String.prototype.toLowerCase.call(e)})}function s(e){return{id:e.id,name:e.name,image:e.image,imageClass:e.imageClass,"extends":e["extends"],extension:o(e.extension),filename:r(e.filename)}}function a(e){var t=Object.create(null);return e.map(s).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e.id)||(t[e.id]=e)}),t}function l(e){for(var t=e.getServiceReferences(h).concat(e.getServiceReferences(d)),n=[],i=0;i<t.length;i++)for(var o=t[i],s=r(o.getProperty("contentTypes")),l=0;l<s.length;l++)n.push(s[l]);return a(n)}function c(e){if(e&&e.registerService)this.serviceRegistry=e,this.map=l(e),e.registerService(u,this);else{if(!Array.isArray(e))throw new Error("Invalid parameter");this.serviceRegistry=null,this.map=a(e)}}var u="orion.core.contentTypeRegistry",h="orion.core.contenttype",d="orion.file.contenttype";return c.prototype={getContentTypes:function(){var e=this.getContentTypesMap(),t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(e[n]);return t},getContentTypesMap:function(){return this.map},getFileContentType:function(e){return i(e.Name,this.getContentTypes())},getFilenameContentType:function(e){return i(e,this.getContentTypes())},getContentType:function(e){return this.map[e]||null},isExtensionOf:function(e,t){if(e="string"==typeof e?this.getContentType(e):e,t="string"==typeof t?this.getContentType(t):t,!e||!t)return!1;if(e.id===t.id)return!0;for(var n=e,i={};n&&(n=this.getContentType(n["extends"]));){if(n.id===t.id)return!0;if(i[n.id])throw new Error("Cycle: "+n.id);i[n.id]=!0}return!1},isSomeExtensionOf:function(e,t){for(var n=0;n<t.length;n++)if(this.isExtensionOf(e,t[n]))return!0;return!1}},{ContentTypeRegistry:c,isImage:t,isBinary:n,getFilenameContentType:i}}),define("orion/crawler/searchCrawler",["i18n!orion/crawler/nls/messages","orion/i18nUtil","orion/searchUtils","orion/contentTypes","orion/uiUtils","orion/Deferred"],function(e,t,n,i,r,o){function s(t,i,r,o){this.registry=t,this.fileClient=i,this.fileLocations=[],this.fileSkeleton=[],this._hitCounter=0,this._totalCounter=0,this._searchOnName=o&&o.searchOnName,this._buildSkeletonOnly=o&&o.buildSkeletonOnly,this._fetchChildrenCallBack=o&&o.fetchChildrenCallBack,this._searchParams=r,this.searchHelper=this._searchOnName||this._buildSkeletonOnly||!this._searchParams?null:n.generateSearchHelper(r),this._location=o&&o.location,this._childrenLocation=o&&o.childrenLocation?o.childrenLocation:this._location,this._reportOnCancel=o&&o.reportOnCancel,this._visitSingleFile=o&&o.visitSingleFile,this._visitSingleFile||(this._visitSingleFile=this._searchSingleFile),this._cancelMessage=o&&o.cancelMessage,this._cancelMessage||(this._cancelMessage=e.searchCancelled),this._cancelled=!1,this._statusService=this.registry.getService("orion.page.message"),this._progressService=this.registry.getService("orion.page.progress"),this._statusService&&this._statusService.setCancelFunction(function(){this._cancelFileVisit()}.bind(this))}var a=!1,l=[".git"];return s.prototype.search=function(e){this.contentTypeService=this.registry.getService("orion.core.contentTypeRegistry"),this._onSearchComplete=e,this._cancelled=!1,this._deferredArray=[],this.contentTypeService.getContentTypes().then(function(e){this.contentTypesCache=e;var t=this;this._visitRecursively(this._childrenLocation).then(function(){(!t._cancelled||t._reportOnCancel)&&t._reportResult(),t._cancelled&&t._HandleStatus({name:"Cancel"})}.bind(t),function(e){t._reportResult(),t._HandleStatus(e)}.bind(t))}.bind(this))},s.prototype.searchName=function(e,t){e&&(this._searchParams=e,this.searchHelper=n.generateSearchHelper(e,!0)),t&&(this.onSearchNameComplete=t);var i=[];if(this._cancelled=!1,this._deferredArray=[],this._sort(this.fileSkeleton),this.fileSkeleton.length>0){for(var r=0;r<this.fileSkeleton.length;r++){var o,s=this.fileSkeleton[r].Name.toLowerCase();if(o=this.searchHelper.inFileQuery.wildCard?n.searchOnelineRegEx(this.searchHelper.inFileQuery,s,!0):n.searchOnelineLiteral(this.searchHelper.inFileQuery,s,!0),o&&(i.push(this.fileSkeleton[r]),i.length>=this.searchHelper.params.rows))break}var a={numFound:i.length,docs:i};this.onSearchNameComplete({response:a})}else this.onSearchNameComplete({response:{numFound:0,docs:[]}})},s.prototype.buildSkeleton=function(e,t){this._buildingSkeleton=!0,this.contentTypeService=this.registry.getService("orion.core.contentTypeRegistry"),this._cancelled=!1,this._deferredArray=[];var n=this;e(),this.contentTypeService.getContentTypes().then(function(e){n.contentTypesCache=e,n._visitRecursively(n._childrenLocation).then(function(){n._buildingSkeleton=!1,t(),n.searchHelper&&!n._buildSkeletonOnly&&n.searchName()})})},s.prototype.incrementalReport=function(n,i){if(!this._cancelled){n.LastModified=n.LocalTimeStamp,this.fileLocations.push(n),this._hitCounter++,i&&this._sort(this.fileLocations);var r={numFound:this.fileLocations.length,docs:this.fileLocations};this._onSearchComplete({response:r},!0),this._statusService&&this._statusService.setProgressResult({Message:t.formatMessage(e.filesFound,this._hitCounter,this._totalCounter)},e.Cancel)}},s.prototype.addTotalCounter=function(e){e||(e=1),this._totalCounter=this._totalCounter+e},s.prototype.isCancelled=function(){return this._cancelled},s.prototype._contains=function(e,t){return-1!==(e||[]).indexOf(t)},s.prototype._sort=function(e){e.sort(function(e,t){var n,i;if(this._searchParams&&"Path asc"===this._searchParams.sort){var o=e.Location&&e.Location.toLowerCase();n=r.path2FolderName(o,e.Name&&e.Name.toLowerCase(),!0);var s=t.Location&&t.Location.toLowerCase();return i=r.path2FolderName(s,t.Name&&t.Name.toLowerCase(),!0),i>n?-1:n>i?1:this._sortOnNameSingle(e,t)}return this._sortOnNameSingle(e,t)}.bind(this))},s.prototype._HandleStatus=function(e){this._statusService&&"Cancel"===e.name&&(a&&console.log("Crawling search cancelled. Deferred array length : "+this._deferredArray.length),this._statusService.setProgressResult({Message:this._cancelMessage,Severity:"Warning"}))},s.prototype._reportResult=function(){this._sort(this.fileLocations);var e={numFound:this.fileLocations.length,docs:this.fileLocations};this._onSearchComplete({response:e})},s.prototype._sortOnNameSingle=function(e,t){var n=e.Name&&e.Name.toLowerCase(),i=t.Name&&t.Name.toLowerCase();return i>n?-1:n>i?1:0},s.prototype._fileNameMatches=function(e){var t=!0;return this.searchHelper&&this.searchHelper.params.fileNamePatterns&&(t=this.searchHelper.params.fileNamePatterns.some(function(t){var n="^"+t.replace(/([*?])/g,".$1")+"$";return e.match(n)})),t},s.prototype._visitRecursively=function(e){var t=[],n=this;return this._fetchChildrenCallBack&&this._fetchChildrenCallBack(e),(n._progressService?this._progressService.progress(n.fileClient.fetchChildren(e),"Crawling search for children of "+e):n.fileClient.fetchChildren(e)).then(function(e){for(var r=0;r<e.length;r++)if(void 0!==e[r].Directory&&e[r].Directory===!1){if(n._searchOnName)t.push(n._buildSingleSkeleton(e[r]));else if(n._buildSkeletonOnly)t.push(n._buildSingleSkeleton(e[r]));else if(!n._cancelled){var s=i.getFilenameContentType(e[r].Name,n.contentTypesCache),a=i.isImage(s)||i.isBinary(s);if(!a&&n._fileNameMatches(e[r].Name)){var c=n._visitSingleFile(n,e[r],s);t.push(c),n._deferredArray.push(c)}}}else if(e[r].Location){if(n._cancelled)break;if(n._contains(l,e[r].Name))continue;var u=n._visitRecursively(e[r].ChildrenLocation);t.push(u),n._deferredArray.push(u)}return o.all(t)})},s.prototype._hitOnceWithinFile=function(e){var t,i=this._searchParams.caseSensitive?e:e.toLowerCase();return t=this.searchHelper.inFileQuery.wildCard?n.searchOnelineRegEx(this.searchHelper.inFileQuery,i,!0):n.searchOnelineLiteral(this.searchHelper.inFileQuery,i,!0)},s.prototype._cancelFileVisit=function(){this._cancelled=!0,this._cancelled&&this._deferredArray.forEach(function(e){e.cancel()})},s.prototype._searchSingleFile=function(e,t){this.addTotalCounter();var n=this;if(!this._cancelled)return""!==this.searchHelper.params.keyword?(n._progressService?n._progressService.progress(n.fileClient.read(t.Location),"Reading file "+t.Location):n.fileClient.read(t.Location)).then(function(e){n._hitOnceWithinFile(e)&&n.incrementalReport(t,!0)},function(e){e&&e.message&&"cancel"!==e.message.toLowerCase()&&console.error("Error loading file content: "+e.message)}):void this.incrementalReport(t,!0)},s.prototype._buildSingleSkeleton=function(e){this.addTotalCounter(),this.fileSkeleton.push(e),this.searchHelper&&!this._buildSkeletonOnly&&this._totalCounter%100===0&&this.searchName();var t=new o;return t.resolve(this._totalCounter),t},s.prototype.constructor=s,{SearchCrawler:s}}),define("orion/webui/treetable",["i18n!orion/nls/messages","orion/webui/littlelib"],function(e,t){function n(e){this._init(e)}return n.prototype={_init:function(n){var i=n.parent,r=this;if(i=t.node(i),!i)throw e["no parent"];if(!n.model)throw e["no tree model"];if(!n.renderer)throw e["no renderer"];this._parent=i,this._treeModel=n.model,this._onComplete=n.onComplete,this._renderer=n.renderer,this._showRoot=void 0===n.showRoot?!1:n.showRoot,this._indent=void 0===n.indent?16:n.indent,this._preCollapse=n.preCollapse,this._onCollapse=n.onCollapse,this._labelColumnIndex=void 0===n.labelColumnIndex?0:n.labelColumnIndex,this._id=void 0===n.id?"treetable":n.id,this._tableStyle=n.tableStyle,this._tableElement=n.tableElement||"table",this._tableBodyElement=n.tableBodyElement||"tbody",this._tableRowElement=n.tableRowElement||"tr",this._treeModel.getRoot(function(e){r._root=e,r._showRoot?(e._depth=0,r._generate([e],0)):r._treeModel.getChildren(e,function(e){r.destroyed||r._generate(e,0)})})},destroy:function(){this.destroyed=!0,this._removeAllRows()},_generate:function(e,n){t.empty(this._parent);var i=document.createElement("div");this._renderer.wrapperCallback&&this._renderer.wrapperCallback(i);var r=document.createElement(this._tableElement);this._renderer.tableCallback&&this._renderer.tableCallback(r),r.id=this._id,this._tableStyle&&r.classList.add(this._tableStyle),this._renderer.initTable(r,this),this._bodyElement=document.createElement(this._tableBodyElement),this._renderer.bodyCallback&&this._renderer.bodyCallback(this._bodyElement),this._bodyElement.id=this._id+"tbody",0===e.length?this._renderer.emptyCallback&&this._renderer.emptyCallback(this._bodyElement):this._generateChildren(e,n),r.appendChild(this._bodyElement),i.appendChild(r),this._parent.appendChild(i),this._rowsChanged(),this._onComplete&&this._onComplete(this)},_generateChildren:function(e,t,n){for(var i=0;i<e.length;i++){var r=document.createElement(this._tableRowElement);this._renderer&&"function"==typeof this._renderer.initSelectableRow&&this._renderer.initSelectableRow(e[i],r),this._generateRow(e[i],r,t,n),n?(this._bodyElement.insertBefore(r,n.nextSibling),n=r):this._bodyElement.appendChild(r)}},_generateRow:function(e,t,n){t.id=this._treeModel.getId(e),t._depth=n,t._item=e,this._renderer.render(e,t);var i=this._indent*n;t.childNodes[Math.min(t.childNodes.length-1,this._labelColumnIndex)].style.paddingLeft=i+"px",this._renderer.updateExpandVisuals&&this._renderer.updateExpandVisuals(t,t._expanded),this._renderer.rowCallback&&this._renderer.rowCallback(t,e)},_rowsChanged:function(){this._renderer.rowsChanged&&this._renderer.rowsChanged()},getSelected:function(){return this._renderer.getSelected()},redraw:function(e){var n=this._treeModel.getId(e),i=t.node(n);i&&(t.empty(i),this._generateRow(e,i,i._depth))},refresh:function(n,i,r){var o,s=this._treeModel.getId(n);if(s===this._id)this._removeChildRows(s),this._generateChildren(i,0),this._rowsChanged();else if(s===this._treeModel.getId(this._root)&&n.removeAll)this._removeAllRows(),this._generateChildren(i,0),this._rowsChanged();else{var a=t.node(s);a?(a._item=n,a&&(r||a._expanded)?(this._removeChildRows(s),i?(a._expanded=!0,this._renderer.updateExpandVisuals&&this._renderer.updateExpandVisuals(a,!0),this._generateChildren(i,a._depth+1,a),this._rowsChanged()):(o=this,this._renderer.updateExpandVisuals&&this._renderer.updateExpandVisuals(a,"progress"),i=this._treeModel.getChildren(a._item,function(e){o.destroyed||(o._renderer.updateExpandVisuals&&o._renderer.updateExpandVisuals(a,!0),a._expanded||(a._expanded=!0,o._generateChildren(e,a._depth+1,a),o._rowsChanged()))}))):this._renderer.updateExpandVisuals&&this._renderer.updateExpandVisuals(a,!1)):console.log(e["could not find table row "]+s)}},getItem:function(e){var n=t.node(e);return n&&n._item?n._item:e},toggle:function(e){var n=t.node(e);n&&(n._expanded?this.collapse(e,!0):this.expand(e))},isExpanded:function(e){var n="string"==typeof e?e:this._treeModel.getId(e),i=t.node(n);return i?i._expanded:!1},expand:function(e,n,i){var r="string"==typeof e?e:this._treeModel.getId(e),o=t.node(r);if(o){var s=this;if(o._expanded)return void(n&&n.apply(s,i));this._renderer.updateExpandVisuals&&this._renderer.updateExpandVisuals(o,"progress"),this._treeModel.getChildren(o._item,function(e){s.destroyed||(s._renderer.updateExpandVisuals&&s._renderer.updateExpandVisuals(o,!0),o._expanded||(o._expanded=!0,s._generateChildren(e,o._depth+1,o),s._rowsChanged()),n&&n.apply(s,i))})}},_removeChildRows:function(e){for(var n,i=e===this._id,r=!1,o=-1,s=[],a=t.$$array(".treeTableRow",this._parent),l=0;l<a.length;l++){var c=a[l];if(r)break;i?n&&c.parentNode!==n.parentNode||(c._depth>o?s.push(c):r=!0):c.id===e&&(i=!0,o=c._depth,n=c)}for(var u=0;u<s.length;u++){var h=s[u];h&&h._item&&"function"==typeof h._item.destroy&&h._item.destroy(),h.parentNode.removeChild(h)}},_removeAllRows:function(){for(var e=t.$$array(".treeTableRow",this._parent),n=0;n<e.length;n++)e[n]&&e[n]._item&&"function"==typeof e[n]._item.destroy&&e[n]._item.destroy(),e[n].parentNode.removeChild(e[n])},_collapse:function(e,t){t._expanded=!1,this._renderer.updateExpandVisuals&&this._renderer.updateExpandVisuals(t,!1),this._removeChildRows(e),this._rowsChanged(),this._onCollapse&&this._onCollapse(t._item)},collapse:function(e,n){var i="string"==typeof e?e:this._treeModel.getId(e),r=t.node(i);if(r){if(!r._expanded)return;n&&this._preCollapse?this._preCollapse(r._item).then(function(e){e&&this._collapse(i,r)}.bind(this)):this._collapse(i,r)}},getIndent:function(){return this._indent}},n.prototype.constructor=n,{TableTree:n}}),define("orion/treeModelIterator",[],function(){var e={};return e.TreeModelIterator=function(){function e(e,t){this.firstLevelChildren=e,this.reset(),this._init(t)}return e.prototype={_init:function(e){e&&(this.isExpanded=e.isExpanded,this.isExpandable=e.isExpandable,this.forceExpandFunc=e.forceExpandFunc,this.getChildrenFunc=e.getChildrenFunc)},topLevel:function(e){return e.parent?e.parent===this.root:!0},_getChildren:function(e){return"function"==typeof this.getChildrenFunc?this.getChildrenFunc(e):e?e.children:null},_expanded:function(e){if(!e)return!0;var t=this._getChildren(e),n=t&&t.length>0;return this.isExpanded&&n&&(n=this.isExpanded(e)),n},_expandable:function(e){return e?this.isExpandable?this.isExpandable(e):!1:!0},_diveIn:function(e){if(this._expanded(e)){var t=this._getChildren(e);return this.setCursor(t[0]),this.cursor()}return null},_drillToLast:function(e){if(this._expanded(e)){var t=this._getChildren(e);return this._drillToLast(t[t.length-1])}return e},_forward:function(e){if(!this._cursor)return null;var t=this._diveIn(this._cursor);if(!t){if(e&&this._expandable(this._cursor)&&this.forceExpandFunc){var n=this;return this.forceExpandFunc(this._cursor,"first",function(e){e&&n.setCursor(e)})}t=this._findSibling(this._cursor,!0),t&&this.setCursor(t)}return t},_backward:function(e){if(!this._cursor)return null;var t=this._findSibling(this._cursor,!1);if(t&&t!==this._cursor.parent&&(t=this._drillToLast(t)),e&&t&&this._expandable(t)&&this.forceExpandFunc&&t!==this._cursor.parent){var n=this;return this.forceExpandFunc(t,"last",function(e){e&&n.setCursor(e)})}return t&&this.setCursor(t),t},_findSibling:function(e,t){for(var n=this.topLevel(e),i=this._getChildren(e.parent),r=n?this.firstLevelChildren:i,o=0;o<r.length;o++)if(r[o]===e)return 0!==o||t?o===r.length-1&&t?n?null:this._findSibling(e.parent,t):t?r[o+1]:r[o-1]:n?null:e.parent;return null},_inParentChain:function(e,t){for(var n=e.parent;n;){if(n===t)return!0;n=n.parent}return!1},_getTopLevelParent:function(e){if(this.topLevel(e))return e;for(var t=e.parent;t;){if(this.topLevel(t))return t;t=t.parent}return null},_onCollapse:function(e){return this._expanded(e.parent)?e:this._onCollapse(e.parent)},_scan:function(e,t,n){this.setCursor(t);var i=[];for(i.push(t);;){if(!this.iterate(e))break;if(i.push(this.cursor()),n===this.cursor())return i}return i=[],null},setCursor:function(e){this._prevCursor=this._cursor,this._cursor=e},setTree:function(e){this.firstLevelChildren=e,this.firstLevelChildren.length>0&&(this.root=this.firstLevelChildren[0].parent)},scan:function(e,t){var n=this.cursor(),i=this._scan(!0,e,t);return i||(i=this._scan(!1,e,t)),this.setCursor(n),i},iterate:function(e,t){return e?this._forward(t):this._backward(t)},iterateOnTop:function(e,t){var n=this._findSibling(this._getTopLevelParent(this.cursor()),e);n?this.setCursor(n):t&&this.firstLevelChildren.length>0&&this.setCursor(e?this.firstLevelChildren[0]:this.firstLevelChildren[this.firstLevelChildren.length-1])},collapse:function(e){return this._cursor&&this._inParentChain(this._cursor,e)?(this.setCursor(e),this._cursor):null},reset:function(){this._cursor=null,this._prevCursor=null,this.root=null,this.firstLevelChildren.length>0&&(this._cursor=this.firstLevelChildren[0],this.root=this.firstLevelChildren[0].parent)},cursorMoved:function(){return this._cursor!==this._prevCursor},cursor:function(){return this._cursor},prevCursor:function(){return this._prevCursor}},e}(),e}),define("orion/explorers/explorerNavHandler",["orion/webui/littlelib","orion/treeModelIterator","orion/uiUtils"],function(e,t,n){var i={},r=navigator.userAgent,o=-1!==r.indexOf("iPad"),s=-1!==window.navigator.platform.indexOf("Mac");return i.ExplorerNavHandler=function(){function i(i,r,o){this.explorer=i,this.model=this.explorer.model,this._navDict=r,this._listeners=[],this._selections=[],this._currentColumn=0;var s=this._getEventListeningDiv();s.tabIndex=0,s.classList.add("selectionModelContainer");var a=this;this._modelIterator=new t.TreeModelIterator([],{isExpanded:this.isExpanded.bind(this),getChildrenFunc:o.getChildrenFunc,isExpandable:this.explorer.renderer.isExpandable?function(e){return a.explorer.renderer.isExpandable(e)}:function(e){return a.isExpandable(e)},forceExpandFunc:this.explorer.forceExpandFunc?function(e,t,n){return a.explorer.forceExpandFunc(e,t,n)}:void 0}),this._init(o),o&&o.setFocus===!1||s.focus();var l=function(t){return n.isFormElement(t.target)?!0:a.explorer.preventDefaultFunc&&a.explorer.preventDefaultFunc(t,a._modelIterator.cursor())?!0:t.keyCode===e.KEY.DOWN?a.onDownArrow(t):t.keyCode===e.KEY.UP?a.onUpArrow(t):t.keyCode===e.KEY.RIGHT?a.onRightArrow(t):t.keyCode===e.KEY.LEFT?a.onLeftArrow(t):t.keyCode===e.KEY.SPACE?a.onSpace(t):t.keyCode===e.KEY.ENTER?a.onEnter(t):void 0};s.addEventListener("keydown",l,!1),this._listeners.push({type:"keydown",listener:l});var c=function(t){return n.isFormElement(t.target)?!0:void(t.shiftKey&&a._shiftSelectionAnchor&&e.stop(t))};s.addEventListener("mousedown",c,!1),this._listeners.push({type:"mousedown",listener:c});var u=function(){a.explorer.onFocus?a.explorer.onFocus(!1):a.toggleCursor(null,!1)};s.addEventListener("blur",u,!1),this._listeners.push({type:"blur",listener:u});var h=function(){a.explorer.onFocus?a.explorer.onFocus(!0):a.toggleCursor(null,!0)};s.addEventListener("focus",h,!1),this._listeners.push({type:"focus",listener:h}),this._parentDiv=s}return i.prototype={destroy:function(){this._parentDiv.classList.remove("selectionModelContainer"),this.removeListeners()},_init:function(e){this._linearGridMove=!1,e&&(this._selectionPolicy=e.selectionPolicy,this.gridClickSelectionPolicy=e.gridClickSelectionPolicy||"none",this.preventDefaultFunc=e.preventDefaultFunc,this.postDefaultFunc=e.postDefaultFunc)},_ctrlKeyOn:function(e){return s?e.metaKey:e.ctrlKey},removeListeners:function(){if(this._listeners)for(var e=0;e<this._listeners.length;e++)this._parentDiv.removeEventListener(this._listeners[e].type,this._listeners[e].listener,!1)},focus:function(){var e=this._getEventListeningDiv();e&&e.focus()},_getEventListeningDiv:function(t){return this.explorer.keyEventListeningDiv&&"function"==typeof this.explorer.keyEventListeningDiv?this.explorer.keyEventListeningDiv(t):e.node(this.explorer._parentId)},isExpandable:function(t){if(!t)return!1;var n=e.node(this.explorer.renderer.expandCollapseImageId(this.model.getId(t)));return n?!0:!1},isExpanded:function(e){return e?this.explorer.myTree.isExpanded(this.model.getId(e)):!1},refreshSelection:function(e,t){var n=this;this.explorer.selection&&this.explorer.selection.getSelections(function(i){n._clearSelection(t);for(var r=0;r<i.length;r++)n._selections.push(i[r]);n._selections.length>0?n.cursorOn(n._selections[0],!0,!1,e):n.cursorOn(null,!1,!1,e),n._shiftSelectionAnchor&&n._inSelection(n._shiftSelectionAnchor)>=0||(n._shiftSelectionAnchor=null)})},refreshModel:function(e,t,n,i){this._currentColumn=0,this.topIterationNodes=[],this.model=t,this._navDict=e,this.model.getTopIterationNodes?this.topIterationNodes=this.model.getTopIterationNodes():n&&(this.topIterationNodes=n),this._modelIterator.setTree(this.topIterationNodes),!i&&this.explorer.selection&&(this.toggleCursor(this._modelIterator.cursor(),!1),this._modelIterator.reset()),this.refreshSelection(!0)},getTopLevelNodes:function(){return this._modelIterator.firstLevelChildren},_inSelection:function(e){for(var t=this.model.getId(e),n=0;n<this._selections.length;n++)if(t===this.model.getId(this._selections[n]))return n;return-1},_clearSelection:function(e){if(e)for(var t=0;t<this._selections.length;t++)this._checkRow(this._selections[t],!0);this._selections=[]},getSelectionPolicy:function(){return this._selectionPolicy},setSelectionPolicy:function(e){this._selectionPolicy!==e&&(("readonlySelection"===this._selectionPolicy||"readonlySelection"===e)&&this._toggleSelectionClass("disabledRow","readonlySelection"===e),this._selectionPolicy=e,"cursorOnly"===this._selectionPolicy&&this._clearSelection(!0))},setSelection:function(e,t,n){if("readonlySelection"===this._selectionPolicy)return!1;if("cursorOnly"===this._selectionPolicy)return t&&this.explorer.renderer._useCheckboxSelection&&this._checkRow(e,!0),!1;if(!this._isRowSelectable(e))return!1;if(t&&"singleSelection"!==this._selectionPolicy){var i=this._inSelection(e);i>=0?(this._checkRow(e,!0),this._selections.splice(i,1)):(this._checkRow(e,!1),this._selections.push(e),this._lastSelection=e)}else this._clearSelection(!0),this._checkRow(e,!1),this._selections.push(e),this._lastSelection=e;return n&&(this._shiftSelectionAnchor=this._lastSelection),this.explorer.selection&&(this.explorer.renderer.storeSelections(),this.explorer.selection.setSelections(this._selections)),!0},moveColumn:function(e,t){e||(e=this.currentModel());var n=this._getGridChildren(e);if(n&&n.length>1||0===t&&n){0!==t&&this.toggleCursor(e,!1);var i=this._currentColumn,r=!0;return i+=t,0>i?(this._linearGridMove&&0!==t&&(this._modelIterator.iterate(!1)?e=this.currentModel():r=!1),i=r?n.length-1:this._currentColumn):i>=n.length&&(this._linearGridMove&&0!==t&&(this._modelIterator.iterate(!0)?e=this.currentModel():r=!1),i=r?0:this._currentColumn),this._currentColumn=i,0!==t&&this.toggleCursor(e,!0),!0}return!1},_getGridChildren:function(e){return this._navDict?this._navDict.getGridNavHolder(e):null},getCurrentGrid:function(e){e||(e=this.currentModel());var t=this._getGridChildren(e);return t&&t.length>0?t[this._currentColumn]:null},getAriaContainerElement:function(e){for(var t,n=this._parentDiv;e&&e!==n&&"grid"!==(t=e.getAttribute("role"))&&"tree"!==t&&"treegrid"!==t;)e=e.parentNode;return e===n?null:e},toggleCursor:function(e,t){var n=this.getRowDiv(e),i=this.getCurrentGrid(e);if(i){if(n&&(t?n.classList.add("treeIterationCursorRow"):n.classList.remove("treeIterationCursorRow")),i.domNode){var r=this.getAriaContainerElement(i.domNode);if(t){if(i.domNode.classList.add("treeIterationCursor"),r){var o=i.domNode.id;r.setAttribute("aria-activedescendant",o)}}else i.domNode.classList.remove("treeIterationCursor")}}else n&&(t?n.classList.add("treeIterationCursorRow_Dotted"):n.classList.remove("treeIterationCursorRow_Dotted"))},currentModel:function(){return this._modelIterator.cursor()},cursorOn:function(t,n,i,r){var o,s;if(t||n){if(s===this._modelIterator.cursor())return;o=this._modelIterator.cursor(),s=t,this._modelIterator.setCursor(s)}else o=this._modelIterator.prevCursor(),s=this._modelIterator.cursor();if((o!==s||n)&&(this.toggleCursor(o,!1),!n||s)){this.moveColumn(null,0),this.toggleCursor(s,!0);var a=this.getRowDiv();if(a&&!r){var l=e.getOffsetParent(a);if(l){var c=!0;a.offsetTop<=l.scrollTop?(c=!1,void 0===i&&(i=!1)):a.offsetTop+a.offsetHeight>=l.scrollTop+l.clientHeight&&(c=!1,void 0===i&&(i=!0)),c||a.scrollIntoView(!i)
}}this.explorer.onCursorChanged&&this.explorer.onCursorChanged(o,s)}},getSelection:function(){return this._selections},getSelectionIds:function(){for(var e=[],t=0;t<this._selections.length;t++)e.push(this.model.getId(this._selections[t]));return e},getRowDiv:function(t){var n=t?t:this._modelIterator.cursor();if(!n)return null;var i=this.model.getId(n),r=this._navDict.getValue(i);return r&&r.rowDomNode?r.rowDomNode:e.node(i)},iterate:function(e,t,n,i){var r=null;if(this.topIterationNodes&&0!==this.topIterationNodes.length)if(i){var o=this.currentModel();for(r=this._modelIterator.iterate(e,t),r&&this._setCursorOnItem(e,n);r&&r.isNotSelectable;)r=this._modelIterator.iterate(e,t),r&&this._setCursorOnItem(e,n);r||(this.cursorOn(o,!0,!1,!0),this._setCursorOnItem(e,n))}else r=this._modelIterator.iterate(e,t),r&&this._setCursorOnItem(e,n)},_toggleSelectionClass:function(e,t){this._selections.forEach(function(n){var i=this.getRowDiv(n);i&&(t?i.classList.add(e):i.classList.remove(e))}.bind(this))},_setCursorOnItem:function(e,t){if(this.cursorOn(null,!1,e),t){var n=this._inSelection(this._modelIterator.prevCursor()),i=this._inSelection(this._modelIterator.cursor());n>=0&&i>=0?this.setSelection(this._modelIterator.prevCursor(),!0):this.setSelection(this.currentModel(),!0)}},_checkRow:function(t,n){if(this.explorer.renderer._useCheckboxSelection&&"singleSelection"!==this._selectionPolicy){var i=this.getRowDiv(t);if(!i)return;var r=e.node(this.explorer.renderer.getCheckBoxId(i.id)),o=n?!r.checked:!0;o!==r.checked&&this.explorer.renderer.onCheck(i,r,o,!0)}else this._select(t,n)},_select:function(e){e||(e=this._modelIterator.cursor());var t=this.getRowDiv(e);t&&(this._inSelection(e)<0?t.classList.add("checkedRow"):t.classList.remove("checkedRow"))},_onModelGrid:function(e,t){var n=this._getGridChildren(e);if(n)for(var i=0;i<n.length;i++)if(t.target===n[i].domNode)return!0;return!1},onClick:function(t,i){if(i&&n.isFormElement(i.target))return!0;if("readonlySelection"===this._selectionPolicy||this.isDisabled(this.getRowDiv(t)))e.stop(i);else{var r=e.node(this.explorer.renderer.expandCollapseImageId(this.model.getId(t)));if(i.target===r)return;if("none"===this.gridClickSelectionPolicy&&this._onModelGrid(t,i))return;if(this.cursorOn(t,!0,!1,!0),o)this.setSelection(t,!0);else if(this._ctrlKeyOn(i))this.setSelection(t,!0,!0);else if(i.shiftKey&&this._shiftSelectionAnchor){var s=this._modelIterator.scan(this._shiftSelectionAnchor,t);if(s){this._clearSelection(!0);for(var a=0;a<s.length;a++)this.setSelection(s[a],!0)}}else this.setSelection(t,!1,!0)}},onCollapse:function(e){this._modelIterator.collapse(e)&&this.cursorOn()},onUpArrow:function(e){return this.iterate(!1,!1,e.shiftKey,!0),this._ctrlKeyOn(e)||e.shiftKey||this.setSelection(this.currentModel(),!1,!0),e.preventDefault(),!1},onDownArrow:function(e){return this.iterate(!0,!1,e.shiftKey,!0),this._ctrlKeyOn(e)||e.shiftKey||this.setSelection(this.currentModel(),!1,!0),e.preventDefault(),!1},_shouldMoveColumn:function(e){var t=this.currentModel(),n=this._getGridChildren(t);return n&&n.length>1?this.isExpandable(t)?this._ctrlKeyOn(e):!0:!1},onLeftArrow:function(e){if(this._shouldMoveColumn(e))return this.moveColumn(null,-1),e.preventDefault(),!0;var t=this._modelIterator.cursor();return t?this.isExpandable(t)&&this.isExpanded(t)?(this.explorer.myTree.collapse(t),e.preventDefault(),!0):void(this._modelIterator.topLevel(t)?this.explorer.scopeUp&&"function"==typeof this.explorer.scopeUp&&this.explorer.scopeUp():(this.cursorOn(t.parent),this.setSelection(t.parent,!1,!0))):!1},onRightArrow:function(e){if(this._shouldMoveColumn(e))return this.moveColumn(null,1),e.preventDefault(),!0;var t=this._modelIterator.cursor();return t?this.isExpandable(t)&&!this.isExpanded(t)?(this.explorer.myTree.expand(t),this.explorer.postUserExpand&&this.explorer.postUserExpand(this.model.getId(t)),e.preventDefault(),!1):void 0:!1},_isRowSelectable:function(e){return this.explorer.isRowSelectable?this.explorer.isRowSelectable(e):!0},onSpace:function(e){this.setSelection(this.currentModel(),!0,!0)&&e.preventDefault()},onEnter:function(e){var t=this.getCurrentGrid(this._modelIterator.cursor());if(t)if(t.widget)"function"==typeof t.onClick?t.onClick():"function"==typeof t.widget.focus&&t.widget.focus();else{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,this._ctrlKeyOn(e),!1,!1,!1,0,null),t.domNode.dispatchEvent(n)}else{var i=this._modelIterator.cursor();if(i){if(this.explorer.renderer.getRowActionElement){var r=this.explorer.renderer.getRowActionElement(this.model.getId(i));r.href&&(this._ctrlKeyOn(e)?window.open(r.href):window.location.href=r.href)}return this.explorer.renderer.performRowAction?(this.explorer.renderer.performRowAction(e,i),e.preventDefault(),!1):void 0}}},setIsNotSelectable:function(e,t){e.isNotSelectable=t},disableItem:function(e){var t=this.getRowDiv(e);this.isExpandable(e)&&this.isExpanded(e)&&(this._modelIterator.collapse(e),this.explorer.myTree.toggle(t.id)),t.classList.remove("checkedRow"),t.classList.add("disabledNavRow"),this.setIsNotSelectable(e,!0)},isDisabled:function(e){return e.classList.contains("disabledNavRow")},enableItem:function(e){var t=this.getRowDiv(e);t&&(t.classList.remove("disabledNavRow"),this.setIsNotSelectable(e,!1))}},i}(),i.ExplorerNavDict=function(){function e(e){this._dict={},this._model=e}return e.prototype={addRow:function(e,t){var n=this._model.getId(e);this._dict[n]={model:e,rowDomNode:t}},getValue:function(e){return this._dict[e]},getGridNavHolder:function(e,t){if(!e)return null;var n=this._model.getId(e);return this._dict[n]?(!this._dict[n].gridChildren&&t&&(this._dict[n].gridChildren=[]),this._dict[n].gridChildren):null},initGridNavHolder:function(e){if(!e)return null;var t=this._model.getId(e);this._dict[t]&&(this._dict[t].gridChildren=null)}},e}(),i}),define("orion/explorers/explorer",["i18n!orion/nls/messages","orion/webui/littlelib","orion/webui/treetable","orion/explorers/explorerNavHandler","orion/uiUtils","orion/commands"],function(e,t,n,i,r,o){var s={};return s.Explorer=function(){function e(e,t,n,i){this.registry=e,this.selection=t,this.commandService=i,this.setRenderer(n),this.myTree=null}return e.prototype={setRenderer:function(e){this.renderer&&"function"==typeof this.renderer.destroy&&this.renderer.destroy(),this.renderer=e,this.renderer&&(this.renderer.explorer=this)},destroy:function(){this._navHandler&&this._navHandler.destroy(),this.model&&this.model.destroy(),this.myTree&&this.myTree.destroy(),this.destroyed=!0},changedItem:function(e,t){this.myTree&&this.myTree.refresh.bind(this.myTree)(e,t,!0)},updateCommands:function(e){this.myTree&&this.myTree._renderer.updateCommands.bind(this.myTree._renderer)(e)},makeNewItemPlaceholder:function(e,t,n){var i=null,r=this.getRow(e);if(r){var o=r.parentNode,s=document.createElement("tr");s.id=t+"placeHolderRow",s.classList.add("navRow");var a=document.createElement("td");if(a.id=t+"placeHolderCol",a.classList.add("navColumn"),s.appendChild(a),n){var l=r.nextSibling;o.insertBefore(s,l)}else o.insertBefore(s,r);a.style.paddingLeft=r.firstChild.style.paddingLeft,i={wrapperNode:s,refNode:a,destroyFunction:function(){try{s&&s.parentNode&&s.parentNode.removeChild(s)}catch(e){}}}}return i},getRow:function(e){var n=this.model.getId(e);return n?t.node(n):void 0},collapseAll:function(){for(var e=this._navHandler.getTopLevelNodes(),t=0;t<e.length;t++)this.myTree.collapse(e[t])},expandAll:function(e){if(e)this._expandRecursively(e);else{if(!this._navHandler)return;for(var t=this._navHandler.getTopLevelNodes(),n=0;n<t.length;n++)this._expandRecursively(t[n])}},_expandRecursively:function(e){if(this._navHandler&&this._navHandler.isExpandable(e)){var t=this;this.myTree.expand(e,function(){t.model.getChildren(e,function(e){if(void 0!==e&&null!==e)for(var n=e.length,i=0;n>i;i++)t._expandRecursively(e[i])})})}},createTree:function(e,r,o){e="string"==typeof e?e:e.id||e,this.selection&&this.selection.setSelections([]),this.getNavHandler()&&this.getNavHandler()._clearSelection();var s=e+"innerTree",a=t.node(s);a&&t.empty(a),r&&(r.rootId=s+"Root"),this.model=r,this._parentId=e,this._treeOptions=o;var l=!o||o&&!o.noSelection;l&&(this.selectionPolicy=o?o.selectionPolicy:"",this._navDict=new i.ExplorerNavDict(this.model)),this.myTree=new n.TableTree({id:s,model:r,parent:e,onComplete:o?o.onComplete:void 0,labelColumnIndex:this.renderer.getLabelColumnIndex(),renderer:this.renderer,showRoot:o?!!o.showRoot:!1,indent:o?o.indent:void 0,preCollapse:o?o.preCollapse:void 0,onCollapse:o?o.onCollapse:void 0,navHandlerFactory:o?o.navHandlerFactory:void 0,tableElement:o?o.tableElement:void 0,tableBodyElement:o?o.tableBodyElement:void 0,tableRowElement:o?o.tableRowElement:void 0}),this.renderer._initializeUIState(),"cursorOnly"===this.selectionPolicy&&this.initNavHandler()},getNavHandler:function(){return this._navHandler},getNavDict:function(){return this._navDict},select:function(e){var t=this.getNavHandler();t&&(t.cursorOn(e,!0),t.setSelection(e))},refreshSelection:function(){if(this.selection){var e=this.getNavHandler(),t=[];if(e&&this.getNavDict())for(var n=e.getSelection(),i=0;i<n.length;i++){var r=e.getRowDiv(n[i]);if(r&&r.parentNode){var o=this.getNavDict().getValue(this.model.getId(n[i]));o.model&&t.push(o.model)}}this.selection.setSelections(t)}},getRootPath:function(){return this.model&&this.model.root?this.model.root.Location:null},initNavHandler:function(){var e=this._treeOptions,t=!e||e&&!e.noSelection;if(t){if(!this.getNavHandler())if(e&&e.navHandlerFactory&&"function"==typeof e.navHandlerFactory.createNavHandler)this._navHandler=e.navHandlerFactory.createNavHandler(this,this._navDict,e);else{var n=e?e.getChildrenFunc:null;this._navHandler=new i.ExplorerNavHandler(this,this._navDict,{getChildrenFunc:n,setFocus:e&&e.setFocus,selectionPolicy:e?e.selectionPolicy:null})}var r=this;this.model.getRoot(function(t){t instanceof Array?r.getNavHandler().refreshModel(r.getNavDict(),r.model,t):t.children&&t.children instanceof Array&&r.getNavHandler().refreshModel(r.getNavDict(),r.model,t.children),e&&e.setFocus&&r.getNavHandler().cursorOn(null,!1,!1,!0)})}},_lastHash:null,checkbox:!1},e}(),s.createExplorerCommands=function(t,n,i,r){function s(e){return"function"==typeof e.getItemCount&&e.getItemCount()>0?n?n(e):!0:!1}var a=new o.Command({tooltip:e["Expand all"],imageClass:"core-sprite-expandAll",id:i?i:"orion.explorer.expandAll",groupId:"orion.explorerGroup",visibleWhen:function(e){return s(e)},callback:function(e){e.items.expandAll()}}),l=new o.Command({tooltip:e["Collapse all"],imageClass:"core-sprite-collapseAll",id:r?r:"orion.explorer.collapseAll",groupId:"orion.explorerGroup",visibleWhen:function(e){return s(e)},callback:function(e){"function"==typeof e.items.preCollapseAll?e.items.preCollapseAll().then(function(t){t&&e.items.collapseAll()}):e.items.collapseAll()}});t.addCommand(a),t.addCommand(l)},s.ExplorerModel=function(){function e(e,t,n){this.rootPath=e,this.fetchItems=t,this.idPrefix=n||""}return e.prototype={destroy:function(){this.destroyed=!0},getRoot:function(e){var t=this;this.fetchItems(this.rootPath).then(function(n){t.root=n,e(n)})},getChildren:function(e,t){e.Children?t(e.Children):e.ChildrenLocation?this.fetchItems(e.ChildrenLocation).then(function(n){e.Children=n,t(n)}):t([])},getId:function(e){if(e.Location===this.root.Location)return this.rootId;for(var t=e.Location.replace(/[\\\/]/g,""),n=this.idPrefix,i=0;i<t.length;i++)n+=t[i].match(/[^\.\:\-\_0-9A-Za-z]/g)?t.charCodeAt(i):t[i];return n}},e}(),s.ExplorerFlatModel=function(){function e(e,t,n){this.rootPath=e,this.fetchItems=t,this.root=n}return e.prototype=new s.ExplorerModel,e.prototype.getRoot=function(e){if(this.root)e(this.root);else{var t=this;this.fetchItems(this.rootPath).then(function(n){t.root=n,e(n)})}},e.prototype.getChildren=function(e,t){t(e===this.root?this.root:[])},e}(),s.ExplorerRenderer=function(){function e(e,t){this.explorer=t,this._init(e),this._expandImageClass="core-sprite-openarrow",this._collapseImageClass="core-sprite-closedarrow",this._progressImageClass="core-sprite-progress",this._twistieSpriteClass="modelDecorationSprite"}return e.prototype={_init:function(e){e&&(this._useCheckboxSelection=void 0===e.checkbox?!1:e.checkbox,this.selectionPolicy=e.singleSelection?"singleSelection":"",this._cachePrefix=e.cachePrefix,e.getCheckedFunc&&(this.getCheckedFunc=e.getCheckedFunc),e.onCheckedFunc&&(this.onCheckedFunc=e.onCheckedFunc),this._noRowHighlighting=e.noRowHighlighting,this._highlightSelection=!0,this._treeTableClass=e.treeTableClass||"treetable",e.highlightSelection===!1&&(this._highlightSelection=!1),this.actionScopeId||(this.actionScopeId=e.actionScopeId),this.commandService||(this.commandService=e.commandService))},getLabelColumnIndex:function(){return this.explorer.checkbox?1:0},initTable:function(e,n){this.tableTree=n,this.tableNode=e,t.empty(e),this._treeTableClass&&e.classList.add(this._treeTableClass),this.renderTableHeader(e);var i=this;e.onclick=function(n){for(var o=n.target,s=o;s&&s!==e&&!s._item;)s=s.parentNode;if(s){var a=t.node(i.expandCollapseImageId(s.id));if(a){if(a!==o){var l=s._item;if((!i.explorer.isRowSelectable||i.explorer.isRowSelectable(l))&&(void 0===l.selectable||l.selectable))return;if(r.isFormElement(o,s))return}if(!i.explorer.getNavHandler().isDisabled(s)){i.tableTree.toggle(s.id);var c=i.tableTree.isExpanded(s.id);if(c)i._expanded.push(s.id),i.explorer.postUserExpand&&i.explorer.postUserExpand(s.id);else for(var u in i._expanded)if(i._expanded[u]===s.id){i._expanded.splice(u,1);break}var h=i._getUIStatePreferencePath();h&&window.sessionStorage&&i._storeExpansions(h)}}}}},getActionsColumn:function(e,t,n,i,r){n=n||"tool";var o=document.createElement("td");return o.id=t.id+"actionswrapper",i&&o.classList.add(i),this.actionScopeId&&this.commandService?this.commandService.renderCommands(this.actionScopeId,o,e,this.explorer,n,null,r&&this.explorer.getNavDict()?this.explorer.getNavDict().getGridNavHolder(e,!0):null):window.console.log("Warning, no command service or action scope was specified.  No commands rendered."),o},initCheckboxColumn:function(){if(this._useCheckboxSelection){var e=document.createElement("th");return e}},getCheckboxColumn:function(e,n){if(this._useCheckboxSelection){var i=document.createElement("td"),r=document.createElement("span");r.id=this.getCheckBoxId(n.id),r.classList.add("core-sprite-check"),r.classList.add("selectionCheckmarkSprite"),r.rowId=n.id,this.getCheckedFunc&&(r.checked=this.getCheckedFunc(e),r.checked?(this._highlightSelection&&n.classList.add("checkedRow"),r.classList.add("core-sprite-check_on")):(this._highlightSelection&&n.classList.remove("checkedRow"),r.classList.remove("core-sprite-check_on"))),i.appendChild(r);var o=this;return r.addEventListener("click",function(i){var r=i.target.checked?!1:!0;o.onCheck(n,i.target,r,!0,!1,e),t.stop(i)},!1),i}},getCheckBoxId:function(e){return e+"selectedState"},onCheck:function(e,t,n,i,r,o){t.checked=n,n?t.classList.add("core-sprite-check_on"):t.classList.remove("core-sprite-check_on"),this.onCheckedFunc&&this.onCheckedFunc(t.rowId,n,i,o),this.explorer.getNavHandler()&&r&&this.explorer.getNavHandler().setSelection(this.explorer.getNavDict().getValue(e.id).model,!0)},storeSelections:function(){if(this.explorer.getNavHandler()){var e=this.explorer.getNavHandler().getSelectionIds(),t=this._getUIStatePreferencePath();t&&window.sessionStorage&&(window.sessionStorage[t+"selection"]=JSON.stringify(e))}},_restoreSelections:function(e){var n=this.explorer.getNavDict(),i=this.explorer.getNavHandler();if(i&&n&&"cursorOnly"!==i.getSelectionPolicy()){var r=window.sessionStorage[e+"selection"];"string"==typeof r&&(r=r.length>0?JSON.parse(r):null);var o;if(r){var s=[];for(o=0;o<r.length;o++){var a=n.getValue(r[o]);if(a&&a.rowDomNode&&a.model){s.push(a.model),this._highlightSelection&&a.rowDomNode.classList.add("checkedRow");var l=t.node(this.getCheckBoxId(a.rowDomNode.id));l&&(l.checked=!0,l.classList.add("core-sprite-check_on"))}}this.explorer.selection&&(this.explorer.selection.setSelections(s),this.explorer.getNavHandler()&&this.explorer.getNavHandler().refreshSelection())}}},_storeExpansions:function(e){window.sessionStorage[e+"expanded"]=JSON.stringify(this._expanded)},_restoreExpansions:function(e){var n=!1,i=window.sessionStorage[e+"expanded"];"string"==typeof i&&(i=i.length>0?JSON.parse(i):null);var r;if(i)for(r=0;r<i.length;r++){var o=t.node(i[r]);if(o){this._expanded.push(i[r]);var s=this;this.tableTree.expand(i[r],function(){s._restoreSelections(e)}),n=!0}}return!n},_getUIStatePreferencePath:function(){if(this.explorer){var e=this.explorer.getRootPath();if(this._cachePrefix&&e){var t=e.replace(/[^\.\:\-\_0-9A-Za-z]/g,"");return"/"+this._cachePrefix+"/"+t+"/uiState"}}return null},expandCollapseImageId:function(e){return e+"__expand"},updateExpandVisuals:function(e,n){var i=t.node(this.expandCollapseImageId(e.id));i&&(i.classList.remove(this._expandImageClass),i.classList.remove(this._collapseImageClass),i.classList.remove(this._progressImageClass),i.classList.add("progress"===n?this._progressImageClass:n?this._expandImageClass:this._collapseImageClass))},getExpandImage:function(e,t,n,i){var r=document.createElement("span");if(r.id=this.expandCollapseImageId(e.id),t.appendChild(r),r.classList.add(this._twistieSpriteClass),r.classList.add(this._collapseImageClass),n){var o=document.createElement("span");t.appendChild(o),o.classList.add(i||"imageSprite"),o.classList.add(n)}return r},render:function(e,t){t.classList.add("navRow"),this.renderRow(e,t)},rowsChanged:function(){if("cursorOnly"!==this.explorer.selectionPolicy&&(this.explorer.refreshSelection(),this.explorer.initNavHandler()),!this._noRowHighlighting){var e="darkSectionTreeTableRow",n="lightSectionTreeTableRow";(t.$(".sectionTreeTable",this.tableNode.parentNode)||t.$(".treetable",this.tableNode.parentNode))&&t.$$array(".treeTableRow",this.tableNode).forEach(function(t,i){var r=i%2?e:n,o=r===n?e:n;t.classList.add(r),t.classList.remove(o)})}},updateCommands:function(){if(this.commandService)for(var e=t.$$array(".treeTableRow"),n=0;n<e.length;n++){var i=e[n],r=i.id+"actionswrapper",o=t.node(r);this.commandService.destroy(o),this.actionScopeId&&this.commandService.renderCommands(this.actionScopeId,o,i._item,this.explorer,"tool")}},_initializeUIState:function(){this._expanded=[];var e=this._getUIStatePreferencePath();e&&window.sessionStorage&&this._restoreExpansions(e)&&this._restoreSelections(e)}},e}(),s.SelectionRenderer=function(){function e(e,t){this._init(e),this.explorer=t}return e.prototype=new s.ExplorerRenderer,e.prototype.renderTableHeader=function(e){var t=document.createElement("thead"),n=document.createElement("tr");t.classList.add("navTableHeading"),this._useCheckboxSelection&&n.appendChild(this.initCheckboxColumn(e));for(var i=0,r=this.getCellHeaderElement(i);r;)r.innerHTML.length>0&&r.classList.add("navColumn"),n.appendChild(r),r=this.getCellHeaderElement(++i);t.appendChild(n),i>0&&e.appendChild(t)},e.prototype.initSelectableRow=function(e,t){var n=this;t.addEventListener("click",function(t){n.explorer.getNavHandler()&&n.explorer.getNavHandler().onClick(e,t)},!1)},e.prototype.renderRow=function(e,t){t.verticalAlign="baseline",t.classList.add("treeTableRow");var n=this.explorer.getNavDict();if(n&&("cursorOnly"!==this.explorer.selectionPolicy&&t.classList.add("selectableNavRow"),n.addRow(e,t)),void 0===e.selectable||e.selectable){var i=this.getCheckboxColumn(e,t);i&&(i.classList.add("checkColumn"),t.appendChild(i))}for(var r=0,o=this.getCellElement(r,e,t);o;)t.appendChild(o),o.classList.add(0===r?this.getPrimColumnStyle?this.getPrimColumnStyle(e):"navColumn":this.getSecondaryColumnStyle?this.getSecondaryColumnStyle():"secondaryColumn"),o=this.getCellElement(++r,e,t)},e.prototype.getCellHeaderElement=function(){},e.prototype.getCellElement=function(){},e}(),s.SimpleFlatModel=function(){function e(e,t,n){this.items=e,this.getKey=n,this.idPrefix=t,this.root={children:e}}return e.prototype=new s.ExplorerModel,e.prototype.getRoot=function(e){e(this.root)},e.prototype.getId=function(e){for(var t=this.getKey(e),n=t.replace(/[\\\/]/g,""),i="",r=0;r<n.length;r++)i+=n[r].match(/[^\.\:\-\_0-9A-Za-z]/g)?n.charCodeAt(r):n[r];return this.idPrefix+i},e.prototype.getChildren=function(e,t){t(e===this.root?this.items:[])},e}(),s}),define("orion/PageLinks",["require","orion/Deferred","orion/PageUtil","orion/URITemplate","orion/i18nUtil","orion/objects","orion/URL-shim"],function(e,t,n,i,r,o){function s(){if(e.toUrl){var t=new URL(e.toUrl("orion/"),window.location.href);return new URL("../",t).href.slice(0,-1)}return new URL("/",window.location.href).href.slice(0,-1)}function a(e,t){return c(e,t).then(function(e){return new d(e)})}function l(e){var t={};return e.getPropertyKeys().forEach(function(n){"objectClass"!==n&&"service.names"!==n&&"service.id"!==n&&"__plugin__"!==n&&(t[n]=e.getProperty(n))}),t}function c(e,r){r=r||"orion.page.link";var o=e.getServiceReferences(r),a=n.matchResourceParameters(window.location.href),c=s(),u={OrionHome:c,Location:a.resource},h=[];return o.forEach(function(e){var r=l(e);if(r.uriTemplate&&(r.nls||r.name)){var o=new i(r.uriTemplate),s=o.expand(u);s=n.validateURLScheme(s),r.href=s,r.textContent=r.name||r.nameKey,h.push((new t).resolve(r))}}),t.all(h)}function u(e){var n;if(!m){n=[];var i=e.getServiceReferences("orion.page.link.category");return i.forEach(function(i){var r=l(i);r.id&&(r.name||r.nameKey)&&(r.service=e.getService(i),r.textContent=r.name,n.push((new t).resolve(r)))}),t.all(n).then(function(e){return m=new h(e)})}return(new t).resolve(m)}function h(e){var t=this.categories=Object.create(null);e.forEach(function(e){t[e.id]=e})}function d(e){this.allPageLinks=e,this.allPageLinks.sort(p)}function p(e,t){var n=e.textContent&&e.textContent.toLowerCase(),i=t.textContent&&t.textContent.toLowerCase();return i>n?-1:n>i?1:0}function f(e,t,n){var i=document.createElement("a");return i.href=e,i.target=t,i.classList.add("targetSelector"),i.textContent=n,i}var m;return o.mixin(h.prototype,{getCategoryIDs:function(){return Object.keys(this.categories)},getCategory:function(e){return this.categories[e]||null}}),o.mixin(d.prototype,{createLinkElements:function(){return this.allPageLinks.map(function(e){return f(e.href,"_self",e.textContent)})},getAllLinks:function(){return this.allPageLinks}}),{getCategoriesInfo:u,getPageLinksInfo:a,getOrionHome:s}}),define("orion/edit/nls/messages",{root:!0}),define("orion/edit/nls/root/messages",{Editor:"Editor",switchEditor:"Switch Editor",Fetching:"Fetching: ${0}",confirmUnsavedChanges:"There are unsaved changes. Do you still want to navigate away?",searchFiles:"Quick Search...",searchTerm:"Enter search term:",unsavedChanges:"There are unsaved changes.",unsavedAutoSaveChanges:"Please stay on the page until Auto Save is complete.",Save:"Save",Saved:"Saved",Blame:"Blame",BlameTooltip:"Show blame annotations",Diff:"Diff",DiffTooltip:"Show diff annotations",saveOutOfSync:"Resource is out of sync with the server. Do you want to save it anyway?",loadOutOfSync:"Resource is out of sync with the server. Do you want to load it anyway? This will overwrite your local changes.",ReadingMetadata:"Reading metadata of ${0}",ReadingMetadataError:"Cannot get metadata of ${0}",Reading:"Reading ${0}",readonly:"Read Only.",saveFile:"Save this file",toggleZoomRuler:"Toggle Zoom Ruler",gotoLine:"Go to line...",gotoLineTooltip:"Go to specified line number",gotoLinePrompt:"Go to line:",Undo:"Undo",Redo:"Redo",Find:"Find...",noResponse:"No response from server. Check your internet connection and try again.",savingFile:"Saving file ${0}",running:"Running ${0}","Saving...":"Saving...",View:"View",SidePanel:"Side Panel",SidePanelTooltip:"Choose what to show in the side panel.",Slideout:"Slideout",Actions:"Actions",Navigator:"Navigator",FolderNavigator:"Folder Navigator",Project:"Project",New:"New",File:"File",Edit:"Edit",Tools:"Tools",Add:"Add",noActions:"There are no actions for the current selection.",NoFile:"Use the ${0} to create new files and folders. Click a file to start coding.",LocalEditorSettings:"Local Editor Settings",NoProject:"${0} is not a project. To convert it to a project use ${1}.",NoProjects:"There are no projects in your workspace. Use the ${0} menu to create projects.",Disconnected:"${0} (disconnected)",ChooseFS:"Choose Filesystem",ChooseFSTooltip:"Choose the filesystem you want to view.",FSTitle:"${0} (${1})",Deploy:"Deploy","Deploy As":"Deploy As",Import:"Import",Export:"Export",OpenWith:"Open with",OpenRelated:"Open related",Dependency:"Dependency",UnnamedCommand:"Unnamed",searchInFolder:"Search in folder...","Global Search":"Global Search...",ClickEditLabel:"Click to edit",ProjectInfo:"Project Information",DeployInfo:"Deployment Information",Name:"Name",Description:"Description",Site:"Site",projectsSectionTitle:"Projects",listingProjects:"Listing projects...",gettingWorkspaceInfo:"Getting workspace information...",showProblems:"Show problems...",showTooltip:"Show Tooltip",showTooltipTooltip:"Shows the tooltip immediately based on the caret position",emptyDeploymentInfoMessage:"Use the Launch Configurations dropdown to deploy this project"}),define("orion/extensionCommands",["orion/Deferred","orion/commands","orion/contentTypes","orion/URITemplate","orion/i18nUtil","orion/PageLinks","i18n!orion/edit/nls/messages","orion/URL-shim"],function(e,t,n,i,r,o,s){function a(e){var t={},n=e.getPropertyKeys();return n.forEach(function(n){t[n]=e.getProperty(n)}),t}function l(e){return e.id||e.name}var c={},u=o.getOrionHome();c._cloneItemWithoutChildren=function f(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)"children"!==n&&"Children"!==n&&(t[n]=f(e[n]));return t},c._getOpenWithNavCommandExtensions=function(e){function t(){for(var t=e.getServiceReferences("orion.edit.editor"),n=[],i=0;i<t.length;i++){var r=t[i],o=r.getProperty("id");n.push({id:o,"default":r.getProperty("default")||!1,name:r.getProperty("name"),nameKey:r.getProperty("nameKey"),nls:r.getProperty("nls"),uriTemplate:r.getProperty("orionTemplate")||r.getProperty("uriTemplate"),validationProperties:r.getProperty("validationProperties")||[]})}return n}function n(e,t){for(var n=e.getServiceReferences("orion.navigate.openWith"),i=[],r=[],o=0;o<n.length;o++){var s=n[o];if(s.getProperty("editor")===t.id){var a=s.getProperty("contentType");a instanceof Array?i=i.concat(a):i.push(a||"*/*");var l=s.getProperty("excludedContentTypes");l instanceof Array?r=r.concat(l):null!==l&&"undefined"!=typeof l&&r.push(l)}}return 0===i.length&&(i=null),0===r.length&&(r=null),{contentTypes:i,excludedContentTypes:r}}for(var i,r=t(),o=[],s="orion.editor",a=0;a<r.length;a++){var l=r[a],c=n(e,l),u=c.contentTypes,h=c.excludedContentTypes,d={name:l.name||l.id,nameKey:l.nameKey,id:"eclipse.openWithCommand."+l.id,contentType:u,excludedContentTypes:h,uriTemplate:l.uriTemplate,nls:l.nls,forceSingleItem:!0,isEditor:l["default"]?"default":"editor",validationProperties:l.validationProperties},p={properties:d,service:{}};l.id===s?i=p:o.push(p)}return i&&o.push(i),o},c._makeValidator=function(e,t,r,o){function s(e,t,n,i,r){var o,s=!1;if("!"===t.charAt(0))return"undefined"==typeof e[t.substring(1)];if("undefined"!=typeof e[t]){if("undefined"==typeof n)o=e[t],s=!0;else if("string"==typeof n){if(!i.variableName)return new RegExp(n).test(e[t]);var a=new RegExp(n).exec(e[t]);if(a){var l=a[0];o="before"===i.variableMatchPosition?e[t].substring(0,a.index):"after"===i.variableMatchPosition?e[t].substring(a.index+l.length):"only"===i.variableMatchPosition?l:e[t],s=!0}}else e[t]===n&&(o=e[t],s=!0);var c=i.variableName,u=i.replacements;if(s&&c&&(r[c]=o,r.itemCached=e,u)){if("string"!=typeof o)return window.console.log("Cannot replace "+c+", value is not a string: "+o),s;for(var h=0;h<u.length;h++){var d=!1;if(u[h].pattern){var p=u[h].pattern,f=u[h].replacement||"";r[c]=r[c].replace(new RegExp(p),f).replace(new RegExp(p),f)}else d=!0;d&&window.console.log("Invalid replacements specified in validation property.  "+u[h])}}return s}return!1}function a(e,t,n,i){var r,o,l,c,u=n.match;if((l=t.indexOf("["))>=0){if((c=t.indexOf("]"))<0)return!1;var h,d,p=t.substring(0,l);if(!(h=e[p])||!Array.isArray(h))return!1;if(r=t.substring(l+1,c),d=parseInt(r,10),isNaN(d))return!1;0>d&&(d+=h.length),o=t.substring(c+1),t=p+":"+String(d)+o}return t.indexOf("|")>=0?(r=t.substring(0,t.indexOf("|")),o=t.substring(t.indexOf("|")+1),a(e,r,n,i)?!0:a(e,o,n,i)):t.indexOf(":")>=0?(r=t.substring(0,t.indexOf(":")),o=t.substring(t.indexOf(":")+1),e[r]?a(e[r],o,n,i):!1):s(e,t,u,n,i)}function l(t,i,r){if(r.info.validationProperties)for(var o=0;o<r.info.validationProperties.length;o++){var s=r.info.validationProperties[o];if("undefined"==typeof s.source)return window.console.log("Invalid validationProperties in "+e.id+".  No source property specified."),!1;var l=a(t,s.source,s,r);if(!l)return!1}if(!r.info.contentType&&!r.info.excludedContentTypes)return!0;if(t.Directory)return r.info.contentType&&r.info.contentType.indexOf("*/*")>=0?!0:!1;var c=!0,u=i?n.getFilenameContentType(t.Name,i):null;return u=u||{id:"application/octet-stream"},r.info.excludedContentTypes&&i&&(c=r.info.excludedContentTypes.every(function(e){var t=e.replace(/([*?])/g,".$1");return-1!==u.id.search(t)?!1:!0})),c&&r.info.contentType&&i&&(c=r.info.contentType.some(function(e){var t=e.replace(/([*?])/g,".$1");return-1!==u.id.search(t)?!0:!1})),c}var c={info:e};return c.validationFunction=function(e){if("function"==typeof o&&(e=o.call(this,e)),e){if(Array.isArray(e)){if((this.info.forceSingleItem||this.info.uriTemplate)&&1!==e.length)return!1;if(e.length<1)return!1}else e=[e];for(var t=0;t<e.length;t++)if(!l(e[t],r,this))return!1;return!0}return!1},c.generatesURI=function(){return!!this.info.uriTemplate},c.getURI=function(e){if(this.info.uriTemplate){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);if(this.info.validationProperties)for(var r=0;r<this.info.validationProperties.length;r++){var o=this.info.validationProperties[r];if(o.source&&o.variableName){var s=this.itemCached===e&&this[o.variableName];s||a(e,o.source,o,this),e[o.variableName]?window.console.log("Variable name "+o.variableName+" in the extension "+this.info.id+" conflicts with an existing property in the item metadata."):t[o.variableName]=this[o.variableName]}}t.OrionHome=u;var l=new i(this.info.uriTemplate);return l.expand(t)}return null},c};var h=s.UnnamedCommand,d="";c._createCommandOptions=function(t,n,i,r,o,s){function a(e,a){var l=c._makeValidator(t,i,r,s);if(e.visibleWhen=l.validationFunction.bind(l),o)if(l.generatesURI.bind(l)())e.hrefCallback=function(e){var t=Array.isArray(e.items)?e.items[0]:e.items;return l.getURI.bind(l)(t)};else{var u=t;e.callback=function(t){var r;if(u.forceSingleItem){var o=Array.isArray(t.items)?t.items[0]:t.items;r=c._cloneItemWithoutChildren(o)}else if(Array.isArray(t.items)){r=[];for(var s=0;s<t.items.length;s++)r.push(c._cloneItemWithoutChildren(t.items[s]))}else r=c._cloneItemWithoutChildren(t.items);if(i)var a=i.getService("orion.page.progress");n.run?a?a.progress(n.run(r),"Running command: "+e.name):n.run(r):i&&(a?a.progress(i.getService(n).run(r),"Running command: "+e.name):i.getService(n).run(r))}}a.resolve(e)}var u=new e,p={name:t.name||t.nameKey||h,image:t.image,id:l(t),tooltip:t.tooltip||t.tooltipKey||d,isEditor:t.isEditor,showGlobally:t.showGlobally};return a(p,u),u},c.getOpenWithCommand=function(e,t,n){for(var i,r=n||c.getOpenWithCommands(e),o=0;o<r.length;o++)if(r[o].visibleWhen(t)){var s="default"===r[o].isEditor;if((!i||s)&&(i=r[o],s))break}return i},c.getOpenWithCommands=function(e){var t=[];for(var n in e._commandList){var i=e._commandList[n];i.isEditor&&t.push(i)}return t};var p;return c.createAndPlaceFileCommandsExtension=function(e,t,n,i,r,o){var a=o?"all":void 0,l=!!o;return c.createFileCommands(e,null,a,l,t).then(function(e){return r&&0<e.length&&(t.addCommandGroup(n,"eclipse.openWith",1e3,s.OpenWith,r,null,null,null,"dropdownSelection"),t.addCommandGroup(n,"eclipse.fileCommandExtensions",1e3,s.OpenRelated,r)),e.forEach(function(e){var o=null;
r&&(o=e.isEditor?r+"/eclipse.openWith":r+"/eclipse.fileCommandExtensions"),t.registerCommandContribution(n,e.id,i,o)}),{}})},c.createFileCommands=function(n,i,r,o,s){function a(){var t=n.getService("orion.core.contentTypeRegistry")||i;return p||e.when(t.getContentTypes(),function(e){return p=e})}r=void 0===r?"global":r,o=void 0===o?!0:o;var u=[];return c._cachedFileCommands||c._createCachedFileCommands(n),("all"===r||"global"===r)&&c._cachedFileCommands.forEach(function(e){var t=e.properties;("all"===r||t.forceSingleItem&&t.showGlobally)&&u.push(e)}),e.when(a(),function(){o&&(c._cachedOpenWithExtensions||(c._cachedOpenWithExtensions=c._getOpenWithNavCommandExtensions(n,p)),u=u.concat(c._cachedOpenWithExtensions),s._addedOpenWithCommands=o);var i=u.map(function(i){var r=i.properties,o=i.service,a=s.findCommand(l(r));return a?(new e).resolve(a):c._createCommandOptions(r,o,n,p,!0).then(function(e){var n=new t.Command(e);return s.addCommand(n),n})});return e.all(i,function(e){return{_error:e}}).then(function(e){return e})})},c._createCachedFileCommands=function(e){var t=e.getServiceReferences("orion.navigate.command");c._cachedFileCommands=[];for(var n=0;n<t.length;n++){var i=t[n].getProperty("id");if("orion.navigateFromMetadata"!==i){var r=e.getService(t[n]),o=a(t[n]);c._cachedFileCommands.push({properties:o,service:r})}}},c.getFileCommandIds=function(){var e=[];if(!c._cachedFileCommands)throw"extensionCommandUtils._cachedFileCommands is not initialized";return c._cachedFileCommands.length&&(e=c._cachedFileCommands.map(function(e){return e.properties.id})),e},c.createOpenWithCommands=function(t,n,i){return i&&i._addedOpenWithCommands?(new e).resolve(c.getOpenWithCommands(i)):c.createFileCommands(t,n,"none",!0,i)},c}),define("orion/widgets/browse/commitInfoRenderer",["orion/objects","orion/URITemplate","orion/webui/littlelib","orion/xhr","orion/URL-shim"],function(e,t,n,i){function r(e){var t=new Date,n=new Date(e),i=t.getTime()-n.getTime(),r=Math.floor(i/1e3/60/60/24/365);i-=1e3*r*60*60*24*365;var o=Math.floor(i/1e3/60/60/24/30);i-=1e3*o*60*60*24*30;var s=Math.floor(i/1e3/60/60/24);i-=1e3*s*60*60*24;var a=Math.floor(i/1e3/60/60);i-=1e3*a*60*60;var l=Math.floor(i/1e3/60);i-=1e3*l*60;var c=Math.floor(i/1e3);return{year:r,month:o,day:s,hour:a,minute:l,second:c}}function o(e,t,n){return e>0?1===e?t+" ":e+" "+n+" ":""}function s(e){var t=r(e),n=o(t.year,"a year","years"),i=o(t.month,"a month","months"),s=o(t.day,"a day","days"),a=o(t.hour,"an hour","hours"),l=o(t.minute,"a minute","minutes"),c="";return n?c=t.year>0?n:n+i:i?c=t.month>0?i:i+s:s?c=t.day>0?s:s+a:a?c=t.hour>0?a:a+l:l&&(c=l),c?c+"ago":"Just now"}function a(e){this._parentDomNode=n.node(e.parent),this._commitInfo=e.commitInfo}return e.mixin(a.prototype,{destroy:function(){},_simpleMessage:function(e){var t=this._commitInfo.Message?this._commitInfo.Message:"";if(t){var n=t.replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n");n&&n.length>0&&(t=n[0]),e>10&&t.length>e&&(t=t.substring(0,e-3)+"...")}return t},_generateMessageNode:function(e){var n;if(this._commitInfo.URL||this._commitInfo.SHA1){if(n=document.createElement("a"),this._commitInfo.SHA1){var i=new URL("commit",window.location.href).href;i=decodeURIComponent(i),n.href=new t(i+"{/SHA1}").expand(this._commitInfo)}else n.href=this._commitInfo.URL;n.classList.add("commitInfolink"),n.appendChild(document.createTextNode(e))}else n=document.createElement("span"),n.appendChild(document.createTextNode(e));return n},_requestPhotoURL:function(e,t){var n=this,r="/manage/service/com.ibm.team.jazzhub.common.service.IPhotoService/getContributorPhotoURI",o=new URL(r,window.location.href);o.query.set("contributorUserId",e);var s=o.href;i("GET",s,{timeout:15e3}).then(function(e){var n=JSON.parse(e.response);t.src=n.photoURI},function(){n._useOtherPhotoURL(t)})},_useOtherPhotoURL:function(e){e.src=this._commitInfo.AvatarURL?this._commitInfo.AvatarURL:"https://www.gravatar.com/avatar/?d=mm"},renderSimple:function(e){this._parentDomNode.appendChild(this._generateMessageNode(this._simpleMessage(e)))},render:function(e,t){var i=this._commitInfo.Author&&this._commitInfo.Author.Date?s(this._commitInfo.Author.Date):"",r=this._simpleMessage(-1),o=this._commitInfo.Author&&this._commitInfo.Author.Name?this._commitInfo.Author.Name:"",a=e;if(a||(a="Commit"),a="Last "+a,t){var l=document.createElement("div"),c=new Image;this._commitInfo.Author&&this._commitInfo.Author.UserId?this._requestPhotoURL(this._commitInfo.Author.UserId,c):this._useOtherPhotoURL(c),c.classList.add("commitInfoAvatar"),l.appendChild(c),this._parentDomNode.appendChild(l)}else{var u=document.createElement("div");u.classList.add("commitInfoLabelContainer"),u.appendChild(document.createTextNode(a.toUpperCase())),this._parentDomNode.appendChild(u)}var h=document.createElement("div");h.classList.add("commitInfoMessageContainer");var d=document.createElement("div");d.classList.add("commitInfoAutorContainer");var p=document.createDocumentFragment(),f=document.createElement("span");f.appendChild(document.createTextNode(o)),f.classList.add("navColumnBold");var m;if(t){var g=document.createElement("span");g.appendChild(document.createTextNode(a)),g.classList.add("navColumnBold"),p.textContent=i?"${0} by ${1} "+i+".":"${0} by ${1}.",m=[g,f]}else p.textContent=i?"by ${0} "+i+".":"by ${0}.",m=[f];n.processDOMNodes(p,m),d.appendChild(p),h.appendChild(d);var v=document.createElement("div");v.classList.add("commitInfoMessageTextContainer"),v.appendChild(this._generateMessageNode(r)),h.appendChild(v),this._parentDomNode.appendChild(h)}}),{CommitInfoRenderer:a,calculateTime:s}}),define("orion/explorers/navigatorRenderer",["i18n!orion/navigate/nls/messages","orion/Deferred","orion/explorers/explorer","orion/explorers/navigationUtils","orion/extensionCommands","orion/objects","orion/URITemplate","orion/widgets/browse/commitInfoRenderer","orion/contentTypes","orion/webui/littlelib"],function(e,t,n,i,r,o,s,a,l,c){function u(e,t,n,i){var r;if(e){var o=e.imageClass,s=e.image;o?(r=document.createElement("span"),r.className+=o,r.classList.add("thumbnail")):s&&(r=document.createElement("img"),r.src=s,r.classList.add("thumbnail")),r&&t.replaceChild(r,i)}return r?r:i}function h(){return f}function d(e,n,i,a,c,h,d,p,m){n=o.clone(n);var v;if(n.Directory){v=document.createElement("a"),v.className="navlinkonpage";var y=e?new s(e+"#{,resource,params*}"):g;v.href=y.expand({resource:n.ChildrenLocation}),n.Name&&v.appendChild(document.createTextNode(n.Name))}else{c||(c=r.getOpenWithCommands(i)),v=document.createElement("a"),v.className="navlink targetSelector",h&&"object"==typeof h&&Object.keys(h).forEach(function(e){v[e]=h[e]});var _=null,b=null;_=p?p.holderDom:v,_&&(b=document.createElement("span"),b.className="core-sprite-file modelDecorationSprite thumbnail",_.appendChild(b)),n.Name&&v.appendChild(document.createTextNode(n.Name));var C=n.Location;d&&"object"==typeof d&&(n.params={},o.mixin(n.params,d));var w=r.getOpenWithCommand(i,n,c);w&&(C=w.hrefCallback({items:n})),t.when(a.getFileContentType(n),function(e){var t;_&&(t=u(e,_,n.Location,b)),v.href=C,m&&"function"==typeof m.updateFileNode&&m.updateFileNode(n,v,l.isImage(e),t)})}return v.addEventListener("click",function(){f=n}.bind(this),!1),v}function p(e,t,n,i){this.explorer=t,this.commandService=n,this.contentTypeService=i,this.openWithCommands=null,this.actionScopeId=e.actionScopeId,this._init(e)}var f,m=60,g=new s("#{,resource,params*}");return p.prototype=new n.SelectionRenderer,p.prototype.wrapperCallback=function(e){e.setAttribute("role","tree")},p.prototype.tableCallback=function(t){t.setAttribute("aria-label",e.Navigator),t.setAttribute("role","presentation")},p.prototype.rowCallback=function(e){e.setAttribute("role","treeitem")},p.prototype.emptyCallback=function(t){var n=document.createElement("tr"),i=document.createElement("td");i.colSpan=this.oneColumn?1:3;var r=document.createElement("div");r.classList.add("noFile"),r.textContent=e.NoFile;var o=document.createElement("span");o.appendChild(document.createTextNode(e.File)),c.processDOMNodes(r,[o]),i.appendChild(r),n.appendChild(i),t.appendChild(n)},p.prototype.getDisplayTime=function(e){return new Date(e).toLocaleString()},p.prototype.getCommitRenderer=function(e,t){return new a.CommitInfoRenderer({parent:e,commitInfo:t})},p.prototype.getCellHeaderElement=function(e){if(this.oneColumn&&0!==e)return null;switch(e){case 0:case 1:case 2:var t=document.createElement("th");t.style.height="8px"}},p.prototype.getFolderImage=function(){if(!this.showFolderImage)return null;var e=document.createElement("span");return e.className="core-sprite-folder modelDecorationSprite",e},p.prototype.createFolderNode=function(e){var t;if(this.showFolderLinks){t=d(this.folderLink||"",e,this.commandService,this.contentTypeService);var n=this.getFolderImage(e);n&&t.insertBefore(n,t.firstChild)}else t=document.createElement("span"),t.textContent=e.Name;return t},p.prototype.updateFileNode=function(){},p.prototype.showFolderLinks=!0,p.prototype.getCellElement=function(e,t,n){var o=t.LastCommit?2:1,s=t.LastCommit?3:2,a=t.LastCommit?1:-1;switch(e){case 0:var l=document.createElement("td"),c=document.createElement("span");c.id=n.id+"MainCol",c.setAttribute("role","presentation"),l.appendChild(c),l.setAttribute("role","presentation"),c.className="mainNavColumn";var u;return t.Directory?(this.getExpandImage(n,c),u=this.createFolderNode(t),c.appendChild(u),this.explorer._makeDropTarget(t,u),this.explorer._makeDropTarget(t,n)):(this.openWithCommands||(this.openWithCommands=r.getOpenWithCommands(this.commandService)),u=d("",t,this.commandService,this.contentTypeService,this.openWithCommands,null,null,null,this),c.appendChild(u)),u&&(u.id=n.id+"NameLink",1===u.nodeType&&(i.addNavGrid(this.explorer.getNavDict(),t,u),u.setAttribute("role","link"),u.setAttribute("tabindex","-1"))),this.actionScopeId&&this.commandService.renderCommands(this.actionScopeId,c,t,this.explorer,"tool",null,!0),l;case o:if(this.oneColumn)return null;var h=document.createElement("td");return t.LocalTimeStamp&&(h.textContent=this.getDisplayTime(t.LocalTimeStamp)),h;case s:if(this.oneColumn)return null;var p=document.createElement("td");if(!t.Directory&&"number"==typeof t.Length){var f=parseInt(t.Length,10),g=f/1024;p.textContent=Math.ceil(g).toLocaleString()+" KB"}return p.style.textAlign="right",p;case a:if(this.oneColumn||!t.LastCommit)return null;var v=document.createElement("td");return this.getCommitRenderer(v,t.LastCommit).renderSimple(m),v}},p.prototype.constructor=p,{NavigatorRenderer:p,getClickedItem:h,createLink:d}}),define("orion/searchClient",["i18n!orion/search/nls/messages","require","orion/webui/littlelib","orion/i18nUtil","orion/searchUtils","orion/crawler/searchCrawler","orion/explorers/navigatorRenderer","orion/extensionCommands","orion/uiUtils","orion/Deferred"],function(e,t,n,i,r,o,s,a,l,c){function u(e,t){this.serviceRegistry=e,this.commandRegistry=t,this.openWithCommands=null}function h(e){this.registry=e.serviceRegistry,this._commandService=e.commandService,this._fileService=e.fileService,this.defaultRenderer=new u(this.registry,this._commandService),this._fileService||console.error("No file service on search client")}return u.prototype.makeRenderFunction=function(o,l,u,h,d){function p(a,p,f,v){c.when(g.openWithCommands,function(c){if(f){n.empty(l);var g=document.createElement("div");return g.appendChild(document.createTextNode(e["Search failed."])),l.appendChild(g),void("function"==typeof h&&h(l))}var y=function(){function e(e,t){var n=t.folderName?t.folderName:t.path,i=document.createElement("span");i.id=n.replace(/[^a-zA-Z0-9_\.:\-]/g,""),i.appendChild(document.createTextNode(" - "+n+" ")),e.appendChild(i)}function t(t,i){var r=i.name;if(n.hasOwnProperty(r)){e(t,i);var o=n[r];"function"==typeof o&&(n[r]=null,o())}else n[r]=function(){e(t,i)}}var n={};return t}(),_=!1;if(n.empty(l),a&&a.length>0){var b=document.createElement("table");b.setAttribute("role","presentation");for(var C=0;C<a.length;C++){var w,S=a[C];if(!_&&(_=!0,u)){var E=b.insertRow(0);w=E.insertCell(0),w.textContent=u}var x=b.insertRow(-1);w=x.insertCell(0),w.colspan=2,d&&d(w);var L={Name:S.name,Directory:S.directory,Location:S.path||S.location},T=null;if("number"==typeof S.LineNumber&&(T={},T.line=S.LineNumber),v&&v.keyword&&!v.nameSearch){var k=r.generateSearchHelper(v);T=T||{},T.find=k.inFileQuery.searchStr,T.regEx=k.inFileQuery.wildCard?!0:void 0}var N=s.createLink(t.toUrl("edit/edit.html"),L,m,o,c,{"aria-describedby":(S.folderName?S.folderName:S.path).replace(/[^a-zA-Z0-9_\.:\-]/g,""),style:{verticalAlign:"middle"}},T);S.LineNumber&&N.appendChild(document.createTextNode(" (Line "+S.LineNumber+")")),w.appendChild(N),y(w,S)}l.appendChild(b),"function"==typeof h&&h(l)}if(!_&&p){var A=i.formatMessage(e.NoMatchFound,p);n.empty(l),l.appendChild(document.createTextNode(A)),"function"==typeof h&&h(l)}})}var f=this.serviceRegistry,m=this.commandRegistry;this.openWithCommands=this.openWithCommands||a.createOpenWithCommands(f,o,m);var g=this;return p},h.prototype={search:function(e,t,n){var i=function(e){for(var n=[],i=0;i<e.response.docs.length;i++){var r=e.response.docs[i],o=r.Location,s=l.path2FolderName(r.Path?r.Path:r.Location,r.Name),a=s?s:o,c=t?a.indexOf(t)>=0:!0;c&&n.push({name:r.Name,path:o,folderName:s,directory:r.Directory,lineNumber:r.LineNumber})}return n};if(this._crawler&&e.nameSearch)this._crawler.searchName(e,function(t){n(i(t),e.keyword,null,e)});else try{this.registry.getService("orion.page.progress").progress(this._fileService.search(e),"Searching "+e.keyword).then(function(t){var r=e.keyword;r=r.substring(r.indexOf("}")+1),r=r.substring(r.indexOf(":")+1),n(i(t),r,null,e)},function(e){n(null,null,e,null)})}catch(r){if("string"==typeof r&&r.indexOf("search")>-1&&this._crawler)this._crawler.searchName(e,function(t){n(i(t),null,null,e)});else if("string"==typeof r&&r.indexOf("search")>-1&&!e.nameSearch){var s=new o.SearchCrawler(this.registry,this._fileService,e,{childrenLocation:this.getChildrenLocation()});s.search(function(t){n(i(t),null,null,e)})}else this.registry.getService("orion.page.message").setErrorMessage(r)}},getFileService:function(){return this._fileService},setCrawler:function(e){this._crawler=e},handleError:function(e,t){return console.error(e),n.empty(t),t.appendChild(document.createTextNode(e)),e},setLocationByMetaData:function(t,r){var o="",s=null;this._searchRootLocation=this._fileService.fileServiceRootURL(t.Location),r&&t&&t.Parents&&t.Parents.length>0?s="last"===r.index?t.Parents[t.Parents.length-1]:t.Parents[0]:t&&t.Directory&&t.Location&&t.Parents&&(s=t),s?(this.setLocationbyURL(s.Location),o=s.Name,this._childrenLocation=s.ChildrenLocation):t&&(this.setLocationbyURL(this._searchRootLocation),o=this._fileService.fileServiceName(t.Location),this._childrenLocation=t.ChildrenLocation);var a=n.node("search");if(o||(o=""),a&&a.placeholder){a.value="";var l=i.formatMessage(e["Search ${0}"],o);a.placeholder=l.length>30?l.substring(0,27)+"...":i.formatMessage(e["Search ${0}"],o)}a&&a.title&&(a.title=e.TypeKeyOrWildCard+o)},setLocationbyURL:function(e){this._searchLocation=e},setRootLocationbyURL:function(e){this._searchRootLocation=e},setChildrenLocationbyURL:function(e){this._childrenLocation=e},getSearchLocation:function(){return this._searchLocation?this._searchLocation:this._fileService.fileServiceRootURL()},getSearchRootLocation:function(){return this._searchRootLocation?this._searchRootLocation:this._fileService.fileServiceRootURL()},getChildrenLocation:function(){return this._childrenLocation?this._childrenLocation:this._fileService.fileServiceRootURL()},createSearchParams:function(e,t,n,i){var r=n?this.getSearchRootLocation():this.getSearchLocation();return t?{resource:r,sort:"NameLower asc",rows:100,start:0,nameSearch:!0,keyword:e}:{resource:r,sort:i&&i.sort?i.sort:"Path asc",rows:i&&i.rows?i.rows:40,start:0,caseSensitive:i?i.caseSensitive:void 0,regEx:i?i.regEx:void 0,fileType:i?i.fileType:void 0,fileNamePatterns:i&&i.fileNamePatterns?i.fileNamePatterns:void 0,keyword:e,replace:i?i.replace:void 0}}},h.prototype.constructor=h,{Searcher:h}}),define("text!orion/banner/CommandSlideout.html",[],function(){return'<div id="slideContainer" class="slideParameters slideContainer">\r\n	<span id="pageCommandParameters" class="layoutLeft parameters"></span>\r\n	<span id="pageCommandDismiss" class="layoutRight parametersDismiss"></span>\r\n</div>'}),define("orion/commonHTMLFragments",["orion/webui/littlelib","text!orion/banner/CommandSlideout.html"],function(e,t){function n(n){var i=document.createElement("div");i.innerHTML=t;var r=e.$("#slideContainer",i);return r.id=n+r.id,r=e.$("#pageCommandParameters",i),r.id=n+r.id,r=e.$("#pageCommandDismiss",i),r.id=n+r.id,i.innerHTML}return{slideoutHTMLFragment:n}}),define("orion/keyBinding",["orion/util"],function(e){function t(e,t,n,i,r,o){this.type=o||"keydown",this.keyCode="string"==typeof e&&"keydown"===this.type?e.toUpperCase().charCodeAt(0):e,this.mod1=void 0!==t&&null!==t?t:!1,this.mod2=void 0!==n&&null!==n?n:!1,this.mod3=void 0!==i&&null!==i?i:!1,this.mod4=void 0!==r&&null!==r?r:!1}function n(e){this.keys=e}return t.prototype={getKeys:function(){return[this]},match:function(t,n){if(void 0!==n){if(0!==n)return!1}else if(t instanceof Array){if(t.length>1)return!1;t=t[0]}if(t.type!==this.type)return!1;if(this.keyCode===t.keyCode||this.keyCode===String.fromCharCode(e.isOpera?t.which:void 0!==t.charCode?t.charCode:t.keyCode)){var i=e.isMac?t.metaKey:t.ctrlKey;return this.mod1!==i?!1:"keydown"===this.type&&this.mod2!==t.shiftKey?!1:this.mod3!==t.altKey?!1:e.isMac&&this.mod4!==t.ctrlKey?!1:!0}return!1},equals:function(e){return e?this.keyCode!==e.keyCode?!1:this.mod1!==e.mod1?!1:this.mod2!==e.mod2?!1:this.mod3!==e.mod3?!1:this.mod4!==e.mod4?!1:this.type!==e.type?!1:!0:!1}},n.prototype={getKeys:function(){return this.keys.slice(0)},match:function(e,t){var n=this.keys;if(void 0!==t)return t>n.length?!1:n[t].match(e)?t===n.length-1?!0:t+1:!1;if(e instanceof Array||(e=[e]),e.length>n.length)return!1;var i;for(i=0;i<e.length;i++)if(!n[i].match(e[i]))return!1;return i===n.length?!0:i},equals:function(e){if(!e.keys)return!1;if(e.keys.length!==this.keys.length)return!1;for(var t=0;t<e.keys.length;t++)if(!e.keys[t].equals(this.keys[t]))return!1;return!0}},{KeyBinding:t,KeyStroke:t,KeySequence:n}}),define("orion/parameterCollectors",["i18n!orion/nls/messages","orion/webui/littlelib"],function(e,t){function n(e,t){this._activeContainer=null,this._getElementsFunction=e,this._toolbarLayoutFunction=t}return n.prototype={close:function(){this._activeElements&&(this._activeElements.parameterArea&&t.empty(this._activeElements.parameterArea),this._activeElements.slideContainer&&this._activeElements.slideContainer.classList.remove("slideContainerActive"),this._activeElements.dismissArea&&t.empty(this._activeElements.dismissArea),this._activeElements.commandNode&&this._activeElements.commandNode.classList.remove("activeCommand"),this._toolbarLayoutFunction(this._activeElements),this._activeElements.onClose&&this._activeElements.onClose(),this._oldFocusNode&&(this._oldFocusNode.focus(),this._oldFocusNode=null)),this._activeElements=null},open:function(n,i,r){if("string"==typeof n&&(n=t.node(n)),this._activeElements&&this._activeElements.slideContainer&&this._activeElements.commandNode===n)return this._activeElements.focusNode&&this._activeElements.focusNode.focus(),!0;if(this.close(),this._activeElements=null,this._activeElements=this._getElementsFunction(n),this._activeElements&&this._activeElements.parameterArea&&this._activeElements.slideContainer){this._activeElements.onClose=r;var o=i(this._activeElements.parameterArea,this._activeElements.dismissArea);if(!o)return!1;this._activeElements.focusNode=o;var s=t.$$array("#closebox",this._activeElements.dismissArea||this._activeElements.parameterArea);if(0===s.length){var a=this._activeElements.dismissArea||this._activeElements.parameterArea;s=document.createElement("button"),s.id="closebox",s.className="imageSprite core-sprite-close dismissButton",s.title=e.Close,a.appendChild(s);var l=this;s.addEventListener("click",function(){l.close()},!1)}return this._activeElements.slideContainer.classList.add("slideContainerActive"),this._toolbarLayoutFunction(this._activeElements),o&&(this._oldFocusNode=window.document.activeElement,window.setTimeout(function(){o.focus(),o.select&&o.select()},0)),this._activeElements.commandNode&&this._activeElements.commandNode.classList.add("activeCommand"),!0}return!1},_collectAndCall:function(e,n){var i=function(t,n,i){return e.parameters.validate(t,n)?(e.parameters.setValue(t,n),!0):(i.classList.add("parameterInvalid"),!1)},r=function(e){if("checkbox"===e.type){if(!i(e.parameterName,e.checked,e))return!0}else if("button"!==e.type){if(!i(e.parameterName,e.value.trim(),e))return!0}else if("textarea"!==e.type&&!i(e.parameterName,e.value.trim(),e))return!0;return!1};if(t.$$array("input",n).some(r))return!1;if(t.$$array("textArea",n).some(r))return!1;var o=e.parameters.getParameterElement;return o&&e.parameters.some(function(e){var t=o(e,n);return t?r(t):!1})?!1:(e.command.callback&&e.command.callback.call(e.handler,e),!0)},collectParameters:function(e,t){return e.parameters?(e.domNode&&e.domNode.classList.add("commandMarker"),this.open(e.domNode||e.domParent,this.getFillFunction(e,null,t))):!1},getFillFunction:function(n,i,r){var o=this;return function(s,a){var l=null,c=function(){i&&i(),o.close()},u=function(e){e.target.classList.remove("parameterInvalid"),e.keyCode===t.KEY.ENTER&&"TEXTAREA"!==e.target.tagName&&(o._collectAndCall(n,s),c(),t.stop(e)),e.keyCode===t.KEY.ESCAPE&&("function"==typeof r&&r(),c(),t.stop(e))},h=n.parameters;if(h.message){var d=document.createElement("div");d.classList.add("parameterMessage"),d.textContent=h.message,s.appendChild(d)}h.forEach(function(e){var t=h.getParameterElement?h.getParameterElement(e,s):null,i=null;!t&&e.label&&(i=document.createElement("label"),i.classList.add("parameterInput"),i.setAttribute("for",e.name+"parameterCollector"),i.textContent=e.label,s.appendChild(i));var r=e.type,o=e.name+"parameterCollector",a=i||s;"text"===r&&"number"==typeof e.lines&&e.lines>1?t||(t=document.createElement("textarea"),t.rows=e.lines,t.type="textarea",t.id=o,a.appendChild(t)):"boolean"===e.type?(t||(t=document.createElement("input"),t.type="checkbox",t.id=o,a.appendChild(t)),e.value&&(t.checked=!0)):(t||(t=document.createElement("input"),t.type=e.type,t.id=o,a.appendChild(t)),e.value&&(t.value=e.value)),t.classList.add("parameterInput"),t.setAttribute("speech","speech"),t.setAttribute("x-webkit-speech","x-webkit-speech"),t.parameterName=e.name,l||(l=t),e.eventListeners.length>0&&e.eventListeners.forEach(function(e){t.addEventListener(e.event,function(t){return e.handler(t,n)},e.capture)}),t.addEventListener("keydown",u,!1)});var p=a;p||(p=document.createElement("span"),p.classList.add("layoutRight"),p.classList.add("parametersDismiss"),s.appendChild(p));var f=function(e){e._collectAndCall(n,s)&&c()},m=function(e,t){var n=document.createElement("button");return t.appendChild(n),e&&n.appendChild(document.createTextNode(e)),n.classList.add("dismissButton"),n};if(n.parameters.hasOptionalParameters()){n.parameters.optionsRequested=!1;var g=m(e.More,p);g.addEventListener("click",function(){n.parameters.optionsRequested=!0,f(o)},!1)}var v=m(h.getSubmitName?h.getSubmitName(n):e.Submit,p);v.addEventListener("click",function(){f(o)},!1);var y=h.getCancelName?h.getCancelName(n):null,_=m(y,p);return _.id="closebox",y||(_.classList.add("imageSprite"),_.classList.add("core-sprite-close")),_.title=e.Close,_.addEventListener("click",function(){c(),"function"==typeof r&&r()},!1),l}}},n.prototype.constructor=n,{CommandParameterCollector:n}}),define("orion/breadcrumbs",["require","orion/webui/littlelib"],function(e,t){function n(e){this._init(e)}return n.prototype={_init:function(e){var n=t.node(e.container);if(!n)throw"no parent container";this._container=n,n.classList.remove("currentLocation"),this._id=e.id||"eclipse.breadcrumbs",this._resource=e.resource||null,this._rootSegmentName=e.rootSegmentName,this._workspaceRootSegmentName=e.workspaceRootSegmentName,this._workspaceRootURL=e.workspaceRootURL,this._makeHref=e.makeHref,this._makeFinalHref=e.makeFinalHref,this._maxLength=e.maxLength,this.path="",this.render(),this._resizeListener=this.fitSegments.bind(this),window.addEventListener("resize",this._resizeListener)},getNavigatorWorkspaceRootSegment:function(){if(this._workspaceRootSegmentName){var n;if(this._resource&&this._resource.Parents&&!this._resource.skip){n=document.createElement("a");var i=this._workspaceRootURL?this._workspaceRootURL:"";this._makeHref?this._makeHref(n,i):n.href=e.toUrl("edit/edit.html")+"#"+i}else n=document.createElement("span");return t.empty(n),n.appendChild(document.createTextNode(this._workspaceRootSegmentName)),n}return null},segments:[],buildSegment:function(e){var t=document.createElement("a");return t.classList.add("breadcrumb"),t.appendChild(document.createTextNode(e)),t},addSegmentHref:function(t,n){this._makeHref?this._makeHref(t,n.Location,n):t.href=e.toUrl("edit/edit.html")+"#"+n.ChildrenLocation},buildSegments:function(e,t){if(this.segments=[],this._resource.Parents){var n,i,r=this._resource.Parents.slice(0);if(r){var o=r.slice(0);"reverse"===t&&(o=o.reverse().slice(0)),o.forEach(function(t){t.skip||(e?(i=e,e=null):i=t.Name,n=this.buildSegment(i),this.path+=t.Name,this.addSegmentHref(n,t),this.segments.push(n))}.bind(this))}}},addDivider:function(){var e=document.createElement("span");e.appendChild(document.createTextNode(" / ")),this.path+="/",e.classList.add("breadcrumbSeparator"),this.append(e)},refresh:function(){this.crumbs=t.node(this._id),this.crumbs?t.empty(this.crumbs):(this.crumbs=document.createElement("span"),this.crumbs.id=this._id,this._container.appendChild(this.crumbs),this.dirty=document.createElement("span"),this.dirty.id="dirty",this.dirty.className="modifiedFileMarker"),this.crumbs.classList.add("breadcrumbContainer"),this.crumbs.style.visibility="visible",this.crumbs.parentNode.className="currentLocation",this.crumbs.parentNode.style.width="100%"},append:function(e){this.crumbs.appendChild(e)},addTitle:function(e,t){var n=t||document.title;0===this.crumbs.childNodes.length&&(e=document.createElement("span"),e.appendChild(document.createTextNode(n)),e.classList.add("breadcrumb"),e.classList.add("currentLocation"),this._finalSegment=e,this.append(e))},finalSegment:function(e,t){if(!this._resource.skip){var n;n=t?t:this._resource.Name,this._makeFinalHref?(e=this.buildSegment(n),this.addSegmentHref(e,this._resource)):(e=document.createElement("span"),e.appendChild(document.createTextNode(n))),e.classList.add("currentLocation"),this.path+=this._resource.Name,this.append(e),this._finalSegment=e,this._finalSegment.style.flexShrink="0",void 0!==this._finalSegment.style.webkitFlexShrink&&(this._finalSegment.style.webkitFlexShrink="0");for(var i=this.crumbs.childNodes,r=0;r<i.length-1;r++)if(i[r].classList.contains("breadcrumb")){var o=100*(i.length-1-r);i[r].style.flexShrink=""+o,void 0!==i[r].style.webkitFlexShrink&&(i[r].style.webkitFlexShrink=""+o)}this.crumbs.appendChild(this.dirty)}},firstSegment:function(e){if(e){if(this.append(e),!this._resource||!this._resource.Parents||this._resource.skip)return this._resource.skip||(e.href=""),e.classList.add("currentLocation"),void(this._finalSegment=e);e.classList.add("breadcrumb"),this.addDivider()}},drawSegments:function(){if(this._resource.Parents){var e=this.segments.slice(0);e.forEach(function(e){this.append(e),this.addDivider()}.bind(this))}},fitSegments:function(){this.crumbs.parentNode?this._finalSegment&&(this._finalSegment.style.flexShrink="0",void 0!==this._finalSegment.style.webkitFlexShrink&&(this._finalSegment.style.webkitFlexShrink="0"),this.crumbs.offsetWidth<this.crumbs.scrollWidth&&(this._finalSegment.style.flexShrink="1",void 0!==this._finalSegment.style.webkitFlexShrink&&(this._finalSegment.style.webkitFlexShrink="1"))):(window.removeEventListener("resize",this._resizeListener),this._resizeListener=null)},render:function(){this.refresh();var e=this.getNavigatorWorkspaceRootSegment(),t=this._rootSegmentName;t?this.addTitle(e,t):(this.firstSegment(e),this._resource&&this._resource.Parents&&(this.buildSegments(t,"reverse"),this.drawSegments(),this.finalSegment(e,t),this.fitSegments()))},destroy:function(){this._resizeListener&&(window.removeEventListener("resize",this._resizeListener),this._resizeListener=null)}},n.prototype.constructor=n,{BreadCrumbs:n}}),define("orion/webui/splitter",["orion/EventTarget","orion/util","orion/metrics","orion/webui/littlelib"],function(e,t,n,i){function r(t){e.attach(this),this._init(t)}var o=1,s=2;return r.prototype={_init:function(e){if(this.$splitter=i.node(e.node),!this.$splitter)throw"no dom node for splitter found";if(this.$leading=i.node(e.sidePanel),!this.$leading)throw"no dom node for side panel found";if(this.$trailing=i.node(e.mainPanel),!this.$trailing)throw"no dom node for main panel found";this._tracking=!1,this._animationDelay=501,this._collapseTrailing=e.closeReversely||!1,this._proportional=e.proportional||!1,this._prefix="/orion/splitter/"+(this.$splitter.id||document.body.id||""),e.toggle&&(this._thumb=document.createElement("div"),this.$splitter.appendChild(this._thumb),this._thumb.classList.add("splitThumb"),this._thumb.classList.add(this._vertical?this._collapseTrailing?"splitVerticalThumbDownLayout":"splitVerticalThumbUpLayout":this._collapseTrailing?"splitThumbRightLayout":"splitThumbLeftLayout")),this.$splitter.classList.add("split");var n=localStorage.getItem(this._prefix+"/orientation");if(n)var r="vertical"===n?s:o;else r=e.vertical?s:o;this.setOrientation(r),t.isIOS||t.isAndroid?(this.$splitter.addEventListener("touchstart",this._touchStart.bind(this),!1),this._thumb&&this._thumb.addEventListener("touchstart",this._touchStart.bind(this),!1),this.$splitter.addEventListener("touchmove",this._touchMove.bind(this),!1),this.$splitter.addEventListener("touchend",this._touchEnd.bind(this),!1)):(this.$splitter.addEventListener("mousedown",this._mouseDown.bind(this),!1),window.addEventListener("mouseup",this._mouseUp.bind(this),!1)),window.addEventListener("resize",this._resize.bind(this),!1)},isClosed:function(){return this._closed},getOrientation:function(){return this._vertical?s:o},setOrientation:function(e){var t=e===s;if(t!==this._vertical){this._vertical=t;var n=this._vertical?"vertical":"horizontal";if(localStorage.setItem(this._prefix+"/orientation",n),this.$splitter.style.position="absolute",this.$trailing.style.position="absolute",this.$leading.style.position="absolute",this._offsetStorageLabel="/offset",this._vertical&&!this._proportional&&(this._offsetStorageLabel="/offsetY"),this._vertical?(this.$splitter.classList.remove("splitLayout"),this.$splitter.classList.add("splitVerticalLayout"),this._topLeft="top",this._bottomRight="bottom",this._widthHeight="height"):(this.$splitter.classList.remove("splitVerticalLayout"),this.$splitter.classList.add("splitLayout"),this._topLeft="left",this._bottomRight="right",this._widthHeight="width"),this._initializeFromStoredSettings(),this._setStyleConstants(),this._collapseTrailing?(this.$splitter.style[this._topLeft]="auto",this.$leading.style[this._topLeft]="0px",this.$leading.style[this._widthHeight]="auto",this.$trailing.style[this._topLeft]="auto",this.$trailing.style[this._bottomRight]="0px"):(this.$splitter.style[this._bottomRight]="auto",this.$leading.style[this._topLeft]="0px",this.$leading.style[this._bottomRight]="auto",this.$trailing.style[this._widthHeight]="auto",this.$trailing.style[this._bottomRight]="0px"),this._thumb){var i=this._thumb.classList;this._vertical?(i.remove(this._collapseTrailing?"splitThumbRightLayout":"splitThumbLeftLayout"),i.add(this._collapseTrailing?"splitVerticalThumbDownLayout":"splitVerticalThumbUpLayout")):(i.remove(this._collapseTrailing?"splitVerticalThumbDownLayout":"splitVerticalThumbUpLayout"),i.add(this._collapseTrailing?"splitThumbRightLayout":"splitThumbLeftLayout"))
}this._closed?(this._closed=!1,this._thumbDown(!0,!0)):this._adjustToOffset(),this._resize(),this.$splitter.style.visibility="visible",this.$trailing.style.display="block",this.$leading.style.display="block"}},_setStyleConstants:function(){this._vertical?(this.$splitter.style.left="",this.$splitter.style.right="",this.$leading.style.left="auto",this.$leading.style.right="auto",this.$leading.style.width="100%",this.$trailing.style.left="auto",this.$trailing.style.right="auto",this.$trailing.style.width="100%"):(this.$splitter.style.top="",this.$splitter.style.bottom="",this.$leading.style.top="auto",this.$leading.style.bottom="auto",this.$leading.style.height="100%",this.$trailing.style.top="auto",this.$trailing.style.bottom="auto",this.$trailing.style.height="100%")},toggleSidePanel:function(){this._thumbDown()},openSidePanel:function(){this._closed||this._thumbDown()},addResizeListener:function(e){this.addEventListener("resize",function(t){e(t.node)})},_initializeFromStoredSettings:function(){var e=localStorage.getItem(this._prefix+"/toggleState");this._closed="string"==typeof e?"closed"===e:this._closeByDefault,this._adjustSplitterSize();var t=localStorage.getItem(this._prefix+this._offsetStorageLabel);if(t)this._offset=parseInt(t,10),this._proportional&&(this._offset=Math.max(0,Math.min(100-this._splitterSize,this._offset)));else{var n=i.bounds(this.$splitter);this._offset=this._adjustOffset(n[this._topLeft])}},_adjustSplitterSize:function(){var e=i.bounds(this.$splitter);if(this._splitterSize=e[this._widthHeight],this._proportional){var t=i.bounds(this.$splitter.parentNode);this._splitterSize=this._splitterSize/(t[this._widthHeight]/100)}},_adjustOffset:function(e){var t=i.bounds(this.$splitter.parentNode);if(this._collapseTrailing){var n=e+this._splitterSize;e=t[this._widthHeight]-(n-t[this._topLeft])}else e-=t[this._topLeft];return this._proportional&&(e/=t[this._widthHeight]/100),e},_adjustToOffset:function(){this._offset<0&&(this._offset=0);var e=this._proportional?"%":"px";this._collapseTrailing?(this.$splitter.style[this._bottomRight]=this._offset+e,this.$leading.style[this._bottomRight]=this._offset+this._splitterSize+e,this.$trailing.style[this._widthHeight]=this._offset+e):(this.$splitter.style[this._topLeft]=this._offset+e,this.$leading.style[this._widthHeight]=this._offset+e,this.$trailing.style[this._topLeft]=this._offset+this._splitterSize+e)},_resize:function(){this._proportional&&(this._adjustSplitterSize(),this._adjustToOffset()),this._notifyResizeListeners(this.$trailing),this._notifyResizeListeners(this.$leading)},_notifyResizeListeners:function(e){this.dispatchEvent({type:"resize",node:e})},_notifyToggleListeners:function(){this.dispatchEvent({type:"toggle",closed:this._closed})},_thumbDown:function(e,t){if(e||this._addAnimation(),this._closed){var i=localStorage.getItem(this._prefix+this._offsetStorageLabel);this._offset=i?parseInt(i,10):350,this._closed=!1}else localStorage.setItem(this._prefix+this._offsetStorageLabel,this._offset),this._offset=0,this._closed=!0;this._adjustToOffset(),e||this._removeAnimation(),t||(localStorage.setItem(this._prefix+"/toggleState",this._closed?"closed":null),n.logEvent("preferenceChange","splitterClosed",this._prefix,this._closed?0:1))},_removeAnimation:function(){var e=this;window.setTimeout(function(){e.$leading.classList.remove("generalAnimation"),e.$trailing.classList.remove("generalAnimation"),e.$splitter.classList.remove("generalAnimation"),e._resize()},this._animationDelay)},_addAnimation:function(){this.$leading.classList.add("generalAnimation"),this.$trailing.classList.add("generalAnimation"),this.$splitter.classList.add("generalAnimation")},_down:function(){this.$splitter.classList.add("splitTracking"),this.$trailing.classList.add("panelTracking"),this.$leading.classList.add("panelTracking")},_move:function(e,t){var n=this._vertical?t:e,r=i.bounds(this.$splitter),o=r[this._widthHeight]/2;this._offset=this._adjustOffset(this._collapseTrailing?n+o:n-o),this._adjustToOffset()},_up:function(){this.$splitter.classList.remove("splitTracking"),this.$trailing.classList.remove("panelTracking"),this.$leading.classList.remove("panelTracking");var e=this._closed;this._offset>0?(localStorage.setItem(this._prefix+this._offsetStorageLabel,this._offset),this._closed=!1):this._closed=!0,e!==this._closed&&(localStorage.setItem(this._prefix+"/toggleState",this._closed?"closed":null),n.logEvent("preferenceChange","splitterClosed",this._prefix,this._closed?0:1))},_mouseDown:function(e){return e.target===this._thumb?(i.stop(e),this._thumbDown()):void(this._tracking||(this._down(e),this._tracking=this._mouseMove.bind(this),window.addEventListener("mousemove",this._tracking),i.setFramesEnabled(!1),i.stop(e)))},_mouseMove:function(e){this._tracking&&this._move(e.clientX,e.clientY)},_mouseUp:function(e){this._tracking&&(i.setFramesEnabled(!0),window.removeEventListener("mousemove",this._tracking),this._tracking=null,this._up(),i.stop(e),this._resize())},_touchStart:function(e){var t=e.touches;if(1===t.length){if(i.stop(e),e.target===this._thumb)return this._thumbDown();this._down(e),this._touching=!0}},_touchMove:function(e){if(this._touching){var t=e.touches;if(1===t.length){var n=t[0];this._move(n.clientX,n.clientY)}}},_touchEnd:function(e){var t=e.touches;0===t.length&&(this._touching=!1,this._up())}},r.prototype.constructor=r,{Splitter:r,ORIENTATION_HORIZONTAL:o,ORIENTATION_VERTICAL:s}}),define("orion/keyAssist",["i18n!orion/nls/messages","orion/webui/littlelib","orion/util"],function(e,t,n){function i(e){this.commandRegistry=e.commandRegistry,this.create(),this._filterString="",this._providers=[]}return i.prototype={addProvider:function(e){this._providers.push(e)},create:function(){var i=this._keyAssistDiv=document.createElement("div");i.id="keyAssist",i.style.display="none",i.classList.add("keyAssistFloat"),i.setAttribute("role","menu");var r=this._keyAssistInput=document.createElement("input");r.classList.add("keyAssistInput"),r.type="text",r.placeholder=e["Filter bindings"],i.appendChild(r);var o=this._keyAssistContents=document.createElement("div");o.classList.add("keyAssistContents"),(n.isIOS||n.isAndroid)&&(o.style.overflowY="auto"),i.appendChild(o);var s=this._keyAssistTable=document.createElement("table");s.tabIndex=0,s.classList.add("keyAssistList"),o.appendChild(s),document.body.appendChild(i),r.addEventListener("keydown",function(e){this._keyDown(e)}.bind(this)),s.addEventListener("keydown",function(e){this._keyDown(e)}.bind(this)),r.addEventListener("input",function(){this.filterChanged()}.bind(this)),o.addEventListener(n.isFirefox?"DOMMouseScroll":"mousewheel",function(e){this._scrollWheel(e)}.bind(this)),document.addEventListener("keydown",function(e){e.keyCode===t.KEY.ESCAPE&&this.hide()}.bind(this)),t.addAutoDismiss([i],function(){this.hide()}.bind(this))},createContents:function(){var n=this._keyAssistTable;t.empty(n),this._selectedIndex=-1,this._selectedRow=null,this._keyAssistContents.scrollTop=0,this._idCount=0;for(var i=0;i<this._providers.length;i++)this._providers[i].showKeyBindings(this);this.createHeader(e.Global),this.commandRegistry.showKeyBindings(this)},createItem:function(e,t,n){if(this._filterString){var i,r=this._filterString.toLowerCase();if(r!==this._filterString?(r=this._filterString,i=function(e){return e}):i=function(e){return e.toLowerCase()},-1===i(t).indexOf(r)&&-1===i(e).indexOf(r)&&-1===i(this._lastHeader).indexOf(r))return}var o=this._keyAssistTable.insertRow(-1);o.id="keyAssist-keyBinding-"+this._idCount++,o.setAttribute("role","menuitem"),o._execute=n,o.classList.add("keyAssistItem"),o.addEventListener("click",function(e){this._selectedRow=o,this.execute(),e.preventDefault()}.bind(this));var s=o.insertCell(-1);s.classList.add("keyAssistName"),s.appendChild(document.createTextNode(t)),s=o.insertCell(-1),s.classList.add("keyAssistAccel"),s.appendChild(document.createTextNode(e))},createHeader:function(e){this._lastHeader=e;var t=this._keyAssistTable.insertRow(-1);t.classList.add("keyAssistSection");var n=t.insertCell(-1),i=document.createElement("h2");i.appendChild(document.createTextNode(e)),n.appendChild(i)},execute:function(){window.setTimeout(function(){this.hide();var e=this._selectedRow;this._selectedRow=null,e&&e._execute&&e._execute()}.bind(this),0)},filterChanged:function(){this._timeout&&window.clearTimeout(this._timeout),this._timeout=window.setTimeout(function(){this._timeout=null;var e=this._keyAssistInput.value;this._filterString!==e&&(this._filterString=e,this.createContents())}.bind(this),100)},hide:function(){if(this.isVisible()){var e=document.activeElement,t=this._keyAssistDiv,n=t===e||0!==(16&t.compareDocumentPosition(e));t.style.display="none",n&&1!==document.compareDocumentPosition(this._previousActiveElement)&&this._previousActiveElement.focus(),this._previousActiveElement=null}},isVisible:function(){return"block"===this._keyAssistDiv.style.display},removeProvider:function(e){var t=this._providers.indexOf(e);-1!==t&&this._providers.splice(t,1)},select:function(e){var t,n=this._keyAssistTable.querySelectorAll(".keyAssistItem");if(0===n.length)return void(this._selectedIndex=-1);var i=this._selectedIndex;if(i+=e?1:-1,i%=n.length,0>i&&(i=n.length-1),-1!==this._selectedIndex&&(t=n[this._selectedIndex],t.classList.remove("selected"),this._selectedRow=null),this._selectedIndex=i,-1!==this._selectedIndex){this._selectedRow=t=n[this._selectedIndex],t.classList.add("selected"),this._keyAssistTable.setAttribute("aria-activedescendant",t.id),this._keyAssistTable.focus();var r=t.getBoundingClientRect(),o=this._keyAssistContents,s=o.getBoundingClientRect();t.offsetTop<o.scrollTop?0===i?o.scrollTop=0:t.scrollIntoView(!0):r.bottom>s.bottom&&t.scrollIntoView(!1)}},show:function(){this.isVisible()||(this._previousActiveElement=document.activeElement,this.createContents(),this._keyAssistContents.style.height=Math.floor(.75*this._keyAssistDiv.parentNode.clientHeight)+"px",this._keyAssistDiv.style.display="block",this._keyAssistInput.value=this._filterString,this._keyAssistInput.focus(),this._keyAssistInput.select())},_keyDown:function(e){if(40===e.keyCode)this.select(!0);else if(38===e.keyCode)this.select(!1);else{if(13!==e.keyCode)return;this.execute()}e.preventDefault()},_scrollWheel:function(e){var t=0;t=n.isIE||n.isOpera?-e.wheelDelta:n.isFirefox?40*e.detail:-e.wheelDeltaY;var i=this._keyAssistContents,r=i.scrollTop;return i.scrollTop+=t,r!==i.scrollTop?(e.preventDefault&&e.preventDefault(),!1):void 0}},{KeyAssistPanel:i}}),define("orion/widgets/themes/ThemePreferences",["orion/Deferred"],function(e){function t(t,n){this._preferences=t,this._themeData=n;var i=n.getThemeStorageInfo();this._themeVersion=i.version;var r=this,o=t.listenForChangedSettings(i.storage,function(t){t.key===o&&e.when(r._themePreferences,function(e){e.sync().then(function(){r.apply()})})});this._themePreferences=this._preferences.getPreferences(i.storage)}return t.prototype={_initialize:function(e,t,n){var i,r,o=e.styleset+"Version",s=n.get(o),a=0;try{s=parseFloat(s),a=parseFloat(this._themeVersion)}catch(l){}s===a||s>a?(i=n.get(e.styleset),r=n.get("selected"),r&&(r=this._parse(r)),this._themeVersion=s):(i=null,r=null),i||(i=t.getStyles(),n.put(e.styleset,JSON.stringify(i))),r&&void 0!==r[e.selectedKey]||(r=r||{},r[e.selectedKey]=e.defaultTheme,n.put("selected",JSON.stringify(r))),n.put(o,this._themeVersion)},_convertThemeStylesToHierarchicalFormat:function(e){return{name:e.name,className:e.name,styles:{backgroundColor:e.background,color:e.text,fontFamily:e.fontFamily,fontSize:e.fontSize,textviewRightRuler:{borderLeft:"1px solid "+e.annotationRuler},textviewLeftRuler:{borderRight:"1px solid "+e.annotationRuler},ruler:{backgroundColor:e.annotationRuler,overview:{backgroundColor:e.overviewRuler}},rulerLines:{even:{color:e.lineNumberEven},odd:{color:e.lineNumberOdd}},annotationLine:{currentLine:{backgroundColor:e.currentLine}},comment:{color:e.comment},constant:{color:"blue"},entity:{name:{color:"#98937B","function":{fontWeight:"bold",color:"#67BBB8"}},other:{"attribute-name":{color:e.attribute}}},keyword:{control:{color:e.keyword,fontWeight:"bold"},operator:{color:e.keyword,fontWeight:"bold"},other:{documentation:{color:"#7F9FBF"}}},markup:{bold:{fontWeight:"bold"},heading:{color:"blue"},italic:{fontStyle:"italic"},list:{color:"#CC4C07"},other:{separator:{color:"#00008F"},strikethrough:{textDecoration:"line-through"},table:{color:"#3C802C"}},quote:{color:"#446FBD"},raw:{fontFamily:"monospace"},underline:{link:{textDecoration:"underline"}}},meta:{documentation:{annotation:{color:"#7F9FBF"},tag:{color:"#7F7F9F"}},tag:{color:e.tag}},string:{color:e.string},support:{type:{propertyName:{color:"#7F0055"}}},variable:{language:{color:"#7F0055",fontWeight:"bold"},other:{color:"#E038AD"},parameter:{color:"#D1416F"}}}}},apply:function(){this.setTheme()},_findStyle:function(e,t){for(var n=0;n<e.length;n++)if(e[n].name===t)return e[n];return null},_getCurrentStyle:function(e,t){var n=this._themeData,i=n.getThemeStorageInfo();return this._findStyle(e,t)||this._findStyle(e,i.defaultTheme)||e[0]},_parse:function(e){return"string"==typeof e?JSON.parse(e):e},getTheme:function(t){var n=this._themeData,i=n.getThemeStorageInfo();e.when(this._themePreferences,function(e){this._initialize(i,n,e);var r,o=this._parse(e.get("selected")),s=this._parse(e.get(i.styleset));if(s){if(s.length&&s[0].keyword)for(var a=0;a<s.length;a++)s[a]=this._convertThemeStylesToHierarchicalFormat(s[a]);r=this._getCurrentStyle(s,o[i.selectedKey])}t({style:r,styles:s})}.bind(this))},setTheme:function(t,n){var i=this._themeData,r=i.getThemeStorageInfo();e.when(this._themePreferences,function(e){this._initialize(r,i,e);var o=this._parse(e.get("selected"));t||(t=o[r.selectedKey]),o[r.selectedKey]=t,e.put("selected",JSON.stringify(o)),n?e.put(r.styleset,JSON.stringify(n)):n=this._parse(e.get(r.styleset)),i.processSettings(this._getCurrentStyle(n,o[r.selectedKey]));var s=r.styleset+"Version";e.put(s,this._themeVersion)}.bind(this))},setFontSize:function(t){var n=this._themeData,i=n.getThemeStorageInfo();e.when(this._themePreferences,function(e){this._initialize(i,n,e);var r,o=this._parse(e.get("selected")),s=this._parse(e.get(i.styleset));if(s){for(var a=0;a<s.length;a++)s[a].styles.fontSize=t;r=this._getCurrentStyle(s,o[i.selectedKey])}e.put(i.styleset,JSON.stringify(s)),n.processSettings(r)}.bind(this))}},{ThemePreferences:t}}),define("orion/settings/nls/messages",{root:!0}),define("orion/settings/nls/root/messages",{"Plugin Description":"Plugin Description",Create:"Create","Loading...":"Loading...","Label:":"Label:",Title:"Title",Plugins:"Plugins","User Profile":"User Profile",Git:"Git","Git Settings":"Git Settings",Theme:"Editor Styles","Theme Settings":"Theme Settings",General:"General",Navigation:"Navigation",Links:"Links:","Open in same tab":"Open in same tab","Open in new tab":"Open in new tab",Font:"Font",Family:"Family","Sans Serif":"Sans Serif",Serif:"Serif",Size:"Size","8pt":"8pt","9pt":"9pt","10pt":"10pt","12pt":"12pt",Color:"Color",Background:"Background",SingleQuotedStrings:"Strings (Single Quoted)",DoubleQuotedStrings:"Strings (Double Quoted)","String Types":"String Types",blue:"blue",Weight:"Weight",Normal:"Normal",Bold:"Bold",BlockComments:"Comments (Block)",LineComments:"Comments (Line)","Comment Types":"Comment Types",green:"green",ControlKeywords:"Keywords (Control)",OperatorKeywords:"Keywords (Operator)","Keyword Types":"Keyword Types",darkred:"darkred",Categories:"Categories","User Name":"User Name:","Full Name":"Full Name:","Email Address":"Email Address:","Email Confirmed":"Email Confirmed:",Account:"Account","Current Password":"Current Password:","New Password":"New Password:","Verify Password":"Verify Password:","UserSettings.PasswordsDoNotMatch":"New password, and retyped password do not match","UserSettings.TypeCurrentPassword":"You must type your current password in order to set a new one","UserSettings.InvalidPasswordLength":"Password must be at least 8 characters long","UserSettings.InvalidPasswordAlpha":"Password must contain at least one alpha character and one non alpha character","UserSettings.PasswordRules":"Password must be at least 8 characters long and contain at least one alpha character and one non alpha character",Password:"Password",AOL:"AOL",Yahoo:"Yahoo",Google:"Google",Unlink:"Unlink",Link:"Link",Unlinked:"Unlinked",Linked:"Linked","Linked Accounts":"Linked Accounts","Git Email Address":"Git Email Address:","Git Username":"Git Username:","Git Credentials Storage":"Git Credentials Storage",Update:"Update","Update Profile Settings":"Update Profile Settings","Update Git User Settings":"Update Git User Settings","Update Git Credentials":"Update Git Credentials",UsrProfileUpdateSuccess:"User profile data successfully updated.",GitUsrUpdateSuccess:"Git user data successfully updated.",GitCredsUpdateSuccess:"Git Credentials successfully updated.","Install Plugin":"Install Plugin","Plugin Name:":"Plugin Name:","Author Name:":"Author Name:","Licence:":"Licence:","Description:":"Description:",OrionPlugin:"A plugin for Orion","Plugin Link":"Plugin Link",Install:"Install",PlugInstallByURL:"Install a plugin by specifying its URL","Plugin URL:":"Plugin URL:",Disable:"Disable",Disabled:"Disabled ${0}",DisableTooltip:"Disable the plugin",Enable:"Enable",Enabled:"Enabled ${0}",EnableTooltip:"Enable the plugin","Reload all":"Reload all",ReloadAllPlugs:"Reload all installed plugins",CreatePlug:"Create a new Orion Plugin",FindMorePlugs:"Find More Orion Plugins","Get Plugins":"Get Plugins",Reload:"Reload",ReloadPlug:"Reload the plugin",Delete:"Delete",DeletePlugFromConfig:"Delete this plugin from the configuration",DeleteUser:"Delete User Profile as well as workspaces and projects",DeleteUserComfirmation:"WARNING: This will permanently delete your user profile as well as all of your work!",TypePlugURL:"Type a plugin url here ...","Already installed":"Already installed",Installed:"Installed ${0}",Installing:"Installing ${0}...",Uninstalled:"Uninstalled ${0}",UninstallCfrm:"Are you sure you want to uninstall '${0}'?",ReloadedPlug:"Reloaded ${0} plugin.",ReloadedNPlugs:"Reloaded ${0} plugins.",Reloaded:"Reloaded ${0}",Services:"Services",Value:"Value","JavaScript Object":"JavaScript Object",CheckJsConsoleDrillDown:"click here, then check javascript console to drill down",Item:"Item","Git Config":"Git Config",GitWorkDir:"Git Working Directory",SelectUnstagedChanges:"Always select changed files","Clear Git Credentials":"Clear Git Credentials","Enable Storage":"Enable Storage:",BrowserCredStoreMsg:"Please be aware that your credentials will be stored persistently in the browser.",AskEnableKeyStorage:"Do you wish to enable the Key Storage?",general:"General",validation:"Validation",DeletedGitMsg:"Deleted git credentials for ${0}",Editor:"Editor Settings",editorSettings:"Editor Settings",EditorThemes:"Editor Styles",Import:"Import","Import a theme":"Import a theme",Export:"Export","Export a theme":"Export a theme","Theme name:":"Theme name:",yourTheme:"yourTheme",fileManagement:"File Management",typing:"Typing",autoSave:"Auto Save:",autoSaveTimeout:"Save interval (ms):",autoLoad:"Auto Load:",saveDiffs:"Save file as diffs:",trimTrailingWhiteSpace:"Trim Trailing Whitespace on Save:",Restore:"Restore Defaults",Default:"Default",keys:"Keys",tabs:"Tabs",tabSize:"Tab Size:",expandTab:"Insert spaces for tabs:",smoothScrolling:"Smooth Scrolling",scrollAnimation:"Scrolling Animation:",scrollAnimationTimeout:"Scrolling Duration (ms):",keyBindings:"Key Bindings:",rulers:"Rulers",annotationRuler:"Show Annotation Ruler:",lineNumberRuler:"Show Line Number Ruler:",foldingRuler:"Show Folding Ruler:",overviewRuler:"Show Overview Ruler:",zoomRuler:"Show Code Map Ruler:",whitespaces:"White Spaces",wrapping:"Wrapping",wordWrap:"Word Wrap:",showMargin:"Show Margin:",marginOffset:"Margin Column:",showWhitespaces:"Show Whitespace Characters:",autoSaveTimeoutInvalid:"Invalid save interval.",scrollAnimationTimeoutInvalid:"Invalid scrolling duration.",tabSizeInvalid:"Invalid tab size.",localSettingsTooltip:"Toggle whether this setting is shown in the local editor settings drop down.",editorSettingsInfo:"Use the ${0} and ${1} to toggle whether a given setting is shown in the local editor settings drop down ${2}.",autoPairParentheses:"Autopair (Parentheses):",autoPairBraces:"Autopair {Braces}:",autoPairSquareBrackets:"Autopair [Square] Brackets:",autoPairAngleBrackets:"Autopair <Angle> Brackets:",autoPairQuotations:'Autopair "Strings":',autoCompleteComments:"Autocomplete /** Block Comments */:",smartIndentation:"Smart Indentation:",sourceControl:"Source Control",showBlame:"Show Blame",languageTools:"Language Tools",showOccurrences:"Show Occurrences:",contentAssistAutoTrigger:"Show Content Assist automatically:","Editor preferences updated":"Editor preferences updated","Editor defaults restored":"Editor defaults restored","Font Size":"Font Size:","New Theme Name:":"New Theme Name:","Font Size:":"Font Size:","Navigation Bar":"Navigation Bar","Navigation Text":"Navigation Text","Search Box":"Search Box","Tool Panel":"Tool Panel","Selection Bar":"Selection Bar",Location:"Location",Content:"Content","Main Panel":"Main Panel",Button:"Button","Button Text":"Button Text","Section Text":"Section Text","Side Panel":"Side Panel","Line Color":"Line Color","Even Line Numbers":"Line Numbers (Even)","Odd Line Numbers":"Line Numbers (Odd)",FunctionNames:"Function Names",Parameters:"Parameters",Foreground:"Foreground","Current Line":"Current Line","Attribute Names":"Attribute Names","Overview Ruler":"Overview Ruler",Tags:"Tags","Annotation Ruler":"Annotation Ruler","Show Guide":"Show Guide","Check Guide":"Check Guide",Cancel:"Cancel","Revert Theme":"Revert Theme","Update Theme":"Update Theme","Theme:":"Theme:",clickDiagram:"Select a theme, or click elements in the diagram to style them individually.","Property Names":"Property Names",HexNumber:"Numbers (Hex)",DecimalNumbers:"Numbers (Decimal)","CSS Text":"CSS Text","COLOR:":"Color:","NEW COLOR:":"New Color:",Ok:"Ok","OR HEX:":"Or Hex: ",pluginStatusNotLoaded:"This plug-in is not loaded.",pluginStatusNotRunning:"This plug-in is disabled.",pluginStatusBroken:"This plug-in could not be loaded.",Website:"Website",License:"License",Login:"Login","clearThemeAndEditorSettings.name":"Clear themes and editor settings","clearThemeAndEditorSettings.tooltip":"Clear all settings associated with editor themes and window themes",Settings:"Settings",EclipseThemeName:"Eclipse",DarkerThemeName:"Darker",ProspectoThemeName:"Prospecto",BlueThemeName:"Blue",AmbienceThemeName:"Ambience",TierraThemeName:"Tierra",NimbusThemeName:"Nimbus",AdelanteThemeName:"Adelante","Raspberry PiThemeName":"Raspberry Pi",OrionThemeName:"Orion",Orion2014ThemeName:"Orion2014","Green ZoneThemeName":"Green Zone","Pretty In PinkThemeName":"Pretty In Pink","Blue MondayThemeName":"Blue Monday","Vanilla SkiesThemeName":"Vanilla Skies",BeetlejuiceThemeName:"Beetlejuice",RedThemeName:"Red",SettingUpdateSuccess:"${0} settings successfully updated.",buttonSave:"Save",buttonRevert:" Revert",ConfirmRestore:"Restore these settings to their default values?","Theme : ":"Theme : ","Display Language : ":"Display Language : ",cannotDeleteMsg:" is a default theme that cannot be deleted",confirmDeleteMsg:"Are you sure you want to delete this theme?",cannotModifyMsg:" is a default theme that cannot be modified. Please use another name."}),define("orion/editor/eventTarget",[],function(){function e(){}return e.addMixin=function(t){var n=e.prototype;for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},e.prototype={addEventListener:function(e,t,n){this._eventTypes||(this._eventTypes={});var i=this._eventTypes[e];i||(i=this._eventTypes[e]={level:0,listeners:[]});var r=i.listeners;r.push({listener:t,useCapture:n})},dispatchEvent:function(e){var t=e.type;this._dispatchEvent("pre"+t,e),this._dispatchEvent(t,e),this._dispatchEvent("post"+t,e)},_dispatchEvent:function(e,t){var n=this._eventTypes?this._eventTypes[e]:null;if(n){var i=n.listeners;try{if(n.level++,i)for(var r=0,o=i.length;o>r;r++)if(i[r]){var s=i[r].listener;"function"==typeof s?s.call(this,t):s.handleEvent&&"function"==typeof s.handleEvent&&s.handleEvent(t)}}finally{if(n.level--,n.compact&&0===n.level){for(var a=i.length-1;a>=0;a--)i[a]||i.splice(a,1);0===i.length&&delete this._eventTypes[e],n.compact=!1}}}},isListening:function(e){return this._eventTypes?void 0!==this._eventTypes[e]:!1},removeEventListener:function(e,t,n){if(this._eventTypes){var i=this._eventTypes[e];if(i){for(var r=i.listeners,o=0,s=r.length;s>o;o++){var a=r[o];if(a&&a.listener===t&&a.useCapture===n){0!==i.level?(r[o]=null,i.compact=!0):r.splice(o,1);break}}0===r.length&&delete this._eventTypes[e]}}}},{EventTarget:e}}),define("orion/editor/textTheme",["require","orion/editor/eventTarget","orion/util"],function(e,t,n){function i(e){e=e||{},this._document=e.document||document}var r="orion-theme-",o={};return i.getTheme=function(e){e=e||"default";var t=o[e];return t||(t=o[e]=new i),t},i.prototype={getThemeClass:function(){return this._themeClass},setThemeClass:function(e,t){var n=this,i=n._themeClass;n._themeClass=e,this._load(e,t,function(){n.onThemeChanged({type:"ThemeChanged",oldValue:i,newValue:n.getThemeClass()})})},onThemeChanged:function(e){return this.dispatchEvent(e)},buildStyleSheet:function(e,t){var n=function(e){return e.replace(this._capitalRegEx,function(e){return"-"+e}.bind(this)).toLowerCase()}.bind(this),i=function(e,t,r,o,s){var a=[],l=Object.keys(e);l.forEach(function(l){var c=e[l];"string"==typeof c?a.push("	"+n(l)+": "+c+";"):i(c,r===l?t:t+(o?" .":".")+l,r,!1,s)}),a.length&&(s.push(t+(o?".textview":"")+" {"),s.push.apply(s,a),s.push("}"))},r=[""];return i(t.styles,"."+e,t.className,!0,r),r.join("\n")},_createStyle:function(e,t,i,o){var s=this._document,a=r+e,l=s.getElementById(a);if(l){if(o||l.firstChild.data===t)return;l.removeChild(l.firstChild),l.appendChild(s.createTextNode(t))}else{o?(l=n.createElement(s,"link"),l.rel="stylesheet",l.type="text/css",l.href=t,l.addEventListener("load",function(){i()})):(l=n.createElement(s,"style"),l.appendChild(s.createTextNode(t))),l.id=a;var c=s.getElementsByTagName("head")[0]||s.documentElement;c.appendChild(l)}o||i()},_load:function(t,n,i){if(!t)return void i();if("string"==typeof n)return void this._createStyle(t,n,i);var r=n.href,o=".css";if(r.substring(r.length-o.length)!==o&&(r+=o),/^\//.test(r)||/[a-zA-Z0-9]+:\/\//i.test(r)||!e.toUrl)this._createStyle(t,r,i,!0);else{var s=this;e(["text!"+r],function(e){s._createStyle(t,e,i,!1)})}},_capitalRegEx:/[A-Z]/g},t.EventTarget.addMixin(i.prototype),{TextTheme:i}}),define("orion/widgets/themes/ThemeClass",[],function(){function e(e){this.attributes=[],this.element=document.createElement("div"),this.style=this.element.style,this.className=e,this.classString="."+e+"{ "}function t(){return this.classString=this.classString+this.style.cssText+this.closeString,this.classString}var n,i,r=null,o=" }\n";return e.prototype.className=r,e.prototype.classString=i,e.prototype.style=n,e.prototype.closeString=o,e.prototype.toString=t,{ThemeClass:e}}),define("orion/widgets/themes/container/ThemeSheetWriter",["orion/widgets/themes/ThemeClass"],function(e){function t(){}function n(){var t="",n=[],i=new e.ThemeClass("orionPage");i.style.backgroundColor="#fdfdfd",i.style.width="100%",i.style.height="100%",n.push(i);var r=new e.ThemeClass("topRowBanner");r.style.margin="0",r.style.border="0",r.style.backgroundColor=this.navbar,r.style.borderBottom="none",r.style.boxShadow="0 2px 2px 0 rgba(0, 0, 0, 0.1),0 1px 0 0 rgba(0, 0, 0, 0.1)",r.style.zIndex="100",n.push(r);var o=new e.ThemeClass("a");o.style.textDecoration="none",o.style.color=this.content,n.push(o);var s=new e.ThemeClass("navlink");s.style.display="inline-block",s.style.padding="2px",s.style.color=this.content,s.style.verticalAlign="bottom",n.push(s);var a=new e.ThemeClass("primaryNav");a.style.color=this.navtext,a.style.fontSize="8pt",a.style.fontWeight="normal",a.style.paddingTop="0",a.style.verticalAlign="baseline",n.push(a);var l=new e.ThemeClass("primaryNav a");l.style.fontSize="8pt",l.style.color=this.navtext,l.style.marginRight="6px",l.style.marginLeft="6px",l.style.verticalAlign="baseline",l.style.textDecoration="none",n.push(l);var c=new e.ThemeClass("primaryNav a:hover");c.style.color="#bfbfbf",c.style.cursor="hand",c.style.color="white",c.style.fontWeight="normal",n.push(c);for(var u in n)t+=n[u].toString();return t}function i(){var t="",n=[],i=new e.ThemeClass("titleArea");i.style.margin="0",i.style.paddingTop="5px",i.style.border="0",i.style.background=this.location,i.style.background="-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+this.location+"), color-stop(100%,"+this.location+"))",i.style.borderBottom="1px solid "+this.location,i.style.minHeight="20px",n.push(i);var r=new e.ThemeClass("breadcrumb");r.style.fontSize="8pt",r.style.textDecoration="none",r.style.color="#f1f1f2;",r.style.paddingTop="2px",n.push(r);var o=new e.ThemeClass("a.breadcrumb:hover");o.style.textDecoration="none",o.style.borderBottom="1px dotted",o.style.color="#F58B0F",o.style.cursor="pointer",n.push(o);var s=new e.ThemeClass("breadcrumbSeparator");s.style.fontSize="8pt",s.style.textDecoration="none",s.style.color=this.separator,s.style.fontWeight="bold",n.push(s);var a=new e.ThemeClass("currentLocation");a.style.fontWeight="bold",a.style.fontSize="8pt",a.style.color=this.breadcrumb,a.style.textDecoration="none",a.style.textWrap="normal",a.style.lineHeight="10pt",n.push(a);var l=new e.ThemeClass("a.currentLocation:hover");l.style.fontWeight="bold",l.style.fontSize="10pt",l.style.color="#666666",l.style.textDecoration="none",l.style.borderBottom="0",n.push(l);var c=new e.ThemeClass("navlinkonpage");if(c.style.color=this.content,c.style.verticalAlign="middle",n.push(c),this.bannerProgress){var u=new e.ThemeClass("topRowBanner .progressPane_running");u.style.borderColor=this.bannerProgress,n.push(u)}for(var h in n)t+=n[h].toString();return t}function r(){var t="",n=[],i=new e.ThemeClass("commandButton");i.style.color="#666",i.style.border="1px solid #dedede",i.style.backgroundColor="#ddd",i.style.textAlign="center",i.style.verticalAlign="middle",i.style.cursor="pointer",i.style.display="inline-block",i.style.padding="4px 6px",i.style.borderRadius="3px",i.style.lineHeight="12px",i.style.fontSize="9pt",i.style.userSelect="none",n.push(i);var r=new e.ThemeClass("commandButton:over");r.style.backgroundColor="#e6e6e6",r.style.border="1px solid #808080",n.push(r);var o=new e.ThemeClass("commandMenu");o.style.color="#222",o.style.display="inline-block",o.style.verticalAlign="baseline",o.style.margin="0",o.style.fontSize="8pt",o.style.fontWeight="normal",o.style.border="1px solid #dedede",o.style.backgroundColor="#efefef",o.style.cursor="pointer",o.style.borderRadius="1px",n.push(o);var s=new e.ThemeClass("commandMenuItem");s.style.border="0",s.style.padding="0",s.style.margin="0",n.push(s);for(var a in n)t+=n[a].toString();return t}function o(){var t="",n=[],i=new e.ThemeClass("searchbox");i.style.backgroundImage="url(../images/core_sprites.png)",i.style.backgroundRepeat="no-repeat",i.style.backgroundPosition="4px -297px",i.style.width="12px",i.style.height="12px",i.style.backgroundColor=this.search,i.style.border="1px solid "+this.search,i.style.fontSize="11px",i.style.width="15em",i.style.height="16px",i.style.borderRadius="10px",i.style.color="#999",i.style.padding="0",i.style.paddingLeft="20px",i.style.marginLeft="5px",i.style.marginTop="6px !important",i.style.font="7pt Lucida Sans Unicode,Lucida Grande,Verdana,Arial,Helvetica,Myriad,Tahoma,clean,sans-serif !important",n.push(i);var r=new e.ThemeClass("searchbox:focus");r.style.color="white",r.style.outline="none",n.push(r);var o=new e.ThemeClass("checkedRow");o.style.cssText="background-color:"+this.selection+" !important;",n.push(o);var s=new e.ThemeClass("navbar-item-selected");s.style.background=this.selection,s.style.color=this.content,n.push(s);
var a=new e.ThemeClass("auxpane");a.style.border="0",a.style.background=this.sidepanel,n.push(a);var l=new e.ThemeClass("mainpane");l.style.background=this.mainpanel,l.style.border=0,n.push(l);var c=new e.ThemeClass("mainToolbar");c.style.background=this.toolpanel,n.push(c);for(var u in n)t+=n[u].toString();return t}function s(){console.log(this.writeNavigationStyle()),console.log(this.writeLocationStyle()),console.log(this.writeMainStyle()),console.log(this.writeButtonStyle())}function a(){return""}var l="white",c="#777777",u="#EFEFEF",h="#cedce7",d="#F7F7F7",p="white",f="#bfbfbf",m="#3087B3",g="#444",v="white";return t.prototype.navbar=l,t.prototype.button=c,t.prototype.location=u,t.prototype.selection=h,t.prototype.sidepanel=d,t.prototype.mainpanel=p,t.prototype.navtext=f,t.prototype.content=m,t.prototype.search=g,t.prototype.toolpanel=v,t.prototype.writeNavigationStyle=n,t.prototype.writeLocationStyle=i,t.prototype.writeButtonStyle=r,t.prototype.writeMainStyle=o,t.prototype.render=s,t.prototype.getSheet=a,{ThemeSheetWriter:t}}),define("orion/widgets/themes/ThemeVersion",[],function(){var e="6.59";return e}),define("orion/widgets/themes/container/ThemeData",["i18n!orion/settings/nls/messages","orion/editor/textTheme","orion/widgets/themes/container/ThemeSheetWriter","orion/widgets/themes/ThemeVersion"],function(e,t,n,i){function r(){}function o(){this.styles=[];var e=new r;e.name="Orion",e.navbar="white",e.button="#EFEFEF",e.location="#efefef",e.selection="FEC",e.sidepanel="#FBFBFB",e.mainpanel="white",e.toolpanel="white",e.navtext="#bfbfbf",e.content="#3087B3",e.search="#444",e.breadcrumb="#3087B3",e.separator="#333",e.bannerProgress="whitesmoke",this.styles.push(e);var t=new r;t.name="Orion2014",t.navbar="white",t.button="#EFEFEF",t.location="#EFEFEF",t.selection="FEC",t.sidepanel="#EEEEEE",t.mainpanel="#EEEEEE",t.toolpanel="#EEEEEE",t.navtext="#BFBFBF",t.content="#333333",t.search="#444444",t.breadcrumb="#333333",t.separator="#333333",t.bannerProgress="orange",this.styles.push(t);var n=new r;n.name="Green Zone",n.navbar="seagreen",n.button="lavender",n.location="darkseagreen",n.selection="moccasin",n.sidepanel="aliceblue",n.mainpanel="white",n.toolpanel="white",n.navtext="#FBFBFB",n.content="darkgreen",n.search="darkgreen",n.breadcrumb="#3087B3",n.separator="seagreen",n.bannerProgress="#F2F2F2",this.styles.push(n);var i=new r;i.name="Pretty In Pink",i.navbar="plum",i.button="lavender",i.location="pink",i.selection="lavender",i.sidepanel="seashell",i.mainpanel="white",i.toolpanel="white",i.navtext="#FBFBFB",i.content="mediumorchid",i.search="violet",i.breadcrumb="#3087B3",i.separator="plum",i.bannerProgress="#F2F2F2",this.styles.push(i);var o=new r;o.name="Blue Monday",o.navbar="cornflowerblue",o.button="lavender",o.location="skyblue",o.selection="lavender",o.sidepanel="aliceblue",o.mainpanel="white",o.toolpanel="white",o.navtext="#FBFBFB",o.content="royalblue",o.search="royalblue",o.breadcrumb="#3087B3",o.separator="cornflowerblue",o.bannerProgress="#F2F2F2",this.styles.push(o);var s=new r;s.name="Vanilla Skies",s.navbar="sandybrown",s.button="lemmonchiffon",s.location="cornsilk",s.selection="lemonchiffon",s.sidepanel="white",s.mainpanel="white",s.toolpanel="white",s.navtext="lemonchiffon",s.content="chocolate",s.search="moccasin",s.breadcrumb="#3087B3",s.separator="sandybrown",s.bannerProgress="#F2F2F2",this.styles.push(s);var a=new r;a.name="Beetlejuice",a.navbar="indigo",a.button="slateblue",a.location="darkslateblue",a.selection="silver",a.sidepanel="lavender",a.mainpanel="white",a.toolpanel="white",a.navtext="#FBFBFB",a.content="mediumslateblue",a.search="#444",a.breadcrumb="#3087B3",a.separator="indigo",a.bannerProgress="#F2F2F2",this.styles.push(a);var l=new r;l.name="Red",l.navbar="#CD2127",l.button="#777777",l.location="#D85F56",l.selection="lightcoral",l.sidepanel="#EFDAB2",l.mainpanel="#FDFADD",l.toolpanel="#FDFADD",l.navtext="#FBFBFB",l.content="darkred",l.search="#D85F56",l.breadcrumb="darkred",l.separator="#CD2127",l.bannerProgress="#F2F2F2",this.styles.push(l)}function s(){return this.styles}function a(){return{storage:"/themes",styleset:"styles",defaultTheme:"Orion2014",selectedKey:"selected",version:i}}function l(){var t=10,n=10,i=350,r=32,o=29,s=t+r+o,a={};a.top=t,a.left=n,a.width=i,a.height=i,a.shapes=[{type:"RECTANGLE",name:e["Navigation Bar"],x:n,y:t,width:i,height:r,family:"navbar",fill:"#333",order:1},{type:"TEXT",name:e["Navigation Text"],label:"UserName",x:n+i-70,y:t+20,family:"navtext",fill:"#bfbfbf",font:"8pt sans-serif"},{type:"ROUNDRECTANGLE",name:e["Search Box"],x:n+i-145,y:t+10,width:70,height:12,family:"search",fill:"#444",order:3},{type:"RECTANGLE",name:e["Tool Panel"],x:n+.4*i,y:s,width:.6*i-1,height:30,family:"toolpanel",fill:"white",order:4},{type:"RECTANGLE",name:e["Selection Bar"],x:n+.4*i+5,y:s+62,width:.6*i-10,height:20,family:"selection",fill:"#FEC",order:7},{type:"RECTANGLE",name:e.Location,x:n,y:t+r,width:i,height:o,family:"location",fill:"#efefef",order:8},{type:"TEXT",name:e["Navigation Text"],label:"Navigator",x:n+50,y:t+20,family:"navtext",fill:"#bfbfbf",font:"8pt sans-serif",order:2},{type:"TEXT",name:e.Content,label:"Breadcrumb",x:n+5,y:t+r+18,family:"content",fill:"#3087B3",font:"8pt sans-serif"},{type:"TEXT",name:e.Content,label:"/",x:n+68,y:t+r+18,family:"content",fill:"#3087B3",font:"8pt sans-serif",order:9},{type:"TEXT",name:e.Content,label:"Location",x:n+74,y:t+r+18,family:"content",fill:"#3087B3",font:"8pt sans-serif"},{type:"RECTANGLE",name:e["Main Panel"],x:n+.4*i,y:s+30,width:.6*i-1,height:i-s+t-31,family:"mainpanel",fill:"white",order:6},{type:"ROUNDRECTANGLE",name:e.Button,x:n+.4*i+5,y:s+5,width:37,height:20,family:"button",fill:"#EFEFEF",order:11},{type:"TEXT",name:e["Button Text"],label:"Button",x:n+.4*i+8,y:s+19,family:"navbar",fill:"#333",font:"8pt sans-serif"},{type:"TRIANGLE",name:"userMenu",x1:n+i-7,y1:t+14,x2:n+i-13,y2:t+14,x3:n+i-10,y3:t+19,family:"userMenu",fill:"#BFBFBF"},{type:"TRIANGLE",name:"userMenu",x1:n+10,y1:s+17,x2:n+16,y2:s+17,x3:n+13,y3:s+22,family:"userMenu",fill:"#BFBFBF"},{type:"TEXT",name:e["Section Text"],label:"Section",x:n+20,y:s+23,family:"navbar",fill:"#333",font:"8pt sans-serif"},{type:"LINE",name:e["Line Color"],x1:n+.4*i,y1:s+30,x2:n+i,y2:s+30,linewidth:2,fill:"#DEDEDE"},{type:"LINE",name:e["Line Color"],x1:n+.4*i,y1:s,x2:n+.4*i,y2:t+i,linewidth:2,fill:"#DEDEDE"},{type:"LINE",name:e["Line Color"],x1:n+10,y1:s+29,x2:n+.4*i-10,y2:s+29,linewidth:2,fill:"#DEDEDE"},{type:"RECTANGLE",name:e["Side Panel"],x:n,y:s,width:.4*i,height:i-s+t,family:"sidepanel",fill:"#FBFBFB",order:12},{type:"TRIANGLE",name:"userMenu",x1:n+i-7,y1:t+14,x2:n+i-13,y2:t+14,x3:n+i-10,y3:t+19,family:"userMenu",fill:"#BFBFBF"},{type:"TRIANGLE",name:"userMenu",x1:n+10,y1:s+17,x2:n+16,y2:s+17,x3:n+13,y3:s+22,family:"userMenu",fill:"#BFBFBF"},{type:"TEXT",name:e["Navigation Text"],label:"Navigator",x:n+50,y:t+20,family:"navtext",fill:"#bfbfbf",font:"8pt sans-serif",order:2},{type:"TRIANGLE",name:"userMenu",x1:n+i-7,y1:t+14,x2:n+i-13,y2:t+14,x3:n+i-10,y3:t+19,family:"userMenu",fill:"#BFBFBF"},{type:"TRIANGLE",name:"userMenu",x1:n+10,y1:s+17,x2:n+16,y2:s+17,x3:n+13,y3:s+22,family:"userMenu",fill:"#BFBFBF"}];for(var l=0;3>l;l++)a.shapes.push({type:"TEXT",name:e.Content,label:"org.eclipse.orion.content",x:n+.4*i+20,y:s+56+20*l,fill:"#3087B3",family:"content"});for(var l=0;3>l;l++)a.shapes.push({type:"TEXT",name:e.Content,label:"Item",x:n+15,y:s+44+20*l,fill:"#3087B3",family:"content"});for(var c=0;3>c;c++)a.shapes.push({type:"TRIANGLE",name:"twisty",x1:n+.4*i+10,y1:s+50+20*c,x2:n+.4*i+15,y2:s+53+20*c,x3:n+.4*i+10,y3:s+56+20*c,family:"navbar",fill:"#333"});return a.shapes.push({type:"IMAGE",name:"logo",x:n+5,y:t+8,source:"../../images/orion-transparent.png",family:"logo"}),a}function c(e){var i=new n.ThemeSheetWriter,r="orionTheme",o=new t.TextTheme.getTheme(r);o.setThemeClass(r,i.getSheet(e))}return r.prototype.name="Orion",r.prototype.navbar="#404648",r.prototype.button="#EFEFEF",r.prototype.location="#333",r.prototype.breadcrumb="#3087B3",r.prototype.separator="#333",r.prototype.selection="FEC",r.prototype.sidepanel="#FBFBFB",r.prototype.mainpanel="white",r.prototype.toolpanel="white",r.prototype.navtext="#bfbfbf",r.prototype.content="#3087B3",r.prototype.search="#444",r.prototype.bannerProgress="white",o.prototype.styles=[],o.prototype.getStyles=s,o.prototype.getThemeStorageInfo=a,o.prototype.getViewData=l,o.prototype.processSettings=c,{ThemeData:o,getStyles:s}}),define("orion/widgets/nls/messages",{root:!0}),define("orion/widgets/nls/root/messages",{"Choose a Folder":"Choose a Folder",OK:"OK",Profile:"Profile","Sign out":"Sign out","N/A":"N/A","logged in since ":"logged in since ","Sign in":"Sign in","Authentication required!":"Authentication required!","Name:":"Name:","Plug-ins":"Plug-ins",Properties:"Properties",Services:"Services","SFTP Transfer":"SFTP Transfer","Remote host:":"Remote host:","Port:":"SFTP Port:","Remote path:":"Remote path:","User name:":"User name:","Password:":"Password:","Start Transfer":"Start Transfer","Location:":"Location:","orion.sftpConnections":"orion.sftpConnections","Drag a file here":"Drag a file here","unzip zips":"Unzip *.zip files","or if you prefer":"(or upload a file using the buttons below)",Upload:"Upload","Browse...":"Browse...","Import a file or zip":"Import a file or zip",MissingSearchRenderer:"Missing required argument: searchRenderer","Find File Named":"Find File Named",Search:"Search","FileName FolderName":"FileName FolderName(Optional)","Searching...":"Searching...",SearchOccurences:'Searching for occurrences of: "${0}"',name:"name",test:"test","Type the name of a file to open (? = any character, * = any string):":"Type the name of a file to open (? = any character, * = any string):","Sign Out":"Sign Out","Sign In":"Sign In",Help:"Help","Report a Bug":"Report a Bug","Keyboard Shortcuts":"Keyboard Shortcuts",Settings:"Settings","View profile of ":"View profile of ",Profiles:"Profiles","Information Needed":"Information Needed",Cancel:"Cancel","If the same file exists in both the source and destination:":"If the same file exists in both the source and destination:","Cancel the transfer":"Cancel the transfer","Always overwrite destination":"Always overwrite destination","Overwrite if source is newer":"Overwrite if source is newer",New:"New","Building file skeleton...":"Building file skeleton...",Add:"Add","Upload...":"Upload...",AvailableCmdsType:"For a list of available commands type '${0}'.","Main Pages":"Main Pages","Related Links":"Related Links",Yes:"Yes",No:"No",DeleteSearchTrmMsg:"Click or use delete key to delete the search term",Application:"Application",selectLaunchConfig:"Create new launch configuration",createNew:"Create New",Running:"Running",checkingStateMessage:"Checking status of ${0}",checkingStateShortMessage:"checking status",Status:"Status",appInfoStopped:"stopped",appInfoRunning:"running",appInfoUnknown:"unknown",displayNameSeparator:" on ",openAppTooltip:"Open URL"}),define("orion/widgets/UserMenu",["i18n!orion/widgets/nls/messages","orion/webui/littlelib","orion/PageLinks","orion/webui/dropdown"],function(e,t,n,i){function r(e){this._displaySignOut=!0,this._init(e)}return r.prototype={_init:function(e){if(this._dropdownNode=t.node(e.dropdownNode),!this._dropdownNode)throw"no dom node for dropdown found";this._dropdown=e.dropdown,this._serviceRegistry=e.serviceRegistry,this.authenticatedServices={},this.unauthenticatedServices={},this._noSeparator=e.noSeparator,this._dropDownItemClass=e.dropDownItemClass,this._keyAssistClass=e.keyAssistClass,void 0!==e.signOut&&(this._displaySignOut=e.signOut)},isSingleService:function(){return this.length(this.unauthenticatedServices)+this.length(this.authenticatedServices)===1},hasServices:function(){return this.length(this.unauthenticatedServices)+this.length(this.authenticatedServices)>0},length:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},_makeMenuItem:function(e,n){var r=i.createMenuItem(e),o=r.firstElementChild;return"string"==typeof this._dropDownItemClass&&""!==this._dropDownItemClass&&o.classList.add(this._dropDownItemClass),o.addEventListener("click",n,!1),o.addEventListener("keydown",function(e){(e.keyCode===t.KEY.ENTER||e.keyCode===t.KEY.SPACE)&&n()},!1),o},_renderAuthenticatedService:function(t){var i=this,r=this.authenticatedServices[t].authService;if(r&&r.logout&&this._displaySignOut){var o=this._makeMenuItem(e["Sign Out"],function(){r.logout().then(function(){i.addUserItem(t,r,i.authenticatedServices[t].label),localStorage.removeItem(t),localStorage.removeItem("lastLogin");for(var e=localStorage.length-1;e>=0;e--){var o=localStorage.key(e);o&&0===o.indexOf("/orion/preferences/user")&&localStorage.removeItem(o)}r.getAuthForm(n.getOrionHome()).then(function(e){window.location=e})})});this._dropdownNode.appendChild(o.parentNode)}},renderServices:function(){function r(e){return s[e]||(s[e]=o.createDocumentFragment()),s[e]}var o=document,s=[],a=this._serviceRegistry;n.getPageLinksInfo(a,"orion.page.link.user").then(function(n){if(this._dropdown?this._dropdown.empty():this._dropdownNode&&t.empty(this._dropdownNode),n.getAllLinks().forEach(function(e){var n,i;e.category&&(i=/user\.(\d+)/.exec(e.category))&&(n=parseInt(i[1],10)),("number"!=typeof n||isNaN(n))&&(n=1);var s=r(n),a=o.createElement("li"),l=o.createElement("a");l.role="menuitem","string"==typeof this._dropDownItemClass?""!==this._dropDownItemClass&&l.classList.add(this._dropDownItemClass):l.classList.add("dropdownMenuItem"),l.href=e.href,l.textContent=e.textContent,a.appendChild(l),s.appendChild(a),l.addEventListener("keydown",function(e){(e.keyCode===t.KEY.ENTER||e.keyCode===t.KEY.SPACE)&&l.click()},!1)}.bind(this)),this.keyAssistFunction){var a=this._makeMenuItem(e["Keyboard Shortcuts"],this.keyAssistFunction);"string"==typeof this._keyAssistClass?""!==this._keyAssistClass&&a.classList.add(this._keyAssistClass):a.classList.add("key-assist-menuitem");var l=a.parentNode;r(0).appendChild(l)}var c=this;if(s.sort(function(e,t){return e-t}).forEach(function(e,t){if(t<s.length-1&&!this._noSeparator){var n=i.createSeparator();e.appendChild(n)}c._dropdownNode.appendChild(e)}.bind(this)),this.isSingleService())for(var u in this.authenticatedServices)this.authenticatedServices.hasOwnProperty(u)&&this._renderAuthenticatedService(u,0)}.bind(this))},setKeyAssist:function(e){this.keyAssistFunction=e,this.renderServices()},addUserItem:function(e,t,n,i){i?(this.unauthenticatedServices[e]&&delete this.unauthenticatedServices[e],this.authenticatedServices[e]={authService:t,label:n,data:i}):(this.authenticatedServices[e]&&delete this.authenticatedServices[e],this.unauthenticatedServices[e]=this.unauthenticatedServices[e]?{authService:t,label:n,pending:this.unauthenticatedServices[e].pending}:{authService:t,label:n}),this.renderServices()}},r.prototype.constructor=r,{UserMenu:r}}),define("orion/webui/dialog",["orion/webui/littlelib","orion/uiUtils"],function(e,t){function n(){}var i={dialog:null};return n.prototype={DISABLED:"disabled",CONTAINERTEMPLATE:'<div class="dialog" role="dialog"><div class="dialogTitle"><span id="title" class="dialogTitleText layoutLeft"></span><button aria-label="Close" class="dismissButton layoutRight core-sprite-close imageSprite" id="closeDialog"></button></div><div id="dialogContent" class="dialogContent layoutBlock"></div><div id="buttons" class="dialogButtons"></div></div>',_initialize:function(){var t=document.body;this.$frameParent=t,this.$$modalExclusions=this.$$modalExclusions||[];var n=document.createRange();n.selectNode(t);var i=n.createContextualFragment(this.CONTAINERTEMPLATE);t.appendChild(i),this.$frame=t.lastChild,this.title&&e.$("#title",this.$frame).appendChild(document.createTextNode(this.title)),this.$close=e.$("#closeDialog",this.$frame);var r=this;this.$close.addEventListener("click",function(){r.hide()},!1),this.$parent=e.$(".dialogContent",this.$frame),n=document.createRange(),n.selectNode(this.$parent);var o=n.createContextualFragment(this.TEMPLATE);this.messages&&e.processTextNodes(o,this.messages),this.$parent.appendChild(o),this.$buttonContainer=e.$(".dialogButtons",this.$frame),this._makeButtons(),this.$frame.addEventListener("keydown",function(t){t.keyCode===e.KEY.ESCAPE?r.hide():t.keyCode===e.KEY.ENTER&&"function"==typeof r._defaultCallback&&r._defaultCallback()},!1),this._bindElements(this.$parent),"function"==typeof this._bindToDom&&this._bindToDom(this.$parent)},_makeButtons:function(){if(this.$buttonContainer&&Array.isArray(this.buttons)){var e=this;this.buttons.forEach(function(n){var i=t.createButton(n.text,n.callback);n.id&&(i.id=n.id,e["$"+i.id]=i),n.isDefault&&(e._defaultCallback=n.callback,e._defaultButton=i),e.$buttonContainer.appendChild(i)})}},_makeModal:function(){var t=this;this.$frame.addEventListener("blur",function(e){t.$lastFocusedElement=e.target},!0),this._modalListener=function(n){var i=!e.contains(t.$frame,n.target);if(i)for(var r=0;r<t.$$modalExclusions.length;r++)if(e.contains(t.$$modalExclusions[r],n.target)){i=!1;break}i&&(window.setTimeout(function(){(t.$lastFocusedElement||t.$parent).focus()},0),e.stop(n))},this.$frameParent.addEventListener("focus",this._modalListener,!0),this.$frameParent.addEventListener("click",this._modalListener,!0);var n=this.$frameParent.childNodes,i=!1;this._addedBackdrop=[];for(var r=0;r<n.length;r++){for(var o=0;o<this.$$modalExclusions.length;o++)if(e.contains(this.$$modalExclusions[o],n[r])){i=!0;break}if(!i&&n[r]!==t.$frame&&n[r].classList&&!n[r].classList.contains("tooltipContainer")){var s=n[r];s.classList.contains("modalBackdrop")||(s.classList.add("modalBackdrop"),this._addedBackdrop.push(s))}}var a=e.lastTabbable(this.$buttonContainer)||e.lastTabbable(this.$parent);a&&a.addEventListener("keydown",function(n){if(n.keyCode===e.KEY.TAB){var i=t._getFirstFocusField();i&&i!==n.target&&i.focus(),e.stop(n)}},!1)},_addChildDialog:function(e){this.$$modalExclusions.push(e.$frame||e.$parent)},_inModalExclusion:function(e){return this.$$modalExclusions.some(function(t){return e.$frame===t||e.$parent===t})},_bindElements:function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];n.id&&(this["$"+n.id]=n),this._bindElements(n)}},hide:function(t){var n=document.activeElement,r=this.$frameParent===n||0!==(16&this.$frameParent.compareDocumentPosition(n)),o=this.$originalFocus;t||i.dialog!==this||(i.dialog=null),"function"==typeof this._beforeHiding&&this._beforeHiding(),this._modalListener&&(this.$frameParent.removeEventListener("focus",this._modalListener,!0),this.$frameParent.removeEventListener("click",this._modalListener,!0)),this.$frame.classList.remove("dialogShowing"),e.setFramesEnabled(!0),"function"==typeof this._afterHiding&&this._afterHiding(),r&&o&&1!==document.compareDocumentPosition(o)&&o.focus();var s=this;this.keepAlive||window.setTimeout(function(){s.destroy()},0)},show:function(t){if(this.modal)if(this._makeModal(),i.dialog){if(!i.dialog._inModalExclusion(this))return void this.hide(!0)}else i.dialog=this;"function"==typeof this._beforeShowing&&this._beforeShowing(),e.setFramesEnabled(!1);var n,r,o=e.bounds(this.$frame),s=e.bounds(document.documentElement);if(t){var a=e.bounds(t);r=a.top+a.height+4,n=a.left+4,r+o.height>s.height&&(r=Math.max(0,s.height-o.height-4)),n+o.width>s.width&&(n=Math.max(0,s.width-o.width-4))}else n=Math.max(0,(s.width-o.width)/2),r=Math.max(0,(s.height-o.height)/2);if(this.$lastFocusedElement=this.$originalFocus=document.activeElement,this.$frame.style.top=r+"px",this.$frame.style.left=n+"px",this.$frame.classList.add("dialogShowing"),"function"==typeof this._afterShowing&&this._afterShowing(),!this.customFocus){var l=this._getFirstFocusField();l.focus()}},_getFirstFocusField:function(){return e.firstTabbable(this.$parent)||this._defaultButton||e.firstTabbable(this.$buttonContainer)||this.$close},destroy:function(){this.$frame&&(i.dialog===this&&(i.dialog=null),e.setFramesEnabled(!0),this._addedBackdrop&&this._addedBackdrop.length>0&&this._addedBackdrop.forEach(function(e){e.classList.remove("modalBackdrop")}),this.$frameParent.removeEventListener("focus",this._modalListener,!0),this.$frameParent.removeEventListener("click",this._modalListener,!0),this.$frameParent.removeChild(this.$frame),this.$frame=void 0,this.$parent=void 0)}},n.prototype.constructor=n,{Dialog:n}}),define("orion/webui/dialogs/OpenResourceDialog",["i18n!orion/widgets/nls/messages","orion/crawler/searchCrawler","orion/contentTypes","require","orion/webui/littlelib","orion/util","orion/webui/dialog"],function(e,t,n,i,r,o,s){function a(e){this._init(e)}return a.prototype=new s.Dialog,a.prototype.TEMPLATE='<div role="search"><div><label id="fileNameMessage" for="fileName">${Type the name of a file to open (? = any character, * = any string):}</label></div><div><input id="fileName" type="text" class="openResourceDialogInput" style="min-width: 25em; width:90%;"/></div><div id="progress" style="padding: 2px 0 0; width: 100%;"><img src="'+i.toUrl("../../../images/progress_running.gif")+'" class="progressPane_running_dialog" id="crawlingProgress"></img></div><div id="results" style="max-height:250px; height:auto; overflow-y:auto;" aria-live="off"></div><div id="statusbar"></div></div>',a.prototype._init=function(t){if(this.title=t.title||e["Find File Named"],this.modal=!0,this.messages=e,this._searcher=t.searcher,this._progress=t.progress,this._onHide=t.onHide,this._contentTypeService=new n.ContentTypeRegistry(this._searcher.registry),!this._searcher)throw new Error("Missing required argument: searcher");if(this._searchDelay=t.searchDelay||500,this._time=0,this._searcher.setCrawler(null),this._forceUseCrawler=!1,this._initialText=t.initialText,this._message=t.message,this._nameSearch=!0,void 0!==t.nameSearch&&(this._nameSearch=t.nameSearch),this._searchOnRoot=!0,this._fileService=this._searcher.getFileService(),!this._fileService)throw new Error(e["Missing required argument: fileService"]);if(this._searchRenderer=t.searchRenderer,!this._searchRenderer||"function"!=typeof this._searchRenderer.makeRenderFunction)throw new Error(e.MissingSearchRenderer);this._initialize()},a.prototype._bindToDom=function(n){var i=this;i.$crawlingProgress.style.display="none",this._nameSearch?this.$fileName.setAttribute("placeholder",e["FileName FolderName"]):this.$fileName.setAttribute("placeholder",e.Search),this.$fileName.addEventListener("input",function(){i._time=+new Date,i._timeoutId&&clearTimeout(i._timeoutId),i._timeoutId=setTimeout(i.checkSearch.bind(i),0)},!1),this.$fileName.addEventListener("keydown",function(e){if(e.keyCode===r.KEY.ENTER){var t=r.$("a",i.$results);t&&(r.stop(e),(o.isMac?e.metaKey:e.ctrlKey)?window.open(t.href):(window.location.href=t.href,i.hide()))}},!1),n.addEventListener("keydown",function(e){var t,n,o,s,a,l=function(e,t,n){return t<e.length-1?e[t+1]:n},c=function(e,t,n){return t>0?e[t-1]:n};(e.keyCode===r.KEY.DOWN||e.keyCode===r.KEY.UP)&&(t=r.$$array("a",i.$results),o=document.activeElement,s=t.indexOf(o),e.keyCode===r.KEY.DOWN?s>=0?(o.classList.remove("treeIterationCursor"),a=l(t,s,t[0]),a.focus(),a.classList.add("treeIterationCursor")):t.length>0&&(a=l(t,-1,t[0]),a.focus(),a.classList.add("treeIterationCursor")):s>=0?(o.classList.remove("treeIterationCursor"),n=i.$fileName,a=c(t,s,n),a.focus(),s>0&&a.classList.add("treeIterationCursor")):t.length>0&&(t[t.length-1].focus(),t[t.length-1].classList.add("treeIterationCursor")),r.stop(e))}),n.addEventListener("mouseup",function(e){e.target.focus()},!1),setTimeout(function(){if(i._forceUseCrawler||!i._fileService.getService(i._searcher.getSearchLocation()).search){var n=i._searchOnRoot?i._searcher.getSearchRootLocation():i._searcher.getChildrenLocation(),r=new t.SearchCrawler(i._searcher.registry,i._fileService,"",{searchOnName:!0,location:n});i._searcher.setCrawler(r),r.buildSkeleton(function(){i.$crawlingProgress.style.display="inline",i.$progress.appendChild(document.createTextNode(e["Building file skeleton..."]))},function(){i.$crawlingProgress.style.display="none",i.$progress.removeChild(i.$progress.lastChild)})}},0),this._message&&(this.$fileNameMessage.removeChild(this.$fileNameMessage.firstChild),this.$fileNameMessage.appendChild(document.createTextNode(this._message))),this._initialText&&(this.$fileName.value=this._initialText,this.doSearch())},a.prototype.checkSearch=function(){clearTimeout(this._timeoutId);var e=(new Date).getTime();e-this._time>this._searchDelay?(this._time=e,this.doSearch()):this._timeoutId=setTimeout(this.checkSearch.bind(this),50)},a.prototype._detectFolderKeyword=function(e){var t,n,i=e,r=null;return this._nameSearch&&(t=/(\S+)\s*(.*)/,n=t.exec(e),n&&3===n.length&&(n[1]&&(i=n[1]),n[2]&&(r=n[2]))),{keyword:i,folderKeyword:r}},a.prototype.doSearch=function(){var t=this.$fileName.value;if(t){var n=this._detectFolderKeyword(t),i=this._searcher.createSearchParams(n.keyword,this._nameSearch,this._searchOnRoot),s=this._searchRenderer.makeRenderFunction(this._contentTypeService,this.$results,!1,this.decorateResult.bind(this));this.currentSearch=s;var a=document.createElement("div");a.appendChild(document.createTextNode(this._nameSearch?e["Searching..."]:o.formatMessage(e.SearchOccurences,t))),r.empty(this.$results),this.$results.appendChild(a),this._searcher.search(i,n.folderKeyword,function(){s===this.currentSearch&&s.apply(null,arguments)}.bind(this))}},a.prototype.decorateResult=function(e){function t(e){0!==e.button||e.ctrlKey||e.metaKey||n.hide()}for(var n=this,i=r.$$array("a",e),o=0;o<i.length;o++){var s=i[o];s.addEventListener("click",t,!1)}},a.prototype._beforeHiding=function(){clearTimeout(this._timeoutId)},a.prototype._afterHiding=function(){this._onHide&&this._onHide()},a.prototype.constructor=a,{OpenResourceDialog:a}}),define("text!orion/banner/banner.html",[],function(){return'<header id="banner" role="banner">\r\n	<!-- Requires some js code to bind the home link, link to progress image, and binding NLS variables  -->\r\n\r\n	<div id="staticBanner" class="layoutBlock topRowBanner"> <!-- primaryNav -->\r\n		<!-- Static "Home" link. TODO delete this -->\r\n		<a id="home" class="layoutLeft "></a>\r\n\r\n		<!-- Left banner component: hamburger -->\r\n		<nav id="primaryNav" class="bannerLeftArea" style="z-index:2;" role="navigation">\r\n				<button class="centralNavigation commandSprite core-sprite-hamburger" type="button"id="centralNavigation"></button>\r\n		</nav>\r\n\r\n		<!-- Middle banner component: Breadcrumb bar -->\r\n		<div class="clear navigationBreadcrumb bannerMiddleArea" >\r\n			<div id="location" class="currentLocation"></div>\r\n		</div>\r\n\r\n		<!-- Right banner component: user identity -->\r\n		<div class="bannerRightArea">\r\n			<!-- Global commands support. -->\r\n			<div id="globalActions" class="spacingLeft layoutLeft"></div>\r\n\r\n			<!-- Search. TODO delete this -->\r\n			<input type="text" id="search" autocomplete="off" class="layoutLeft spacingLeft searchbox" role="search" style="display:none;">\r\n			<div id="searchOptions" class="layoutLeft" style="padding-top:1px;display:none;"></div>\r\n\r\n			<!-- User identity menu and Progress -->\r\n			<div id="userMenu" class="userMenu">\r\n				<div id="progressPane" class="progressWatch" tabindex="0" role="progressbar">\r\n					<div id="watchButton" class="watchButton"></div>\r\n					<div id="watchBody" class="watchBody">\r\n						<span class="hand longMinute">\r\n							<span class="darkSide"></span>\r\n						</span>\r\n						<span class="hand longHour">\r\n							<span class="darkSide"></span>\r\n						</span>\r\n					</div>\r\n				</div>\r\n				<span id="userTrigger" tabindex="0" role="button" class="dropdownTrigger userTrigger">\r\n				</span>\r\n				<ul id="userDropdown" class="dropdownMenu" role="menu"></ul>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<!-- IDE notification messages go in here -->\r\n	<div id="notificationArea" class="notificationHide">\r\n		<div class="notifications" id="notifications" aria-live="assertive" aria-atomic="true"></div>\r\n		<div class="layoutRight"><button aria-label="Close" class="dismissButton layoutRight core-sprite-close imageSprite" type="button" id="closeNotifications"></span></div>\r\n	</div>\r\n</header>\r\n'}),define("text!orion/banner/footer.html",[],function(){return'<!--\r\n<footer id="footerContent" class="layoutBlock footerLayout" role="contentinfo">\r\n	<div class="logoFooter commandSprite core-sprite-orion-logo"></div>\r\n	<div class="footerBlock">${Orion is in Beta. Please try it out but BEWARE your data may be lost.}</div>\r\n	<div class="footerRightBlock">\r\n		<ul>\r\n			<li><a href="https://bugs.eclipse.org/bugs/enter_bug.cgi?product=Orion&version=5.0" target="_blank">${Report a Bug}</a>\r\n			<li><a href="http://www.eclipse.org/legal/privacy.php" target="_blank">${Privacy Policy}</a></li>\r\n			<li><a href="http://www.eclipse.org/legal/termsofuse.php" target="_blank">${Terms of Use}</a></li>\r\n			<li><a href="http://www.eclipse.org/legal/copyright.php" target="_blank">${Copyright Agent}</a></li>\r\n		</ul>\r\n	</div>\r\n</footer>\r\n-->'}),define("text!orion/banner/toolbar.html",[],function(){return'<div class="runBar"></div>\r\n<ul class="layoutLeft commandList pageActions" id="pageActions"></ul>\r\n<ul class="layoutLeft commandList pageActions" id="selectionTools"></ul>\r\n<ul class="layoutLeft commandList pageActions" id="navActions"></ul>\r\n<div class="layoutLeft" style="padding-left:7px;padding-right:7px;margin-top:2px;" id="filterBox" style="visibility: hidden;"></div>\r\n<ul class="layoutRight commandList pageActions" id="settingsActions"></ul>\r\n<div class="layoutRight status" id="statusPane" role="status" aria-live="off"></div>\r\n<ul class="layoutRight commandList pageActions" id="pageNavigationActions"></ul>\r\n'}),define("text!orion/widgets/projects/RunBar.html",[],function(){return'<div class="runBarWrapper">\r\n	<div class="launchConfigurationsWrapper">\r\n		<span class="dropdownTriggerButtonLabel">\r\n			<span class="statusLight"></span>\r\n			<span class="appName"></span>\r\n			<span class="appInfoSpan"></span>\r\n		</span>\r\n	</div>\r\n	<button id="runBarPlayButton" class="runBarButton playButton core-sprite-play"></button>\r\n	<button id="runBarStopButton" class="runBarButton stopButton core-sprite-stop"></button>\r\n	<a id="runBarAppLink" class="runBarLink appLink core-sprite-open" target="_blank"></a>\r\n</div>'}),define("text!orion/webui/RichDropdown.html",[],function(){return'<div>\r\n	<button class="dropdownTrigger dropdownDefaultButton orionButton commandButton">\r\n		<span class="dropdownTriggerButtonLabel"></span>\r\n		<span class="dropdownArrowDown core-sprite-openarrow"></span>\r\n	</button>\r\n	<ul class="dropdownMenu" tabindex="0"></ul>\r\n</div>'}),define("orion/webui/RichDropdown",["orion/objects","orion/webui/littlelib","text!orion/webui/RichDropdown.html","orion/webui/dropdown"],function(e,t,n,i){function r(e){this._parentNode=e.parentNode,this._buttonName=e.buttonName,this._buttonDecorator=e.buttonDecorator,this._populateFunction=e.populateFunction,this._noDropdownArrow=e.noDropdownArrow,this._initialize()}return e.mixin(r.prototype,{_initialize:function(){var e=t.createNodes(n);this._dropdownTriggerButton=t.$("button.dropdownTrigger",e),this._dropdownTriggerButtonLabel=t.$(".dropdownTriggerButtonLabel",this._dropdownTriggerButton),this._dropdownNode=t.$("ul.dropdownMenu",e),this._buttonName&&this.setDropdownTriggerButtonName(this._buttonName,this._buttonDecorator);var r=t.$(".dropdownArrowDown",this._dropdownTriggerButton);this._noDropdownArrow?this._dropdownTriggerButton.removeChild(r):this._dropdownButtonArrow=r,this._parentNode.appendChild(this._dropdownTriggerButton),this._parentNode.appendChild(this._dropdownNode),this._dropdownTriggerButton.dropdown=new i.Dropdown({dropdown:this._dropdownNode,populate:this._populateFunction})},getDropdownTriggerButton:function(){return this._dropdownTriggerButton},setDropdownTriggerButtonName:function(e,n,i){var r=i||"";t.empty(this._dropdownTriggerButtonLabel),n&&this._dropdownTriggerButtonLabel.appendChild(n);
var o=document.createTextNode(e);this._dropdownTriggerButtonLabel.appendChild(o),this._dropdownTriggerButton.title=r},setCustomTriggerButtonLabelNode:function(e){this._dropdownTriggerButton.replaceChild(e,this._dropdownTriggerButtonLabel),this._dropdownTriggerButtonLabel=e},getDropdown:function(){return this._dropdownTriggerButton.dropdown},destroy:function(){this._dropdownTriggerButton&&(this._dropdownTriggerButton.dropdown&&(this._dropdownTriggerButton.dropdown.destroy(),this._dropdownTriggerButton.dropdown=null),this._dropdownTriggerButton=null)}}),{RichDropdown:r}}),define("orion/widgets/projects/RunBar",["orion/objects","i18n!orion/widgets/nls/messages","text!orion/widgets/projects/RunBar.html","orion/webui/littlelib","orion/i18nUtil","orion/webui/RichDropdown","orion/webui/tooltip","orion/metrics"],function(e,t,n,i,r,o,s,a){function l(e){this._parentNode=e.parentNode,this._projectExplorer=e.projectExplorer,this._serviceRegistry=e.serviceRegistry,this._commandRegistry=e.commandRegistry,this._fileClient=e.fileClient,this._progressService=e.progressService,this._preferencesService=e.preferencesService,this.statusService=e.statusService,this.actionScopeId=e.actionScopeId,this._projectCommands=e.projectCommands,this._projectClient=e.projectClient,this._initialize(),this._disableAllControls()}var c="RunBar";return e.mixin(l.prototype,{_initialize:function(){if(this._domNode=i.createNodes(n),!this._domNode)throw new Error("this._domNode is null");this._parentNode.appendChild(this._domNode),this._undestroyedTooltips=[],this._playButton=i.$("button.playButton",this._domNode),this._boundPlayButtonListener=this._runBarButtonListener.bind(this,"orion.launchConfiguration.deploy"),this._playButton.addEventListener("click",this._boundPlayButtonListener),this._stopButton=i.$("button.stopButton",this._domNode),this._boundStopButtonListener=this._runBarButtonListener.bind(this,"orion.launchConfiguration.stopApp"),this._stopButton.addEventListener("click",this._boundStopButtonListener);var e=this._commandRegistry.findCommand("orion.launchConfiguration.deploy");e.tooltip&&this._setNodeTooltip(this._playButton,e.tooltip);var r=this._commandRegistry.findCommand("orion.launchConfiguration.stopApp");r.tooltip&&this._setNodeTooltip(this._stopButton,r.tooltip),this._launchConfigurationDispatcher=this._projectCommands.getLaunchConfigurationDispatcher(),this._launchConfigurationEventTypes=["create","delete","changeState","deleteAll"],this._boundLaunchConfigurationListener=this._launchConfigurationListener.bind(this),this._launchConfigurationEventTypes.forEach(function(e){this._launchConfigurationDispatcher.addEventListener(e,this._boundLaunchConfigurationListener)},this),this._createLaunchConfigurationsDropdown(),this._boundLinkClickListener=this._linkClickListener.bind(this),this._appLink=i.$(".appLink",this._domNode),this._appLink.addEventListener("click",this._boundLinkClickListener),this._setNodeTooltip(this._appLink,t.openAppTooltip),this._disableLink(this._appLink),this._projectExplorer.treeRoot&&this._projectExplorer.treeRoot.Project?this.loadLaunchConfigurations(this._projectExplorer.treeRoot.Project):this._projectExplorer.addEventListener("rootChanged",function(e){var t=e.root;t&&t.Project&&this.loadLaunchConfigurations(t.Project)}.bind(this))},_createLaunchConfigurationsDropdown:function(){this._launchConfigurationsWrapper=i.$(".launchConfigurationsWrapper",this._domNode),this._cachedLaunchConfigurations={};var e,t=function(t){if(this._menuItemsCache&&this._menuItemsCache.length>0)this._menuItemsCache.forEach(function(e){t.appendChild(e)});else{this._menuItemsCache=[];var n,r,o,s,a=this._launchConfigurationsDropdown.getDropdown();for(n in this._cachedLaunchConfigurations)this._cachedLaunchConfigurations.hasOwnProperty(n)&&(r=this._cachedLaunchConfigurations[n],o=a.appendMenuItem(r.Name),o.classList.add("launchConfigurationMenuItem"),o.id=r.Name+"_RunBarMenuItem",o.addEventListener("click",function(e){var t=this._cachedLaunchConfigurations[e],n=!0;t.status&&"PROGRESS"===t.status.State&&(n=!1),this.selectLaunchConfiguration(t,n)}.bind(this,n)),this._commandRegistry.registerCommandContribution(o.id,"orion.launchConfiguration.delete",1),s=[],this._commandRegistry.renderCommands(o.id,o.firstChild,r,this,"tool",null,s),s.length>0&&(s[0].domNode.classList.remove("commandMargins"),s[0].domNode.classList.add("launchConfigurationDeleteButton")),this._menuItemsCache.push(o),e=a.appendSeparator(),this._menuItemsCache.push(e));e=a.appendSeparator(),this._menuItemsCache.push(e);var l=a.appendMenuItem();l.id="CreateNew_RunBarMenuItem",this._menuItemsCache.push(l);var c=i.$(".dropdownMenuItem",l);c.classList.add("addNewMenuItem");var u=this._projectCommands.getDeployProjectCommands(this._commandRegistry)[0];u&&(this._commandRegistry.registerCommandContribution(l.id,u.id,1),s=[],this._commandRegistry.renderCommands(l.id,c,this._projectExplorer.treeRoot,this,"button",null,s),s[0].domNode.textContent="+")}}.bind(this);this._launchConfigurationsDropdown=new o.RichDropdown({parentNode:this._launchConfigurationsWrapper,populateFunction:t}),this._disableControl(this._launchConfigurationsWrapper),this._launchConfigurationsLabel=i.$(".dropdownTriggerButtonLabel",this._launchConfigurationsWrapper),this._appName=i.$(".appName",this._launchConfigurationsLabel),this._statusLight=i.$(".statusLight",this._launchConfigurationsLabel),this._appInfoSpan=i.$(".appInfoSpan",this._launchConfigurationsLabel),this._launchConfigurationsWrapper.removeChild(this._launchConfigurationsLabel),this._launchConfigurationsDropdown.setCustomTriggerButtonLabelNode(this._launchConfigurationsLabel);var n=this._launchConfigurationsDropdown.getDropdownTriggerButton();n.classList.remove("dropdownDefaultButton"),n.classList.add("launchConfigurationsButton"),this._boundTriggerButtonEventListener=function(e){a.logEvent("ui","invoke",c+".launchConfigurationsDropdownTriggerButton.clicked",e.which)}.bind(this),n.addEventListener("click",this._boundTriggerButtonEventListener)},destroy:function(){if(this._undestroyedTooltips&&(this._undestroyedTooltips.forEach(function(e){e.destroy()},this),this._undestroyedTooltips=null),this._launchConfigurationEventTypes&&this._launchConfigurationEventTypes.forEach(function(e){this._launchConfigurationDispatcher.removeEventListener(e,this._boundLaunchConfigurationListener)},this),this._playButton&&(this._playButton.removeEventListener("click",this._boundPlayButtonListener),this._playButton=null),this._stopButton&&(this._stopButton.removeEventListener("click",this._boundStopButtonListener),this._stopButton=null),this._launchConfigurationsDropdown){var e=this._launchConfigurationsDropdown.getDropdownTriggerButton();e&&this._boundTriggerButtonEventListener&&e.removeEventListener("click",this._boundTriggerButtonEventListener),this._launchConfigurationsDropdown.destroy(),this._launchConfigurationsDropdown=null}this._appLink&&(this._appLink.removeEventListener("click",this._boundLinkClickListener),this._appLink=null)},_launchConfigurationListener:function(e){var t=e.newValue;if("changeState"===e.type&&t){var n=this._getHash(t),i=this._getHash(this._selectedLaunchConfiguration);if(n===i){var r=t.status&&t.status.CheckState;this.selectLaunchConfiguration(t,r)}this._putInLaunchConfigurationsCache(t)}else if(this._menuItemsCache=[],"create"===e.type&&t){this._putInLaunchConfigurationsCache(t);for(var o in this._cachedLaunchConfigurations)if(this._cachedLaunchConfigurations.hasOwnProperty(o)&&this._cachedLaunchConfigurations[o].Params.Synthetic){this._cachedLaunchConfigurations[o]===this._selectedLaunchConfiguration&&this.selectLaunchConfiguration(null),this._removeFromLaunchConfigurationsCache(this._cachedLaunchConfigurations[o]);break}this.selectLaunchConfiguration(t,!0)}else if("delete"===e.type){var s=e.oldValue.File;for(var o in this._cachedLaunchConfigurations)if(this._cachedLaunchConfigurations.hasOwnProperty(o)&&this._cachedLaunchConfigurations[o].File.Location===s.Location){this._cachedLaunchConfigurations[o]===this._selectedLaunchConfiguration&&this.selectLaunchConfiguration(null),this._removeFromLaunchConfigurationsCache(this._cachedLaunchConfigurations[o]);break}}else"deleteAll"===e.type&&(this._cacheLaunchConfigurations([]),this.selectLaunchConfiguration(null))},selectLaunchConfiguration:function(e,t){e?(this._selectedLaunchConfiguration=e,this._setLaunchConfigurationsLabel(e),t?this._checkLaunchConfigurationStatus(e):e.status&&this.setStatus(e.status)):(this._selectedLaunchConfiguration=null,this._setLaunchConfigurationsLabel(null),this.setStatus({}))},_checkLaunchConfigurationStatus:function(e){var n=r.formatMessage(t.checkingStateMessage,e.Name);this.setStatus({State:"PROGRESS",Message:n,ShortMessage:t.checkingStateShortMessage});var i=function(e){this.setStatus({error:e||!0})}.bind(this);return this._projectClient.getProjectDelpoyService(e.ServiceId,e.Type).then(function(t){return t&&t.getState?t.getState(e).then(function(t){return e.status=t,this._launchConfigurationDispatcher.dispatchEvent({type:"changeState",newValue:e}),t}.bind(this),function(t){e.status={error:t},t.Retry?(e.parametersRequested=e.status.error.Retry.parameters,e.optionalParameters=e.status.error.Retry.optionalParameters,this._commandRegistry.runCommand("orion.launchConfiguration.checkStatus",e,this,null,null,this._statusLight)):this._launchConfigurationDispatcher.dispatchEvent({type:"changeState",newValue:e})}.bind(this)):void i()}.bind(this),i)},setStatus:function(e){var n=null,i=null;if(this._statusLight.classList.remove("statusLightGreen"),this._statusLight.classList.remove("statusLightRed"),this._statusLight.classList.remove("statusLightProgress"),this._setText(this._appInfoSpan,null),this._disableAllControls(),e.error)this._enableControl(this._playButton),e.error.Retry||e.error.Message&&(i=e.error.Message),n=e.ShortMessage||i||t.appInfoUnknown;else{switch(e.State){case"PROGRESS":this._statusLight.classList.add("statusLightProgress"),(e.ShortMessage||e.Message)&&(n=e.ShortMessage||e.Message);break;case"STARTED":this._enableControl(this._playButton),this._enableControl(this._stopButton),this._statusLight.classList.add("statusLightGreen"),n=t.appInfoRunning;break;case"STOPPED":this._enableControl(this._playButton),this._statusLight.classList.add("statusLightRed"),n=t.appInfoStopped}i=e.Message}this._setNodeTooltip(this._statusLight,i),n&&this._setText(this._appInfoSpan,"("+n.toLocaleLowerCase()+")"),e.Url&&this._enableLink(this._appLink,e.Url)},loadLaunchConfigurations:function(e){this._projectClient.getProjectLaunchConfigurations(e).then(function(e){this._setLaunchConfigurations(e)}.bind(this))},_setLaunchConfigurations:function(e){if(this._enableControl(this._launchConfigurationsWrapper),this._menuItemsCache=[],this._cacheLaunchConfigurations(e),e&&e[0]){var t=this._getHash(e[0]),n=this._cachedLaunchConfigurations[t];this.selectLaunchConfiguration(n,!0)}else this.selectLaunchConfiguration(null)},_cacheLaunchConfigurations:function(e){this._cachedLaunchConfigurations={},e.forEach(function(e){this._putInLaunchConfigurationsCache(e)},this)},_getHash:function(e){var t=null;return e&&(t=e.Name+":"+e.ServiceId),t},_putInLaunchConfigurationsCache:function(e){var t=this._getHash(e);e.project||(e.project=this._projectExplorer.treeRoot.Project),this._cachedLaunchConfigurations[t]=e},_removeFromLaunchConfigurationsCache:function(e){var t=this._getHash(e);delete this._cachedLaunchConfigurations[t]},_runBarButtonListener:function(e,t){var n=t.target,i=n.id,r=this._isEnabled(n),o=r?"":".disabled";a.logEvent("ui","invoke",c+"."+i+".clicked"+o,t.which),r&&this._commandRegistry.runCommand(e,this._selectedLaunchConfiguration,this,null,null,n)},getSelectedLaunchConfiguration:function(){return this._selectedLaunchConfiguration},_disableAllControls:function(){this._disableControl(this._playButton),this._disableControl(this._stopButton),this._disableLink(this._appLink)},_enableControl:function(e){e.classList.remove("disabled")},_disableControl:function(e){e.classList.add("disabled")},_isEnabled:function(e){return!e.classList.contains("disabled")},_enableLink:function(e,t){e.href=t,this._enableControl(e)},_disableLink:function(e){e.href="javascript: void(0)",this._disableControl(e)},_isLinkDisabled:function(e){return"javascript: void(0)"===e.href},_linkClickListener:function(e){var t=e.target,n=t.id,i=this._isLinkDisabled(t)?".disabled":"";a.logEvent("ui","invoke",c+"."+n+".clicked"+i,e.which)},_setNodeTooltip:function(e,t){var n=-1;e.tooltip&&(e.tooltip.destroy(),n=this._undestroyedTooltips.indexOf(e.tooltip),-1!==n&&this._undestroyedTooltips.splice(n,1)),t&&(e.tooltip=new s.Tooltip({node:e,text:t,trigger:"mouseover",position:["above","below","right","left"]}),this._undestroyedTooltips.push(e.tooltip))},_setText:function(e,t){if(i.empty(e),t){var n=document.createTextNode(t);e.appendChild(n)}},_setLaunchConfigurationsLabel:function(e){if(e){var n=e.Params.Name+t.displayNameSeparator+e.Params.Target.Space;i.empty(this._launchConfigurationsLabel),this._setText(this._appName,n),this._setNodeTooltip(this._appName,e.Name),this._setText(this._appInfoSpan,null),this._launchConfigurationsLabel.appendChild(this._statusLight),this._launchConfigurationsLabel.appendChild(this._appName),this._launchConfigurationsLabel.appendChild(this._appInfoSpan)}else this._setText(this._launchConfigurationsLabel,t.selectLaunchConfig)}}),{RunBar:l,METRICS_LABEL_PREFIX:c}}),define("orion/customGlobalCommands",["orion/Deferred","orion/widgets/projects/RunBar"],function(e,t){function n(n){var i=new e,r=new t.RunBar({parentNode:n.parentNode,projectExplorer:n.projectExplorer,serviceRegistry:n.serviceRegistry,commandRegistry:n.commandRegistry,fileClient:n.fileClient,projectCommands:n.projectCommands,projectClient:n.projectClient,progressService:n.progressService});return i.resolve(r),i}return{createRunBar:n}}),define("orion/webui/SideMenu",["orion/webui/littlelib","orion/PageUtil","orion/URL-shim"],function(e,t){function n(t,n){if(this._parentNode=e.node(t),!this._parentNode)throw new Error("Missing parentNode");this._contentNode=e.node(n),this._categoryInfos=[],this._categorizedPageLinks={},this._categorizedRelatedLinks={},this._categorizedAnchors=null,this._state=localStorage.getItem(i)||s,this._currentCategory="",this._notificationTimeout=null,this._renderTimeout=null}var i="sideMenuNavigation",r="open",o="closed",s=r,a="40px",l=301;return n.prototype={constructor:n.prototype.constructor,setCategories:function(e){this._categoryInfos=e.getCategoryIDs().map(function(t){return e.getCategory(t)}).sort(function(e,t){var n=e.order||100,i=t.order||100;return i>n?-1:n>i?1:e.textContent.localeCompare(t.textContent)})},setPageLinks:function(e){this._categorizedPageLinks={},e.getAllLinks().forEach(function(e){var t=e.category;this._categorizedPageLinks[t]=this._categorizedPageLinks[t]||[],this._categorizedPageLinks[t].push({title:e.textContent,order:e.order||100,href:e.href})},this)},setRelatedLinks:function(e,t){this._categorizedRelatedLinks={},e.forEach(function(e){var n=e.relatedLink,i=e.command,r=e.invocation;if(!t||-1===t.indexOf(n.id)){var o=n.category;this._categorizedRelatedLinks[o]=this._categorizedRelatedLinks[o]||[],this._categorizedRelatedLinks[o].push({title:i.name,order:n.order||100,href:i.hrefCallback.call(r.handler,r)})}},this),this._updateCategoryAnchors(),this._updateCategoryNotifications()},render:function(){if(null===this._categorizedAnchors){this._categorizedAnchors={};var t=new URL(window.location.href);t.hash="",this._currentCategory="",Object.keys(this._categorizedPageLinks).some(function(e){var n=this._categorizedPageLinks[e];return n.some(function(e){var n=new URL(e.href);return e.hash="",t.href===n.href})?(this._currentCategory=e,!0):void 0},this);var i=document.createElement("ul");i.classList.add("sideMenuList"),this._sideMenuList=i,this._categoryInfos.forEach(function(e){var t=document.createElement("li");t.classList.add("sideMenuItem"),t.classList.add("sideMenu-notification"),this._currentCategory===e.id&&t.classList.add("sideMenuItemActive"),t.categoryId=e.id,t.categoryName=e.textContent||e.id;var n=document.createElement("a");if(n.classList.add("submenu-trigger"),"string"==typeof e.imageDataURI&&0===e.imageDataURI.indexOf("data:image")){var r=document.createElement("img");r.width="16",r.height="16",r.src=e.imageDataURI,n.appendChild(r)}else{var o=e.imageClass||"core-sprite-blank-menu-item";n.classList.add(o)}t.appendChild(n),i.appendChild(t),this._categorizedAnchors[e.id]=n},this),this._topScrollButton=document.createElement("button"),this._topScrollButton.classList.add("sideMenuScrollButton"),this._topScrollButton.classList.add("sideMenuTopScrollButton"),this._topScrollButton.classList.add("core-sprite-openarrow"),this._topScrollButton.addEventListener("mousedown",function(){this._activeScrollInterval&&window.clearInterval(this._activeScrollInterval),this._activeScrollInterval=window.setInterval(this._scrollUp.bind(this),10)}.bind(this)),this._topScrollButton.addEventListener("mouseup",function(){this._activeScrollInterval&&(window.clearInterval(this._activeScrollInterval),this._activeScrollInterval=null)}.bind(this)),this._bottomScrollButton=document.createElement("button"),this._bottomScrollButton.classList.add("sideMenuScrollButton"),this._bottomScrollButton.classList.add("sideMenuBottomScrollButton"),this._bottomScrollButton.classList.add("core-sprite-openarrow"),this._bottomScrollButton.addEventListener("mousedown",function(){this._activeScrollInterval&&window.clearInterval(this._activeScrollInterval),this._activeScrollInterval=window.setInterval(this._scrollDown.bind(this),10)}.bind(this)),this._bottomScrollButton.addEventListener("mouseup",function(){this._activeScrollInterval&&(window.clearInterval(this._activeScrollInterval),this._activeScrollInterval=null)}.bind(this)),window.addEventListener("resize",function(){this._updateScrollButtonVisibility()}.bind(this)),this._updateCategoryAnchors(),this._show=function(){this._parentNode.appendChild(this._topScrollButton),this._parentNode.appendChild(i),this._parentNode.appendChild(this._bottomScrollButton);var t=e.$(".sideMenuItemActive",this._parentNode);t&&t.scrollIntoView&&t.scrollIntoView(),this._updateScrollButtonVisibility(),this._show=n.prototype._show},window.setTimeout(function(){this._show()}.bind(this),1e3)}this._state===o?(this._contentNode.style.left="0",this._renderTimeout&&(window.clearTimeout(this._renderTimeout),this._renderTimeout=null),this._renderTimeout=window.setTimeout(function(){this._parentNode.style.display="none",this._renderTimeout=null}.bind(this),l),this._parentNode.classList.add("animating")):(this._renderTimeout&&(window.clearTimeout(this._renderTimeout),this._renderTimeout=null),this._parentNode.classList.remove("animating"),this._parentNode.style.display="block",this._parentNode.style.width=a,this._contentNode.style.left=a)},_updateScrollButtonVisibility:function(){this._sideMenuList.scrollHeight>this._sideMenuList.offsetHeight?(0<this._sideMenuList.scrollTop?this._topScrollButton.classList.add("visible"):this._topScrollButton.classList.remove("visible"),this._sideMenuList.scrollHeight>this._sideMenuList.scrollTop+this._sideMenuList.offsetHeight?this._bottomScrollButton.classList.add("visible"):this._bottomScrollButton.classList.remove("visible")):(this._topScrollButton.classList.remove("visible"),this._bottomScrollButton.classList.remove("visible"))},_scrollDown:function(){this._sideMenuList.scrollTop=this._sideMenuList.scrollTop+1,this._updateScrollButtonVisibility()},_scrollUp:function(){this._sideMenuList.scrollTop=this._sideMenuList.scrollTop-1,this._updateScrollButtonVisibility()},hide:function(){localStorage.setItem(i,o),this._contentNode.style.left="0"},toggle:function(){var e=this._contentNode;e&&e.classList.add("content-fixedHeight-animation"),this._state=this._state===r?o:r,this._state===s?localStorage.removeItem(i):localStorage.setItem(i,this._state),this.render()},_updateCategoryAnchors:function(){var e=[];Object.keys(this._categorizedRelatedLinks).forEach(function(t){("git"===t||t.match(/-scm$/))&&e.push(t)}),Object.keys(this._categorizedAnchors).forEach(function(t){var n=this._categorizedAnchors[t],i=[];if(t===this._currentCategory)return n.parentElement.style.display="",n.href="",n.onclick=function(){return!1},void(n.title=n.parentElement.categoryName);if(this._categorizedPageLinks[t]&&i.push.apply(i,this._categorizedPageLinks[t]),this._categorizedRelatedLinks[t]&&i.push.apply(i,this._categorizedRelatedLinks[t]),0===i.length||0!==e.length&&("git"===t||t.match(/-scm$/))&&-1===e.indexOf(t))n.href="",n.title=n.parentElement.categoryName,n.parentElement.style.display="none";else{n.parentElement.style.display="",i.sort(function(e,t){return e.order<t.order?-1:t.order<e.order?1:e.title.localeCompare(t.title)});var r=i.shift();n.href=r.href,n.title=r.title}},this),this._show()},_updateCategoryNotifications:function(){clearTimeout(this._notificationTimeout),this._notificationTimeout=setTimeout(this._updateCategoryNotifications.bind(this),3e5);var e=t.matchResourceParameters().resource,n=new URL(e,window.location.href).href;this._categoryInfos.forEach(function(i){if(i.service&&i.service.getNotifications){var r=this._categorizedAnchors[i.id].parentElement;i.service.getNotifications(n).then(function(n){if(e===t.matchResourceParameters().resource){var i="";n.forEach(function(e){"info"!==e.level||i?"warn"!==e.level||i&&"info"!==i?"error"===e.level&&"error"!==i&&(i="error"):i="warn":i="info"}),i?r.setAttribute("level",i):r.removeAttribute("level")}},function(e){window.console.log(e)})}},this)},_show:function(){}},n}),define("orion/globalCommands",["i18n!orion/nls/messages","require","orion/commonHTMLFragments","orion/keyBinding","orion/EventTarget","orion/commands","orion/parameterCollectors","orion/extensionCommands","orion/breadcrumbs","orion/webui/littlelib","orion/i18nUtil","orion/webui/splitter","orion/webui/dropdown","orion/webui/tooltip","orion/contentTypes","orion/keyAssist","orion/widgets/themes/ThemePreferences","orion/widgets/themes/container/ThemeData","orion/Deferred","orion/widgets/UserMenu","orion/PageLinks","orion/webui/dialogs/OpenResourceDialog","text!orion/banner/banner.html","text!orion/banner/footer.html","text!orion/banner/toolbar.html","orion/util","orion/customGlobalCommands","orion/fileClient","orion/webui/SideMenu","orion/objects","orion/metrics"],function(e,t,n,i,r,o,s,a,l,c,u,h,d,p,f,m,g,v,y,_,b,C,w,S,E,x,L,T,k,N,A){function P(e,t){return e.getLabel?e.getLabel():(new y).resolve(t.properties.name)}function O(t){var n=c.node("progressPane");n.setAttribute("aria-label",e.OpPressSpaceMsg);var i=t.getService("orion.page.progress");i&&i.init.bind(i)("progressPane")}function R(e){var t=e.getServiceReferences("orion.core.auth");J=[];var n=Y.createMenuGenerator.apply(this,arguments);if(n)for(var i=0;i<t.length;i++){var r=t[i],o=e.getService(r);P(o,r).then(function(e){o.getKey().then(function(t){J.push(t),o.getUser().then(function(i){n.addUserItem(t,o,e,i)},function(i,r){n.addUserItem(t,o,e,r)}),window.addEventListener("storage",function(){X[t]!==localStorage.getItem(t)&&(X[t]=localStorage.getItem(t),o.getUser().then(function(i){n.addUserItem(t,o,e,i)},function(){n.addUserItem(t,o,e)}))},!1)})})}}function I(e,t,n,i,r){function s(){if(d)return d;var t=e.getService("orion.core.contentTypeRegistry");return t||(t=new f.ContentTypeRegistry(e),t=e.getService("orion.core.contentTypeRegistry")),t.getContentTypes().then(function(e){return d=e})}function l(e){for(var t,n={},i=e.getPropertyKeys(),r=0;r<i.length;r++)t=i[r],n[t]=e.getProperty(t);return n}function c(e,t){var n=null;return e.some(function(e){return t===e.getProperty("id")?!!(n=e):!1}),n}function u(e){var n=e.command;return!n.visibleWhen||n.visibleWhen(t)?(e.invocation=new o.CommandInvocation(t,t,null,n,i),(new y).resolve(e)):"function"==typeof r?(p||(p=r()),y.when(p,function(r){return!r||t!==z||n.visibleWhen&&!n.visibleWhen(r)?void 0:(e.invocation=new o.CommandInvocation(r,r,null,n,i),e)})):(new y).resolve()}function h(e,t,n){return n?(new y).resolve({relatedLink:e,command:n}):t.then(function(t){return{relatedLink:e,command:new o.Command(t)}})}var d,p,m=arguments,g=e&&e.getServiceReferences("orion.page.link.related");if(g&&0!==g.length){var v=this;y.when(s(),function(){function t(e){return e}if(Y.beforeGenerateRelatedLinks.apply(v,m)){var r=e.getServiceReferences("orion.navigate.command"),o=[];g.forEach(function(t){var n=l(t);if(n.id){var s;if((n.nls&&n.nameKey||n.name)&&n.uriTemplate)return s=a._createCommandOptions(n,t,e,d,!0),void o.push(h(n,s,null));var u=c(r,n.id);if(u){var p=l(u),f={};N.mixin(f,p,n);var m;(m=i.findCommand(n.id))?o.push(h(f,null,m)):(s=a._createCommandOptions(p,u,e,d,!0),o.push(h(f,s,null)))}}}),y.all(o,t).then(function(e){return e.sort(function(e,t){return e.command.name.localeCompare(t.command.name)}),y.all(e.map(u),t).then(function(t){var r=[];t=t.filter(function(t,n){return t?!0:(r.push(e[n]),!1)}),Y.addRelatedLinkCommands.call(v,i,t,r,n),Y.afterGenerateRelatedLinks.apply(v,m)})})}})}}function D(e){var t=c.node("globalActions");t&&(e.destroy(t),e.renderCommands(t.id,t,{},{},"tool"))}function M(e){Q=e}function F(e){W&&("*"!==W.charAt(0)||e||(W=W.substring(1)),e&&"*"!==W.charAt(0)&&(W="*"+W),window.document.title=W);var t=c.node("dirty");t&&(t.textContent=e?"*":"")}function B(t){var n,i,r=t.breadcrumbRootName,o=t.serviceRegistry;t.target?(t.searchService&&t.searchService.setLocationByMetaData(t.target),!t.fileService||t.breadcrumbTarget||t.staticBreadcrumb||(i=r?r+" ":"",i+=t.fileService.fileServiceName(t.target.Location),r=null),n=t.name||t.target.Name,z=t.target,I.call(this,o,t.target,Q,t.commandService,t.makeAlternate)):(t.breadcrumbTarget||(r=r||t.task||t.name),n=t.name,I.call(this,o,{NoTarget:""},Q,t.commandService,t.makeAlternate)),W=t.title,W||(W=n?u.formatMessage(e.PageTitleFormat,n,t.task):t.task),window.document.title=W,Y.afterSetPageTarget.apply(this,arguments);var s=c.node(t.breadCrumbContainer?t.breadCrumbContainer:"location");if(s)if(c.empty(s),Z&&Z.destroy(),t.staticBreadcrumb)Z=new l.BreadCrumbs({container:s,rootSegmentName:r});else{var a=t.fileService||o&&new T.FileClient(o),h=t.breadcrumbTarget||t.target,d=a&&h&&h.Location?a.fileServiceRootURL(h.Location):null;Z=new l.BreadCrumbs({container:s,resource:h,rootSegmentName:r,workspaceRootSegmentName:i,workspaceRootURL:d,makeFinalHref:t.makeBreadcrumFinalLink,makeHref:t.makeBreadcrumbLink})}}function $(e){var t=window.getComputedStyle(e,null);if(null===t)return e;var n=t.getPropertyValue("position");return"absolute"!==n&&e.parentNode&&e!==document.body?$(e.parentNode):e}function U(e){var t={},n=null;"string"==typeof e&&(e=c.node(e)),e||(e=c.node("pageActions"));for(var i=e;i&&i.classList;){if(i.classList.contains("toolComposite")){n=i;break}i=i.parentNode}if(e.classList.contains("commandMarker")&&(t.commandNode=e),n||(n=c.node("pageToolbar")),n&&(t.slideContainer=c.$(".slideParameters",n),t.parameterArea=c.$(".parameters",n),t.dismissArea=c.$(".parametersDismiss",n),t.notifications=c.$("#notificationArea",n),n.parentNode&&(t.toolbarTarget=c.$(".toolbarTarget",n.parentNode),t.toolbarTarget))){var r=c.bounds(t.toolbarTarget),o=c.bounds($(t.toolbarTarget.parentNode));t.toolbarTargetY=r.top-o.top,t.toolbar=n}return t}function j(e){var t=e.slideContainer;if(t&&(t.style.left="",t.style.top="",t.classList.contains("slideContainerActive"))){var n=c.bounds(t),i=c.bounds(t.parentNode);t.style.left=(i.width-n.width)/2+"px",t.style.top="0"}}function H(){return et}function K(){return tt}function V(){return nt}function q(r,a,l,d,p,f,_,L){A.initFromRegistry(a),d.addChangeListener(function(e,t){t.length<G&&A.logEvent("preferenceChange",e,t)}),window.addEventListener("error",function(e){var t=e.filename.lastIndexOf("/"),n=e.message+" ("+e.filename.substring(t+1)+": "+e.lineno+(e.colno?", "+e.colno:"")+")";A.logEvent("runtime","uncaughtError",n)}),new g.ThemePreferences(d,new v.ThemeData).apply();var T=c.node(r);if(!T)throw u.formatMessage("could not find banner parent, id was ${0}",r);var k=document.createRange();k.selectNode(T);var N=k.createContextualFragment(w);c.processTextNodes(N,e),T.firstChild?T.insertBefore(N,T.firstChild):T.appendChild(N);var P=c.node("home");P.href=t.toUrl("edit/edit.html"),P.setAttribute("aria-label",e["Orion Home"]);var I=c.node("progressPane");I.src=o.NO_IMAGE;var M=c.node("pageToolbar");M&&(M.classList.add("toolbarLayout"),M.innerHTML=E+n.slideoutHTMLFragment("mainToolbar"));var F=c.node("closeNotifications");if(F&&F.setAttribute("aria-label",e["Close notification"]),x.isFirefox<=17){var B=c.node("staticBanner");B&&(B.style.width="100%",B.style.MozBoxSizing="border-box")}var $=c.node("footer");$&&($.innerHTML=S,c.processTextNodes($,e)),l.setParameterCollector(new s.CommandParameterCollector(U,j)),document.addEventListener("keydown",function(e){if(e.keyCode===c.KEY.ESCAPE){var t=a.getService("orion.page.message");t&&t.setProgressMessage("")}},!1),Y.generateNavigationMenu.apply(this,arguments),Y.afterGenerateNavigationMenu.apply(this,arguments);var H=b.getCategoriesInfo(a),K=b.getPageLinksInfo(a,"orion.page.link");y.all([H,K]).then(function(e){if(this.sideMenu){var t=e[0],n=e[1];this.sideMenu.setCategories(t),this.sideMenu.setPageLinks(n),this.sideMenu.render()}}.bind(this));var q=c.$(".split");if(q){var z=c.$(".sidePanelLayout"),W=c.$(".mainPanelLayout");if(z&&W){et={side:z,main:W},et.splitter=new h.Splitter({node:q,sidePanel:z,mainPanel:W,toggle:!0,closeByDefault:L});var J=new o.Command({name:e["Toggle side panel"],tooltip:e["Open or close the side panel"],id:"orion.toggleSidePane",callback:function(){et.splitter.toggleSidePanel()}});l.addCommand(J),l.registerCommandContribution("pageActions","orion.toggleSidePane",1,null,!0,new i.KeyBinding("l",x.isMac?!1:!0,!0,!1,x.isMac?!0:!1))}}var X=!1,Q=function(e,t){if(!X){var n=t.getService("orion.page.progress"),i=new C.OpenResourceDialog({searcher:e,progress:n,searchRenderer:e.defaultRenderer,onHide:function(){X=!1}});window.setTimeout(function(){X=!0,i.show()},0)}},Z=new o.Command({name:e.FindFile,tooltip:e.ChooseFileOpenEditor,id:"orion.openResource",callback:function(){Q(p,a)}});l.addCommand(Z),l.registerCommandContribution("globalActions","orion.openResource",100,null,!0,new i.KeyBinding("f",!0,!0));var nt=!1,it=function(){if(nt)return!1;var e=c.node("banner"),t=c.node("footer"),n=c.node("sideMenu"),i=c.$(".content-fixedHeight"),r="hidden"===e.style.visibility;return r?(e.style.visibility="visible",t.style.visibility="visible",i.classList.remove("content-fixedHeight-maximized"),n&&n.classList.remove("sideMenu-maximized")):(e.style.visibility="hidden",t.style.visibility="hidden",i.classList.add("content-fixedHeight-maximized"),n&&n.classList.add("sideMenu-maximized")),V().dispatchEvent({type:"toggleTrim",maximized:!r}),!0},rt=window.orionNoTrim||!1;if(rt)it(),nt=!0,this.sideMenu.hide();else{var ot=new o.Command({name:e["Toggle banner and footer"],tooltip:e.HideShowBannerFooter,id:"orion.toggleTrim",callback:it});l.addCommand(ot),l.registerCommandContribution("globalActions","orion.toggleTrim",100,null,!0,new i.KeyBinding("m",!0,!0));var st=new o.Command({name:e["System Configuration Details"],tooltip:e["System Config Tooltip"],id:"orion.configDetailsPage",hrefCallback:function(){return t.toUrl("about/about.html")}});l.addCommand(st),l.registerCommandContribution("globalActions","orion.configDetailsPage",100,null,!0,new i.KeyBinding(112,!0,!0));var at=new o.Command({name:e["Background Operations"],tooltip:e["Background Operations Tooltip"],id:"orion.backgroundOperations",hrefCallback:function(){return t.toUrl("operations/list.html")}});l.addCommand(at),l.registerCommandContribution("globalActions","orion.backgroundOperations",100,null,!0,new i.KeyBinding("o",!0,!0)),tt=new m.KeyAssistPanel({commandRegistry:l});var lt=new o.Command({name:e["Show Keys"],tooltip:e.ShowAllKeyBindings,id:"orion.keyAssist",callback:function(){return tt.isVisible()?tt.hide():tt.show(),!0}});
l.addCommand(lt),l.registerCommandContribution("globalActions","orion.keyAssist",100,null,!0,new i.KeyBinding(191,!1,!0)),D(l),R(a,lt.callback)}O(a),window.addEventListener("hashchange",function(){l.processURL(window.location.href)},!1),Y.afterGenerateBanner.apply(this,arguments)}var z,W,G=256,Y={createMenuGenerator:L.createMenuGenerator||function(t,n){var i=c.node("userMenu");if(i){var r=c.node("userDropdown"),o=new d.Dropdown({dropdown:r}),s=new _.UserMenu({dropdownNode:r,dropdown:o,serviceRegistry:t}),a=c.node("userTrigger");new p.Tooltip({node:a,text:e.Options,position:["below","left"]});var l=document.getElementById("userTrigger");return l.classList.add("imageSprite"),l.classList.add("core-sprite-silhouette"),s.setKeyAssist(n),s}},beforeGenerateRelatedLinks:L.beforeGenerateRelatedLinks||function(){return!0},addRelatedLinkCommands:L.addRelatedLinkCommands||function(e,t,n,i){this.sideMenu&&this.sideMenu.setRelatedLinks(t,i)},afterGenerateRelatedLinks:L.afterGenerateRelatedLinks||function(){},afterSetPageTarget:L.afterSetPageTarget||function(){},generateNavigationMenu:L.generateNavigationMenu||function(){var t=c.node("sideMenu");if(t){var n=c.node("centralNavigation");new p.Tooltip({node:n,text:e.CentralNavTooltip,position:["right"]}),this.sideMenu=new k(t,c.node("pageContent")),n.addEventListener("click",this.sideMenu.toggle.bind(this.sideMenu));var i=c.node("sideMenuToggle");i&&i.addEventListener("click",this.sideMenu.toggle.bind(this.sideMenu))}},afterGenerateNavigationMenu:L.afterGenerateNavigationMenu||function(){},afterGenerateBanner:L.afterGenerateBanner||function(){}},J=[],X={},Q=[],Z=null,et=null,tt=null,nt=new r;return{generateBanner:q,getToolbarElements:U,getMainSplitter:H,getKeyAssist:K,getGlobalEventTarget:V,layoutToolbarElements:j,setPageTarget:B,setDirtyIndicator:F,setPageCommandExclusions:M}}),define("util/legacy",["require","exports","module"],function(){"undefined"!=typeof window&&"undefined"!=typeof document&&(null==window.console&&(window.console={}),"debug,log,warn,error,trace,group,groupEnd".split(",").forEach(function(e){window.console[e]||(window.console[e]=function(){})}),"classList"in document.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){function e(e){return function(n){var i=t.className.split(/\s+/),r=i.indexOf(n);e(i,r,n),t.className=i.join(" ")}}var t=this,n={add:e(function(e,t,n){~t||e.push(n)}),remove:e(function(e,t){~t&&e.splice(t,1)}),toggle:e(function(e,t,n){~t?e.splice(t,1):e.push(n)}),contains:function(e){return!!~t.className.split(/\s+/).indexOf(e)},item:function(e){return t.className.split(/\s+/)[e]||null}};return Object.defineProperty(n,"length",{get:function(){return t.className.split(/\s+/).length}}),n}}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return String(this).replace(/\s*$/,"")}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r}))}),define("util/promise",["require","exports","module"],function(e,t,n){function i(e){return{then:function(t){t(e)}}}function r(e){return{then:function(t,n){n(e)}}}function o(e){return function(t){try{return e(t)}catch(n){return r(n)}}}function s(e){return e&&"function"==typeof e.then}function a(e){var t,n=[];e=e||null===e?e:Object.prototype;var l=Object.create(e,{then:{value:function(s,l){function c(e){h.resolve(s(e))}function u(e){h.resolve(l(e))}var h=a(e);return s=s?o(s):i,l=l?o(l):r,n?n.push([c,u]):t.then(c,u),h.promise}}}),c={promise:l,resolve:function(e){if(n){for(t=s(e)?e:i(e);n.length;)t.then.apply(t,n.shift());n=null}},reject:function(e){c.resolve(r(e))}};return c}function l(e,t){var n=a(t);return n.resolve(e),n.promise}function c(e,t){var n=a(t);return n.reject(e),n.promise}n.metadata={stability:"unstable"},t.defer=a,t.resolve=l,t.reject=c;var u=function(){function e(e){return n.apply(n,e)}function t(e,t){return e.then(function(e){return l(t).then(function(t){return e.concat([t])})})}var n=Function.call,i=Array.prototype.concat;return function(n,r){return function(){return i.apply([n,this],arguments).reduce(t,l([],r)).then(e)}}}();t.promised=u}),define("util/util",["require","exports","module","util/promise"],function(e,t){function n(e){var t=e.scope?e.scope.constructor.name+".":"",n=e.func.name;if(n)return t+n;for(var i in e.scope)if(e.scope[i]===e.func)return t+i;return t+e.func}function i(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);t=(t<<5)-t+i,t&=t}return t}function r(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}function o(e,t){var n=e.getAttribute("data-command");n||(n=e.querySelector("*[data-command]").getAttribute("data-command")),n?t(n):console.warn("Missing data-command for "+util.findCssSelector(e))}var s=!1;s&&(null==console.group&&(console.group=function(){console.log(arguments)}),null==console.groupEnd&&(console.groupEnd=function(){console.log(arguments)})),t.createEvent=function(e){var t=[],i=!1,r=[],o=void 0,a=function(o){if(i)return r.push(o),void(s&&console.log("Held fire: "+e,o));s&&console.group("Fire: "+e+" to "+t.length+" listeners",o);for(var a=0;a<t.length;a++){var l=t[a];s&&console.log(n(l)),l.func.call(l.scope,o)}s&&console.groupEnd()};return a.add=function(n,i){s&&console.log("Adding listener to "+e),t.push({func:n,scope:i})},a.remove=function(n,i){s&&console.log("Removing listener from "+e);var r=!1;t=t.filter(function(e){var t=e.func===n&&e.scope===i;return t&&(r=!0),!t}),r||console.warn("Handler not found. Attached to "+e)},a.removeAll=function(){t=[]},a.holdFire=function(){s&&console.group("Holding fire: "+e),i=!0},a.resumeFire=function(){if(s&&console.groupEnd("Resume fire: "+e),i!==!0)throw new Error("Event not held: "+e);if(i=!1,0!==r.length){if(1===r.length)a(r[0]);else{var t=r[0],n=r[r.length-1];a(o?o(t,n,r):n)}r=[]}},Object.defineProperty(a,"eventCombiner",{set:function(e){if("function"!=typeof e)throw new Error("eventCombiner is not a function");o=e},enumerable:!0}),a};var a=e("util/promise");t.promised=function(){function e(e){return n.apply(n,e)}function t(e,t){return e.then(function(e){return a.resolve(t).then(function(t){return e.concat([t])})})}var n=Function.call,i=Array.prototype.concat;return function(n,r){return function(){return i.apply([n,this],arguments).reduce(t,a.resolve([],r)).then(e)}}}(),t.all=t.promised(Array),t.synchronize=function(e){if(null==e||"function"!=typeof e.then)return e;var t=void 0,n=void 0,i=function(e){t=!1,n=e},r=function(e){t=!0,n=e};if(e.then(i,r),void 0===t)throw new Error("non synchronizable promise");if(t)throw n;return n},t.promiseEach=function(e,t,n){if(0===e.length)return a.resolve([]);var i=a.defer(),r=function(o){var s=[],l=t.call(n,e[o]);a.resolve(l).then(function(t){s[o]=t;var n=o+1;n>=e.length?i.resolve(s):r(n)}).then(null,function(e){i.reject(e)})};return r(0),i.promise},t.NS_XHTML="http://www.w3.org/1999/xhtml",t.NS_XUL="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul",t.createElement=function(e,n){return t.isXmlDocument(e)?e.createElementNS(t.NS_XHTML,n):e.createElement(n)},t.clearElement=function(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)};var l=/^\s*$/;t.removeWhitespace=function(e,n){for(var i=0;i<e.childNodes.length;){var r=e.childNodes.item(i);3===r.nodeType&&l.test(r.textContent)?e.removeChild(r):(n&&1===r.nodeType&&t.removeWhitespace(r,n),i++)}},t.importCss=function(e,n,r){if(!e)return void 0;n=n||document,r||(r="hash-"+i(e));var o=n.getElementById(r);if(o)return"style"!==o.tagName.toLowerCase()&&console.error("Warning: importCss passed id="+r+", but that pre-exists (and isn't a style tag)"),o;var s=t.createElement(n,"style");s.id=r,s.appendChild(n.createTextNode(e));var a=n.getElementsByTagName("head")[0]||n.documentElement;return a.appendChild(s),s},t.setTextContent=function(e,n){t.clearElement(e);var i=e.ownerDocument.createTextNode(n);e.appendChild(i)},t.setContents=function(e,n){if("undefined"!=typeof HTMLElement&&n instanceof HTMLElement)return t.clearElement(e),void e.appendChild(n);if("innerHTML"in e)e.innerHTML=n;else try{var i=e.ownerDocument.documentElement.namespaceURI;i||(i=t.NS_XHTML),t.clearElement(e),n='<div xmlns="'+i+'">'+n+"</div>";for(var r=e.ownerDocument.createRange(),o=r.createContextualFragment(n).firstChild;o.hasChildNodes();)e.appendChild(o.firstChild)}catch(s){throw console.error("Bad XHTML",s),console.trace(),s}},t.toDom=function(e,n){var i=t.createElement(e,"div");return t.setContents(i,n),i.children[0]},t.isXmlDocument=function(e){return e=e||document,e.contentType&&"text/html"!=e.contentType?!0:null!=e.xmlVersion?!0:!1},t.findCssSelector=function(e){var n=e.ownerDocument;if(e.id&&n.getElementById(e.id)===e)return"#"+e.id;var i=e.tagName.toLowerCase();if("html"===i)return"html";if("head"===i)return"head";if("body"===i)return"body";null==e.parentNode&&console.log("danger: "+i);var o,s,a;if(e.classList.length>0)for(var l=0;l<e.classList.length;l++){if(o="."+e.classList.item(l),a=n.querySelectorAll(o),1===a.length)return o;if(o=i+o,a=n.querySelectorAll(o),1===a.length)return o;if(s=r(e,e.parentNode.children)+1,o=o+":nth-child("+s+")",a=n.querySelectorAll(o),1===a.length)return o}return s=r(e,e.parentNode.children)+1,o=t.findCssSelector(e.parentNode)+" > "+i+":nth-child("+s+")"},t.createUrlLookup=function(t){return function(n){try{return e("text!gcli/ui/"+n)}catch(i){if(t.filename)return t.filename+n;var r=t.id.split("/").pop()+".js";if(t.uri.substr(-r.length)!==r)return console.error("Can't work out path from module.uri/module.id"),n;if(t.uri){var o=t.uri.length-r.length-1;return t.uri.substr(0,o)+"/"+n}return r+"/"+n}}},t.updateCommand=function(e,t){o(e,function(e){t.update(e)})},t.executeCommand=function(e,t){o(e,function(e){t.exec({visible:!0,typed:e})})},t.KeyEvent={DOM_VK_CANCEL:3,DOM_VK_HELP:6,DOM_VK_BACK_SPACE:8,DOM_VK_TAB:9,DOM_VK_CLEAR:12,DOM_VK_RETURN:13,DOM_VK_ENTER:14,DOM_VK_SHIFT:16,DOM_VK_CONTROL:17,DOM_VK_ALT:18,DOM_VK_PAUSE:19,DOM_VK_CAPS_LOCK:20,DOM_VK_ESCAPE:27,DOM_VK_SPACE:32,DOM_VK_PAGE_UP:33,DOM_VK_PAGE_DOWN:34,DOM_VK_END:35,DOM_VK_HOME:36,DOM_VK_LEFT:37,DOM_VK_UP:38,DOM_VK_RIGHT:39,DOM_VK_DOWN:40,DOM_VK_PRINTSCREEN:44,DOM_VK_INSERT:45,DOM_VK_DELETE:46,DOM_VK_0:48,DOM_VK_1:49,DOM_VK_2:50,DOM_VK_3:51,DOM_VK_4:52,DOM_VK_5:53,DOM_VK_6:54,DOM_VK_7:55,DOM_VK_8:56,DOM_VK_9:57,DOM_VK_SEMICOLON:59,DOM_VK_EQUALS:61,DOM_VK_A:65,DOM_VK_B:66,DOM_VK_C:67,DOM_VK_D:68,DOM_VK_E:69,DOM_VK_F:70,DOM_VK_G:71,DOM_VK_H:72,DOM_VK_I:73,DOM_VK_J:74,DOM_VK_K:75,DOM_VK_L:76,DOM_VK_M:77,DOM_VK_N:78,DOM_VK_O:79,DOM_VK_P:80,DOM_VK_Q:81,DOM_VK_R:82,DOM_VK_S:83,DOM_VK_T:84,DOM_VK_U:85,DOM_VK_V:86,DOM_VK_W:87,DOM_VK_X:88,DOM_VK_Y:89,DOM_VK_Z:90,DOM_VK_CONTEXT_MENU:93,DOM_VK_NUMPAD0:96,DOM_VK_NUMPAD1:97,DOM_VK_NUMPAD2:98,DOM_VK_NUMPAD3:99,DOM_VK_NUMPAD4:100,DOM_VK_NUMPAD5:101,DOM_VK_NUMPAD6:102,DOM_VK_NUMPAD7:103,DOM_VK_NUMPAD8:104,DOM_VK_NUMPAD9:105,DOM_VK_MULTIPLY:106,DOM_VK_ADD:107,DOM_VK_SEPARATOR:108,DOM_VK_SUBTRACT:109,DOM_VK_DECIMAL:110,DOM_VK_DIVIDE:111,DOM_VK_F1:112,DOM_VK_F2:113,DOM_VK_F3:114,DOM_VK_F4:115,DOM_VK_F5:116,DOM_VK_F6:117,DOM_VK_F7:118,DOM_VK_F8:119,DOM_VK_F9:120,DOM_VK_F10:121,DOM_VK_F11:122,DOM_VK_F12:123,DOM_VK_F13:124,DOM_VK_F14:125,DOM_VK_F15:126,DOM_VK_F16:127,DOM_VK_F17:128,DOM_VK_F18:129,DOM_VK_F19:130,DOM_VK_F20:131,DOM_VK_F21:132,DOM_VK_F22:133,DOM_VK_F23:134,DOM_VK_F24:135,DOM_VK_NUM_LOCK:144,DOM_VK_SCROLL_LOCK:145,DOM_VK_COMMA:188,DOM_VK_PERIOD:190,DOM_VK_SLASH:191,DOM_VK_BACK_QUOTE:192,DOM_VK_OPEN_BRACKET:219,DOM_VK_BACK_SLASH:220,DOM_VK_CLOSE_BRACKET:221,DOM_VK_QUOTE:222,DOM_VK_META:224}}),define("gcli/nls/strings",["require","exports","module"],function(e,t){var n={root:{canonDescNone:"(No description)",cliEvalJavascript:"Enter JavaScript directly",cliUnusedArg:"Too many arguments",cliOptions:"Available Options",fieldSelectionSelect:"Select a %S",fieldArrayAdd:"Add",fieldArrayDel:"Delete",fieldMenuMore:"More matches, keep typing",jstypeParseScope:"Scope lost",jstypeParseMissing:"Can't find property '%S'",jstypeBeginSyntax:"Syntax error",jstypeBeginUnterm:"Unterminated string literal",jstypeParseError:"Error",typesNumberNan:'Can\'t convert "%S" to a number.',typesNumberMax:"%1$S is greater than maximum allowed: %2$S.",typesNumberMin:"%1$S is smaller than minimum allowed: %2$S.",typesNumberNotInt2:'Can\'t convert "%S" to an integer.',typesSelectionNomatch:"Can't use '%S'.",nodeParseSyntax:"Syntax error in CSS query",nodeParseMultiple:"Too many matches (%S)",nodeParseNone:"No matches",helpDesc:"Get help on the available commands",helpManual:"Provide help either on a specific command (if a search string is provided and an exact match is found) or on the available commands (if a search string is not provided, or if no exact match is found).",helpSearchDesc:"Search string",helpSearchManual3:"search string to use in narrowing down the displayed commands. Regular expressions not supported.",helpManSynopsis:"Synopsis",helpManDescription:"Description",helpManParameters:"Parameters",helpManNone:"None",helpListAll:"Available Commands:",helpListPrefix:"Commands starting with '%1$S':",helpListNone:"No commands starting with '%1$S'",helpManRequired:"required",helpManOptional:"optional",subCommands:"Sub-Commands",subCommandsNone:"None",prefDesc:"Commands to control settings",prefManual:"Commands to display and alter preferences both for GCLI and the surrounding environment",prefListDesc:"Display available settings",prefListManual:"Display a list of preferences, optionally filtered when using the 'search' parameter",prefListSearchDesc:"Filter the list of settings displayed",prefListSearchManual:"Search for the given string in the list of available preferences",prefShowDesc:"Display setting value",prefShowManual:"Display the value of a given preference",prefShowSettingDesc:"Setting to display",prefShowSettingManual:"The name of the setting to display",prefSetDesc:"Alter a setting",prefSetManual:"Alter preferences defined by the environment",prefSetSettingDesc:"Setting to alter",prefSetSettingManual:"The name of the setting to alter.",prefSetValueDesc:"New value for setting",prefSetValueManual:"The new value for the specified setting",prefSetCheckHeading:"This might void your warranty!",prefSetCheckBody:"Changing these advanced settings can be harmful to the stability, security, and performance of this application. You should only continue if you are sure of what you are doing.",prefSetCheckGo:"I'll be careful, I promise!",prefResetDesc:"Reset a setting",prefResetManual:"Reset the value of a setting to the system defaults",prefResetSettingDesc:"Setting to reset",prefResetSettingManual:"The name of the setting to reset to the system default value",prefOutputFilter:"Filter",prefOutputName:"Name",prefOutputValue:"Value",introDesc:"Show the opening message",introManual:"Redisplay the message that is shown to new users until they click the 'Got it!' button",introTextOpening2:"This command line is designed for developers. It focuses on speed of input over JavaScript syntax and a rich display over monospace output.",introTextCommands:"For a list of commands type",introTextKeys2:", or to show/hide command hints press",introTextF1Escape:"F1/Escape",introTextGo:"Got it!",hideIntroDesc:"Show the initial welcome message",eagerHelperDesc:"How eager are the tooltips",allowSetDesc:"Has the user enabled the 'pref set' command?"}};t.root=n.root}),define("util/l10n",["require","exports","module","gcli/nls/strings"],function(e,t){function n(e,t){return e.replace(/\{[^}]*\}/g,function(e){if(e=e.slice(1,-1),null==t)return console.log("Missing swaps while looking up '"+e+"'"),"";var n=t[e];return null==n&&(console.log("Can't find '"+e+"' in "+JSON.stringify(t)),n=""),n})}function i(e,t){var n=0;return e=e.replace(/%S/g,function(){return t[n++]}),e=e.replace(/%([0-9])\$S/g,function(e,n){return t[n-1]})}function r(){if(!s){var e=navigator.language||navigator.userLanguage;a.some(function(t){return-1!==t.locales.indexOf(e)?(s=t,!0):!1}),s||(console.error("Failed to find plural rule for "+e),s=a[0])}return s}var o={};t.registerStringsSource=function(t){var n=e(t).root;Object.keys(n).forEach(function(e){return o[e]?void console.error("Key '"+e+"' (loaded from "+t+") already exists. Ignoring."):void(o[e]=n[e])},this)},e("gcli/nls/strings"),t.registerStringsSource("gcli/nls/strings"),t.unregisterStringsSource=function(t){var n=e(t).root;Object.keys(n).forEach(function(e){delete o[e]},this)},t.getPreferredLocales=function(){var e="undefined"!=typeof navigator?(navigator.language||navigator.userLanguage).toLowerCase():"en-us",t=e.split("-"),n=t.map(function(e,n){return t.slice(0,t.length-n).join("-")});return n.push("root"),n},t.lookup=function(e){var t=o[e];if(null==t)throw new Error("No i18n key: "+e);return t},t.propertyLookup="undefined"!=typeof Proxy?Proxy.create({get:function(e,n){return t.lookup(n)}}):o,t.lookupSwap=function(e,i){var r=t.lookup(e);return n(r,i)},t.lookupFormat=function(e,n){var r=t.lookup(e);return i(r,n)},t.lookupPlural=function(e,i,o){var s=r().get(i),a=t.lookup(e),l=a[s];return o=o||{},o.ord=i,n(l,o)};var s,a=[{locales:["fa","fa-ir","id","ja","ja-jp-mac","ka","ko","ko-kr","th","th-th","tr","tr-tr","zh","zh-tw","zh-cn"],numForms:1,get:function(){return 0}},{locales:["af","af-za","as","ast","bg","br","bs","bs-ba","ca","cy","cy-gb","da","de","de-de","de-ch","en","en-gb","en-us","en-za","el","el-gr","eo","es","es-es","es-ar","es-cl","es-mx","et","et-ee","eu","fi","fi-fi","fy","fy-nl","gl","gl-gl","he","hu","hu-hu","hy","hy-am","it","it-it","kk","ku","lg","mai","ml","ml-in","mn","nb","nb-no","no","no-no","nl","nn","nn-no","no","no-no","nb","nb-no","nso","nso-za","pa","pa-in","pt","pt-pt","rm","rm-ch","si","si-lk","son","son-ml","sq","sq-al","sv","sv-se","vi","vi-vn","zu","zu-za"],numForms:2,get:function(e){return 1!=e?1:0}},{locales:["ak","ak-gh","bn","bn-in","bn-bd","fr","fr-fr","gu","gu-in","kn","kn-in","mr","mr-in","oc","oc-oc","or","or-in","pt-br","ta","ta-in","ta-lk","te","te-in"],numForms:2,get:function(e){return e>1?1:0}},{locales:["lv"],numForms:3,get:function(e){return e%10==1&&e%100!=11?1:0!=e?2:0}},{locales:["gd","gd-gb"],numForms:4,get:function(e){return 1==e||11==e?0:2==e||12==e?1:e>0&&20>e?2:3}},{locales:["ro","ro-ro"],numForms:3,get:function(e){return 1==e?0:0==e||e%100>0&&20>e%100?1:2}},{locales:["lt"],numForms:3,get:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(10>e%100||e%100>=20)?2:1}},{locales:["be","be-by","hr","hr-hr","ru","ru-ru","sr","sr-rs","sr-cs","uk"],numForms:3,get:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2}},{locales:["cs","sk"],numForms:3,get:function(e){return 1==e?0:e>=2&&4>=e?1:2}},{locales:["pl"],numForms:3,get:function(e){return 1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2}},{locales:["sl"],numForms:4,get:function(e){return e%100==1?0:e%100==2?1:e%100==3||e%100==4?2:3}},{locales:["ga-ie","ga-ie","ga","en-ie"],numForms:5,get:function(e){return 1==e?0:2==e?1:e>=3&&6>=e?2:e>=7&&10>=e?3:4}},{locales:["ar"],numForms:6,get:function(e){return 0==e?5:1==e?0:2==e?1:e%100>=3&&10>=e%100?2:e%100>=11&&99>=e%100?3:4}},{locales:["mt"],numForms:4,get:function(e){return 1==e?0:0==e||e%100>0&&10>=e%100?1:e%100>10&&20>e%100?2:3}},{locales:["mk","mk-mk"],numForms:3,get:function(e){return e%10==1?0:e%10==2?1:2}},{locales:["is"],numForms:2,get:function(e){return e%10==1&&e%100!=11?0:1}}]}),define("gcli/argument",["require","exports","module"],function(e,t){function n(e,t,n){void 0===e?(this.text="",this.prefix="",this.suffix=""):(this.text=e,this.prefix=void 0!==t?t:"",this.suffix=void 0!==n?n:"")}function i(){this.text="",this.prefix="",this.suffix=""}function r(e,t,n){this.text=void 0!==e?e:"",this.prefix=void 0!==t?t:"",this.suffix=void 0!==n?n:"",r._moveSpaces(this)}function o(e,t,i){if(!Array.isArray(e))throw new Error("args is not an array of Arguments");this.args=void 0===t?e:e.slice(t,i);var r=n.merge(this.args);this.text=r.text,this.prefix=r.prefix,this.suffix=r.suffix}function s(e){this.arg=e,this.text=e.text,this.prefix=e.prefix,this.suffix=e.suffix}function a(){this.text="",this.prefix="",this.suffix=""}function l(){"string"==typeof arguments[0]?(this.nameArg=null,this.valueArg=null,this.text=arguments[0],this.prefix=arguments[1],this.suffix=arguments[2]):null==arguments[1]?(this.nameArg=arguments[0],this.valueArg=null,this.text="",this.prefix=this.nameArg.toString(),this.suffix=""):(this.nameArg=arguments[0],this.valueArg=arguments[1],this.text=this.valueArg.text,this.prefix=this.nameArg.toString()+this.valueArg.prefix,this.suffix=this.valueArg.suffix)}function c(){this.args=[]}n.prototype.type="Argument",n.prototype.merge=function(e){return new n(this.text+this.suffix+e.prefix+e.text,this.prefix,e.suffix)},n.prototype.beget=function(e){var t=this.text,i=this.prefix,r=this.suffix;if(null!=e.text&&(t=e.text,!e.dontQuote)){var o=t.indexOf(" ")>=0||0==t.length,s=/['"]$/.test(i);o&&!s&&(i+="'",r="'"+r)}if(e.prefixSpace&&" "!==i.charAt(0)&&(i=" "+i),e.prefixPostSpace&&" "!==i.charAt(i.length-1)&&(i+=" "),e.suffixSpace&&" "!==r.charAt(r.length-1)&&(r+=" "),t===this.text&&r===this.suffix&&i===this.prefix)return this;var a=e.type||n;return new a(t,i,r)},n.prototype.assign=function(e){this.assignment=e},n.prototype.getArgs=function(){return[this]},n.prototype.equals=function(e){return this===e?!0:null!=e&&e instanceof n?this.text===e.text&&this.prefix===e.prefix&&this.suffix===e.suffix:!1},n.prototype.toString=function(){return this.prefix+this.text+this.suffix},n.merge=function(e,t,n){t=void 0===t?0:t,n=void 0===n?e.length:n;for(var i,r=t;n>r;r++){var o=e[r];i=i?i.merge(o):o}return i},Object.defineProperty(n.prototype,"_summaryJson",{get:function(){var e=null==this.assignment?"null":this.assignment.param.name;return"<"+this.prefix+":"+this.text+":"+this.suffix+"> (a="+e+", t="+this.type+")"},enumerable:!0}),t.Argument=n,i.prototype=Object.create(n.prototype),i.prototype.type="BlankArgument",t.BlankArgument=i,r.prototype=Object.create(n.prototype),r.prototype.type="ScriptArgument",r._moveSpaces=function(e){for(;" "===e.text.charAt(0);)e.prefix=e.prefix+" ",e.text=e.text.substring(1);for(;" "===e.text.charAt(e.text.length-1);)e.suffix=" "+e.suffix,e.text=e.text.slice(0,-1)},r.prototype.beget=function(e){e.type=r;var t=n.prototype.beget.call(this,e);return r._moveSpaces(t),t},t.ScriptArgument=r,o.prototype=Object.create(n.prototype),o.prototype.type="MergedArgument",o.prototype.assign=function(e){this.args.forEach(function(t){t.assign(e)},this),this.assignment=e},o.prototype.getArgs=function(){return this.args},o.prototype.equals=function(e){return this===e?!0:null!=e&&e instanceof o?this.text===e.text&&this.prefix===e.prefix&&this.suffix===e.suffix:!1},t.MergedArgument=o,s.prototype=Object.create(n.prototype),s.prototype.type="TrueNamedArgument",s.prototype.assign=function(e){this.arg&&this.arg.assign(e),this.assignment=e},s.prototype.getArgs=function(){return[this.arg]},s.prototype.equals=function(e){return this===e?!0:null!=e&&e instanceof s?this.text===e.text&&this.prefix===e.prefix&&this.suffix===e.suffix:!1},s.prototype.beget=function(e){e.text&&console.error("Can't change text of a TrueNamedArgument",this,e),e.type=s;var t=n.prototype.beget.call(this,e);return t.arg=new n(t.text,t.prefix,t.suffix),t},t.TrueNamedArgument=s,a.prototype=Object.create(n.prototype),a.prototype.type="FalseNamedArgument",a.prototype.getArgs=function(){return[]},a.prototype.equals=function(e){return this===e?!0:null!=e&&e instanceof a?this.text===e.text&&this.prefix===e.prefix&&this.suffix===e.suffix:!1},t.FalseNamedArgument=a,l.prototype=Object.create(n.prototype),l.prototype.type="NamedArgument",l.prototype.assign=function(e){this.nameArg.assign(e),null!=this.valueArg&&this.valueArg.assign(e),this.assignment=e},l.prototype.getArgs=function(){return this.valueArg?[this.nameArg,this.valueArg]:[this.nameArg]},l.prototype.equals=function(e){return this===e?!0:null==e?!1:e instanceof l?this.text===e.text&&this.prefix===e.prefix&&this.suffix===e.suffix:!1},l.prototype.beget=function(e){e.type=l;var t=n.prototype.beget.call(this,e),i=/^([\s]*)([^\s]*)([\s]*['"]?)$/.exec(t.prefix);return null==this.valueArg&&""===t.text?(t.nameArg=new n(i[2],i[1],i[3]),t.valueArg=null):(t.nameArg=new n(i[2],i[1],""),t.valueArg=new n(t.text,i[3],t.suffix)),t},t.NamedArgument=l,c.prototype=Object.create(n.prototype),c.prototype.type="ArrayArgument",c.prototype.addArgument=function(e){this.args.push(e)},c.prototype.addArguments=function(e){Array.prototype.push.apply(this.args,e)},c.prototype.getArguments=function(){return this.args},c.prototype.assign=function(e){this.args.forEach(function(t){t.assign(e)},this),this.assignment=e},c.prototype.getArgs=function(){return this.args},c.prototype.equals=function(e){if(this===e)return!0;if(null==e)return!1;if("ArrayArgument"!==e.type)return!1;if(this.args.length!==e.args.length)return!1;for(var t=0;t<this.args.length;t++)if(!this.args[t].equals(e.args[t]))return!1;return!0},c.prototype.toString=function(){return"{"+this.args.map(function(e){return e.toString()},this).join(",")+"}"},t.ArrayArgument=c}),define("gcli/types",["require","exports","module","util/promise","gcli/argument","gcli/argument"],function(e,t){function n(e,t,n,i,r){if(this.value=e,this.arg=t,null==t)throw new Error("Missing arg");if(null!=r){var o="function"==typeof r?r():r;if("function"!=typeof o.then)throw new Error("predictions is not a promise");o.then(function(e){if(!Array.isArray(e))throw new Error("prediction resolves to non array")},console.error)}this._status=n||l.VALID,this.message=i,this.predictions=r}function i(e,t){this.arg=t,this.conversions=e,this.value=e.map(function(e){return e.value},this),this._status=l.combine(e.map(function(e){return e.getStatus()})),this.message="",this.predictions=[]}function r(){}var o=e("util/promise"),s=e("gcli/argument").Argument,a=e("gcli/argument").BlankArgument,l={VALID:{toString:function(){return"VALID"},valueOf:function(){return 0}},INCOMPLETE:{toString:function(){return"INCOMPLETE"},valueOf:function(){return 1}},ERROR:{toString:function(){return"ERROR"},valueOf:function(){return 2}},combine:function(){for(var e=l.VALID,t=0;t<arguments.length;t++){var n=arguments[t];Array.isArray(n)&&(n=l.combine.apply(null,n)),n>e&&(e=n)}return e}};t.Status=l,n.prototype.assign=function(e){this.arg.assign(e)},n.prototype.isDataProvided=function(){return"BlankArgument"!==this.arg.type},n.prototype.equals=function(e){return this===e?!0:null==e?!1:this.valueEquals(e)&&this.argEquals(e)},n.prototype.valueEquals=function(e){return this.value===e.value},n.prototype.argEquals=function(e){return null==e?!1:this.arg.equals(e.arg)},n.prototype.getStatus=function(){return this._status},n.prototype.toString=function(){return this.arg.toString()},n.prototype.getPredictions=function(){return"function"==typeof this.predictions?this.predictions():o.resolve(this.predictions||[])},n.prototype.constrainPredictionIndex=function(e){return null==e?o.resolve():this.getPredictions().then(function(t){return 0===t.length?void 0:(e%=t.length,0>e&&(e=t.length+e),e)}.bind(this))},n.maxPredictions=11,t.Conversion=n,i.prototype=Object.create(n.prototype),i.prototype.assign=function(e){this.conversions.forEach(function(t){t.assign(e)},this),this.assignment=e},i.prototype.getStatus=function(e){return e&&e.conversion?e.conversion.getStatus():this._status},i.prototype.isDataProvided=function(){return this.conversions.length>0},i.prototype.valueEquals=function(e){if(!(e instanceof i))throw new Error("Can't compare values with non ArrayConversion");if(this.value===e.value)return!0;if(this.value.length!==e.value.length)return!1;for(var t=0;t<this.conversions.length;t++)if(!this.conversions[t].valueEquals(e.conversions[t]))return!1;return!0},i.prototype.toString=function(){return"[ "+this.conversions.map(function(e){return e.toString()},this).join(", ")+" ]"},t.ArrayConversion=i,r.prototype.stringify=function(){throw new Error("Not implemented")},r.prototype.parse=function(){throw new Error("Not implemented")},r.prototype.parseString=function(e){return this.parse(new s(e))},r.prototype.name=void 0,r.prototype.increment=function(){return void 0},r.prototype.decrement=function(){return void 0},r.prototype.getBlank=function(){return new n(void 0,new a,l.INCOMPLETE,"")},r.prototype.getType=function(){return this},t.Type=r;var c={};t.getTypeNames=function(){return Object.keys(c)},t.registerType=function(e){if("object"==typeof e){if(!(e instanceof r))throw new Error("Can't registerType using: "+e);if(!e.name)throw new Error("All registered types must have a name");c[e.name]=e}else{if("function"!=typeof e)throw new Error("Unknown type: "+e);if(!e.prototype.name)throw new Error("All registered types must have a name");c[e.prototype.name]=e}},t.registerTypes=function(e){Object.keys(e).forEach(function(t){var n=e[t];n.name=t,e.registerType(n)})},t.deregisterType=function(e){delete c[e.name]},t.getType=function(e){var t;if("string"==typeof e)return t=c[e],"function"==typeof t&&(t=new t({})),t;if("object"==typeof e){if(!e.name)throw new Error("Missing 'name' member to typeSpec");return t=c[e.name],"function"==typeof t&&(t=new t(e)),t}throw new Error("Can't extract type from "+e)}}),define("gcli/types/spell",["require","exports","module"],function(e,t){function n(e,t){var n,a,l,c=e.length,u=t.length,h=new Array(c+1),d=new Array(c+1),p=new Array(c+1);for(a=0;c>=a;a++)d[a]=a*i;for(l=1;u>=l;l++){for(h[0]=l*i,a=1;c>=a;a++)h[a]=Math.min(h[a-1]+r,d[a]+i,d[a-1]+(e[a-1]===t[l-1]?0:s)),a>1&&l>1&&e[a-1]===t[l-2]&&t[l-1]===e[a-2]&&(h[a]=Math.min(h[a],p[a-2]+o));n=p,p=d,d=h,h=n}return d[c]}var i=1,r=1,o=1,s=2,a=4;t.correct=function(e,t){if(0===t.length)return void 0;var i,r={};return t.forEach(function(t){r[t]=n(e,t)}),i=t.sort(function(e,t){return r[e]!==r[t]?r[e]-r[t]:t>e}),r[i[0]]<=a?i[0]:void 0}}),define("gcli/types/selection",["require","exports","module","util/promise","util/util","util/l10n","gcli/types","gcli/types","gcli/types","gcli/types","gcli/types/spell","gcli/argument"],function(e,t){function n(e){e&&Object.keys(e).forEach(function(t){this[t]=e[t]},this)}function i(e,t){if(f&&!t){var n=o.defer();return setTimeout(function(){o.resolve(e).then(function(e){"function"==typeof e&&(e=i(e(),t)),n.resolve(e)})},500),n.promise}return o.resolve(e).then(function(e){return"function"==typeof e?i(e(),t):e})}function r(e){if(!Array.isArray(e))throw new Error("SelectionType has no lookup or data");return e.map(function(e){return{name:e,value:e}},this)}var o=e("util/promise"),s=e("util/util"),a=e("util/l10n"),l=e("gcli/types"),c=e("gcli/types").Type,u=e("gcli/types").Status,h=e("gcli/types").Conversion,d=e("gcli/types/spell"),p=e("gcli/argument").BlankArgument;t.startup=function(){l.registerType(n)},t.shutdown=function(){l.unregisterType(n)},n.prototype=Object.create(c.prototype),n.prototype.stringify=function(e){if(null==e)return"";if(null!=this.stringifyProperty)return e[this.stringifyProperty];try{var t=null,n=s.synchronize(this.getLookup());return n.some(function(n){return n.value===e?(t=n.name,!0):!1},this),t}catch(i){return e.toString()}},n.prototype.clearCache=function(){delete this._cachedLookup},n.prototype.getLookup=function(){if(null!=this._cachedLookup)return this._cachedLookup;var e;if(null==this.lookup)e=i(this.data,this.neverForceAsync).then(r);else{var t="function"==typeof this.lookup?this.lookup.bind(this):this.lookup;e=i(t,this.neverForceAsync)}return this.cacheable&&!f&&(this._cachedLookup=e),e};var f=!1;n.prototype._findPredictions=function(e,t){return o.resolve(this.getLookup()).then(function(n){var i,r,o=[],s=h.maxPredictions,a=e.text.toLowerCase();if(t||e.suffix.length>0){var l;for(i=0;i<n.length&&o.length<s;i++)if(r=n[i],r.name===e.text){if(!r.value.exec){l=!0,o=[];
break}this._addToPredictions(o,r,e)}if(!l)return o}for(i=0;i<n.length;i++)r=n[i],null==r._gcliLowerName&&(r._gcliLowerName=r.name.toLowerCase());for(i=0;i<n.length&&o.length<s;i++)r=n[i],r.name===e.text&&this._addToPredictions(o,r,e);for(i=0;i<n.length&&o.length<s;i++)r=n[i],0!==r._gcliLowerName.indexOf(a)||r.value.hidden||-1===o.indexOf(r)&&this._addToPredictions(o,r,e);if(o.length<s/2)for(i=0;i<n.length&&o.length<s;i++)r=n[i],-1===r._gcliLowerName.indexOf(a)||r.value.hidden||-1===o.indexOf(r)&&this._addToPredictions(o,r,e);if(0===o.length){var c=[];n.forEach(function(e){e.value.hidden||c.push(e.name)});var u=d.correct(a,c);u&&n.forEach(function(e){e.name===u&&o.push(e)},this)}return o}.bind(this))},n.prototype._addToPredictions=function(e,t){e.push(t)},n.prototype.parse=function(e){return this._findPredictions(e).then(function(t){if(0===t.length){var n=a.lookupFormat("typesSelectionNomatch",[e.text]);return new h(void 0,e,u.ERROR,n,o.resolve(t))}if(this.noMatch&&this.noMatch(),t[0].name===e.text){var i=t[0].value;return new h(i,e,u.VALID,"",o.resolve(t))}return new h(void 0,e,u.INCOMPLETE,"",o.resolve(t))}.bind(this))},n.prototype.getBlank=function(){var e=function(){return o.resolve(this.getLookup()).then(function(e){return e.filter(function(e){return!e.value.hidden}).slice(0,h.maxPredictions-1)},console.error)}.bind(this);return new h(void 0,new p,u.INCOMPLETE,"",e)},n.prototype.decrement=function(e){var t=s.synchronize(this.getLookup()),n=this._findValue(t,e);return-1===n&&(n=0),n++,n>=t.length&&(n=0),t[n].value},n.prototype.increment=function(e){var t=s.synchronize(this.getLookup()),n=this._findValue(t,e);return-1===n&&(n=1),n--,0>n&&(n=t.length-1),t[n].value},n.prototype._findValue=function(e,t){for(var n=-1,i=0;i<e.length;i++){var r=e[i];if(r.value===t){n=i;break}}return n},n.prototype.name="selection",t.SelectionType=n}),define("gcli/types/basic",["require","exports","module","util/promise","util/util","util/l10n","gcli/types","gcli/types","gcli/types","gcli/types","gcli/types","gcli/types/selection","gcli/argument","gcli/argument"],function(e,t){function n(){}function i(e){if(this._allowFloat=!!e.allowFloat,e){if(this._min=e.min,this._max=e.max,this._step=e.step||1,!this._allowFloat&&(this._isFloat(this._min)||this._isFloat(this._max)||this._isFloat(this._step)))throw new Error("allowFloat is false, but non-integer values given in type spec")}else this._step=1}function r(){}function o(e){if("function"!=typeof e.delegateType)throw new Error("Instances of DelegateType need typeSpec.delegateType to be a function that returns a type");Object.keys(e).forEach(function(t){this[t]=e[t]},this)}function s(){}function a(e){e.subtype||(console.error("Array.typeSpec is missing subtype. Assuming string."+JSON.stringify(e)),e.subtype="string"),Object.keys(e).forEach(function(t){this[t]=e[t]},this),this.subtype=h.getType(this.subtype)}var l=e("util/promise"),c=e("util/util"),u=e("util/l10n"),h=e("gcli/types"),d=e("gcli/types").Type,p=e("gcli/types").Status,f=e("gcli/types").Conversion,m=e("gcli/types").ArrayConversion,g=e("gcli/types/selection").SelectionType,v=e("gcli/argument").BlankArgument,y=e("gcli/argument").ArrayArgument;t.startup=function(){h.registerType(n),h.registerType(i),h.registerType(r),h.registerType(s),h.registerType(o),h.registerType(a)},t.shutdown=function(){h.unregisterType(n),h.unregisterType(i),h.unregisterType(r),h.unregisterType(s),h.unregisterType(o),h.unregisterType(a)},n.prototype=Object.create(d.prototype),n.prototype.stringify=function(e){return null==e?"":e.toString()},n.prototype.parse=function(e){return l.resolve(null==e.text||""===e.text?new f(void 0,e,p.INCOMPLETE,""):new f(e.text,e))},n.prototype.name="string",t.StringType=n,i.prototype=Object.create(d.prototype),i.prototype.stringify=function(e){return null==e?"":""+e},i.prototype.getMin=function(){if(this._min){if("function"==typeof this._min)return this._min();if("number"==typeof this._min)return this._min}return void 0},i.prototype.getMax=function(){if(this._max){if("function"==typeof this._max)return this._max();if("number"==typeof this._max)return this._max}return void 0},i.prototype.parse=function(e){if(0===e.text.replace(/^\s*-?/,"").length)return l.resolve(new f(void 0,e,p.INCOMPLETE,""));if(!this._allowFloat&&-1!==e.text.indexOf(".")){var t=u.lookupFormat("typesNumberNotInt2",[e.text]);return l.resolve(new f(void 0,e,p.ERROR,t))}var n;if(n=this._allowFloat?parseFloat(e.text):parseInt(e.text,10),isNaN(n)){var t=u.lookupFormat("typesNumberNan",[e.text]);return l.resolve(new f(void 0,e,p.ERROR,t))}var i=this.getMax();if(null!=i&&n>i){var t=u.lookupFormat("typesNumberMax",[n,i]);return l.resolve(new f(void 0,e,p.ERROR,t))}var r=this.getMin();if(null!=r&&r>n){var t=u.lookupFormat("typesNumberMin",[n,r]);return l.resolve(new f(void 0,e,p.ERROR,t))}return l.resolve(new f(n,e))},i.prototype.decrement=function(e){if("number"!=typeof e||isNaN(e))return this.getMax()||1;var t=e-this._step;return t=Math.ceil(t/this._step)*this._step,this._boundsCheck(t)},i.prototype.increment=function(e){if("number"!=typeof e||isNaN(e)){var t=this.getMin();return null!=t?t:0}var n=e+this._step;return n=Math.floor(n/this._step)*this._step,null==this.getMax()?n:this._boundsCheck(n)},i.prototype._boundsCheck=function(e){var t=this.getMin();if(null!=t&&t>e)return t;var n=this.getMax();return null!=n&&e>n?n:e},i.prototype._isFloat=function(e){return"number"==typeof e&&isFinite(e)&&e%1!==0},i.prototype.name="number",t.NumberType=i,r.prototype=Object.create(g.prototype),r.prototype.lookup=[{name:"false",value:!1},{name:"true",value:!0}],r.prototype.parse=function(e){return"TrueNamedArgument"===e.type?l.resolve(new f(!0,e)):"FalseNamedArgument"===e.type?l.resolve(new f(!1,e)):g.prototype.parse.call(this,e)},r.prototype.stringify=function(e){return null==e?"":""+e},r.prototype.getBlank=function(){return new f(!1,new v,p.VALID,"",l.resolve(this.lookup))},r.prototype.name="boolean",t.BooleanType=r,o.prototype.delegateType=function(){throw new Error("Not implemented")},o.prototype=Object.create(d.prototype),o.prototype.stringify=function(e){return this.delegateType().stringify(e)},o.prototype.parse=function(e){return this.delegateType().parse(e)},o.prototype.decrement=function(e){var t=this.delegateType();return t.decrement?t.decrement(e):void 0},o.prototype.increment=function(e){var t=this.delegateType();return t.increment?t.increment(e):void 0},o.prototype.getType=function(){return this.delegateType()},Object.defineProperty(o.prototype,"isImportant",{get:function(){return this.delegateType().isImportant},enumerable:!0}),o.prototype.name="delegate",t.DelegateType=o,s.prototype=Object.create(d.prototype),s.prototype.stringify=function(){return""},s.prototype.parse=function(e){return l.resolve(new f(void 0,e))},s.prototype.name="blank",t.BlankType=s,a.prototype=Object.create(d.prototype),a.prototype.stringify=function(e){return null==e?"":e.join(" ")},a.prototype.parse=function(e){if("ArrayArgument"!==e.type)throw console.error("non ArrayArgument to ArrayType.parse",e),new Error("non ArrayArgument to ArrayType.parse");var t=function(e){return this.subtype.parse(e).then(function(t){return e.conversion=t,t}.bind(this),console.error)}.bind(this),n=e.getArguments().map(t);return c.all(n).then(function(t){return new m(t,e)})},a.prototype.getBlank=function(){return new m([],new y)},a.prototype.name="array",t.ArrayType=a}),define("gcli/canon",["require","exports","module","util/promise","util/util","util/l10n","gcli/types","gcli/types","gcli/types/basic","gcli/types/selection"],function(e,t){function n(e,t){if(null==e)return t?l.lookup(t):e;if("string"==typeof e)return e;if("object"==typeof e){if(e.key)return l.lookup(e.key);var n,i=l.getPreferredLocales();return i.some(function(t){return n=e[t],null!=n}),null!=n?n:(console.error("Can't find locale in descriptions: locales="+JSON.stringify(i)+", description="+JSON.stringify(e)),"(No description)")}return l.lookup(t)}function i(e){if(Object.keys(e).forEach(function(t){this[t]=e[t]},this),!this.name)throw new Error("All registered commands must have a name");if(null==this.params&&(this.params=[]),!Array.isArray(this.params))throw new Error("command.params must be an array in "+this.name);this.hasNamedParameters=!1,this.description="description"in this?this.description:void 0,this.description=n(this.description,"canonDescNone"),this.manual="manual"in this?this.manual:void 0,this.manual=n(this.manual);var t=this.params;this.params=[];var i=!1;null==this.returnType&&(this.returnType="string"),t.forEach(function(e){if(e.group)e.params.forEach(function(t){var n=new r(t,this,e.group);this.params.push(n),n.isPositionalAllowed||(this.hasNamedParameters=!0)},this),i=!0;else{if(i)throw new Error("Parameters can't come after param groups. Ignoring "+this.name+"/"+e.name);var t=new r(e,this,null);this.params.push(t),t.isPositionalAllowed||(this.hasNamedParameters=!0)}},this)}function r(e,t,n){if(this.command=t||{name:"unnamed"},this.paramSpec=e,this.name=this.paramSpec.name,this.type=this.paramSpec.type,this.groupName=n,!this.name)throw new Error("In "+this.command.name+": all params must have a name");var i=this.type;if(this.type=c.getType(i),null==this.type)throw console.error("Known types: "+c.getTypeNames().join(", ")),new Error("In "+this.command.name+"/"+this.name+": can't find type for: "+JSON.stringify(i));if(this.type instanceof h&&void 0!==this.paramSpec.defaultValue)throw new Error("In "+this.command.name+"/"+this.name+": boolean parameters can not have a defaultValue. Ignoring");if(null!=this._defaultValue)try{var r=this.type.stringify(this.paramSpec.defaultValue);this.type.parseString(r).then(function(e){e.getStatus()!==u.VALID&&console.error("In "+this.command.name+"/"+this.name+": Error round tripping defaultValue. status = "+e.getStatus())}.bind(this),console.error)}catch(o){throw new Error("In "+this.command.name+"/"+this.name+": "+o)}if(!(this.isPositionalAllowed||void 0!==this.paramSpec.defaultValue||null!=this.type.getBlank||this.type instanceof h))throw new Error("In "+this.command.name+"/"+this.name+": Missing defaultValue for optional parameter.")}function o(){this.onOutput=a.createEvent("CommandOutputManager.onOutput")}{var s=t,a=(e("util/promise"),e("util/util")),l=e("util/l10n"),c=e("gcli/types"),u=e("gcli/types").Status,h=e("gcli/types/basic").BooleanType;e("gcli/types/selection").SelectionType}s.Command=i,Object.defineProperty(r.prototype,"defaultValue",{get:function(){return"_defaultValue"in this||(this._defaultValue=void 0!==this.paramSpec.defaultValue?this.paramSpec.defaultValue:this.type.getBlank().value),this._defaultValue},enumerable:!0}),r.prototype.isKnownAs=function(e){return e==="--"+this.name?!0:!1},r.prototype.getBlank=function(){return this.type.getBlank()},Object.defineProperty(r.prototype,"manual",{get:function(){return n(this.paramSpec.manual||void 0)},enumerable:!0}),Object.defineProperty(r.prototype,"description",{get:function(){return n(this.paramSpec.description||void 0,"canonDescNone")},enumerable:!0}),Object.defineProperty(r.prototype,"isDataRequired",{get:function(){return void 0===this.defaultValue},enumerable:!0}),Object.defineProperty(r.prototype,"hidden",{get:function(){return this.paramSpec.hidden},enumerable:!0}),Object.defineProperty(r.prototype,"isPositionalAllowed",{get:function(){return null==this.groupName},enumerable:!0}),s.Parameter=r;var d={},p=[],f={};s.addCommand=function(e){null!=d[e.name]&&(delete d[e.name],p=p.filter(function(t){return t!==e.name}));var t=new i(e);return d[e.name]=t,p.push(e.name),p.sort(),f[e.name]=e,s.onCanonChange(),t},s.removeCommand=function(e){var t="string"==typeof e?e:e.name;return d[t]?(delete d[t],delete f[t],p=p.filter(function(e){return e!==t}),s.onCanonChange(),!0):!1},s.getCommand=function(e){return d[e]||void 0},s.getCommands=function(){return Object.keys(d).map(function(e){return d[e]},this)},s.getCommandNames=function(){return p.slice(0)},s.getCommandSpecs=function(){return f},s.onCanonChange=a.createEvent("canon.onCanonChange"),s.CommandOutputManager=o}),define("gcli/types/command",["require","exports","module","util/promise","util/l10n","gcli/canon","gcli/types","gcli/types/selection","gcli/types","gcli/types"],function(e,t){function n(e){this.requisition=e.requisition,this.isIncompleteName=e.isIncompleteName,this.stringifyProperty="name",this.neverForceAsync=!0}function i(){this.stringifyProperty="name",this.neverForceAsync=!0}var r=e("util/promise"),o=e("util/l10n"),s=e("gcli/canon"),a=e("gcli/types"),l=e("gcli/types/selection").SelectionType,c=e("gcli/types").Status,u=e("gcli/types").Conversion;t.startup=function(){a.registerType(i),a.registerType(n)},t.shutdown=function(){a.unregisterType(i),a.unregisterType(n)},n.prototype=Object.create(l.prototype),n.prototype.name="param",n.prototype.lookup=function(){var e=[],t=this.requisition.commandAssignment.value;return null!=t&&t.params.forEach(function(t){var n=this.requisition.getAssignment(t.name).arg;t.isPositionalAllowed||"BlankArgument"!==n.type||e.push({name:"--"+t.name,value:t})},this),e},n.prototype.parse=function(e,t){if(this.isIncompleteName)return l.prototype.parse.call(this,e);var n=o.lookup("cliUnusedArg");if(t){var i=t.commandAssignment.conversion;i.getStatus()===c.ERROR&&i.message&&(n=i.message)}return r.resolve(new u(void 0,e,c.ERROR,n))},i.prototype=Object.create(l.prototype),i.prototype.name="command",i.prototype.lookup=function(){var e=s.getCommands();return e.sort(function(e,t){return e.name.localeCompare(t.name)}),e.map(function(e){return{name:e.name,value:e}},this)},i.prototype._addToPredictions=function(e,t,n){(0!==n.text.length||-1===t.name.indexOf(" "))&&e.push(t)},i.prototype.parse=function(e,t){var n=function(){return this._findPredictions(e,t)}.bind(this);return this._findPredictions(e,t).then(function(t){if(0===t.length){var i=o.lookupFormat("typesSelectionNomatch",[e.text]);return new u(void 0,e,c.ERROR,i,n)}var r=t[0].value;return 1===t.length?r.name===e.text&&"function"==typeof r.exec?new u(r,e,c.VALID,""):new u(void 0,e,c.INCOMPLETE,"",n):t[0].name===e.text?new u(r,e,c.VALID,"",n):new u(void 0,e,c.INCOMPLETE,"",n)}.bind(this))}}),define("gcli/types/javascript",["require","exports","module","util/promise","util/l10n","gcli/types"],function(e,t){function n(){}function i(e){return 0===e.indexOf("moz")||0===e.indexOf("webkit")||0===e.indexOf("ms")}var r=e("util/promise"),o=e("util/l10n"),s=e("gcli/types"),a=s.Conversion,l=s.Type,c=s.Status;t.startup=function(){s.registerType(n)},t.shutdown=function(){s.unregisterType(n)};var u=void 0;"undefined"!=typeof window&&(u=window),t.setGlobalObject=function(e){u=e},t.getGlobalObject=function(){return u},t.unsetGlobalObject=function(){u=void 0},n.prototype=Object.create(l.prototype),n.prototype.stringify=function(e){return null==e?"":e},n.MAX_COMPLETION_MATCHES=10,n.prototype.parse=function(e){var t=e.text,s=u;if(""===t)return r.resolve(new a(void 0,e,c.INCOMPLETE));if(!isNaN(parseFloat(t))&&isFinite(t))return r.resolve(new a(t,e));if(t.trim().match(/(null|undefined|NaN|Infinity|true|false)/))return r.resolve(new a(t,e));var l=this._findCompletionBeginning(t);if(l.err)return r.resolve(new a(t,e,c.ERROR,l.err));if(l.state===h.COMPLEX)return r.resolve(new a(t,e));if(l.state!==h.NORMAL)return r.resolve(new a(t,e,c.INCOMPLETE,""));var d,p=t.substring(l.startPos),f=p.split("."),m=void 0;if(f.length>1){d=f.pop().trimLeft();for(var g=0;g<f.length;g++){if(m=f[g].trim(),null==s)return r.resolve(new a(t,e,c.ERROR,o.lookup("jstypeParseScope")));if(""===m)return r.resolve(new a(t,e,c.INCOMPLETE,""));if(this._isSafeProperty(s,m))return r.resolve(new a(t,e));try{s=s[m]}catch(v){return r.resolve(new a(t,e,c.VALID,""))}}}else d=f[0].trimLeft();if(m&&!m.match(/^[0-9A-Za-z]*$/))return r.resolve(new a(t,e));if(null==s){var y=o.lookupFormat("jstypeParseMissing",[m]);return r.resolve(new a(t,e,c.ERROR,y))}if(!d.match(/^[0-9A-Za-z]*$/))return r.resolve(new a(t,e));if(this._isIteratorOrGenerator(s))return r.resolve(new a(t,e));var _=d.length,b=0===_?t:t.slice(0,-_),C=c.INCOMPLETE,y="",w={},S=0,E=s;try{for(;null!=E&&Object.keys(w).length<n.MAX_COMPLETION_MATCHES;)Object.keys(E).forEach(function(e){0!==e.indexOf(d)||e in w||(w[e]={prop:e,distUpPrototypeChain:S})}),S++,E=Object.getPrototypeOf(E)}catch(v){return r.resolve(new a(t,e,c.INCOMPLETE,""))}w=Object.keys(w).map(function(e){return e===d&&(C=c.VALID),w[e]}),w.sort(function(e,t){return e.distUpPrototypeChain!==t.distUpPrototypeChain?e.distUpPrototypeChain-t.distUpPrototypeChain:i(e.prop)?i(t.prop)?e.prop.localeCompare(t.prop):1:i(t.prop)?-1:e.prop.localeCompare(t.prop)}),w.length>n.MAX_COMPLETION_MATCHES&&(w=w.slice(0,n.MAX_COMPLETION_MATCHES-1));var x=w.map(function(e){var t,n=!0;if(this._isSafeProperty(s,e.prop))t="(property getter)";else try{var i=s[e.prop];"function"==typeof i?t="(function)":"boolean"==typeof i||"number"==typeof i?(t="= "+i,n=!1):"string"==typeof i?(i.length>40&&(i=i.substring(0,37)+""),t="= '"+i+"'",n=!1):t="("+typeof i+")"}catch(r){t="("+o.lookup("jstypeParseError")+")"}return{name:b+e.prop,value:{name:b+e.prop,description:t},description:t,incomplete:n}},this);return 0===x.length&&(C=c.ERROR,y=o.lookupFormat("jstypeParseMissing",[d])),1===x.length&&C===c.VALID&&(x=[]),r.resolve(new a(t,e,C,y,r.resolve(x)))};var h={NORMAL:0,COMPLEX:1,QUOTE:2,DQUOTE:3},d="{[(".split(""),p="}])".split(""),f={"{":"}","[":"]","(":")"},m=/[a-zA-Z0-9.]/;n.prototype._findCompletionBeginning=function(e){for(var t,n=[],i=h.NORMAL,r=0,s=!1,a=0;a<e.length;a++)switch(t=e[a],m.test(t)||(s=!0),i){case h.NORMAL:if('"'===t)i=h.DQUOTE;else if("'"===t)i=h.QUOTE;else if(";"===t)r=a+1;else if(" "===t)r=a+1;else if(-1!=d.indexOf(t))n.push({token:t,start:r}),r=a+1;else if(-1!=p.indexOf(t)){var l=n.pop();if(!l||f[l.token]!=t)return{err:o.lookup("jstypeBeginSyntax")};r="}"===t?a+1:l.start}break;case h.DQUOTE:if("\\"===t)a++;else{if("\n"===t)return{err:o.lookup("jstypeBeginUnterm")};'"'===t&&(i=h.NORMAL)}break;case h.QUOTE:if("\\"===t)a++;else{if("\n"===t)return{err:o.lookup("jstypeBeginUnterm")};"'"===t&&(i=h.NORMAL)}}return i===h.NORMAL&&s&&(i=h.COMPLEX),{state:i,startPos:r}},n.prototype._isIteratorOrGenerator=function(e){if(null===e)return!1;if("object"==typeof aObject){if("function"==typeof e.__iterator__||e.constructor&&"Iterator"===e.constructor.name)return!0;try{var t=e.toString();if("function"==typeof e.next&&0===t.indexOf("[object Generator"))return!0}catch(n){return!1}}return!1},n.prototype._isSafeProperty=function(e,t){if("object"!=typeof e)return!1;for(var n=void 0;e;){try{if(n=Object.getOwnPropertyDescriptor(e,t))break}catch(i){return"NS_ERROR_XPC_BAD_CONVERT_JS"===i.name||"NS_ERROR_XPC_BAD_OP_ON_WN_PROTO"===i.name?!1:!0}e=Object.getPrototypeOf(e)}return n&&n.get?"function"!=typeof n.get||"prototype"in n.get:!1},n.prototype.name="javascript",t.JavascriptType=n}),define("util/host",["require","exports","module"],function(e,t){function n(e,t){if(!e.__gcliHighlighting){e.__gcliHighlighting=!0;var n=e.style.background;e.style.background=t?"green":"red",setTimeout(function(){e.style.background=n,delete e.__gcliHighlighting},500)}}t.flashNodes=function(e,t){e.style?n(e,t):Array.prototype.forEach.call(e,function(e){n(e,t)})},t.exec=function(e,t){var n=JSON.stringify(t),i=new XMLHttpRequest;i.open("POST","/exec/",!0),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.setRequestHeader("Content-Length",n.length),i.onreadystatechange=function(){if(4==i.readyState){if(i.status>=300||i.status<200)return void e.reject(i.responseText);e.resolve(i.responseText)}},i.send(n)},t.func=function(e,t){var n=JSON.stringify(t),i=new XMLHttpRequest;i.open("POST","/func/",!0),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.setRequestHeader("Content-Length",n.length),i.onreadystatechange=function(){if(4==i.readyState){if(i.status>=300||i.status<200)return void e.reject(JSON.parse(i.responseText));e.resolve(JSON.parse(i.responseText))}},i.send(n)}}),define("gcli/types/node",["require","exports","module","util/promise","util/host","util/l10n","gcli/types","gcli/types","gcli/types","gcli/types","gcli/argument"],function(e,t){function n(){}function i(e){if("allowEmpty"in e&&"boolean"!=typeof e.allowEmpty)throw new Error("Legal values for allowEmpty are [true|false]");this.allowEmpty=e.allowEmpty}var r=e("util/promise"),o=e("util/host"),s=e("util/l10n"),a=e("gcli/types"),l=e("gcli/types").Type,c=e("gcli/types").Status,u=e("gcli/types").Conversion,h=e("gcli/argument").BlankArgument;t.startup=function(){a.registerType(n),a.registerType(i)},t.shutdown=function(){a.unregisterType(n),a.unregisterType(i)};var d=void 0;"undefined"!=typeof document&&(d=document),t._empty=[],t.setDocument=function(e){d=e,null!=d&&(t._empty=d.querySelectorAll("x>:root"))},t.unsetDocument=function(){d=void 0,t._empty=void 0},t.getDocument=function(){return d},n.prototype=Object.create(l.prototype),n.prototype.stringify=function(e){return null==e?"":e.__gcliQuery||"Error"},n.prototype.parse=function(e){if(""===e.text)return r.resolve(new u(void 0,e,c.INCOMPLETE));var t;try{t=d.querySelectorAll(e.text)}catch(n){return r.resolve(new u(void 0,e,c.ERROR,s.lookup("nodeParseSyntax")))}if(0===t.length)return r.resolve(new u(void 0,e,c.INCOMPLETE,s.lookup("nodeParseNone")));if(1===t.length){var i=t.item(0);return i.__gcliQuery=e.text,o.flashNodes(i,!0),r.resolve(new u(i,e,c.VALID,""))}o.flashNodes(t,!1);var a=s.lookupFormat("nodeParseMultiple",[t.length]);return r.resolve(new u(void 0,e,c.ERROR,a))},n.prototype.name="node",i.prototype=Object.create(l.prototype),i.prototype.getBlank=function(){return new u(t._empty,new h,c.VALID)},i.prototype.stringify=function(e){return null==e?"":e.__gcliQuery||"Error"},i.prototype.parse=function(e){if(""===e.text)return r.resolve(new u(void 0,e,c.INCOMPLETE));var t;try{t=d.querySelectorAll(e.text)}catch(n){return r.resolve(new u(void 0,e,c.ERROR,s.lookup("nodeParseSyntax")))}return 0!==t.length||this.allowEmpty?(o.flashNodes(t,!1),r.resolve(new u(t,e,c.VALID,""))):r.resolve(new u(void 0,e,c.INCOMPLETE,s.lookup("nodeParseNone")))},i.prototype.name="nodelist"}),define("gcli/types/resource",["require","exports","module","util/promise","gcli/types","gcli/types/selection"],function(e,t){function n(e,t,n,i){this.name=e,this.type=t,this.inline=n,this.element=i}function i(e){this.name=e.href,this.name||(this.name=e.ownerNode.id?"css#"+e.ownerNode.id:"inline-css"),this.inline=null==e.href,this.type=n.TYPE_CSS,this.element=e}function r(e){this.name=e.src,this.name||(this.name=e.id?"script#"+e.id:"inline-script"),this.inline=""===e.src||null==e.src,this.type=n.TYPE_SCRIPT,this.element=e}function o(e,t){var n={};e.forEach(function(e){null==n[e.name]&&(n[e.name]=[]),n[e.name].push(e)}),Object.keys(n).forEach(function(e){var i=n[e];i.length>1&&t(i)})}function s(e){if(this.include=e.include,this.include!==n.TYPE_SCRIPT&&this.include!==n.TYPE_CSS&&null!=this.include)throw new Error("invalid include property: "+this.include)}var a=e("util/promise"),l=e("gcli/types"),c=e("gcli/types/selection").SelectionType;t.startup=function(){l.registerType(s)},t.shutdown=function(){l.unregisterType(s),t.clearResourceCache()},t.clearResourceCache=function(){h.clear()};var u=void 0;"undefined"!=typeof document&&(u=document),t.setDocument=function(e){u=e},t.unsetDocument=function(){h.clear(),u=void 0},t.getDocument=function(){return u},n.prototype.getContents=function(){throw new Error("not implemented")},n.TYPE_SCRIPT="text/javascript",n.TYPE_CSS="text/css",i.prototype=Object.create(n.prototype),i.prototype.loadContents=function(e){e(this.element.ownerNode.innerHTML)},i._getAllStyles=function(){var e=[];return null==u?e:(Array.prototype.forEach.call(u.styleSheets,function(t){i._getStyle(t,e)}),o(e,function(e){for(var t=0;t<e.length;t++)e[t].name=e[t].name+"-"+t}),e)},i._getStyle=function(e,t){var n=h.get(e);n||(n=new i(e),h.add(e,n)),t.push(n);try{Array.prototype.forEach.call(e.cssRules,function(e){e.type==CSSRule.IMPORT_RULE&&e.styleSheet&&i._getStyle(e.styleSheet,t)},this)}catch(r){}},r.prototype=Object.create(n.prototype),r.prototype.loadContents=function(e){if(this.inline)e(this.element.innerHTML);else{var t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState===t.DONE&&e(t.responseText)},t.open("GET",this.element.src,!0),t.send()}},r._getAllScripts=function(){if(null==u)return[];var e=u.querySelectorAll("script"),t=Array.prototype.map.call(e,function(e){var t=h.get(e);return t||(t=new r(e),h.add(e,t)),t});return o(t,function(e){for(var t=0;t<e.length;t++)e[t].name=e[t].name+"-"+t}),t},s.prototype=Object.create(c.prototype),s.prototype.getLookup=function(){var e=[];return this.include!==n.TYPE_SCRIPT&&Array.prototype.push.apply(e,i._getAllStyles()),this.include!==n.TYPE_CSS&&Array.prototype.push.apply(e,r._getAllScripts()),a.resolve(e.map(function(e){return{name:e.name,value:e}}))},s.prototype.name="resource";var h={_cached:[],get:function(e){for(var t=0;t<h._cached.length;t++)if(h._cached[t].node===e)return h._cached[t].resource;return null},add:function(e,t){h._cached.push({node:e,resource:t})},clear:function(){h._cached=[]}}}),define("gcli/settings",["require","exports","module","util/util","gcli/types"],function(e,t){function n(){}function i(e,t,n,i){this.name=e,this.type=t,this.description=n,this._defaultValue=i,this.onChange=o.createEvent("Setting.onChange"),this.setDefault()}var r,o=e("util/util"),s=e("gcli/types"),a={},l={};t.setDefaults=function(e){Object.keys(e).forEach(function(t){void 0===l[t]&&(l[t]=e[t])})},t.startup=function(){r=new n,r.load(l)},t.shutdown=function(){},t.getAll=function(e){var t=[];return Object.keys(a).forEach(function(n){(null==e||-1!==n.indexOf(e))&&t.push(a[n])}.bind(this)),t.sort(function(e,t){return e.name.localeCompare(t.name)}.bind(this)),t},t.addSetting=function(e){var n=s.getType(e.type),r=new i(e.name,n,e.description,e.defaultValue);return a[r.name]=r,t.onChange({added:r.name}),r},t.getSetting=function(e){return a[e]},t.removeSetting=function(e){var n="string"==typeof nameOrPrefSpec?e:e.name;delete a[n],t.onChange({removed:n})},t.onChange=o.createEvent("Settings.onChange"),n.prototype.load=function(e){if("undefined"!=typeof localStorage){var t=localStorage.getItem("gcli-settings");if(null!=t){var n=JSON.parse(t);Object.keys(n).forEach(function(t){e[t]=n[t]})}}},n.prototype.save=function(e){if("undefined"!=typeof localStorage){var t=JSON.stringify(e);localStorage.setItem("gcli-settings",t)}},t.LocalSettingStorage=n,i.prototype.setDefault=function(){this.value=this._defaultValue},Object.defineProperty(i.prototype,"value",{get:function(){return l[this.name]},set:function(e){l[this.name]=e,r.save(l),this.onChange({setting:this,value:e})},enumerable:!0})}),define("gcli/types/setting",["require","exports","module","gcli/settings","gcli/types","gcli/types/selection","gcli/types/basic"],function(e,t){function n(){r.onChange.add(function(){this.clearCache()},this)}function i(){}var r=e("gcli/settings"),o=e("gcli/types"),s=e("gcli/types/selection").SelectionType,a=e("gcli/types/basic").DelegateType;t.startup=function(){o.registerType(n),o.registerType(i)},t.shutdown=function(){o.unregisterType(n),o.unregisterType(i)};var l=null;n.prototype=new s({cacheable:!0}),n.prototype.lookup=function(){return r.getAll().map(function(e){return{name:e.name,value:e}})},n.prototype.noMatch=function(){l=null},n.prototype.stringify=function(e){return l=e,s.prototype.stringify.call(this,e)},n.prototype.parse=function(e){var t=s.prototype.parse.call(this,e);return t.then(function(e){l=e.value}),t},n.prototype.name="setting",i.prototype=Object.create(a.prototype),i.prototype.delegateType=function(){return null!=l?l.type:o.getType("blank")},i.prototype.name="settingValue"}),define("util/domtemplate",["require","exports","module"],function(require,exports,module){function template(e,t,n){var i=new Templater(n||{});return i.processNode(e,t),i}function Templater(e){null==e&&(e={allowEval:!0}),this.options=e,this.stack=e.stack&&Array.isArray(e.stack)?e.stack:"string"==typeof e.stack?[e.stack]:[],this.nodes=[]}Templater.prototype._templateRegion=/\$\{([^}]*)\}/g,Templater.prototype._splitSpecial=/\uF001|\uF002/,Templater.prototype._isPropertyScript=/^[_a-zA-Z0-9.]*$/,Templater.prototype.processNode=function(e,t){"string"==typeof e&&(e=document.getElementById(e)),null==t&&(t={}),this.stack.push(e.nodeName+(e.id?"#"+e.id:""));var n=!1;try{if(e.attributes&&e.attributes.length){if(e.hasAttribute("foreach"))return void this._processForEach(e,t);if(e.hasAttribute("if")&&!this._processIf(e,t))return;this.nodes.push(t.__element),t.__element=e,n=!0;for(var i=Array.prototype.slice.call(e.attributes),r=0;r<i.length;r++){var o=i[r].value,s=i[r].name;this.stack.push(s);try{if("save"===s)o=this._stripBraces(o),this._property(o,t,e),e.removeAttribute("save");else if("on"===s.substring(0,2))if("${"===o.substring(0,2)&&"}"===o.slice(-1)&&-1===o.indexOf("${",2)){o=this._stripBraces(o);var a=this._property(o,t);if("function"==typeof a){e.removeAttribute(s);var l=e.hasAttribute("capture"+s.substring(2));e.addEventListener(s.substring(2),a,l),l&&e.removeAttribute("capture"+s.substring(2))}else e.setAttribute(s,a)}else e.setAttribute(s,this._processString(o,t));else{e.removeAttribute(s),"_"===s.charAt(0)&&(s=s.substring(1));var c;0===o.indexOf("${")&&"}"===o.charAt(o.length-1)?(c=this._envEval(o.slice(2,-1),t,o),c&&"function"==typeof c.then?(e.setAttribute(s,""),c.then(function(t){e.setAttribute(s,t)}.bind(this)).then(null,console.error)):(this.options.blankNullUndefined&&null==c&&(c=""),e.setAttribute(s,c))):e.setAttribute(s,this._processString(o,t))}}finally{this.stack.pop()}}}for(var u=Array.prototype.slice.call(e.childNodes),h=0;h<u.length;h++)this.processNode(u[h],t);3===e.nodeType&&this._processTextNode(e,t)}finally{n&&(t.__element=this.nodes.pop()),this.stack.pop()}},Templater.prototype._processString=function(e,t){return e.replace(this._templateRegion,function(n){var i=this._envEval(n.slice(2,-1),t,e);return this.options.blankNullUndefined&&null==i?"":i}.bind(this))},Templater.prototype._processIf=function(e,t){this.stack.push("if");try{var n=e.getAttribute("if"),i=this._stripBraces(n),r=!0;try{var o=this._envEval(i,t,n);r=!!o}catch(s){this._handleError("Error with '"+i+"'",s),r=!1}return r||e.parentNode.removeChild(e),e.removeAttribute("if"),r}finally{this.stack.pop()}},Templater.prototype._processForEach=function(e,t){this.stack.push("foreach");try{var n=e.getAttribute("foreach"),i=n,r="param";if("$"===i.charAt(0))i=this._stripBraces(i);else{var o=i.split(" in ");r=o[0].trim(),i=this._stripBraces(o[1].trim())}e.removeAttribute("foreach");try{var s=this._envEval(i,t,n);this._handleAsync(s,e,function(n,i){this._processForEachLoop(n,e,i,t,r)}.bind(this)),e.parentNode.removeChild(e)}catch(a){this._handleError("Error with '"+i+"'",a)}}finally{this.stack.pop()}},Templater.prototype._processForEachLoop=function(e,t,n,i,r){if(Array.isArray(e))e.forEach(function(e,o){this._processForEachMember(e,t,n,i,r,""+o)},this);else for(var o in e)e.hasOwnProperty(o)&&this._processForEachMember(o,t,n,i,r,o)},Templater.prototype._processForEachMember=function(e,t,n,i,r,o){this.stack.push(o);try{this._handleAsync(e,n,function(e,n){if(i[r]=e,null!=n.parentNode)if("loop"===t.nodeName.toLowerCase())for(var o=0;o<t.childNodes.length;o++){var s=t.childNodes[o].cloneNode(!0);n.parentNode.insertBefore(s,n),this.processNode(s,i)}else{var s=t.cloneNode(!0);s.removeAttribute("foreach"),n.parentNode.insertBefore(s,n),this.processNode(s,i)}delete i[r]}.bind(this))}finally{this.stack.pop()}},Templater.prototype._processTextNode=function(e,t){var n=e.data;n=n.replace(this._templateRegion,"$$$1");var i=n.split(this._splitSpecial);i.length>1&&(i.forEach(function(n){null!==n&&void 0!==n&&""!==n&&("$"===n.charAt(0)&&(n=this._envEval(n.slice(1),t,e.data)),this._handleAsync(n,e,function(e,t){var n=t.ownerDocument;if(null==e&&(e=this.options.blankNullUndefined?"":""+e),"function"==typeof e.cloneNode)e=this._maybeImportNode(e,n),t.parentNode.insertBefore(e,t);
else if("function"==typeof e.item&&e.length){var i=Array.prototype.slice.call(e,0);i.forEach(function(e){var i=this._maybeImportNode(e,n);t.parentNode.insertBefore(i,t)}.bind(this))}else e=n.createTextNode(e.toString()),t.parentNode.insertBefore(e,t)}.bind(this)))},this),e.parentNode.removeChild(e))},Templater.prototype._maybeImportNode=function(e,t){return e.ownerDocument===t?e:t.importNode(e,!0)},Templater.prototype._handleAsync=function(e,t,n){if(null!=e&&"function"==typeof e.then){var i=t.ownerDocument.createElement("span");t.parentNode.insertBefore(i,t),e.then(function(e){n(e,i),null!=i.parentNode&&i.parentNode.removeChild(i)}.bind(this)).then(null,function(e){console.error(e.stack)})}else n(e,t)},Templater.prototype._stripBraces=function(e){return e.match(this._templateRegion)?e.slice(2,-1):(this._handleError("Expected "+e+" to match ${...}"),e)},Templater.prototype._property=function(e,t,n){try{"string"==typeof e&&(e=e.split("."));var i=t[e[0]];return 1===e.length?(void 0!==n&&(t[e[0]]=n),"function"==typeof i?i.bind(t):i):i?this._property(e.slice(1),i,n):(this._handleError('"'+e[0]+'" is undefined'),null)}catch(r){return this._handleError("Path error with '"+e+"'",r),"${"+e+"}"}},Templater.prototype._envEval=function(script,data,frame){try{if(this.stack.push(frame.replace(/\s+/g," ")),this._isPropertyScript.test(script))return this._property(script,data);if(!this.options.allowEval)return this._handleError("allowEval is not set, however '"+script+"' can not be resolved using a simple property path."),"${"+script+"}";with(data)return eval(script)}catch(ex){return this._handleError("Template error evaluating '"+script+"'",ex),"${"+script+"}"}finally{this.stack.pop()}},Templater.prototype._handleError=function(e,t){this._logError(e+" (In: "+this.stack.join(" > ")+")"),t&&this._logError(t)},Templater.prototype._logError=function(e){console.log(e)},"undefined"!=typeof exports&&(exports.template=template)}),define("gcli/ui/view",["require","exports","module","util/util","util/domtemplate"],function(e,t){var n=e("util/util"),i=e("util/domtemplate");t.createView=function(e){if(null==e.html)throw new Error("options.html is missing");return{isView:!0,appendTo:function(e,t){t===!0&&n.clearElement(e),e.appendChild(this.toDom(e.ownerDocument))},toDom:function(t){e.css&&n.importCss(e.css,t,e.cssId);var r=n.toDom(t,e.html);return i.template(r,e.data||{},e.options||{}),r}}}}),define("gcli/cli",["require","exports","module","util/promise","util/util","util/l10n","gcli/ui/view","gcli/canon","gcli/canon","gcli/types","gcli/types","gcli/types/basic","gcli/types/basic","gcli/types/basic","gcli/types/basic","gcli/argument","gcli/argument","gcli/argument","gcli/argument","gcli/argument","gcli/argument"],function(e,t){function n(e,t){this.param=e,this.conversion=void 0,this.paramIndex=t,this.onAssignmentChange=u.createEvent("Assignment.onAssignmentChange")}function i(){var e={name:"__command",type:"command"},t=this;Object.defineProperty(e,"description",{get:function(){var e=t.value;return e&&e.description?e.description:"The command to execute"},enumerable:!0}),this.param=new p.Parameter(e),this.paramIndex=-1,this.onAssignmentChange=u.createEvent("CommandAssignment.onAssignmentChange")}function r(e,t){this.param=new p.Parameter({name:"__unassigned",description:h.lookup("cliOptions"),type:{name:"param",requisition:e,isIncompleteName:"-"===t.text.charAt(0)}}),this.paramIndex=-1,this.onAssignmentChange=u.createEvent("UnassignedAssignment.onAssignmentChange"),this.conversion=u.synchronize(this.param.type.parse(t,e)),this.conversion.assign(this)}function o(e,t,n){if(this.environment=e,this.document=t,null==this.document)try{this.document=document}catch(r){}this.commandOutputManager=n||new f,this.commandAssignment=new i;var o=this.setAssignment(this.commandAssignment,null,{skipArgUpdate:!0});u.synchronize(o),this._assignments={},this.assignmentCount=0,this._args=[],this._unassigned=[],this._structuralChangeInProgress=!1,this.commandAssignment.onAssignmentChange.add(this._commandAssignmentChanged,this),this.commandAssignment.onAssignmentChange.add(this._assignmentChanged,this),this.onAssignmentChange=u.createEvent("Requisition.onAssignmentChange"),this.onTextChange=u.createEvent("Requisition.onTextChange")}function s(e){for(var t=0;t<e.length;t++){var n=e.charAt(t);if(" "===n||'"'===n||"'"===n||"{"===n||"}"===n||"\\"===n)return!1}return!0}function a(e){e=e||{},this.command=e.command||"",this.args=e.args||{},this.typed=e.typed||"",this.canonical=e.canonical||"",this.hidden=e.hidden===!0?!0:!1,this.data=void 0,this.completed=!1,this.error=!1,this.start=new Date,this.deferred=c.defer(),this.then=this.deferred.promise.then,this.onClose=u.createEvent("Output.onClose"),this.onChange=u.createEvent("Output.onChange")}var l,c=e("util/promise"),u=e("util/util"),h=e("util/l10n"),d=e("gcli/ui/view"),p=e("gcli/canon"),f=e("gcli/canon").CommandOutputManager,m=e("gcli/types").Status,g=e("gcli/types").Conversion,v=e("gcli/types/basic").ArrayType,y=e("gcli/types/basic").StringType,_=e("gcli/types/basic").BooleanType,b=e("gcli/types/basic").NumberType,C=e("gcli/argument").Argument,w=e("gcli/argument").ArrayArgument,S=e("gcli/argument").NamedArgument,E=e("gcli/argument").TrueNamedArgument,x=e("gcli/argument").MergedArgument,L=e("gcli/argument").ScriptArgument;t.startup=function(){l=p.addCommand(k)},t.shutdown=function(){p.removeCommand(k.name),l=void 0},Object.defineProperty(n.prototype,"arg",{get:function(){return this.conversion.arg},enumerable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.conversion.value},enumerable:!0}),n.prototype.getMessage=function(){return this.conversion.message?this.conversion.message:""},n.prototype.getPredictions=function(){return this.conversion.getPredictions()},n.prototype.getPredictionAt=function(e){return null==e&&(e=0),this.isInName()?c.resolve(void 0):this.getPredictions().then(function(t){return 0===t.length?void 0:(e%=t.length,0>e&&(e=t.length+e),t[e])}.bind(this),console.error)},n.prototype.isInName=function(){return"NamedArgument"===this.conversion.arg.type&&" "!==this.conversion.arg.prefix.slice(-1)},n.prototype.ensureVisibleArgument=function(){if("BlankArgument"!==this.conversion.arg.type)return!1;var e=this.conversion.arg.beget({text:"",prefixSpace:this.param instanceof i});return this.conversion=u.synchronize(this.param.type.parse(e)),this.conversion.assign(this),!0},n.prototype.getStatus=function(e){return this.param.isDataRequired&&!this.conversion.isDataProvided()?m.INCOMPLETE:this.param.isDataRequired||"BlankArgument"!==this.arg.type?this.conversion.getStatus(e):m.VALID},n.prototype.toString=function(){return this.conversion.toString()},Object.defineProperty(n.prototype,"_summaryJson",{get:function(){var e="<async>";return this.getPredictions().then(function(t){e=t.length},console.log),{param:this.param.name+"/"+this.param.type.name,defaultValue:this.param.defaultValue,arg:this.conversion.arg._summaryJson,value:this.value,message:this.getMessage(),status:this.getStatus().toString(),predictionCount:e}},enumerable:!0}),t.Assignment=n;var T=eval;t.setEvalFunction=function(e){T=e},t.unsetEvalFunction=function(){T=void 0};var k={name:"{",params:[{name:"javascript",type:"javascript",description:""}],hidden:!0,returnType:"object",description:{key:"cliEvalJavascript"},exec:function(e){return T(e.javascript)},evalRegexp:/^\s*{\s*/};i.prototype=Object.create(n.prototype),i.prototype.getStatus=function(e){return m.combine(n.prototype.getStatus.call(this,e),this.conversion.value&&this.conversion.value.exec?m.VALID:m.INCOMPLETE)},t.CommandAssignment=i,r.prototype=Object.create(n.prototype),r.prototype.getStatus=function(){return this.conversion.getStatus()},o.prototype.destroy=function(){this.commandAssignment.onAssignmentChange.remove(this._commandAssignmentChanged,this),this.commandAssignment.onAssignmentChange.remove(this._assignmentChanged,this),delete this.document,delete this.environment},o.prototype._assignmentChanged=function(e){null!=e.oldConversion&&e.conversion.valueEquals(e.oldConversion)||this._structuralChangeInProgress||(this.onAssignmentChange(e),e.conversion.argEquals(e.oldConversion)||this.onTextChange())},o.prototype._commandAssignmentChanged=function(e){if(!e.conversion.valueEquals(e.oldConversion)){this._assignments={};var t=this.commandAssignment.value;if(t)for(var i=0;i<t.params.length;i++){var r=t.params[i],o=new n(r,i),s=this.setAssignment(o,null,{skipArgUpdate:!0});u.synchronize(s),o.onAssignmentChange.add(this._assignmentChanged,this),this._assignments[r.name]=o}this.assignmentCount=Object.keys(this._assignments).length}},o.prototype.getAssignment=function(e){var t="string"==typeof e?e:Object.keys(this._assignments)[e];return this._assignments[t]||void 0},o.prototype._getFirstBlankPositionalAssignment=function(){var e=null;return Object.keys(this._assignments).some(function(t){var n=this.getAssignment(t);return"BlankArgument"===n.arg.type&&n.param.isPositionalAllowed?(e=n,!0):!1},this),e},o.prototype.getParameterNames=function(){return Object.keys(this._assignments)},o.prototype.cloneAssignments=function(){return Object.keys(this._assignments).map(function(e){return this._assignments[e]},this)},o.prototype.getStatus=function(){var e=m.VALID;if(0!==this._unassigned.length){var t=!0;this._unassigned.forEach(function(e){e.param.type.isIncompleteName||(t=!1)}),e=t?m.INCOMPLETE:m.ERROR}return this.getAssignments(!0).forEach(function(t){var n=t.getStatus();n>e&&(e=n)},this),e===m.INCOMPLETE&&(e=m.ERROR),e},o.prototype.getArgsObject=function(){var e={};return this.getAssignments().forEach(function(t){e[t.param.name]=t.conversion.isDataProvided()?t.value:t.param.defaultValue},this),e},o.prototype.getAssignments=function(e){var t=[];return e===!0&&t.push(this.commandAssignment),Object.keys(this._assignments).forEach(function(e){t.push(this.getAssignment(e))},this),t},o.prototype.setAssignment=function(e,t,n){function i(t){var n=e.conversion;e.conversion=t,e.conversion.assign(e),e.conversion.equals(n)||e.onAssignmentChange({assignment:e,conversion:e.conversion,oldConversion:n})}if(n=n||{},n.skipArgUpdate!==!0)for(var r=e.arg.getArgs(),o=t.getArgs(),s=Math.max(r.length,o.length),a=0;s>a;a++)if(a>=r.length||"BlankArgument"===r[a].type)this._args.push(o[a]);else{var l=this._args.indexOf(r[a]);if(-1===l)throw console.error("Couldn't find ",r[a]," in ",this._args),new Error("Couldn't find "+r[a]);a>=o.length?this._args.splice(l,1):(n.matchPadding&&(0===o[a].prefix.length&&0!==this._args[l].prefix.length&&(o[a].prefix=this._args[l].prefix),0===o[a].suffix.length&&0!==this._args[l].suffix.length&&(o[a].suffix=this._args[l].suffix)),this._args[l]=o[a])}if(null==t)i(e.param.type.getBlank());else{if("function"!=typeof t.getStatus)return e.param.type.parse(t).then(function(e){i(e)}.bind(this),console.error);i(t)}return c.resolve(void 0)},o.prototype.setBlankArguments=function(){this.getAssignments().forEach(function(e){var t=this.setAssignment(e,null,{skipArgUpdate:!0});u.synchronize(t)},this)},o.prototype.complete=function(e,t){var n=this.getAssignmentAt(e.start),i=n.getPredictionAt(t);return i.then(function(e){var t=[];if(this.onTextChange.holdFire(),null==e){if(" "!==n.arg.suffix.slice(-1)&&n.getStatus()===m.VALID&&t.push(this._addSpace(n)),n.isInName()){var i=n.conversion.arg.beget({prefixPostSpace:!0}),o=this.setAssignment(n,i);t.push(o)}}else{var s=n.arg.beget({text:e.name,dontQuote:n===this.commandAssignment}),a=this.setAssignment(n,s);e.incomplete||(a=a.then(function(){return this._addSpace(n).then(function(){return n instanceof r?this.update(this.toString()):void 0}.bind(this))}.bind(this))),t.push(a)}return u.all(t).then(function(){this.onTextChange(),this.onTextChange.resumeFire()}.bind(this))}.bind(this))},o.prototype._assertArgsAssigned=function(){this._args.forEach(function(e){null==e.assignment&&console.log("No assignment for "+e)},this)},o.prototype._addSpace=function(e){var t=e.conversion.arg.beget({suffixSpace:!0});return t!==e.conversion.arg?this.setAssignment(e,t):c.resolve(void 0)},o.prototype.decrement=function(e){var t=e.param.type.decrement(e.conversion.value);if(null!=t){var n=e.param.type.stringify(t),i=e.conversion.arg.beget({text:n}),r=this.setAssignment(e,i);u.synchronize(r)}},o.prototype.increment=function(e){var t=e.param.type.increment(e.conversion.value);if(null!=t){var n=e.param.type.stringify(t),i=e.conversion.arg.beget({text:n}),r=this.setAssignment(e,i);u.synchronize(r)}},o.prototype.toCanonicalString=function(){var e=[],t=this.commandAssignment.value?this.commandAssignment.value.name:this.commandAssignment.arg.text;return e.push(t),Object.keys(this._assignments).forEach(function(t){var n=this._assignments[t],i=n.param.type;n.value!==n.param.defaultValue&&(e.push(" "),e.push(i.stringify(n.value)))},this),"{"===t&&-1===this.getAssignment(0).arg.suffix.indexOf("}")&&e.push(" }"),e.join("")},o.prototype.createInputArgTrace=function(){if(!this._args)throw new Error("createInputMap requires a command line. See source.");var e,t=[];return this._args.forEach(function(n){for(e=0;e<n.prefix.length;e++)t.push({arg:n,character:n.prefix[e],part:"prefix"});for(e=0;e<n.text.length;e++)t.push({arg:n,character:n.text[e],part:"text"});for(e=0;e<n.suffix.length;e++)t.push({arg:n,character:n.suffix[e],part:"suffix"})}),t},o.prototype.toString=function(){return this._args?this._args.map(function(e){return e.toString()}).join(""):this.toCanonicalString()},o.prototype.typedEndsWithSeparator=function(){if(this._args){var e=this._args.slice(-1)[0];return" "===e.suffix.slice(-1)?!0:""===e.text&&""===e.suffix&&" "===e.prefix.slice(-1)}return" "===this.toCanonicalString().slice(-1)},o.prototype.getInputStatusMarkup=function(e){var t=this.createInputArgTrace();e=0===e?0:e-1;for(var n=t[e],r=[],o=0;o<t.length;o++){var s=t[o],a=s.arg,l=m.VALID;if("text"===s.part&&(l=a.assignment.getStatus(a),l===m.INCOMPLETE)){var c="NamedArgument"===n.arg.assignment.arg.type,u="text"===n.part||c&&"suffix"===n.part;a.assignment===n.arg.assignment&&u||a.assignment instanceof i||(l=m.ERROR)}r.push({status:l,string:s.character})}for(var o=0;o<r.length-1;)r[o].status===r[o+1].status?(r[o].string+=r[o+1].string,r.splice(o+1,1)):o++;return r},o.prototype.getAssignmentAt=function(e){if(!this._args)throw console.trace(),new Error("Missing args");if(0===e)return this.commandAssignment;var t,n,i=[];for(t=0;t<this._args.length;t++){var r=this._args[t],o=r.assignment;for(n=0;n<r.prefix.length;n++)i.push(o);for(n=0;n<r.text.length;n++)i.push(o);if("NamedArgument"===r.assignment.arg.type);else if(this._args.length>t+1)o=this._args[t+1].assignment;else{var s=this._getFirstBlankPositionalAssignment();null!=s&&(o=s)}for(n=0;n<r.suffix.length;n++)i.push(o)}var a=i[e-1];if(!a)throw new Error("Missing assignment. cursor="+e+" text="+this.toString());return a},o.prototype.exec=function(e){var n=null,i=null,r=!1;if(e&&e.hidden&&(r=!0),e&&("string"==typeof input?this.update(e):"string"==typeof e.typed?this.update(e.typed):null!=e.command&&(n=p.getCommand(e.command),n||console.error("Command not found: "+e.command),i=e.args)),n||(n=this.commandAssignment.value,i=this.getArgsObject()),!n)throw new Error("Unknown command");var o=this.toString();k.evalRegexp.test(o)&&(o=o.replace(k.evalRegexp,""),o=o.replace(/\s*}\s*$/,""));var s=new a({command:n,args:i,typed:o,canonical:this.toCanonicalString(),hidden:r});this.commandOutputManager.onOutput({output:s});var l=function(e){s.complete(e,!1)},c=function(e){s.complete(e,!0)},u=function(e){s.changed(e)};try{var h=t.createExecutionContext(this),d=n.exec(i,h);this._then(d,l,c,u)}catch(f){console.error(f),c(f)}return this.clear(),s},o.prototype.updateExec=function(e,t){return this.update(e).then(function(){return this.exec(t)}.bind(this))},o.prototype.clear=function(){this._structuralChangeInProgress=!0;var e=new C("","","");this._args=[e];var t=this.commandAssignment.param.type,n=u.synchronize(t.parse(e));this.setAssignment(this.commandAssignment,n,{skipArgUpdate:!0}),this._structuralChangeInProgress=!1,this.onTextChange()},o.prototype._then=function(e,t,n,i){var r=null;null!=e&&"function"==typeof e.then?r=e.then:null!=e&&null!=e.promise&&"function"==typeof e.promise.then&&(r=e.promise.then),null!=r?r(t,n,i):t(e)},o.prototype.update=function(e){this._structuralChangeInProgress=!0,this._args=this._tokenize(e);var t=this._args.slice(0);return this._split(t).then(function(){return this._assign(t).then(function(){this._structuralChangeInProgress=!1,this.onTextChange()}.bind(this))}.bind(this))},Object.defineProperty(o.prototype,"_summaryJson",{get:function(){var e={$args:this._args.map(function(e){return e._summaryJson}),_command:this.commandAssignment._summaryJson,_unassigned:this._unassigned.forEach(function(e){return e._summaryJson})};return Object.keys(this._assignments).forEach(function(t){e[t]=this.getAssignment(t)._summaryJson}.bind(this)),e},enumerable:!0});var N={WHITESPACE:1,SIMPLE:2,SINGLE_Q:3,DOUBLE_Q:4,SCRIPT:5};o.prototype._tokenize=function(e){function t(e){return e.replace(/\uF000/g," ").replace(/\uF001/g,"'").replace(/\uF002/g,'"').replace(/\uF003/g,"{").replace(/\uF004/g,"}")}if(null==e||0===e.length)return[new C("","","")];if(s(e))return[new C(e,"","")];var n=N.WHITESPACE;e=e.replace(/\\\\/g,"\\").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\ /g,"").replace(/\\'/g,"").replace(/\\"/g,"").replace(/\\{/g,"").replace(/\\}/g,"");for(var i=0,r=0,o="",a=[],l=0;;){var c,u=e[i];switch(n){case N.WHITESPACE:"'"===u?(o=e.substring(r,i+1),n=N.SINGLE_Q,r=i+1):'"'===u?(o=e.substring(r,i+1),n=N.DOUBLE_Q,r=i+1):"{"===u?(o=e.substring(r,i+1),n=N.SCRIPT,l++,r=i+1):/ /.test(u)||(o=e.substring(r,i),n=N.SIMPLE,r=i);break;case N.SIMPLE:" "===u&&(c=t(e.substring(r,i)),a.push(new C(c,o,"")),n=N.WHITESPACE,r=i,o="");break;case N.SINGLE_Q:"'"===u&&(c=t(e.substring(r,i)),a.push(new C(c,o,u)),n=N.WHITESPACE,r=i+1,o="");break;case N.DOUBLE_Q:'"'===u&&(c=t(e.substring(r,i)),a.push(new C(c,o,u)),n=N.WHITESPACE,r=i+1,o="");break;case N.SCRIPT:"{"===u?l++:"}"===u&&(l--,0===l&&(c=t(e.substring(r,i)),a.push(new L(c,o,u)),n=N.WHITESPACE,r=i+1,o=""))}if(i++,i>=e.length){if(n===N.WHITESPACE){if(i!==r){var h=e.substring(r,i),d=a[a.length-1];d?d.suffix+=h:a.push(new C("",h,""))}}else n===N.SCRIPT?(c=t(e.substring(r,i+1)),a.push(new L(c,o,""))):(c=t(e.substring(r,i+1)),a.push(new C(c,o,"")));break}}return a},o.prototype._split=function(e){var t={skipArgUpdate:!0},n=void 0;if("ScriptArgument"===e[0].type)return n=new g(l,new L),this.setAssignment(this.commandAssignment,n,t);for(var i=1,r=this.commandAssignment.param.type;i<=e.length;){var o=1===i?e[0]:new x(e,0,i);if(n=u.synchronize(r.parse(o,1===i&&e.length>1)),!n.value||n.value.exec)break;i++}for(var s=0;i>s;s++)e.shift();return this.setAssignment(this.commandAssignment,n,t)},o.prototype._addUnassignedArgs=function(e){e.forEach(function(e){this._unassigned.push(new r(this,e))}.bind(this))},o.prototype._assign=function(e){var t={skipArgUpdate:!0};this._unassigned=[];var n=[];if(!this.commandAssignment.value)return this._addUnassignedArgs(e),u.all(n);if(0===e.length)return this.setBlankArguments(),u.all(n);if(0===this.assignmentCount)return this._addUnassignedArgs(e),u.all(n);if(1===this.assignmentCount){var i=this.getAssignment(0);if(i.param.type instanceof y){var o=1===e.length?e[0]:new x(e);return n.push(this.setAssignment(i,o,t)),u.all(n)}}var s=this.getParameterNames(),a={};return this.getAssignments(!1).forEach(function(i){for(var r=0;r<e.length;)if(i.param.isKnownAs(e[r].text)){var o=e.splice(r,1)[0];if(s=s.filter(function(e){return e!==i.param.name}),i.param.type instanceof _)o=new E(o);else{var l=null;r+1<=e.length&&(l=e.splice(r,1)[0]),o=new S(o,l)}if(i.param.type instanceof v){var c=a[i.param.name];c||(c=new w,a[i.param.name]=c),c.addArgument(o)}else n.push(this.setAssignment(i,o,t))}else r++},this),s.forEach(function(i){var o=this.getAssignment(i);if(!o.param.isPositionalAllowed)return void n.push(this.setAssignment(o,null,t));if(o.param.type instanceof v){var s=a[o.param.name];s||(s=new w,a[o.param.name]=s),s.addArguments(e),e=[]}else if(0===e.length)n.push(this.setAssignment(o,null,t));else{var l=e.splice(0,1)[0],c=o.param.type instanceof b?/-[-a-zA-Z_]/.test(l.text):"-"===l.text.charAt(0);c?this._unassigned.push(new r(this,l)):n.push(this.setAssignment(o,l,t))}},this),Object.keys(a).forEach(function(e){var i=this.getAssignment(e);n.push(this.setAssignment(i,a[e],t))},this),this._addUnassignedArgs(e),u.all(n)},t.Requisition=o,a.prototype.changed=function(e,t){this.data=e,t=t||{},t.output=this,this.onChange(t)},a.prototype.complete=function(e,t,n){this.end=new Date,this.duration=this.end.getTime()-this.start.getTime(),this.completed=!0,this.error=t,this.changed(e,n),t?this.deferred.reject():this.deferred.resolve()},a.prototype.toDom=function(e){u.clearElement(e);var t=e.ownerDocument,n=this.data;if(null!=n){var i;"undefined"!=typeof HTMLElement&&n instanceof HTMLElement?i=n:n.isView?i=n.toDom(t):("terminal"===this.command.returnType?Array.isArray(n)?(i=u.createElement(t,"div"),n.forEach(function(){var e=u.createElement(t,"textarea");e.classList.add("gcli-row-subterminal"),e.readOnly=!0,i.appendChild(e)})):(i=u.createElement(t,"textarea"),i.classList.add("gcli-row-terminal"),i.readOnly=!0):i=u.createElement(t,"p"),"string"===this.command.returnType?i.textContent=n:u.setContents(i,n.toString()));for(var r=i.querySelectorAll("*[href]"),o=0;o<r.length;o++)r[o].setAttribute("target","_blank");e.appendChild(i)}},a.prototype.toString=function(e){return this.data.isView?this.data.toDom(e).textContent:"undefined"!=typeof HTMLElement&&this.data instanceof HTMLElement?this.data.textContent:null==this.data?"":this.data.toString()},t.Output=a,t.createExecutionContext=function(e){return{exec:e.exec.bind(e),update:e.update.bind(e),updateExec:e.updateExec.bind(e),document:e.document,environment:e.environment,createView:d.createView,defer:function(){return c.defer()},createPromise:function(){return c.defer()}}}}),define("text!gcli/ui/intro.html",[],function(){return'\r\n<div>\r\n  <p>${l10n.introTextOpening2}</p>\r\n\r\n  <p>\r\n    ${l10n.introTextCommands}\r\n    <span class="gcli-out-shortcut" onclick="${onclick}"\r\n        ondblclick="${ondblclick}" data-command="help">help</span>${l10n.introTextKeys2}\r\n    <code>${l10n.introTextF1Escape}</code>.\r\n  </p>\r\n\r\n  <button onclick="${onGotIt}" if="${showHideButton}">${l10n.introTextGo}</button>\r\n</div>\r\n'}),define("gcli/ui/intro",["require","exports","module","util/util","util/l10n","gcli/settings","gcli/ui/view","gcli/cli","text!gcli/ui/intro.html"],function(e,t){var n,i=e("util/util"),r=e("util/l10n"),o=e("gcli/settings"),s=e("gcli/ui/view"),a=e("gcli/cli").Output,l={name:"hideIntro",type:"boolean",description:r.lookup("hideIntroDesc"),defaultValue:!1};t.startup=function(){n=o.addSetting(l)},t.shutdown=function(){o.removeSetting(l),n=void 0},t.maybeShowIntro=function(e,t){if(!n.value){var i=new a;e.onOutput({output:i});var r=this.createView(t);i.complete(r)}},t.createView=function(t,o){return s.createView({html:e("text!gcli/ui/intro.html"),options:{stack:"intro.html"},data:{l10n:r.propertyLookup,onclick:function(e){i.updateCommand(e.currentTarget,t)},ondblclick:function(e){i.executeCommand(e.currentTarget,t)},showHideButton:null!=o,onGotIt:function(){n.value=!0,o.onClose()}}})}}),define("gcli/ui/focus",["require","exports","module","util/util","util/l10n","gcli/settings","gcli/canon"],function(e,t){function n(e,t){e=e||{},this._document=t.document||document,this._requisition=t.requisition,this._debug=e.debug||!1,this._blurDelay=e.blurDelay||150,this._window=this._document.defaultView,this._requisition.commandOutputManager.onOutput.add(this._outputted,this),this._blurDelayTimeout=null,this._monitoredElements=[],this._isError=!1,this._hasFocus=!1,this._helpRequested=!1,this._recentOutput=!1,this.onVisibilityChange=r.createEvent("FocusManager.onVisibilityChange"),this._focused=this._focused.bind(this),this._document.addEventListener("focus",this._focused,!0),i.onChange.add(this._eagerHelperChanged,this),this.isTooltipVisible=void 0,this.isOutputVisible=void 0,this._checkShow()}var i,r=e("util/util"),o=e("util/l10n"),s=e("gcli/settings"),a=(e("gcli/canon"),{NEVER:1,SOMETIMES:2,ALWAYS:3}),l={name:"eagerHelper",type:{name:"selection",lookup:[{name:"never",value:a.NEVER},{name:"sometimes",value:a.SOMETIMES},{name:"always",value:a.ALWAYS}]},defaultValue:a.SOMETIMES,description:o.lookup("eagerHelperDesc"),ignoreTypeDifference:!0};t.startup=function(){i=s.addSetting(l)},t.shutdown=function(){s.removeSetting(l),i=void 0},n.prototype.destroy=function(){i.onChange.remove(this._eagerHelperChanged,this),this._document.removeEventListener("focus",this._focused,!0),this._requisition.commandOutputManager.onOutput.remove(this._outputted,this);for(var e=0;e<this._monitoredElements.length;e++){var t=this._monitoredElements[e];console.error("Hanging monitored element: ",t.element),t.element.removeEventListener("focus",t.onFocus,!0),t.element.removeEventListener("blur",t.onBlur,!0)}this._blurDelayTimeout&&(this._window.clearTimeout(this._blurDelayTimeout),this._blurDelayTimeout=null),delete this._focused,delete this._document,delete this._window,delete this._requisition},n.prototype.addMonitoredElement=function(e,t){this._debug&&console.log("FocusManager.addMonitoredElement("+(t||"unknown")+")");var n={element:e,where:t,onFocus:function(){this._reportFocus(t)}.bind(this),onBlur:function(){this._reportBlur(t)}.bind(this)};e.addEventListener("focus",n.onFocus,!0),e.addEventListener("blur",n.onBlur,!0),this._document.activeElement===e&&this._reportFocus(t),this._monitoredElements.push(n)},n.prototype.removeMonitoredElement=function(e,t){this._debug&&console.log("FocusManager.removeMonitoredElement("+(t||"unknown")+")");var n=this._monitoredElements.filter(function(t){return t.element===e?(e.removeEventListener("focus",t.onFocus,!0),e.removeEventListener("blur",t.onBlur,!0),!1):!0});this._monitoredElements=n},n.prototype.updatePosition=function(e){var t={tooltipVisible:this.isTooltipVisible,outputVisible:this.isOutputVisible,dimensions:e};this.onVisibilityChange(t)},n.prototype._outputted=function(){this._recentOutput=!0,this._helpRequested=!1,this._checkShow()},n.prototype._focused=function(){this._reportBlur("document")},n.prototype._reportFocus=function(e){this._debug&&console.log("FocusManager._reportFocus("+(e||"unknown")+")"),this._blurDelayTimeout&&(this._debug&&console.log("FocusManager.cancelBlur"),this._window.clearTimeout(this._blurDelayTimeout),this._blurDelayTimeout=null),this._hasFocus||(this._hasFocus=!0),this._checkShow()},n.prototype._reportBlur=function(e){if(this._debug&&console.log("FocusManager._reportBlur("+e+")"),this._hasFocus){if(this._blurDelayTimeout)return void(this._debug&&console.log("FocusManager.blurPending"));this._blurDelayTimeout=this._window.setTimeout(function(){this._debug&&console.log("FocusManager.blur"),this._hasFocus=!1,this._checkShow(),this._blurDelayTimeout=null}.bind(this),this._blurDelay)}},n.prototype._eagerHelperChanged=function(){this._checkShow()},n.prototype.onInputChange=function(){this._recentOutput=!1,this._checkShow()},n.prototype.helpRequest=function(){this._debug&&console.log("FocusManager.helpRequest"),this._helpRequested=!0,this._recentOutput=!1,this._checkShow()},n.prototype.removeHelp=function(){this._debug&&console.log("FocusManager.removeHelp"),this._importantFieldFlag=!1,this._isError=!1,this._helpRequested=!1,this._recentOutput=!1,this._checkShow()},n.prototype.setImportantFieldFlag=function(e){this._debug&&console.log("FocusManager.setImportantFieldFlag",e),this._importantFieldFlag=e,this._checkShow()},n.prototype.setError=function(e){this._debug&&console.log("FocusManager._isError",e),this._isError=e,this._checkShow()},n.prototype._checkShow=function(){var e=!1,t={tooltipVisible:this.isTooltipVisible,outputVisible:this.isOutputVisible},n=this._shouldShowTooltip();this.isTooltipVisible!==n.visible&&(t.tooltipVisible=this.isTooltipVisible=n.visible,e=!0);var i=this._shouldShowOutput();this.isOutputVisible!==i.visible&&(t.outputVisible=this.isOutputVisible=i.visible,e=!0),e&&(this._debug&&console.log("FocusManager.onVisibilityChange",t),this.onVisibilityChange(t))},n.prototype._shouldShowTooltip=function(){return this._hasFocus?i.value===a.NEVER?{visible:!1,reason:"eagerHelperNever"}:i.value===a.ALWAYS?{visible:!0,reason:"eagerHelperAlways"}:this._isError?{visible:!0,reason:"isError"}:this._helpRequested?{visible:!0,reason:"helpRequested"}:this._importantFieldFlag?{visible:!0,reason:"importantFieldFlag"}:{visible:!1,reason:"default"}:{visible:!1,reason:"notHasFocus"}},n.prototype._shouldShowOutput=function(){return this._hasFocus?this._recentOutput?{visible:!0,reason:"recentOutput"}:{visible:!1,reason:"default"}:{visible:!1,reason:"notHasFocus"}},t.FocusManager=n}),define("gcli/ui/fields",["require","exports","module","util/promise","util/util","util/util","gcli/types/basic"],function(e,t){function n(e,t){this.type=e,this.document=t.document,this.requisition=t.requisition}function i(e,t){n.call(this,e,t),this.element=o.createElement(this.document,"div"),this.onFieldChange=o.createEvent("BlankField.onFieldChange")}var r=e("util/promise"),o=e("util/util"),s=e("util/util").KeyEvent,a=e("gcli/types/basic").BlankType;n.prototype.element=void 0,n.prototype.destroy=function(){delete this.messageElement},n.prototype.setConversion=function(){throw new Error("Field should not be used directly")},n.prototype.getConversion=function(){throw new Error("Field should not be used directly")},n.prototype.setMessageElement=function(e){this.messageElement=e},n.prototype.setMessage=function(e){this.messageElement&&o.setTextContent(this.messageElement,e||"")},n.prototype.onInputChange=function(e){r.resolve(this.getConversion()).then(function(t){this.onFieldChange({conversion:t}),this.setMessage(t.message),e.keyCode===s.DOM_VK_RETURN&&this.requisition.exec()}.bind(this),console.error)},n.prototype.isImportant=!1,n.claim=function(){throw new Error("Field should not be used directly")},n.TOOLTIP_MATCH=5,n.TOOLTIP_DEFAULT=4,n.MATCH=3,n.DEFAULT=2,n.BASIC=1,n.NO_MATCH=0,t.Field=n;var l=[];t.addField=function(e){if("function"!=typeof e)throw console.error("addField erroring on ",e),new Error("addField requires a Field constructor");l.push(e)},t.removeField=function(e){if("string"!=typeof e)fields=fields.filter(function(t){return t!==e}),delete fields[e];else{if(!(e instanceof n))throw console.error("removeField erroring on ",e),new Error("removeField requires an instance of Field");removeField(e.name)}},t.getField=function(e,t){var r,o=-1;if(l.forEach(function(t){var n=t.claim(e);n>o&&(o=n,r=t)}),!r)throw console.error("Unknown field type ",e," in ",l),new Error("Can't find field for "+e);return t.tooltip&&o<n.TOOLTIP_DEFAULT?new i(e,t):new r(e,t)},i.prototype=Object.create(n.prototype),i.claim=function(e){return e instanceof a?n.MATCH:n.NO_MATCH},i.prototype.setConversion=function(e){this.setMessage(e.message)},i.prototype.getConversion=function(){return this.type.parse(new Argument)},t.addField(i)}),define("gcli/ui/fields/basic",["require","exports","module","util/util","util/l10n","gcli/argument","gcli/argument","gcli/argument","gcli/argument","gcli/types","gcli/types/basic","gcli/types/basic","gcli/types/basic","gcli/types/basic","gcli/types/basic","gcli/ui/fields","gcli/ui/fields"],function(e,t){function n(e,t){_.call(this,e,t),this.arg=new c,this.element=a.createElement(this.document,"input"),this.element.type="text",this.element.classList.add("gcli-field"),this.onInputChange=this.onInputChange.bind(this),this.element.addEventListener("keyup",this.onInputChange,!1),this.onFieldChange=a.createEvent("StringField.onFieldChange")}function i(e,t){_.call(this,e,t),this.arg=new c,this.element=a.createElement(this.document,"input"),this.element.type="number",this.type.max&&(this.element.max=this.type.max),this.type.min&&(this.element.min=this.type.min),this.type.step&&(this.element.step=this.type.step),this.onInputChange=this.onInputChange.bind(this),this.element.addEventListener("keyup",this.onInputChange,!1),this.onFieldChange=a.createEvent("NumberField.onFieldChange")
}function r(e,t){_.call(this,e,t),this.name=t.name,this.named=t.named,this.element=a.createElement(this.document,"input"),this.element.type="checkbox",this.element.id="gcliForm"+this.name,this.onInputChange=this.onInputChange.bind(this),this.element.addEventListener("change",this.onInputChange,!1),this.onFieldChange=a.createEvent("BooleanField.onFieldChange")}function o(e,t){_.call(this,e,t),this.options=t,this.requisition.onAssignmentChange.add(this.update,this),this.element=a.createElement(this.document,"div"),this.update(),this.onFieldChange=a.createEvent("DelegateField.onFieldChange")}function s(e,t){_.call(this,e,t),this.options=t,this._onAdd=this._onAdd.bind(this),this.members=[],this.element=a.createElement(this.document,"div"),this.element.classList.add("gcli-array-parent"),this.addButton=a.createElement(this.document,"button"),this.addButton.classList.add("gcli-array-member-add"),this.addButton.addEventListener("click",this._onAdd,!1),this.addButton.textContent=l.lookup("fieldArrayAdd"),this.element.appendChild(this.addButton),this.container=a.createElement(this.document,"div"),this.container.classList.add("gcli-array-members"),this.element.appendChild(this.container),this.onInputChange=this.onInputChange.bind(this),this.onFieldChange=a.createEvent("ArrayField.onFieldChange")}var a=e("util/util"),l=e("util/l10n"),c=e("gcli/argument").Argument,u=e("gcli/argument").TrueNamedArgument,h=e("gcli/argument").FalseNamedArgument,d=e("gcli/argument").ArrayArgument,p=e("gcli/types").ArrayConversion,f=e("gcli/types/basic").StringType,m=e("gcli/types/basic").NumberType,g=e("gcli/types/basic").BooleanType,v=e("gcli/types/basic").DelegateType,y=e("gcli/types/basic").ArrayType,_=e("gcli/ui/fields").Field,b=e("gcli/ui/fields");t.startup=function(){b.addField(n),b.addField(i),b.addField(r),b.addField(o),b.addField(s)},t.shutdown=function(){b.removeField(n),b.removeField(i),b.removeField(r),b.removeField(o),b.removeField(s)},n.prototype=Object.create(_.prototype),n.prototype.destroy=function(){_.prototype.destroy.call(this),this.element.removeEventListener("keyup",this.onInputChange,!1),delete this.element,delete this.document,delete this.onInputChange},n.prototype.setConversion=function(e){this.arg=e.arg,this.element.value=e.arg.text,this.setMessage(e.message)},n.prototype.getConversion=function(){return this.arg=this.arg.beget({text:this.element.value,prefixSpace:!0}),this.type.parse(this.arg)},n.claim=function(e){return e instanceof f?_.MATCH:_.BASIC},i.prototype=Object.create(_.prototype),i.claim=function(e){return e instanceof m?_.MATCH:_.NO_MATCH},i.prototype.destroy=function(){_.prototype.destroy.call(this),this.element.removeEventListener("keyup",this.onInputChange,!1),delete this.element,delete this.document,delete this.onInputChange},i.prototype.setConversion=function(e){this.arg=e.arg,this.element.value=e.arg.text,this.setMessage(e.message)},i.prototype.getConversion=function(){return this.arg=this.arg.beget({text:this.element.value,prefixSpace:!0}),this.type.parse(this.arg)},r.prototype=Object.create(_.prototype),r.claim=function(e){return e instanceof g?_.MATCH:_.NO_MATCH},r.prototype.destroy=function(){_.prototype.destroy.call(this),this.element.removeEventListener("change",this.onInputChange,!1),delete this.element,delete this.document,delete this.onInputChange},r.prototype.setConversion=function(e){this.element.checked=e.value,this.setMessage(e.message)},r.prototype.getConversion=function(){var e;return e=this.named?this.element.checked?new u(new c(" --"+this.name)):new h:new c(" "+this.element.checked),this.type.parse(e)},o.prototype=Object.create(_.prototype),o.prototype.update=function(){var e=this.type.delegateType();e!==this.subtype&&(this.field&&(this.field.onFieldChange.remove(this.fieldChanged,this),this.field.destroy()),this.subtype=e,this.field=b.getField(e,this.options),this.field.onFieldChange.add(this.fieldChanged,this),a.clearElement(this.element),this.element.appendChild(this.field.element))},o.claim=function(e){return e instanceof v?_.MATCH:_.NO_MATCH},o.prototype.destroy=function(){_.prototype.destroy.call(this),this.requisition.onAssignmentChange.remove(this.update,this),delete this.element,delete this.document,delete this.onInputChange},o.prototype.setConversion=function(e){this.field.setConversion(e)},o.prototype.getConversion=function(){return this.field.getConversion()},Object.defineProperty(o.prototype,"isImportant",{get:function(){return this.field.isImportant},enumerable:!0}),s.prototype=Object.create(_.prototype),s.claim=function(e){return e instanceof y?_.MATCH:_.NO_MATCH},s.prototype.destroy=function(){_.prototype.destroy.call(this),this.addButton.removeEventListener("click",this._onAdd,!1)},s.prototype.setConversion=function(e){a.clearElement(this.container),this.members=[],e.conversions.forEach(function(e){this._onAdd(null,e)},this)},s.prototype.getConversion=function(){for(var e=[],t=new d,n=0;n<this.members.length;n++)Promise.resolve(this.members[n].field.getConversion()).then(function(n){e.push(n),t.addArgument(n.arg)}.bind(this),console.error);return new p(e,t)},s.prototype._onAdd=function(e,t){var n=a.createElement(this.document,"div");n.classList.add("gcli-array-member"),this.container.appendChild(n);var i=b.getField(this.type.subtype,this.options);i.onFieldChange.add(function(){Promise.resolve(this.getConversion()).then(function(e){this.onFieldChange({conversion:e}),this.setMessage(e.message)}.bind(this),console.error)},this),t&&i.setConversion(t),n.appendChild(i.element);var r=a.createElement(this.document,"button");r.classList.add("gcli-array-member-del"),r.addEventListener("click",this._onDel,!1),r.textContent=l.lookup("fieldArrayDel"),n.appendChild(r);var o={element:n,field:i,parent:this};o.onDelete=function(){this.parent.container.removeChild(this.element),this.parent.members=this.parent.members.filter(function(e){return e!==this}),this.parent.onInputChange()}.bind(o),r.addEventListener("click",o.onDelete,!1),this.members.push(o)}}),define("text!gcli/ui/fields/menu.css",[],function(){return".gcli-menu{\rwidth:100%;\roverflow:hidden;\rfont-size:90%;\r}\r.gcli-menu-field{\rborder:1px solid #aaa;\rborder-top:0;\rborder-bottom-right-radius:5px;\rborder-bottom-left-radius:5px;\rmax-height:300px;\rmargin:0 3px;\rpadding:0;\r}\r.gcli-menu-template{\rborder-collapse:collapse;\rwidth:100%;\r}\r.gcli-menu-option{\roverflow:hidden;\rwhite-space:nowrap;\rcursor:pointer;\r}\r.gcli-menu-option:hover{\rbackground-image:-moz-linear-gradient(top,#f8f8f8,#ccc);\rbackground-color:#ddd;\r}\r.gcli-menu-name{\rpadding:2px 3px;\r-moz-padding-start:8px;\r-webkit-padding-start:8px;\r}\r.gcli-menu-desc{\rcolor:#777;\rpadding:0 3px;\r-moz-padding-end:8px;\r-webkit-padding-end:8px;\r}\r.gcli-menu-highlight,\r.gcli-menu-highlight.gcli-menu-option:hover{\rbackground-image:-moz-linear-gradient(top,#eee,#b8b8b8);\rbackground-color:#c8c8c8;\r}\r.gcli-menu-typed{\rcolor:#FF6600;\r}\r.gcli-menu-more{\rfont-size:80%;\rtext-align:right;\r-moz-padding-end:8px;\r-webkit-padding-end:8px;\r}\r"}),define("text!gcli/ui/fields/menu.html",[],function(){return'\r\n<div>\r\n  <table class="gcli-menu-template" aria-live="polite">\r\n    <tr class="gcli-menu-option" foreach="item in ${items}"\r\n        onclick="${onItemClickInternal}" title="${item.manual}">\r\n      <td class="gcli-menu-name">${item.name}</td>\r\n      <td class="gcli-menu-desc">${item.description}</td>\r\n    </tr>\r\n  </table>\r\n  <div class="gcli-menu-more" if="${items.hasMore}">${l10n.fieldMenuMore}</div>\r\n</div>\r\n'}),define("gcli/ui/fields/menu",["require","exports","module","util/util","util/l10n","util/domtemplate","gcli/argument","gcli/types","gcli/canon","text!gcli/ui/fields/menu.css","text!gcli/ui/fields/menu.html"],function(e,t){function n(e){if(e=e||{},this.document=e.document||document,this.type=e.type,!this.document)throw new Error("No document");this.element=r.createElement(this.document,"div"),this.element.classList.add(e.menuClass||"gcli-menu"),e&&e.field&&this.element.classList.add(e.menuFieldClass||"gcli-menu-field"),null!=c&&r.importCss(c,this.document,"gcli-menu"),this.template=r.toDom(this.document,u),this.templateOptions={blankNullUndefined:!0,stack:"menu.html"},this.items=null,this.onItemClick=r.createEvent("Menu.onItemClick")}function i(e,t,n){return"undefined"==typeof Proxy?e:Proxy.create({get:function(i,r){var o=e[r];if("name"!==r)return o;var s=o.indexOf(t);if(-1===s)return o;var a=o.substr(0,s),l=o.substr(s+t.length),c=n.createElement("span");c.appendChild(n.createTextNode(a));var u=n.createElement("span");return u.classList.add("gcli-menu-typed"),u.appendChild(n.createTextNode(t)),c.appendChild(u),c.appendChild(n.createTextNode(l)),c}})}var r=e("util/util"),o=e("util/l10n"),s=e("util/domtemplate"),a=e("gcli/argument").Argument,l=e("gcli/types").Conversion,c=(e("gcli/canon"),e("text!gcli/ui/fields/menu.css")),u=e("text!gcli/ui/fields/menu.html");n.prototype.l10n=o.propertyLookup,n.prototype.destroy=function(){delete this.element,delete this.template,delete this.document},n.prototype.onItemClickInternal=function(e){var t=e.currentTarget.querySelector(".gcli-menu-name").textContent,n=new a(t);n.suffix=" ",this.onItemClick({arg:n})},n.prototype.show=function(e,t){if(this.items=e.filter(function(e){return void 0===e.hidden||e.hidden!==!0}.bind(this)),t&&(this.items=this.items.map(function(e){return i(e,t,this.template.ownerDocument)}.bind(this))),0===this.items.length)return void(this.element.style.display="none");this.items.length>=l.maxPredictions&&(this.items.splice(-1),this.items.hasMore=!0);var n=this.template.cloneNode(!0);s.template(n,this,this.templateOptions),r.clearElement(this.element),this.element.appendChild(n),this.element.style.display="block"},n.prototype.setChoiceIndex=function(e){for(var t=this.element.querySelectorAll(".gcli-menu-option"),n=0;n<t.length;n++)t[n].classList.remove("gcli-menu-highlight");return null!=e?t.length<=e?void console.error("Cant highlight "+e+". Only "+t.length+" options"):void t.item(e).classList.add("gcli-menu-highlight"):void 0},n.prototype.selectChoice=function(){var e=this.element.querySelector(".gcli-menu-highlight .gcli-menu-name");if(!e)return!1;var t=e.textContent,n=new a(t);return n.suffix=" ",n.prefix=" ",this.onItemClick({arg:n}),!0},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.setMaxHeight=function(e){this.element.style.maxHeight=e+"px"},t.Menu=n}),define("gcli/ui/fields/javascript",["require","exports","module","util/util","util/promise","gcli/types","gcli/types","gcli/argument","gcli/types/javascript","gcli/ui/fields/menu","gcli/ui/fields","gcli/ui/fields"],function(e,t){function n(e,t){u.call(this,e,t),this.onInputChange=this.onInputChange.bind(this),this.arg=new a("","{ "," }"),this.element=i.createElement(this.document,"div"),this.input=i.createElement(this.document,"input"),this.input.type="text",this.input.addEventListener("keyup",this.onInputChange,!1),this.input.classList.add("gcli-field"),this.input.classList.add("gcli-field-javascript"),this.element.appendChild(this.input),this.menu=new c({document:this.document,field:!0,type:e}),this.element.appendChild(this.menu.element);var n=new s(void 0,new a(""),o.INCOMPLETE,"");this.setConversion(n),this.onFieldChange=i.createEvent("JavascriptField.onFieldChange"),this.menu.onItemClick.add(this.itemClicked,this)}var i=e("util/util"),r=e("util/promise"),o=e("gcli/types").Status,s=e("gcli/types").Conversion,a=e("gcli/argument").ScriptArgument,l=e("gcli/types/javascript").JavascriptType,c=e("gcli/ui/fields/menu").Menu,u=e("gcli/ui/fields").Field,h=e("gcli/ui/fields");t.startup=function(){h.addField(n)},t.shutdown=function(){h.removeField(n)},n.prototype=Object.create(u.prototype),n.claim=function(e){return e instanceof l?u.TOOLTIP_MATCH:u.NO_MATCH},n.prototype.destroy=function(){u.prototype.destroy.call(this),this.input.removeEventListener("keyup",this.onInputChange,!1),this.menu.onItemClick.remove(this.itemClicked,this),this.menu.destroy(),delete this.element,delete this.input,delete this.menu,delete this.document,delete this.onInputChange},n.prototype.setConversion=function(e){this.arg=e.arg,this.input.value=e.arg.text;var t=0;if(this.type instanceof l){var n=e.arg.text,i=n.lastIndexOf(".");-1!==i&&(t=i)}this.setMessage(e.message),e.getPredictions().then(function(e){var n=[];e.forEach(function(e){e.hidden||n.push({name:e.name.substring(t),complete:e.name,description:e.description||""})},this),this.menu.show(n)}.bind(this),console.error)},n.prototype.itemClicked=function(e){r.resolve(this.type.parse(e.arg)).then(function(e){this.onFieldChange({conversion:e}),this.setMessage(e.message)}.bind(this),console.error)},n.prototype.onInputChange=function(e){this.item=e.currentTarget.item,r.resolve(this.getConversion()).then(function(e){this.onFieldChange({conversion:e}),this.setMessage(e.message)}.bind(this),console.error)},n.prototype.getConversion=function(){return this.arg=new a(this.input.value,"{ "," }"),this.type.parse(this.arg)},n.DEFAULT_VALUE="__JavascriptField.DEFAULT_VALUE"}),define("gcli/ui/fields/selection",["require","exports","module","util/promise","util/util","util/l10n","gcli/argument","gcli/types","gcli/types","gcli/types/basic","gcli/types/selection","gcli/ui/fields/menu","gcli/ui/fields","gcli/ui/fields"],function(e,t){function n(e,t){h.call(this,e,t),this.items=[],this.element=o.createElement(this.document,"select"),this.element.classList.add("gcli-field"),this._addOption({name:s.lookupFormat("fieldSelectionSelect",[t.name])}),r.resolve(this.type.getLookup()).then(function(e){e.forEach(this._addOption,this)}.bind(this),console.error),this.onInputChange=this.onInputChange.bind(this),this.element.addEventListener("change",this.onInputChange,!1),this.onFieldChange=o.createEvent("SelectionField.onFieldChange")}function i(e,t){h.call(this,e,t),this.onInputChange=this.onInputChange.bind(this),this.arg=new a,this.menu=new u({document:this.document,type:e}),this.element=this.menu.element,this.onFieldChange=o.createEvent("SelectionTooltipField.onFieldChange"),this.menu.onItemClick.add(this.itemClicked,this)}var r=e("util/promise"),o=e("util/util"),s=e("util/l10n"),a=e("gcli/argument").Argument,l=(e("gcli/types").Status,e("gcli/types").Conversion,e("gcli/types/basic").BooleanType),c=e("gcli/types/selection").SelectionType,u=e("gcli/ui/fields/menu").Menu,h=e("gcli/ui/fields").Field,d=e("gcli/ui/fields");t.startup=function(){d.addField(n),d.addField(i)},t.shutdown=function(){d.removeField(n),d.removeField(i)},n.prototype=Object.create(h.prototype),n.claim=function(e){return e instanceof l?h.BASIC:e instanceof c?h.DEFAULT:h.NO_MATCH},n.prototype.destroy=function(){h.prototype.destroy.call(this),this.element.removeEventListener("change",this.onInputChange,!1),delete this.element,delete this.document,delete this.onInputChange},n.prototype.setConversion=function(e){var t;this.items.forEach(function(n){n.value&&n.value===e.value&&(t=n.index)},this),this.element.value=t,this.setMessage(e.message)},n.prototype.getConversion=function(){var e=this.items[this.element.value];return this.type.parse(new a(e.name," "))},n.prototype._addOption=function(e){e.index=this.items.length,this.items.push(e);var t=o.createElement(this.document,"option");t.textContent=e.name,t.value=e.index,this.element.appendChild(t)},i.prototype=Object.create(h.prototype),i.claim=function(e){return e.getType()instanceof c?h.TOOLTIP_MATCH:h.NO_MATCH},i.prototype.destroy=function(){h.prototype.destroy.call(this),this.menu.onItemClick.remove(this.itemClicked,this),this.menu.destroy(),delete this.element,delete this.document,delete this.onInputChange},i.prototype.setConversion=function(e){this.arg=e.arg,this.setMessage(e.message),e.getPredictions().then(function(t){var n=t.map(function(e){return e.value.description?e.value:e},this);this.menu.show(n,e.arg.text)}.bind(this),console.error)},i.prototype.itemClicked=function(e){r.resolve(this.type.parse(e.arg)).then(function(e){this.onFieldChange({conversion:e}),this.setMessage(e.message)}.bind(this),console.error)},i.prototype.onInputChange=function(e){this.item=e.currentTarget.item,r.resolve(this.getConversion()).then(function(e){this.onFieldChange({conversion:e}),this.setMessage(e.message)}.bind(this),console.error)},i.prototype.getConversion=function(){return this.arg=this.arg.beget({text:this.input.value}),this.type.parse(this.arg)},i.prototype.setChoiceIndex=function(e){this.menu.setChoiceIndex(e)},i.prototype.selectChoice=function(){return this.menu.selectChoice()},Object.defineProperty(i.prototype,"isImportant",{get:function(){return"command"!==this.type.name},enumerable:!0}),i.DEFAULT_VALUE="__SelectionTooltipField.DEFAULT_VALUE"}),define("text!gcli/ui/tooltip.css",[],function(){return".gcli-panel{\r-moz-transition-property:opacity,height;\r-moz-transition-duration:0.5s,2s;\roverflow-y:auto;\roverflow-x:hidden;\rz-index:2;\rposition:absolute;\rmax-height:100%;\rmax-width:350px;\rleft:0;\rbottom:0;\rfont-family:Segoe UI,Helvetica Neue,Verdana,Arial,sans-serif;\rmargin-bottom:-3px;\r}\r.gcli-panel.gcli-panel-hide{\ropacity:0;\rheight:0;\r}\r.gcli-panel-connector{\rheight:10px;\rmargin-top:-1px;\rmargin-left:20px;\rwidth:20px;\rbackground:white;\rborder-left:1px solid #999;\rborder-right:1px solid #999;\r}\r.gcli-tt-description{\rpadding:5px 10px 0;\rfont-size:90%;\r}\r.gcli-tt-error{\rfont-size:80%;\rcolor:#900;\rpadding:0 10px;\r}\r.gcli-field{\rwidth:100%;\r}\r.gcli-field-javascript{\rmargin-bottom:0;\r}\r.gcli-tt{\rbox-shadow:0 0 10px 1px #ddd;\rborder:1px solid #999;\rborder-radius:3px;\rmargin:10px 0 0 0;\rbackground:hsla(0,100%,100%,0.95);\rpadding-bottom:5px;\r}\r"}),define("text!gcli/ui/tooltip.html",[],function(){return'\r\n<div class="gcli-tt" aria-live="polite">\r\n  <div class="gcli-tt-description" save="${descriptionEle}">${description}</div>\r\n  ${field.element}\r\n  <div class="gcli-tt-error" save="${errorEle}">${assignment.conversion.message}</div>\r\n  <div class="gcli-tt-highlight" save="${highlightEle}"></div>\r\n</div>\r\n'}),define("gcli/ui/tooltip",["require","exports","module","util/util","util/domtemplate","gcli/cli","gcli/ui/fields","text!gcli/ui/tooltip.css","text!gcli/ui/tooltip.html"],function(e,t){function n(e,t){this.inputter=t.inputter,this.requisition=t.requisition,this.focusManager=t.focusManager,this.element=t.element,this.element.classList.add(e.tooltipClass||"gcli-tooltip"),this.document=this.element.ownerDocument,this.panelElement=t.panelElement,this.panelElement&&(this.panelElement.classList.add("gcli-panel-hide"),this.focusManager.onVisibilityChange.add(this.visibilityChanged,this)),this.focusManager.addMonitoredElement(this.element,"tooltip"),this.fields=[],null!=a&&(this.style=i.importCss(a,this.document,"gcli-tooltip")),this.template=i.toDom(this.document,l),this.templateOptions={blankNullUndefined:!0,stack:"tooltip.html"},this.inputter.onChoiceChange.add(this.choiceChanged,this),this.inputter.onAssignmentChange.add(this.assignmentChanged,this),this.assignment=void 0,this.assignmentChanged({assignment:this.inputter.assignment})}var i=e("util/util"),r=e("util/domtemplate"),o=e("gcli/cli").CommandAssignment,s=e("gcli/ui/fields"),a=e("text!gcli/ui/tooltip.css"),l=e("text!gcli/ui/tooltip.html");n.prototype.destroy=function(){this.inputter.onAssignmentChange.remove(this.assignmentChanged,this),this.inputter.onChoiceChange.remove(this.choiceChanged,this),this.panelElement&&this.focusManager.onVisibilityChange.remove(this.visibilityChanged,this),this.focusManager.removeMonitoredElement(this.element,"tooltip"),this.style&&(this.style.parentNode.removeChild(this.style),delete this.style),this.field.onFieldChange.remove(this.fieldChanged,this),this.field.destroy(),delete this.errorEle,delete this.descriptionEle,delete this.highlightEle,delete this.document,delete this.element,delete this.panelElement,delete this.template},Object.defineProperty(n.prototype,"isMenuShowing",{get:function(){return this.focusManager.isTooltipVisible&&null!=this.field&&null!=this.field.menu},enumerable:!0}),n.prototype.assignmentChanged=function(e){if(this.assignment!==e.assignment){this.assignment&&this.assignment.onAssignmentChange.remove(this.assignmentContentsChanged,this),this.assignment=e.assignment,this.field&&(this.field.onFieldChange.remove(this.fieldChanged,this),this.field.destroy()),this.field=s.getField(this.assignment.param.type,{document:this.document,name:this.assignment.param.name,requisition:this.requisition,required:this.assignment.param.isDataRequired,named:!this.assignment.param.isPositionalAllowed,tooltip:!0}),this.focusManager.setImportantFieldFlag(this.field.isImportant),this.field.onFieldChange.add(this.fieldChanged,this),this.assignment.onAssignmentChange.add(this.assignmentContentsChanged,this),this.field.setConversion(this.assignment.conversion),this.errorEle=void 0,this.descriptionEle=void 0,this.highlightEle=void 0;var t=this.template.cloneNode(!0);r.template(t,this,this.templateOptions),i.clearElement(this.element),this.element.appendChild(t),this.element.style.display="block",this.field.setMessageElement(this.errorEle),this._updatePosition()}},n.prototype.choiceChanged=function(e){if(this.field&&this.field.setChoiceIndex){var t=this.assignment.conversion;t.constrainPredictionIndex(e.choice).then(function(e){this.field.setChoiceIndex(e)}.bind(this)).then(null,console.error)}},n.prototype.selectChoice=function(){return this.field&&this.field.selectChoice?this.field.selectChoice():!1},n.prototype.fieldChanged=function(e){this.requisition.setAssignment(this.assignment,e.conversion.arg,{matchPadding:!0});var t=null!=e.conversion.message&&""!==e.conversion.message;this.focusManager.setError(t),this.document.defaultView.setTimeout(function(){this.inputter.focus()}.bind(this),10)},n.prototype.assignmentContentsChanged=function(e){(e.conversion.arg.text!==e.oldConversion.arg.text||e.conversion.message!==e.oldConversion.message)&&(this.field.setConversion(e.conversion),i.setTextContent(this.descriptionEle,this.description),this._updatePosition())},n.prototype._updatePosition=function(){var e=this.getDimensionsOfAssignment();this.panelElement&&(this.panelElement.style.left=10*e.start+"px"),this.focusManager.updatePosition(e)},n.prototype.getDimensionsOfAssignment=function(){for(var e="",t=this.requisition.getAssignments(!0),n=0;n<t.length&&t[n]!==this.assignment;n++)e+=t[n].toString();e+=this.assignment.arg.prefix;var i=e.length;e+=this.assignment.arg.text;var r=e.length;return{start:i,end:r}},Object.defineProperty(n.prototype,"description",{get:function(){return this.assignment instanceof o&&null==this.assignment.value?"":this.assignment.param.manual||this.assignment.param.description},enumerable:!0}),n.prototype.visibilityChanged=function(e){this.panelElement&&(e.tooltipVisible?this.panelElement.classList.remove("gcli-panel-hide"):this.panelElement.classList.add("gcli-panel-hide"))},t.Tooltip=n}),define("text!gcli/ui/output_view.css",[],function(){return".gcli-row-in{\rpadding:0 4px;\rbox-shadow:0 -6px 10px -6px #ddd;\rborder-top:1px solid #bbb;\r}\r.gcli-row-in > img{\rcursor:pointer;\r}\r.gcli-row-hover{\rdisplay:none;\rfloat:right;\rpadding:2px 2px 0;\r}\r.gcli-row-in:hover > .gcli-row-hover{\rdisplay:inline;\r}\r.gcli-row-in:hover > .gcli-row-hover.gcli-row-hidden{\rdisplay:none;\r}\r.gcli-row-duration{\rcolor:#666;\r}\r.gcli-row-prompt{\rcolor:#00F;\rfont-weight:bold;\rfont-size:120%;\r}\r.gcli-row-prompt.gcli-row-complete{\rcolor:#060;\r}\r.gcli-row-prompt.gcli-row-error{\rcolor:#F00;\r}\r.gcli-row-duration{\rfont-size:80%;\r}\r.gcli-row-out{\rmargin:0 10px 15px;\rpadding:0 10px;\rline-height:1.2em;\rfont-size:95%;\r}\r.gcli-row-out strong,\r.gcli-row-out b,\r.gcli-row-out th,\r.gcli-row-out h1,\r.gcli-row-out h2,\r.gcli-row-out h3{\rcolor:#000;\r}\r.gcli-row-out p{\rmargin:5px 0;\r}\r.gcli-row-out a{\rcolor:hsl(200,40%,40%);\rtext-decoration:none;\r}\r.gcli-row-out a:hover{\rcursor:pointer;\rborder-bottom:1px dotted hsl(200,40%,60%);\r}\r.gcli-row-out input[type=password],\r.gcli-row-out input[type=text],\r.gcli-row-out textarea{\rfont-size:120%;\rbackground:transparent;\rpadding:3px;\rborder-radius:3px;\rborder:1px solid #bbb;\r}\r.gcli-row-out table,\r.gcli-row-out td,\r.gcli-row-out th{\rborder:0;\rpadding:0 2px;\r}\r.gcli-row-terminal,\r.gcli-row-subterminal{\rborder-radius:3px;\rborder:1px solid #ddd;\r}\r.gcli-row-terminal{\rheight:200px;\rwidth:620px;\rfont-size:80%;\r}\r.gcli-row-subterminal{\rheight:150px;\rwidth:300px;\rfont-size:75%;\r}\r.gcli-out-shortcut{\rfont-weight:normal;\rborder:1px solid #999;\rborder-radius:3px;\rcolor:#666;\rcursor:pointer;\rpadding:0 3px 1px;\rmargin:1px 4px;\rdisplay:inline-block;\r}\r.gcli-out-shortcut:before{\rcontent:'\\bb';\rpadding-right:2px;\rcolor:hsl(25,78%,50%);\rfont-weight:bold;\rfont-size:110%;\r}\r"}),define("text!gcli/ui/output_terminal.html",[],function(){return'\r\n<div class="gcli-row">\r\n  <!-- The div for the input (i.e. what was typed) -->\r\n  <div class="gcli-row-in" save="${elems.rowin}" aria-live="assertive"\r\n      onclick="${copyToInput}" ondblclick="${execute}">\r\n\r\n    <!-- What the user actually typed -->\r\n    <span save="${elems.prompt}" class="gcli-row-prompt ${elems.error ? \'gcli-row-error\' : \'\'} ${elems.completed ? \'gcli-row-complete\' : \'\'}">${prompt}</span>\r\n    <span class="gcli-row-in-typed">${outputData.canonical}</span>\r\n\r\n    <!-- The extra details that appear on hover -->\r\n    <span class="gcli-row-duration gcli-row-hover" save="${elems.duration}"></span>\r\n    <!--\r\n    <img class="gcli-row-hover" onclick="${hideOutput}" save="${elems.hide}"\r\n        alt="Hide command output" _src="${url(\'images/minus.png\')}"/>\r\n    <img class="gcli-row-hover gcli-row-hidden" onclick="${showOutput}" save="${elems.show}"\r\n        alt="Show command output" _src="${url(\'images/plus.png\')}"/>\r\n    <img class="gcli-row-hover" onclick="${remove}"\r\n        alt="Remove this command from the history"\r\n        _src="${url(\'images/closer.png\')}"/>\r\n    -->\r\n    <img style="float:right;" _src="${url(\'images/throbber.gif\')}" save="${elems.throb}"/>\r\n  </div>\r\n\r\n  <!-- The div for the command output -->\r\n  <div class="gcli-row-out" aria-live="assertive" save="${elems.rowout}">\r\n  </div>\r\n</div>\r\n'}),define("gcli/ui/output_terminal",["require","exports","module","util/util","util/domtemplate","gcli/canon","text!gcli/ui/output_view.css","text!gcli/ui/output_terminal.html"],function(e,t,n){function i(e,t){this.element=t.element,this.requisition=t.requisition,this.requisition.commandOutputManager.onOutput.add(this.outputted,this);var n=t.element.ownerDocument;null!=a&&(this.style=o.importCss(a,n,"gcli-output-view")),this.template=o.toDom(n,l),this.templateOptions={allowEval:!0,stack:"output_terminal.html"}}function r(e,t){this.outputData=e,this.outputTerminal=t,this.url=o.createUrlLookup(n),this.elems={rowin:null,rowout:null,hide:null,show:null,duration:null,throb:null,prompt:null};var i=this.outputTerminal.template.cloneNode(!0);s.template(i,this,this.outputTerminal.templateOptions),this.outputTerminal.element.appendChild(this.elems.rowin),this.outputTerminal.element.appendChild(this.elems.rowout),this.outputData.onClose.add(this.closed,this),this.outputData.onChange.add(this.changed,this)}var o=e("util/util"),s=e("util/domtemplate"),a=(e("gcli/canon"),e("text!gcli/ui/output_view.css")),l=e("text!gcli/ui/output_terminal.html");i.prototype.destroy=function(){this.style&&(this.style.parentNode.removeChild(this.style),delete this.style),this.requisition.commandOutputManager.onOutput.remove(this.outputted,this),delete this.requisition,delete this.element,delete this.template},i.prototype.outputted=function(e){e.output.hidden||(e.output.view=new r(e.output,this))},i.prototype.setHeight=function(e){this.element.style.height=e+"px"},t.OutputTerminal=i,r.prototype.destroy=function(){this.outputData.onChange.remove(this.changed,this),this.outputData.onClose.remove(this.closed,this),this.outputTerminal.element.removeChild(this.elems.rowin),this.outputTerminal.element.removeChild(this.elems.rowout),delete this.outputData,delete this.outputTerminal,delete this.url,delete this.elems},Object.defineProperty(r.prototype,"prompt",{get:function(){return this.outputData.canonical?"":""},enumerable:!0}),r.prototype.copyToInput=function(){this.outputTerminal.requisition&&this.outputTerminal.requisition.update(this.outputData.typed)},r.prototype.execute=function(){this.outputTerminal.requisition&&this.outputTerminal.requisition.updateExec(this.outputData.typed)},r.prototype.hideOutput=function(e){this.elems.rowout.style.display="none",this.elems.hide.classList.add("cmd_hidden"),this.elems.show.classList.remove("cmd_hidden"),e.stopPropagation()},r.prototype.showOutput=function(e){this.elems.rowout.style.display="block",this.elems.hide.classList.remove("cmd_hidden"),this.elems.show.classList.add("cmd_hidden"),e.stopPropagation()},r.prototype.closed=function(){this.destroy()},r.prototype.changed=function(){var e=this.elems.rowout.ownerDocument,t=null!=this.outputData.duration?"completed in "+this.outputData.duration/1e3+" sec ":"";t=e.createTextNode(t),this.elems.duration.appendChild(t),this.outputData.completed&&this.elems.prompt.classList.add("gcli-row-complete"),this.outputData.error&&this.elems.prompt.classList.add("gcli-row-error"),this.outputData.toDom(this.elems.rowout);var n=Math.max(this.outputTerminal.element.scrollHeight,this.outputTerminal.element.clientHeight);this.outputTerminal.element.scrollTop=n-this.outputTerminal.element.clientHeight,this.elems.throb.style.display=this.outputData.completed?"none":"block"},t.OutputView=r}),define("gcli/history",["require","exports","module"],function(e,t){function n(){this._buffer=[""],this._current=0}n.prototype.destroy=function(){delete this._buffer},n.prototype.add=function(e){this._buffer.splice(1,0,e),this._current=0},n.prototype.forward=function(){return this._current>0&&this._current--,this._buffer[this._current]},n.prototype.backward=function(){return this._current<this._buffer.length-1&&this._current++,this._buffer[this._current]},t.History=n}),define("text!gcli/ui/inputter.css",[],function(){return".gcli-in-input,\r.gcli-in-complete,\r.gcli-prompt{\rfont-family:Segoe UI,Helvetica Neue,Verdana,Arial,sans-serif;\r}\r.gcli-in-input,\r.gcli-in-complete{\rfont-size:110%;\rfont-weight:normal;\rfont-style:normal;\rpadding:0 0 0 22px;\rbackground-color:transparent;\r}\r.gcli-in-input{\rcolor:#000;\rborder:0;\rbox-shadow:0 0 10px 1px #ddd;\rborder-top:1px solid #999;\r}\r.gcli-in-complete{\rposition:absolute;\rz-index:-1000;\rcolor:transparent;\rmargin-top:-1px;\rborder-top:1px solid transparent;\r}\r.gcli-prompt{\rposition:absolute;\rz-index:-1001;\rpadding:0 1px;\rcolor:hsl(25,78%,50%);\rfont-size:150%;\rfont-weight:bold;\rline-height:95%;\r}\r.gcli-in-incomplete{\rborder-bottom:2px dotted #999;\r}\r.gcli-in-error{\rborder-bottom:2px dotted #F00;\r}\r.gcli-in-ontab{\rcolor:hsl(200,40%,70%);\r}\r.gcli-in-todo{\rcolor:hsl(48,28%,76%);\r}\r.gcli-in-closebrace{\rcolor:hsl(0,0%,80%);\r}\r.gcli-in-scratchlink{\rfloat:right;\rfont-size:85%;\rcolor:#888;\rpadding-right:10px;\r}\r"}),define("gcli/ui/inputter",["require","exports","module","util/promise","util/util","util/util","gcli/types","gcli/history","text!gcli/ui/inputter.css"],function(e,t){function n(e,t){this.requisition=t.requisition,this.focusManager=t.focusManager,this.element=t.element,this.element.classList.add("gcli-in-input"),this.element.spellcheck=!1,this.document=this.element.ownerDocument,this.scratchpad=e.scratchpad,null!=l&&(this.style=r.importCss(l,this.document,"gcli-inputter")),this.lastTabDownAt=0,this._caretChange=null,this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.element.addEventListener("keydown",this.onKeyDown,!1),this.element.addEventListener("keyup",this.onKeyUp,!1),this.history=new a,this._scrollingThroughHistory=!1,this._choice=null,this.onChoiceChange=r.createEvent("Inputter.onChoiceChange"),this.onMouseUp=this.onMouseUp.bind(this),this.element.addEventListener("mouseup",this.onMouseUp,!1),this.focusManager&&this.focusManager.addMonitoredElement(this.element,"input"),this._completed=c,this.requisition.onTextChange.add(this.textChanged,this),this.assignment=this.requisition.getAssignmentAt(0),this.onAssignmentChange=r.createEvent("Inputter.onAssignmentChange"),this.onInputChange=r.createEvent("Inputter.onInputChange"),this.onResize=r.createEvent("Inputter.onResize"),this.onWindowResize=this.onWindowResize.bind(this),this.document.defaultView.addEventListener("resize",this.onWindowResize,!1),this.requisition.update(this.element.value||"")
}var i=e("util/promise"),r=e("util/util"),o=e("util/util").KeyEvent,s=e("gcli/types").Status,a=e("gcli/history").History,l=e("text!gcli/ui/inputter.css"),c=i.resolve(void 0);n.prototype.destroy=function(){this.document.defaultView.removeEventListener("resize",this.onWindowResize,!1),this.requisition.onTextChange.remove(this.textChanged,this),this.focusManager&&this.focusManager.removeMonitoredElement(this.element,"input"),this.element.removeEventListener("mouseup",this.onMouseUp,!1),this.element.removeEventListener("keydown",this.onKeyDown,!1),this.element.removeEventListener("keyup",this.onKeyUp,!1),this.history.destroy(),this.style&&(this.style.parentNode.removeChild(this.style),delete this.style),delete this.onMouseUp,delete this.onKeyDown,delete this.onKeyUp,delete this.onWindowResize,delete this.tooltip,delete this.document,delete this.element},n.prototype.onWindowResize=function(){if(this.element){var e=this.getDimensions();e&&this.onResize(e)}},n.prototype.getDimensions=function(){if(!this.element.getBoundingClientRect)return void 0;for(var e={},t=this.element.parentNode;t&&"#document"!==t.nodeName;){var n=this.document.defaultView.getComputedStyle(t,"");if(n){var i=n.getPropertyValue("position");if("absolute"===i||"fixed"===i){var r=t.getBoundingClientRect();e.top=r.top,e.left=r.left;break}}t=t.parentNode}var o=this.element.getBoundingClientRect();return{top:o.top-(e.top||0)+1,height:o.bottom-o.top-1,left:o.left-(e.left||0)+2,width:o.right-o.left}},n.prototype.onMouseUp=function(){this._checkAssignment()},n.prototype.textChanged=function(){if(this.document){null==this._caretChange&&(this._caretChange=u.TO_ARG_END);var e=this.requisition.toString(),t=this.getInputState();t.typed=e,this._processCaretChange(t),this.element.value!==e&&(this.element.value=e),this.onInputChange({inputState:t})}};var u={NO_CHANGE:0,SELECT_ALL:1,TO_END:2,TO_ARG_END:3};n.prototype._processCaretChange=function(e){var t,n;switch(this._caretChange){case u.SELECT_ALL:t=0,n=e.typed.length;break;case u.TO_END:t=e.typed.length,n=e.typed.length;break;case u.TO_ARG_END:t=e.cursor.start;do t++;while(t<e.typed.length&&" "!==e.typed[t-1]);n=t;break;default:t=e.cursor.start,n=e.cursor.end}t=t>e.typed.length?e.typed.length:t,n=n>e.typed.length?e.typed.length:n;var i={typed:e.typed,cursor:{start:t,end:n}};return this.element.selectionStart!==t&&(this.element.selectionStart=t),this.element.selectionEnd!==n&&(this.element.selectionEnd=n),this._checkAssignment(t),this._caretChange=null,i},n.prototype._checkAssignment=function(e){null==e&&(e=this.element.selectionStart);var t=this.requisition.getAssignmentAt(e);if(this.assignment!==t&&(this.assignment=t,this.onAssignmentChange({assignment:this.assignment})),this.focusManager){var n=this.assignment.conversion.message;this.focusManager.setError(null!=n&&""!==n)}},n.prototype.setInput=function(e){return this.requisition.update(e)},n.prototype.setCursor=function(e){this._caretChange=u.NO_CHANGE,this._processCaretChange({typed:this.element.value,cursor:e})},n.prototype.focus=function(){this.element.focus(),this._checkAssignment()},n.prototype.onKeyDown=function(e){return e.keyCode===o.DOM_VK_UP||e.keyCode===o.DOM_VK_DOWN?void e.preventDefault():void(e.keyCode!==o.DOM_VK_F1&&e.keyCode!==o.DOM_VK_ESCAPE&&e.keyCode!==o.DOM_VK_UP&&e.keyCode!==o.DOM_VK_DOWN&&(this.focusManager&&this.focusManager.onInputChange(),e.keyCode===o.DOM_VK_TAB&&(this.lastTabDownAt=0,e.shiftKey||(e.preventDefault(),this.lastTabDownAt=e.timeStamp),(e.metaKey||e.altKey||e.crtlKey)&&(this.document.commandDispatcher?this.document.commandDispatcher.advanceFocus():this.element.blur()))))},n.prototype.onKeyUp=function(e){this.handleKeyUp(e).then(null,console.error)},n.prototype.handleKeyUp=function(e){if(this.focusManager&&e.keyCode===o.DOM_VK_F1)return this.focusManager.helpRequest(),c;if(this.focusManager&&e.keyCode===o.DOM_VK_ESCAPE)return this.focusManager.removeHelp(),c;if(e.keyCode===o.DOM_VK_UP){if(this.tooltip&&this.tooltip.isMenuShowing)this.changeChoice(-1);else{if(""===this.element.value||this._scrollingThroughHistory)return this._scrollingThroughHistory=!0,this.requisition.update(this.history.backward());this.assignment.getStatus()===s.VALID?(this.requisition.increment(this.assignment),this.focusManager&&this.focusManager.onInputChange()):this.changeChoice(-1)}return c}if(e.keyCode===o.DOM_VK_DOWN){if(this.tooltip&&this.tooltip.isMenuShowing)this.changeChoice(1);else{if(""===this.element.value||this._scrollingThroughHistory)return this._scrollingThroughHistory=!0,this.requisition.update(this.history.forward());this.assignment.getStatus()===s.VALID?(this.requisition.decrement(this.assignment),this.focusManager&&this.focusManager.onInputChange()):this.changeChoice(1)}return c}if(e.keyCode===o.DOM_VK_RETURN){var t=this.requisition.getStatus();return t===s.VALID?(this._scrollingThroughHistory=!1,this.history.add(this.element.value),this.requisition.exec()):this.tooltip.selectChoice()||this.focusManager.setError(!0),this._choice=null,c}if(e.keyCode===o.DOM_VK_TAB&&!e.shiftKey){var n=this.element.value.length>0;if(n&&this.lastTabDownAt+1e3>e.timeStamp){this._caretChange=u.TO_ARG_END;var i=this.getInputState();this._processCaretChange(i),null==this._choice&&(this._choice=0),this._completed=this.requisition.complete(i.cursor,this._choice)}return this.lastTabDownAt=0,this._scrollingThroughHistory=!1,this._completed.then(function(){this._choice=null,this.onChoiceChange({choice:this._choice})}.bind(this))}return this.scratchpad&&this.scratchpad.shouldActivate(e)?this.scratchpad.activate(this.element.value)?this.requisition.update(""):c:(this._scrollingThroughHistory=!1,this._caretChange=u.NO_CHANGE,this._completed=this.requisition.update(this.element.value),this._completed.then(function(){this._choice=null,this.onChoiceChange({choice:this._choice})}.bind(this)))},n.prototype.changeChoice=function(e){null==this._choice&&(this._choice=0),this._choice+=e,this.onChoiceChange({choice:this._choice})},n.prototype.getCurrentAssignment=function(){var e=this.element.selectionStart;return this.requisition.getAssignmentAt(e)},n.prototype.getInputState=function(){var e={typed:this.element.value,cursor:{start:this.element.selectionStart,end:this.element.selectionEnd}};return null==e.typed&&(e={typed:"",cursor:{start:0,end:0}}),null==e.cursor.start&&(e.cursor.start=0),e},t.Inputter=n}),define("text!gcli/ui/completer.html",[],function(){return'\r\n<div>\r\n  <loop foreach="member in ${statusMarkup}">\r\n    <span class="${member.className}">${member.string}</span>\r\n  </loop>\r\n  <span class="gcli-in-ontab">${directTabText}</span>\r\n  <span class="gcli-in-todo" foreach="param in ${emptyParameters}">${param}</span>\r\n  <span class="gcli-in-ontab">${arrowTabText}</span>\r\n  <span class="gcli-in-closebrace" if="${unclosedJs}">}</span>\r\n  <div class="gcli-in-scratchlink" if="${scratchLink}">${scratchLink}</div>\r\n</div>\r\n'}),define("gcli/ui/completer",["require","exports","module","util/promise","util/util","util/domtemplate","text!gcli/ui/completer.html"],function(e,t){function n(e,t){if(this.requisition=t.requisition,this.scratchpad=e.scratchpad,this.input={typed:"",cursor:{start:0,end:0}},this.choice=0,this.element=t.element,this.element.classList.add("gcli-in-complete"),this.element.setAttribute("tabindex","-1"),this.element.setAttribute("aria-live","polite"),this.document=this.element.ownerDocument,this.inputter=t.inputter,this.inputter.onInputChange.add(this.update,this),this.inputter.onAssignmentChange.add(this.update,this),this.inputter.onChoiceChange.add(this.update,this),this.autoResize=t.autoResize,this.autoResize){this.inputter.onResize.add(this.resized,this);var n=this.inputter.getDimensions();n&&this.resized(n)}this.template=r.toDom(this.document,s),r.removeWhitespace(this.template,!0),this.update()}var i=e("util/promise"),r=e("util/util"),o=e("util/domtemplate"),s=e("text!gcli/ui/completer.html");n.prototype.destroy=function(){this.inputter.onInputChange.remove(this.update,this),this.inputter.onAssignmentChange.remove(this.update,this),this.inputter.onChoiceChange.remove(this.update,this),this.autoResize&&this.inputter.onResize.remove(this.resized,this),delete this.document,delete this.element,delete this.template,delete this.inputter},n.prototype.resized=function(e){this.element.style.top=e.top+"px",this.element.style.height=e.height+"px",this.element.style.lineHeight=e.height+"px",this.element.style.left=e.left+"px",this.element.style.width=e.width+"px"},n.prototype.update=function(e){this.choice=e&&null!=e.choice?e.choice:0;var t=this._getCompleterTemplateData(),n=this.template.cloneNode(!0);for(o.template(n,t,{stack:"completer.html"}),r.clearElement(this.element);n.hasChildNodes();)this.element.appendChild(n.firstChild)},n.prototype._getCompleterTemplateData=function(){var e=i.defer(),t=i.defer(),n=i.defer(),r=this.inputter.getInputState(),o=this.requisition.getAssignmentAt(r.cursor.start),s=void 0;return 0!==r.typed.trim().length&&(s=o.getPredictionAt(this.choice)),i.resolve(s).then(function(i){var s="",a="",l=[];if(0!==r.typed.trim().length){var c=o.arg;if(i){var u=i.name,h=c.text;if(o.isInName()&&(u=" "+u),h!==u){var d=h.replace(/^\s*/,""),p=0===u.indexOf(d);if(p&&r.cursor.start===r.typed.length){var f=h.match(/^(\s*)/)[0].length;s=u.slice(h.length-f)}else a=" "+u}}else"NamedArgument"===c.type&&""===c.text&&l.push("<"+o.param.type.name+">")}""!==s?s+="":this.requisition.typedEndsWithSeparator()||l.unshift(""),this.requisition.getAssignments().forEach(function(e){if(e.param.isPositionalAllowed&&""===e.arg.toString().trim()&&(""===s||o!==e)){var t=e.param.isDataRequired?"<"+e.param.name+">":"["+e.param.name+"]";l.push(t)}}.bind(this));var m=this.requisition.commandAssignment.value,g=!1;m&&m.hasNamedParameters&&m.params.forEach(function(e){var t=this.requisition.getAssignment(e.name).arg;e.isPositionalAllowed||e.hidden||"BlankArgument"!==t.type||(g=!0)},this),g&&l.push("[options]"),e.resolve(s),t.resolve(a),n.resolve(l)}.bind(this),console.error),{statusMarkup:this._getStatusMarkup(r),unclosedJs:this._getUnclosedJs(),scratchLink:this._getScratchLink(),directTabText:e.promise,arrowTabText:t.promise,emptyParameters:n.promise}},n.prototype._getStatusMarkup=function(e){var t=this.requisition.getInputStatusMarkup(e.cursor.start);return t.forEach(function(e){e.string=e.string.replace(/ /g,""),e.className="gcli-in-"+e.status.toString().toLowerCase()},this),t},n.prototype._getUnclosedJs=function(){var e=this.requisition.commandAssignment.value;return e&&"{"===e.name&&-1===this.requisition.getAssignment(0).arg.suffix.indexOf("}")},n.prototype._getScratchLink=function(){var e=this.requisition.commandAssignment.value;return this.scratchpad&&e&&"{"===e.name?this.scratchpad.linkText:""},t.Completer=n}),define("gcli/ui/prompt",["require","exports","module"],function(e,t){function n(e,t){this.element=t.element,this.element.classList.add("gcli-prompt");var n=e.promptChar||"",i=this.element.ownerDocument.createTextNode(n);if(this.element.appendChild(i),this.inputter=t.inputter,this.inputter){this.inputter.onResize.add(this.resized,this);var r=this.inputter.getDimensions();r&&this.resized(r)}}n.prototype.destroy=function(){this.inputter&&this.inputter.onResize.remove(this.resized,this),delete this.element},n.prototype.resized=function(e){this.element.style.top=e.top+"px",this.element.style.height=e.height+"px",this.element.style.left=e.left+"px",this.element.style.width=e.width+"px"},t.Prompt=n}),define("text!gcli/ui/display.css",[],function(){return".gcli-output{\rheight:100%;\roverflow-x:hidden;\roverflow-y:auto;\rfont-family:Segoe UI,Helvetica Neue,Verdana,Arial,sans-serif;\r}\r"}),define("text!gcli/ui/display.html",[],function(){return'\r\n<div class="gcli-panel" save="${panel}">\r\n  <div save="${tooltip}"></div>\r\n  <div class="gcli-panel-connector"></div>\r\n</div>\r\n'}),define("gcli/ui/display",["require","exports","module","util/util","util/domtemplate","gcli/settings","gcli/canon","gcli/cli","gcli/ui/intro","gcli/ui/tooltip","gcli/ui/output_terminal","gcli/ui/inputter","gcli/ui/completer","gcli/ui/focus","gcli/ui/prompt","text!gcli/ui/display.css","text!gcli/ui/display.html"],function(e,t){function n(e){var t=e.document||document;this.displayStyle=void 0,null!=v&&(this.displayStyle=o.importCss(v,t,"gcli-css-display")),this.commandOutputManager=e.commandOutputManager,null==this.commandOutputManager&&(this.commandOutputManager=new l),this.requisition=new c(e.environment||{},t,this.commandOutputManager),this.focusManager=new m(e,{document:t,requisition:this.requisition}),this.inputElement=i(t,e.inputElement||null,"gcli-input"),this.inputter=new p(e,{requisition:this.requisition,focusManager:this.focusManager,element:this.inputElement}),this.completeElement=r(this.inputElement,e.completeElement||null,"gcli-row-complete"),this.completer=new f(e,{requisition:this.requisition,inputter:this.inputter,autoResize:this.completeElement.gcliCreated,element:this.completeElement}),this.prompt=new g(e,{inputter:this.inputter,element:r(this.inputElement,e.promptElement||null,"gcli-prompt")}),this.element=i(t,e.displayElement||null,"gcli-display"),this.element.classList.add("gcli-display"),this.template=o.toDom(t,y),this.elements={},s.template(this.template,this.elements,{stack:"display.html"}),this.element.appendChild(this.template),this.tooltip=new h(e,{requisition:this.requisition,inputter:this.inputter,focusManager:this.focusManager,element:this.elements.tooltip,panelElement:this.elements.panel}),this.inputter.tooltip=this.tooltip,this.outputElement=o.createElement(t,"div"),this.outputElement.classList.add("gcli-output"),this.outputList=new d(e,{requisition:this.requisition,element:this.outputElement}),this.element.appendChild(this.outputElement),u.maybeShowIntro(this.commandOutputManager,this.requisition)}function i(e,t,n){if(!t&&(t=e.getElementById(n),!t))throw new Error("Missing element, id="+n);return t}function r(e,t){var n=e.ownerDocument;return t||(t=n.getElementById("gcli-row-complete"),t||(t=o.createElement(n,"div"),e.parentNode.insertBefore(t,e.nextSibling),t.gcliCreated=!0)),t}var o=e("util/util"),s=e("util/domtemplate"),a=e("gcli/settings"),l=e("gcli/canon").CommandOutputManager,c=e("gcli/cli").Requisition,u=e("gcli/ui/intro"),h=e("gcli/ui/tooltip").Tooltip,d=e("gcli/ui/output_terminal").OutputTerminal,p=e("gcli/ui/inputter").Inputter,f=e("gcli/ui/completer").Completer,m=e("gcli/ui/focus").FocusManager,g=e("gcli/ui/prompt").Prompt,v=e("text!gcli/ui/display.css"),y=e("text!gcli/ui/display.html");t.createDisplay=function(e){null!=e.settings&&a.setDefaults(e.settings);var t=new n(e),i=t.requisition;return{exec:i.exec.bind(i),update:i.update.bind(i),updateExec:i.updateExec.bind(i),destroy:t.destroy.bind(t)}},n.prototype.destroy=function(){delete this.element,delete this.template,this.outputList.destroy(),delete this.outputList,delete this.outputElement,this.tooltip.destroy(),delete this.tooltip,this.prompt.destroy(),delete this.prompt,this.completer.destroy(),delete this.completer,delete this.completeElement,this.inputter.destroy(),delete this.inputter,delete this.inputElement,this.focusManager.destroy(),delete this.focusManager,this.requisition.destroy(),delete this.requisition,this.displayStyle&&this.displayStyle.parentNode.removeChild(this.displayStyle),delete this.displayStyle},t.Display=n}),define("gcli/index",["require","exports","module","util/legacy","gcli/canon","gcli/canon","gcli/types/basic","gcli/types/command","gcli/types/javascript","gcli/types/node","gcli/types/resource","gcli/types/selection","gcli/types/setting","gcli/settings","gcli/cli","gcli/ui/intro","gcli/ui/focus","gcli/ui/fields/basic","gcli/ui/fields/javascript","gcli/ui/fields/selection","gcli/ui/display"],function(e,t){e("util/legacy"),t.addCommand=e("gcli/canon").addCommand,t.removeCommand=e("gcli/canon").removeCommand,e("gcli/types/basic").startup(),e("gcli/types/command").startup(),e("gcli/types/javascript").startup(),e("gcli/types/node").startup(),e("gcli/types/resource").startup(),e("gcli/types/selection").startup(),e("gcli/types/setting").startup(),e("gcli/settings").startup(),e("gcli/cli").startup(),e("gcli/ui/intro").startup(),e("gcli/ui/focus").startup(),e("gcli/ui/fields/basic").startup(),e("gcli/ui/fields/javascript").startup(),e("gcli/ui/fields/selection").startup();var n=e("gcli/ui/display");t.createDisplay=function(e){return n.createDisplay(e||{})},t.createView=t.createDisplay}),define("text!gcli/commands/help_man.html",[],function(){return'\r\n<div>\r\n  <h3>${command.name}</h3>\r\n\r\n  <h4 class="gcli-help-header">\r\n    ${l10n.helpManSynopsis}:\r\n    <span class="gcli-out-shortcut" onclick="${onclick}" data-command="${command.name}">\r\n      ${command.name}\r\n      <span foreach="param in ${command.params}">\r\n        ${param.defaultValue !== undefined ? \'[\' + param.name + \']\' : param.name}\r\n      </span>\r\n    </span>\r\n  </h4>\r\n\r\n  <h4 class="gcli-help-header">${l10n.helpManDescription}:</h4>\r\n\r\n  <p class="gcli-help-description">${describe(command)}</p>\r\n\r\n  <div if="${command.exec}">\r\n    <h4 class="gcli-help-header">${l10n.helpManParameters}:</h4>\r\n\r\n    <ul class="gcli-help-parameter">\r\n      <li if="${command.params.length === 0}">${l10n.helpManNone}</li>\r\n      <li foreach="param in ${command.params}">\r\n        ${param.name} <em>${getTypeDescription(param)}</em>\r\n        <br/>\r\n        ${describe(param)}\r\n      </li>\r\n    </ul>\r\n  </div>\r\n\r\n  <div if="${!command.exec}">\r\n    <h4 class="gcli-help-header">${l10n.subCommands}:</h4>\r\n\r\n    <ul class="gcli-help-${subcommands}">\r\n      <li if="${subcommands.length === 0}">${l10n.subcommandsNone}</li>\r\n      <li foreach="subcommand in ${subcommands}">\r\n        <strong>${subcommand.name}</strong>:\r\n        ${subcommand.description}\r\n        <span class="gcli-out-shortcut" data-command="help ${subcommand.name}"\r\n            onclick="${onclick}" ondblclick="${ondblclick}">\r\n          help ${subcommand.name}\r\n        </span>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n\r\n</div>\r\n'}),define("text!gcli/commands/help_list.html",[],function(){return'\r\n<div>\r\n  <div if="${includeIntro}">\r\n    <h2>Welcome to GCLI</h2>\r\n    <p>GCLI is an experiment to create a highly usable JavaScript command line for developers.</p>\r\n    <p>\r\n      Useful links:\r\n      <a href=\'https://github.com/joewalker/gcli\'>Source</a> (Apache-2.0),\r\n      <a href=\'https://github.com/joewalker/gcli/blob/master/docs/index.md\'>Documentation</a> (for users/embedders),\r\n      <a href=\'https://wiki.mozilla.org/DevTools/Features/GCLI\'>Mozilla feature page</a> (for GCLI in the web console).\r\n    </p>\r\n  </div>\r\n\r\n  <h3>${heading}</h3>\r\n\r\n  <table>\r\n    <tr foreach="command in ${matchingCommands}">\r\n      <th class="gcli-help-name">${command.name}</th>\r\n      <td class="gcli-help-arrow">-</td>\r\n      <td>\r\n        ${command.description}\r\n        <span class="gcli-out-shortcut"\r\n            onclick="${onclick}" ondblclick="${ondblclick}"\r\n            data-command="help ${command.name}">help ${command.name}</span>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n</div>\r\n'}),define("text!gcli/commands/help.css",[],function(){return".gcli-help-name{\rtext-align:end;\r}\r.gcli-help-arrow{\rcolor:#AAA;\r}\r.gcli-help-description{\rmargin:0 20px;\rpadding:0;\r}\r.gcli-help-parameter{\rmargin:0 30px;\rpadding:0;\r}\r.gcli-help-header{\rmargin:10px 0 6px;\r}\r"}),define("gcli/commands/help",["require","exports","module","util/util","util/l10n","gcli/canon","gcli/ui/view","text!gcli/commands/help_man.html","text!gcli/commands/help_list.html","text!gcli/commands/help.css"],function(e,t){function n(e,t){var n=s.getCommands().filter(function(t){return t.hidden?!1:e.search&&0!==t.name.indexOf(e.search)?!1:e.search||-1==t.name.indexOf(" ")?!0:!1});n.sort(function(e,t){return e.name.localeCompare(t.name)});var i;return i=0===n.length?o.lookupFormat("helpListNone",[e.search]):null==e.search?o.lookup("helpListAll"):o.lookupFormat("helpListPrefix",[e.search]),{l10n:o.propertyLookup,includeIntro:null==e.search,matchingCommands:n,heading:i,onclick:function(e){r.updateCommand(e.currentTarget,t)},ondblclick:function(e){r.executeCommand(e.currentTarget,t)}}}function i(e,t){var n={l10n:o.propertyLookup,command:e,onclick:function(e){r.updateCommand(e.currentTarget,t)},ondblclick:function(e){r.executeCommand(e.currentTarget,t)},describe:function(e){return e.manual||e.description},getTypeDescription:function(e){var t="";return t=void 0===e.defaultValue?o.lookup("helpManRequired"):null===e.defaultValue?o.lookup("helpManOptional"):e.defaultValue,"("+e.type.name+", "+t+")"}};return Object.defineProperty(n,"subcommands",{get:function(){var t=s.getCommands().filter(function(t){return 0===t.name.indexOf(e.name)&&t.name!==e.name});return t.sort(function(e,t){return e.name.localeCompare(t.name)}),t},enumerable:!0}),n}var r=e("util/util"),o=e("util/l10n"),s=e("gcli/canon"),a=e("gcli/ui/view");t.helpManHtml=e("text!gcli/commands/help_man.html"),t.helpListHtml=e("text!gcli/commands/help_list.html"),t.helpCss=e("text!gcli/commands/help.css");var l={name:"help",description:o.lookup("helpDesc"),manual:o.lookup("helpManual"),params:[{name:"search",type:"string",description:o.lookup("helpSearchDesc"),manual:o.lookup("helpSearchManual3"),defaultValue:null}],returnType:"html",exec:function(e,r){var o=s.getCommand(e.search||void 0);return a.createView(o?{html:t.helpManHtml,options:{allowEval:!0,stack:"help_man.html"},data:i(o,r),css:t.helpCss,cssId:"gcli-help"}:{html:t.helpListHtml,options:{allowEval:!0,stack:"help_list.html"},data:n(e,r),css:t.helpCss,cssId:"gcli-help"})}};t.startup=function(){s.addCommand(l)},t.shutdown=function(){s.removeCommand(l)}}),define("orion/shell/Shell",["i18n!orion/widgets/nls/messages","orion/i18nUtil","gcli/index","gcli/types","gcli/types/selection","gcli/ui/fields","gcli/ui/fields/menu","util/util","gcli/settings","gcli/canon","gcli/cli","gcli/commands/help","util/promise","orion/metrics"],function(e,t,n,i,r,o,s,a,l,c,u,h,d,p){function f(){}f.prototype=Object.create(r.SelectionType.prototype);var m={};return m.shell={},m.shell.CompletionStatus={MATCH:0,PARTIAL:1,ERROR:2},m.shell.Shell=function(){function r(e){this._init(e.input,e.output)}return r.prototype={clear:function(){for(var n=document.getElementsByClassName("gcli-output")[0];n.hasChildNodes();)n.removeChild(n.lastChild);this.output(t.formatMessage(e.AvailableCmdsType,"<b>help</b>"))},output:function(e){var t=new u.Output;this.commandOutputManager.onOutput({output:t}),t.complete(e)},registerCommand:function(e){e.exec||(e.exec=e.callback),e.params||(e.params=e.parameters);var t=function(e,t){return function(n,i){p.logEvent("shell","invoke",t);var r=e(n,i);return this.registeredTypes.forEach(function(e){e.prototype.lastParseTimestamp=0}),r}.bind(this)}.bind(this);e.exec&&(e.exec=t(e.exec,e.name)),n.addCommand(e)},registerType:function(e){var t=function(e){function t(e){this.typeSpec=e}return t.prototype=Object.create(f.prototype),t.prototype.name=e.getName(),t.prototype.lastParseTimestamp=0,t.prototype.parse=function(t){var n=Object.getPrototypeOf(this),r=n.lastParseTimestamp;n.lastParseTimestamp=Math.round((new Date).getTime()/1e3);var o=JSON.parse(JSON.stringify(t));return e.parse(o,this.typeSpec,{lastParseTimestamp:r}).then(function(e){var n=i.Status.VALID;if(e.status)switch(e.status){case m.shell.CompletionStatus.ERROR:n=i.Status.ERROR;break;case m.shell.CompletionStatus.PARTIAL:n=i.Status.INCOMPLETE}var r=d.defer();return r.resolve(e.predictions),new i.Conversion(e.value,t,n,e.message,r.promise)})},t.prototype.lookup=function(){var t=Object.getPrototypeOf(this),n=t.lastParseTimestamp;t.lastParseTimestamp=Math.round((new Date).getTime()/1e3);var i={prefix:"",suffix:"",text:""};return e.parse(i,this.typeSpec,{lastParseTimestamp:n}).then(function(e){return e.predictions})},e.stringify&&(t.prototype.stringify=function(t){return e.stringify(t,this.typeSpec)}),t}(e);i.registerType(t),this.registeredTypes.push(t)},setFocusToInput:function(){this.inputText.focus()},setInputText:function(e){e&&(this.inputText.value=e.toString())},addField:function(){},_init:function(i,r){function u(e,t){o.Field.call(this,e,t),this.isImportant=!0,this.element=a.createElement(this.document,"div"),this.element.className="orion",this.menu=new s.Menu({document:this.document,field:!0,type:e}),this.menu.onItemClick=this.onItemClick.bind(this),this.element.appendChild(this.menu.element),this.onFieldChange=a.createEvent("CustomField.fieldChanged"),this.onInputChange=this.onInputChange.bind(this)}this.registeredTypes=[];var d=document.createElement("div");d.id="gcli-display",d.style.height="100%",d.style.width="100%",r.appendChild(d),this.inputText=document.createElement("input"),this.inputText.type="text",this.inputText.id="gcli-input",this.inputText.style.width="100%",this.inputText.style.height="100%",i.appendChild(this.inputText),l.getSetting("hideIntro").value=!0,l.getSetting("eagerHelper").value=2,setTimeout(function(){this.commandOutputManager=new c.CommandOutputManager,n.createDisplay({commandOutputManager:this.commandOutputManager}),this.output(t.formatMessage(e.AvailableCmdsType,"<b>help</b>"))}.bind(this),1),h.startup(),h.helpListHtml=h.helpListHtml.replace('"${includeIntro}"',"${false}"),u.prototype=Object.create(o.Field.prototype),u.prototype.destroy=function(){o.Field.prototype.destroy.call(this),this.menu.destroy(),delete this.element,delete this.menu,delete this.document,delete this.onInputChange},u.prototype.setConversion=function(e){this.setMessage(e.message);var t=[],n=e.getPredictions();n.forEach(function(e){e.hidden||t.push({name:e.name,complete:e.name,description:e.description||""})},this),this.menu.show(t),e.then&&e.then(function(){this.element&&this.setConversion(this.getConversion())}.bind(this))},u.prototype.onItemClick=function(e){var t=e.conversion;this.onFieldChange({conversion:t}),this.setMessage(t.message)},u.claim=function(e){return e instanceof f?o.Field.MATCH+1:o.Field.NO_MATCH},o.addField(u)}},r}(),m.shell}),define("shell/shellPageFileService",["i18n!orion/shell/nls/messages","orion/bootstrap","orion/fileClient","orion/Deferred"],function(e,t,n,i){var r={};r.shellPage={};var o,s;return t.startup().then(function(e){s=e.serviceRegistry,o=new n.FileClient(s)}),r.shellPage.ShellPageFileService=function(){function t(){this.currentDirectory=null,this.withNode(this.SEPARATOR,function(e){this.rootNode=e}.bind(this)),this.currentRetrievals={}}return t.prototype={SEPARATOR:"/",computePathString:function(e){if(e.Location===this.SEPARATOR)return this.SEPARATOR;var t=this.SEPARATOR+o.fileServiceName(e.Location),n=e.Parents;if(n){t+=this.SEPARATOR;for(var i=n.length;--i>=0;)t+=n[i].Name,t+=this.SEPARATOR;t+=e.Name}return e.Directory&&(t+=this.SEPARATOR),t},createDirectory:function(e,t){return this._createResource(e,t,!0)},createFile:function(e,t){return this._createResource(e,t,!1)},ensureDirectory:function(t,n){var r=new i;return"string"!=typeof n?n.Directory?r.resolve(n):r.reject(e.AlreadyExistsInDirErr):(t=t||this.getCurrentDirectory(),this.withChildren(t,function(i){if(i)for(var o=0;o<i.length;o++)if(i[o].Name===n)return void(i[o].Directory?r.resolve(i[o]):r.reject(e.AlreadyExistsInDirErr));this.createDirectory(t,n).then(function(e){r.resolve(e)},function(e){r.reject(e)})}.bind(this),function(e){r.reject(e)})),r},ensureFile:function(t,n){var r=new i;return"string"!=typeof n?n.Directory?r.reject(e.AlreadyExistsInDirErr):r.resolve(n):(t=t||this.getCurrentDirectory(),this.withChildren(t,function(i){if(i)for(var o=0;o<i.length;o++)if(i[o].Name===n)return void(i[o].Directory?r.reject(e.AlreadyExistsInDirErr):r.resolve(i[o]));this.createFile(t,n).then(function(e){r.resolve(e)},function(e){r.reject(e)})}.bind(this),function(e){r.reject(e)})),r},getChild:function(e,t){if(0===t.length)return null;if("."===t)return e;if(".."===t)return this.getParent(e);if(!e.Children)return null;for(var n=0;n<e.Children.length;n++)if(e.Children[n].Name===t)return e.Children[n];return null},getCurrentDirectory:function(){return this.currentDirectory},getDirectory:function(e,t){if(0===t.indexOf(this.SEPARATOR))e=this.rootNode,t=t.substring(1);else if(!e){if(!this.currentDirectory)return null;e=this.currentDirectory}for(var n=t.substring(0,t.lastIndexOf(this.SEPARATOR)).split(this.SEPARATOR),i=e,r=0;r<n.length;r++)if(n[r].length>0&&(i=this.getChild(i,n[r]),!i||!i.Directory))return null;var o=t.substring(t.lastIndexOf(this.SEPARATOR)+1),s=this.getChild(i,o);return s&&this._retrieveNode(s),i.Children||this._retrieveNode(i),i},getParent:function(e){return e.parent&&this._retrieveNode(e.parent),e.parent},loadWorkspace:function(e){var t=s.getService("orion.page.progress");return t?t.progress(o.loadWorkspace(e),"Loading workspace "+e):o.loadWorkspace(e)},read:function(e){return o.read(e.Location,!1)},readBlob:function(t){var n=o._getService(t.Location);if(!n.readBlob){var r=new i;return r.reject(e.SrcNotSupportBinRead),r}return n.readBlob(t.Location)},setCurrentDirectory:function(e){this.currentDirectory=e,this._retrieveNode(e)},withChildren:function(e,t,n){if(e.Children)t&&t(e.Children);else if(e.ChildrenLocation){var i=s.getService("orion.page.progress");(i?i.progress(o.fetchChildren(e.ChildrenLocation),"Getting children of "+e.Name):o.fetchChildren(e.ChildrenLocation)).then(function(n){this._sort(n);var i=e.Parents?e.Parents.slice(0):[];e.parent&&e.parent===this.rootNode||i.unshift(e);for(var r=0;r<n.length;r++)n[r].parent=e,n[r].Parents=i;e.Children=n,t&&t(n)}.bind(this),function(e){n&&n(e)})}else t&&t(null)},withNode:function(e,t,n){var i=s.getService("orion.page.progress");(i?i.progress(o.loadWorkspace(e),"Loading workspace "+e):o.loadWorkspace(e)).then(function(e){this._retrieveNode(e,t,n)}.bind(this),n)},write:function(e,t){return o.write(e.Location,t)},writeBlob:function(t,n){var r=o._getService(t.Location);if(!r.writeBlob){var s=new i;return s.reject(e.TargetNotSupportBinWrite),s}return r.writeBlob(t.Location,n)},_createResource:function(e,t,n){var r=e.Location+this.SEPARATOR+t,s=new i,a=this.currentRetrievals[r]||[];if(a.push(s),1===a.length){this.currentRetrievals[r]=a;var l=function(e){n&&(e.Name=t),this.currentRetrievals[r].forEach(function(t){t.resolve(e)}),delete this.currentRetrievals[r]}.bind(this),c=function(e){this.currentRetrievals[r].forEach(function(t){t.reject(e.responseText)}),delete this.currentRetrievals[r]}.bind(this);n?e.Projects?o.createProject(e.Location,t).then(function(e){o.read(e.ContentLocation,!0).then(l,c)},c):o.createFolder(e.Location,t).then(l,c):o.createFile(e.Location,t).then(l,c)}return s},_retrieveNode:function(e,t,n){if(e.parent&&e.Children)return void(t&&t(e));var i=function(e,t,n){e.Directory&&!e.Children?this.withChildren(e,function(){t&&t(e)},n):t&&t(e)}.bind(this),r=function(e,t,n){if(e.Location===this.SEPARATOR)t(e);else if(e.Parents)if(0===e.Parents.length){var i=o.fileServiceRootURL(e.Location),r=s.getService("orion.page.progress");(r?r.progress(o.loadWorkspace(i),"Loading workspace "+i):o.loadWorkspace(i)).then(function(n){n.parent=this.rootNode,e.parent=n,t(e)}.bind(this),n)}else{e.parent=e.Parents[0];for(var a=0;a<e.Parents.length-1;a++)e.Parents[a].parent=e.Parents[a+1],e.Parents[a].Directory=!0;t(e)}else e.parent=this.rootNode,t(e)}.bind(this);if(e.Parents||e.Projects||e.Location===this.SEPARATOR||e.Name===o.fileServiceName(e.Location))e.ChildrenLocation&&(e.Directory=!0),r(e,function(e){i(e,t,n)},function(){i(e,t,n)});else{var a=s.getService("orion.page.progress");(a?a.progress(o.loadWorkspace(e.Location),"Loading workspace "+e.Location):o.loadWorkspace(e.Location)).then(function(o){e.Parents=o.Parents,r(e,function(e){i(e,t,n)},function(){i(e,t,n)})})}},_sort:function(e){e.sort(function(e,t){if(e.Directory!==t.Directory)return e.Directory?-1:1;var n=e.Name&&e.Name.toLowerCase(),i=t.Name&&t.Name.toLowerCase();return i>n?-1:n>i?1:0
})}},t}(),r.shellPage}),define("orion/urlUtils",["orion/PageUtil","orion/URL-shim"],function(e){function t(t){for(var n=/\[([^\]]*)\]\(([^\)]+)\)/g,i=n.exec(t),r=[],o=0;i;){if(3===i.length&&i[2].length>0){var s=new URL(i[2]);":"!==s.protocol&&e.validateURLScheme(s.href)&&(i.index>o&&r.push({segmentStr:t.substring(o,i.index)}),r.push({segmentStr:i[1].length>0?i[1]:i[2],urlStr:i[2]}),o=i.index+i[0].length)}i=n.exec(t)}return 0===o?[]:(o<t.length&&r.push({segmentStr:t.substring(o)}),r)}function n(e,t){t.forEach(function(t){if(t.urlStr){var n=document.createElement("a");n.href=t.urlStr,n.appendChild(document.createTextNode(t.segmentStr)),e.appendChild(n)}else{var i=document.createElement("span");i.textContent=t.segmentStr,e.appendChild(i)}})}return{detectValidURL:t,processURLSegments:n}}),function(){function e(e){this.tokens=[],this.tokens.links={},this.options=e||c.defaults,this.rules=u.normal,this.options.gfm&&(this.rules=this.options.tables?u.tables:u.gfm)}function t(e,t){if(this.options=t||c.defaults,this.links=e,this.rules=h.normal,this.renderer=this.options.renderer||new n,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?h.breaks:h.gfm:this.options.pedantic&&(this.rules=h.pedantic)}function n(e){this.options=e||{}}function i(e){this.tokens=[],this.token=null,this.options=e||c.defaults,this.options.renderer=this.options.renderer||new n,this.renderer=this.options.renderer,this.renderer.options=this.options}function r(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?String.fromCharCode("x"===t.charAt(1)?parseInt(t.substring(2),16):+t.substring(1)):""})}function s(e,t){return e=e.source,t=t||"",function n(i,r){return i?(r=r.source||r,r=r.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(i,r),n):new RegExp(e,t)}}function a(){}function l(e){for(var t,n,i=1;i<arguments.length;i++){t=arguments[i];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function c(t,n,o){if(o||"function"==typeof n){o||(o=n,n=null),n=l({},c.defaults,n||{});var s,a,u=n.highlight,h=0;try{s=e.lex(t,n)}catch(d){return o(d)}a=s.length;var p=function(){var e,t;try{e=i.parse(s,n)}catch(r){t=r}return n.highlight=u,t?o(t):o(null,e)};if(!u||u.length<3)return p();if(delete n.highlight,!a)return p();for(;h<s.length;h++)!function(e){return"code"!==e.type?--a||p():u(e.text,e.lang,function(t,n){return null==n||n===e.text?--a||p():(e.text=n,e.escaped=!0,void(--a||p()))})}(s[h])}else try{return n&&(n=l({},c.defaults,n)),i.parse(e.lex(t,n),n)}catch(d){if(d.message+="\nPlease report this to https://github.com/chjj/marked.",(n||c.defaults).silent)return"<p>An error occured:</p><pre>"+r(d.message+"",!0)+"</pre>";throw d}}var u={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:a,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:a,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:a,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};u.bullet=/(?:[*+-]|\d+\.)/,u.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,u.item=s(u.item,"gm")(/bull/g,u.bullet)(),u.list=s(u.list)(/bull/g,u.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+u.def.source+")")(),u.blockquote=s(u.blockquote)("def",u.def)(),u._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",u.html=s(u.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,u._tag)(),u.paragraph=s(u.paragraph)("hr",u.hr)("heading",u.heading)("lheading",u.lheading)("blockquote",u.blockquote)("tag","<"+u._tag)("def",u.def)(),u.normal=l({},u),u.gfm=l({},u.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),u.gfm.paragraph=s(u.paragraph)("(?!","(?!"+u.gfm.fences.source.replace("\\1","\\2")+"|"+u.list.source.replace("\\1","\\3")+"|")(),u.tables=l({},u.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=u,e.lex=function(t,n){var i=new e(n);return i.lex(t)},e.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},e.prototype.token=function(e,t,n){for(var i,r,o,s,a,l,c,h,d,e=e.replace(/^ +$/gm,"");e;)if((o=this.rules.newline.exec(e))&&(e=e.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(e))e=e.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]});else if(o=this.rules.heading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(t&&(o=this.rules.nptable.exec(e))){for(e=e.substring(o[0].length),l={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},h=0;h<l.align.length;h++)l.align[h]=/^ *-+: *$/.test(l.align[h])?"right":/^ *:-+: *$/.test(l.align[h])?"center":/^ *:-+ *$/.test(l.align[h])?"left":null;for(h=0;h<l.cells.length;h++)l.cells[h]=l.cells[h].split(/ *\| */);this.tokens.push(l)}else if(o=this.rules.lheading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(o=this.rules.hr.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,t,!0),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(e)){for(e=e.substring(o[0].length),s=o[2],this.tokens.push({type:"list_start",ordered:s.length>1}),o=o[0].match(this.rules.item),i=!1,d=o.length,h=0;d>h;h++)l=o[h],c=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(c-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&h!==d-1&&(a=u.bullet.exec(o[h+1])[0],s===a||s.length>1&&a.length>1||(e=o.slice(h+1).join("\n")+e,h=d-1)),r=i||/\n\n(?!\s*$)/.test(l),h!==d-1&&(i="\n"===l.charAt(l.length-1),r||(r=i)),this.tokens.push({type:r?"loose_item_start":"list_item_start"}),this.token(l,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(e))e=e.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===o[1]||"script"===o[1]||"style"===o[1],text:o[0]});else if(!n&&t&&(o=this.rules.def.exec(e)))e=e.substring(o[0].length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]},this.tokens.push({type:"def",id:o[1].toLowerCase(),href:o[2],title:o[3]});else if(t&&(o=this.rules.table.exec(e))){for(e=e.substring(o[0].length),l={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},h=0;h<l.align.length;h++)l.align[h]=/^ *-+: *$/.test(l.align[h])?"right":/^ *:-+: *$/.test(l.align[h])?"center":/^ *:-+ *$/.test(l.align[h])?"left":null;for(h=0;h<l.cells.length;h++)l.cells[h]=l.cells[h].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(t&&(o=this.rules.paragraph.exec(e)))e=e.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var h={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:a,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:a,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};h._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,h._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,h.link=s(h.link)("inside",h._inside)("href",h._href)(),h.reflink=s(h.reflink)("inside",h._inside)(),h.normal=l({},h),h.pedantic=l({},h.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),h.gfm=l({},h.normal,{escape:s(h.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:s(h.text)("]|","~]|")("|","|https?://|")()}),h.breaks=l({},h.gfm,{br:s(h.br)("{2,}","*")(),text:s(h.gfm.text)("{2,}","*")()}),t.rules=h,t.output=function(e,n,i){var r=new t(n,i);return r.output(e)},t.prototype.output=function(e){for(var t,n,i,o,s="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),s+=o[1];else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),"@"===o[2]?(n=this.mangle(":"===o[1].charAt(6)?o[1].substring(7):o[1]),i=this.mangle("mailto:")+n):(n=r(o[1]),i=n),s+=this.renderer.link(i,null,n);else if(this.inLink||!(o=this.rules.url.exec(e))){if(o=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),e=e.substring(o[0].length),s+=this.options.sanitize?r(o[0]):o[0];else if(o=this.rules.link.exec(e))e=e.substring(o[0].length),this.inLink=!0,s+=this.outputLink(o,{href:o[2],title:o[3]}),this.inLink=!1;else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),t=(o[2]||o[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){s+=o[0].charAt(0),e=o[0].substring(1)+e;continue}this.inLink=!0,s+=this.outputLink(o,t),this.inLink=!1}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),s+=this.renderer.strong(this.output(o[2]||o[1]));else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),s+=this.renderer.em(this.output(o[2]||o[1]));else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),s+=this.renderer.codespan(r(o[2],!0));else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),s+=this.renderer.br();else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),s+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),s+=r(this.smartypants(o[0]));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(o[0].length),n=r(o[1]),i=n,s+=this.renderer.link(i,null,n);return s},t.prototype.outputLink=function(e,t){var n=r(t.href),i=t.title?r(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,i,this.output(e[1])):this.renderer.image(n,i,r(e[1]))},t.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e},t.prototype.mangle=function(e){for(var t,n="",i=e.length,r=0;i>r;r++)t=e.charCodeAt(r),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},n.prototype.code=function(e,t,n){if(this.options.highlight){var i=this.options.highlight(e,t);null!=i&&i!==e&&(n=!0,e=i)}return t?'<pre><code class="'+this.options.langPrefix+r(t,!0)+'">'+(n?e:r(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:r(e,!0))+"\n</code></pre>"},n.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},n.prototype.def=function(){return""},n.prototype.html=function(e){return e},n.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},n.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},n.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},n.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},n.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},n.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},n.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},n.prototype.tablecell=function(e,t){var n=t.header?"th":"td",i=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return i+e+"</"+n+">\n"},n.prototype.strong=function(e){return"<strong>"+e+"</strong>"},n.prototype.em=function(e){return"<em>"+e+"</em>"},n.prototype.codespan=function(e){return"<code>"+e+"</code>"},n.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},n.prototype.del=function(e){return"<del>"+e+"</del>"},n.prototype.link=function(e,t,n){if(this.options.sanitize){try{var i=decodeURIComponent(o(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(r){return""}if(0===i.indexOf("javascript:"))return""}var s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+n+"</a>"},n.prototype.image=function(e,t,n){var i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">"},i.parse=function(e,t,n){var r=new i(t,n);return r.parse(e)},i.prototype.parse=function(e){this.inline=new t(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var n="";this.next();)n+=this.tok();return n},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"def":return this.renderer.def(this.token.id,this.token.href,this.token.title);case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,i,r,o="",s="";for(n="",e=0;e<this.token.header.length;e++)i={header:!0,align:this.token.align[e]},n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});s+=this.renderer.tablerow(n)}return this.renderer.table(o,s);case"blockquote_start":for(var s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":for(var s="",a=this.token.ordered;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,a);case"list_item_start":for(var s="";"list_item_end"!==this.next().type;)s+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(s);case"loose_item_start":for(var s="";"list_item_end"!==this.next().type;)s+=this.tok();return this.renderer.listitem(s);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},a.exec=a,c.options=c.setOptions=function(e){return l(c.defaults,e),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new n,xhtml:!1},c.Parser=i,c.parser=i.parse,c.Renderer=n,c.Lexer=e,c.lexer=e.lex,c.InlineLexer=t,c.inlineLexer=t.output,c.parse=c,"object"==typeof exports?module.exports=c:"function"==typeof define&&define.amd?define("marked/marked",[],function(){return c}):this.marked=c}.call(function(){return this||("undefined"!=typeof window?window:global)}()),define("shell/resultWriters",["orion/Deferred","orion/urlUtils","marked/marked"],function(e,t,n){var i={};return i.shellPage={},i.shellPage.FileBlobWriter=function(){function t(e,t){this.destination=e,this.shellPageFileService=t,this.blobs=[]}return t.prototype={addBlob:function(e){this.blobs.push(e)},write:function(){var t=new e;return this.shellPageFileService.ensureFile(null,this.destination).then(function(e){this.shellPageFileService.writeBlob(e,this.blobs[0]).then(function(){t.resolve()},function(e){t.reject(e)})}.bind(this),function(e){t.reject(e)}),t}},t}(),i.shellPage.FileStringWriter=function(){function t(e,t){this.destination=e,this.shellPageFileService=t}return t.prototype={write:function(t){var n=new e;return this.shellPageFileService.ensureFile(null,this.destination).then(function(e){this.shellPageFileService.write(e,t).then(function(){n.resolve()},function(e){n.reject(e)})}.bind(this),function(e){n.reject(e)}),n}},t}(),i.shellPage.ShellBlobWriter=function(){function t(e){this.rootElement=e,this.blobCount=0}return t.prototype={addBlob:function(){this.blobCount++},write:function(){var t=new e,n=document.createElement("span");return n.textContent="("+this.blobCount+" blobs)",this.rootElement.appendChild(n),t.resolve(),t}},t}(),i.shellPage.ShellStringWriter=function(){function i(e,t){this.rootElement=e,this.processMarkdown=t}return i.prototype={write:function(i){var r=document.createElement("div");if(this.processMarkdown)r.innerHTML=n(i,{sanitize:!0,breaks:!0});else{this.rootElement.className+=" string-result-output";var o=t.detectValidURL(i);o.length?t.processURLSegments(r,o):r.textContent=i}for(var s=r.childNodes;s.length>0;)this.rootElement.appendChild(s[0]);var a=new e;return a.resolve(),a}},i}(),i.shellPage}),define("shell/paramType-file",["i18n!orion/shell/nls/messages","orion/shell/Shell","orion/i18nUtil","orion/Deferred","shell/resultWriters"],function(e,t,n,i,r){function o(e,t,n,i){this.value=e,this.typeSpec=t,this.typedPath=n,this.shellPageFileService=i}var s={};return s.shellPage={},o.prototype={getPluginRepresentation:function(){var e=new i;if("string"==typeof this.value)e.resolve({file:{path:this.value}});else{var t=0,n=this.value.slice(0),r=[],o=function(i){i&&r.push(i),0===t&&0===n.length&&e.resolve(this.typeSpec.multiple?r:r[0])}.bind(this),s=function(){for(;n.length>0;){var e=n[0],i=this.shellPageFileService.getCurrentDirectory(),r=i.Parents;if(r&&0!==r.length||!i.parent||(r=[i.parent]),r=r?r.slice(0):[],r.length>0)for(var a=r[r.length-1].parent;a;)r.push(a),a=a.parent;r.splice(0,0,i);var l=r.length-1,c=e.Parents;if(c&&0!==c.length||!e.parent||(c=[e.parent]),c=c?c.slice(0):[],c.length>0)for(var u=c[c.length-1].parent;u;)c.push(u),u=u.parent;c.splice(0,0,e);for(var h=c.length-1;h>=0&&l>=0&&c[h].Location===r[l].Location;)h--,l--;var d="";if(0===e.Location.indexOf(c[h+1].Location)){for(var p=0;l>=p;p++)d+=".."+this.shellPageFileService.SEPARATOR;d+=e.Location.substring(c[h+1].Location.length)}else d=e.Location;var f={isDirectory:e.Directory,path:d.length?d:"."};e.Directory&&this.typeSpec.multiple&&this.typeSpec.recurse&&function(e){t++,this.shellPageFileService.withChildren(e,function(i){if(t--,0===i.length)return void o();var r=e.recursePath?e.recursePath.slice(0):[];r.push(e.Name);var a=function(e){t--,n.push(e),1===n.length&&s()};i.forEach(function(e){e.recursePath=r,t++,e.parent?a(e):this.shellPageFileService.withNode(e.Location,a,function(){t--,o()})}.bind(this))}.bind(this),function(){t--,o()})}.bind(this)(e),n.splice(0,1),this.typeSpec.content&&!f.isDirectory?function(n){t++,this.shellPageFileService.readBlob(e).then(function(e){t--,n.blob=e,o(n)},function(){t--,o(n)})}.bind(this)(f):o(f)}}.bind(this);s()}return e},getValue:function(){return this.value},resourceExists:function(){return"string"!=typeof this.value},stringify:function(){return this.typedPath}},s.shellPage.ParamTypeFile=function(){function s(e){this.shellPageFileService=e}return s.prototype={getName:function(){return"file"},parse:function(e,t){var n=new i;return this._getPredictions(e.text).then(function(i){n.resolve(this._createCompletion(e.text,i,t))}.bind(this),function(e){n.error(e)}),n},processResult:function(t,i,o,s){var a=document.createElement("div"),l=0,c=function(i){return this.callback=function(){var o=n.formatMessage(e.WroteMsg,"string"==typeof i?i:this.shellPageFileService.computePathString(i)),c=new r.ShellStringWriter(a);c.write(o+"\n"),0!==--l||s?t.progress(a):t.resolve(a)}.bind(this),this}.bind(this),u=function(i){return this.callback=function(o){var c=n.formatMessage(e.WriteFailMsg,"string"==typeof i?i:this.shellPageFileService.computePathString(i));c+=" ["+o+"]";var u=new r.ShellStringWriter(a);u.write(c+"\n"),0!==--l||s?t.progress(a):t.resolve(a)}.bind(this),this}.bind(this),h=o||this.shellPageFileService.getCurrentDirectory();l++,this.shellPageFileService.ensureDirectory(null,h).then(function(t){l--;var o=i.getValue();i.isArray()||(o=[o]),o.forEach(function(i){l++;for(var o=i.path.split(this.shellPageFileService.SEPARATOR),s=0;s<o.length;){var a=o[s];if("."===a)o.splice(s,1);else if(".."===a){if(0===s)return void u(n.formatMessage(e.WriteFailNotDescendentOfOutputDir,i.path));o.splice(s-- -1,2)}else s++}var h=function(e,t,n){var i=n[0];n.splice(0,1);var o=this.shellPageFileService.computePathString(e)+this.shellPageFileService.SEPARATOR+i;return 0===n.length?void(t.isDirectory?this.shellPageFileService.ensureDirectory(e,i).then(c(o).callback,u(o).callback):this.shellPageFileService.ensureFile(e,i).then(function(e){var n=new r.FileBlobWriter(e,this.shellPageFileService);n.addBlob(t.blob),n.write().then(c(e).callback,u(e).callback)}.bind(this),u(o).callback)):void this.shellPageFileService.ensureDirectory(e,i).then(function(e){h(e,t,n)},u(this.shellPageFileService.computePathString(e)+this.shellPageFileService.SEPARATOR+i).callback)}.bind(this);h(t,i,o)}.bind(this))}.bind(this),u(h).callback)},stringify:function(e){return e?"string"==typeof e?e:e.stringify():""},_createCompletion:function(i,r,s){if(!r)return{value:void 0,status:t.CompletionStatus.ERROR,message:n.formatMessage(e.notValid,i),predictions:null};var a,l,c;if(s.exist===!1){for(var u,h=0;h<r.length;h++){var d=r[h];if(d.name===i){u=d;break}}u?(l=t.CompletionStatus.ERROR,a=n.formatMessage(e.AlreadyExist,i)):(l=t.CompletionStatus.MATCH,c=new o(i,s,i,this.shellPageFileService)),r=[]}else{var p=[];if(r.forEach(function(e){(e.value.Directory||s.file)&&p.push(e)}),r=p,s.exist){var f=[],m=i.replace(/[\-(){}\[\]+,.\\\^$|#]/g,"\\$&");m=m.replace(/\?/g,"."),m=m.replace(/\*/g,".*");var g=new RegExp("^"+m+"$");r.forEach(function(e){e.name.match(g)&&(e.value.Directory&&s.directory||!e.value.Directory&&s.file)&&f.push(e.value)}),s.multiple&&f.length||1===f.length?(l=t.CompletionStatus.MATCH,c=new o(f,s,i,this.shellPageFileService)):r.length?l=t.CompletionStatus.PARTIAL:(l=t.CompletionStatus.ERROR,a=n.formatMessage(e.notValid,i))}else{for(var u,h=0;h<r.length;h++){var d=r[h];if(d.name===i){u=d;break}}l=t.CompletionStatus.MATCH,c=u?new o([u.value],s,i,this.shellPageFileService):new o(i,s,i,this.shellPageFileService)}}return{value:c,status:l,message:a,predictions:r}},_find:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},_getPredictions:function(e){var t=new i,n=this.shellPageFileService.getDirectory(null,e);return n?this.shellPageFileService.withChildren(n,function(i){var r,o=e.lastIndexOf(this.shellPageFileService.SEPARATOR)+1,s=e.substring(0,o),a=e.substring(o),l=0===a.length||"."===a,c=[],u=[];if(l&&(r=s+".",c.push({name:r,value:n,incomplete:!0})),l||".."===a){var h=this.shellPageFileService.getParent(n);h&&(r=s+"..",c.push({name:r,value:h,incomplete:!0}))}0===a.trim().length&&s.length>0&&(r=s,c.push({name:r,value:n,incomplete:!1}));var d=a.replace(/[\-(){}\[\]+,.\\\^$|#]/g,"\\$&");d=d.replace(/\?/g,"."),d=d.replace(/\*/g,".*");for(var p=new RegExp("^"+d),f=0;f<i.length;f++){var m=i[f];if(m.Name.match(p)){var g=!m.Directory||m.Children&&0===m.Children.length;r=s+m.Name,m.Directory?c.push({name:r,value:m,incomplete:!g}):u.push({name:r,value:m,incomplete:!g})}}t.resolve(c.concat(u))}.bind(this),function(e){t.error(e)}):t.resolve(null),t}},s}(),s.shellPage}),define("shell/paramType-plugin",["i18n!orion/shell/nls/messages","require","orion/shell/Shell","orion/i18nUtil","orion/Deferred"],function(e,t,n,i,r){var o="all",s={};s.shellPage={};var a=function(){function e(e,t){this.plugins=e,this.urlsToExclude=t}return e.prototype={name:o,getPluginLocations:function(){var e=[];return this.plugins.forEach(function(t){var n=t.getLocation();this.urlsToExclude&&this.urlsToExclude[n]||e.push(n)}.bind(this)),e},isAllPlugin:function(){return!0},start:function(e){return this._invokeOnAllPlugins("start",e)},stop:function(){return this._invokeOnAllPlugins("stop")},uninstall:function(){return this._invokeOnAllPlugins("uninstall")},update:function(){return this._invokeOnAllPlugins("update")},_invokeOnAllPlugins:function(e,t){var n=this.urlsToExclude?[]:this.plugins;this.urlsToExclude&&this.plugins.forEach(function(e){this.urlsToExclude[e.getLocation()]||n.push(e)}.bind(this));var i=new r,o=n.length,s=0;return n.forEach(function(n){n[e](t).then(function(){++s===o&&i.resolve()},function(e){i.reject(e)})}),i}},e}();return s.shellPage.ParamTypePlugin=function(){function s(e){this.pluginRegistry=e,e.addEventListener("installed",function(){this._initPluginsList()}.bind(this)),e.addEventListener("uninstalled",function(){this._initPluginsList()}.bind(this)),e.addEventListener("stopping",function(){this._sort(this.plugins)}.bind(this)),e.addEventListener("lazy activation",function(){this._sort(this.plugins)}.bind(this)),window.setTimeout(function(){this._computeDefaultPlugins(),this._initPluginsList()}.bind(this),1)}return s.prototype={getName:function(){return"plugin"},getPlugins:function(){return this.plugins.slice(0)},parse:function(e,t){var n=new r,i=this._getPredictions(e.text,t);return n.resolve(this._createCompletion(e.text,i)),n},stringify:function(e){return e.name},_defaultPluginUrls:{},_computeDefaultPlugins:function(){var e=function(e){if(-1===e.indexOf("://")){var t=document.createElement("a");return t.href=e,t.href}return e},n=localStorage.getItem("/orion/preferences/default/plugins");if(n){var i=JSON.parse(n);Object.keys(i).forEach(function(n){this._defaultPluginUrls[e(t.toUrl(n))]=!0}.bind(this))}},_createCompletion:function(t,r){for(var o,s=0;s<r.length;s++){var a=r[s];if(a.name===t){o=a;break}}var l,c;return o?l=n.CompletionStatus.MATCH:r&&r.length>0?l=n.CompletionStatus.PARTIAL:(l=n.CompletionStatus.ERROR,c=i.formatMessage(e.notValid,t)),{value:o?o.value:void 0,status:l,message:c,predictions:r}},_formatLocationAsPluginName:function(e){function t(e){function t(){return arguments[0].toUpperCase()}return e.toLowerCase().replace(/\b[a-z]/g,t)}var n=e.split("/"),i=n[n.length-1];return i=i.split(".html")[0],i=i.replace(/([a-z])([A-Z])/,"$1 $2"),i=t(i),i=i.replace("plugin",""),i=i.replace("Plugin",""),""===i&&(i=e),i.trim()},_getPredictions:function(e,t){var n=[];return this.plugins&&(this.plugins.forEach(function(i){t.excludeDefaultPlugins&&this._defaultPluginUrls[i.getLocation()]||0===i.name.indexOf(e)&&n.push({name:i.name,value:i})}.bind(this)),t.multiple&&0===o.indexOf(e)&&n.push({name:o,value:new a(this.plugins,t.excludeDefaultPlugins?this._defaultPluginUrls:null)})),n},_initPluginsList:function(){this.plugins=[];var e=this.pluginRegistry.getPlugins();e.forEach(function(e){var t=e.getLocation(),n=e.getHeaders();e.name=n.name||this._formatLocationAsPluginName(t),this.plugins.push(e)}.bind(this)),this._sort(this.plugins)},_sort:function(e){e.sort(function(e,t){var n=e.getState();n="active"===n||"starting"===n;var i=t.getState();if(i="active"===i||"starting"===i,n!==i)return n?-1:1;var r=e.name&&e.name.toLowerCase(),o=t.name&&t.name.toLowerCase();return o>r?-1:r>o?1:0})}},s}(),s.shellPage}),define("shell/paramType-service",["i18n!orion/shell/nls/messages","orion/shell/Shell","orion/i18nUtil","orion/Deferred"],function(e,t,n,i){var r={};return r.shellPage={},r.shellPage.ParamTypeService=function(){function r(e){this.pluginRegistry=e,e.addEventListener("installed",function(){this._initServicesList()}.bind(this)),e.addEventListener("uninstalled",function(){this._initServicesList()}.bind(this)),window.setTimeout(function(){this._initServicesList()}.bind(this),1)}return r.prototype={getName:function(){return"service"},parse:function(e){var t=new i,n=this._getPredictions(e.text);return t.resolve(this._createCompletion(e.text,n)),t},stringify:function(e){return e},_createCompletion:function(i,r){for(var o,s=0;s<r.length;s++){var a=r[s];if(a.name===i){o=a;break}}var l,c;return o?l=t.CompletionStatus.MATCH:r&&r.length>0?l=t.CompletionStatus.PARTIAL:(l=t.CompletionStatus.ERROR,c=n.formatMessage(e.notValid,i)),{value:o?o.value:void 0,status:l,message:c,predictions:r}},_getPredictions:function(e){var t=[];return this.services&&this.services.forEach(function(n){0===n.indexOf(e)&&t.push({name:n,value:n})}),t},_initServicesList:function(){var e={},t=this.pluginRegistry.getPlugins();t.forEach(function(t){var n=t.getServiceReferences();n.forEach(function(t){var n=t.getProperty("service.names");n.forEach(function(t){e[t]=!0})})}),this.services=[];for(var n in e)this.services.push(n);this._sort(this.services)},_sort:function(e){e.sort(function(e,t){var n=e.toLowerCase(),i=t.toLowerCase();return i>n?-1:n>i?1:0})}},r}(),r.shellPage}),define("orion/status",["i18n!orion/nls/messages","orion/webui/littlelib","orion/globalCommands","marked/marked"],function(e,t,n,i){function r(e,t,n,i,r){this._serviceRegistry=e,this._serviceRegistration=e.registerService("orion.page.message",this),this._operationsClient=t,this.notificationContainerDomId=r,this.domId=n,this.progressDomId=i||n,this._hookedClose=!1,this._timer=null,this._clickToDisMiss=!0,this._cancelMsg=null,this.statusMessage=this.progressMessage=null}function o(e,t,n,i){if(this.statusService=e,this.progressId=t,n){this.deferred=n,this.begin(i);var r=this;n.then(function(){r.done.bind(r)()},function(){r.done.bind(r)()})}}var s="Error",a="Warning",l="Info",c="Ok",u="closeNotifications";return r.prototype={_init:function(){var e=t.node(u);if(e&&!this._hookedClose){e.style.cursor="pointer",this._hookedClose=!0;var n=t.node(this.notificationContainerDomId);t.addAutoDismiss([n],function(){this._clickToDisMiss&&this.close()}.bind(this)),e.addEventListener("click",function(){this.close()}.bind(this)),n.addEventListener("click",function(e){if(e&&e.target&&"a"===e.target.nodeName.toLowerCase()){var i=t.$$("a",n);i&&i.length&&1===i.length&&this.close()}}.bind(this))}},close:function(){window.clearTimeout(this._timer);var e=t.node(u);this._cancelMsg&&this._cancelFunc&&e?(e.innerHTML="",e.classList.remove("cancelButton"),e.classList.add("dismissButton"),e.classList.add("core-sprite-close"),e.classList.add("imageSprite"),this._cancelFunc(),this._cancelMsg=null):this.setProgressMessage("")},_getNotifierElements:function(){return this._notifierElements||(this._notifierElements=n.getToolbarElements(this.notificationContainerDomId)),this._notifierElements},setMessage:function(e,n,i){this._init(),this.statusMessage=e;var r=t.node(this.domId);if("boolean"==typeof i){var o=r.getAttribute("aria-live");r.setAttribute("aria-live",i?"polite":"off"),window.setTimeout(function(){e===this.statusMessage&&(t.empty(r),r.appendChild(document.createTextNode(e)),window.setTimeout(function(){r.setAttribute("aria-live",o)},100))}.bind(this),100)}else t.empty(r),r.appendChild(document.createTextNode(e));
"number"==typeof n&&window.setTimeout(function(){e===this.statusMessage&&(t.empty(r),r.appendChild(document.createTextNode("")))}.bind(this),n)},setErrorMessage:function(e){this._clickToDisMiss=!0,this.statusMessage=e,this._init();var n=e.responseText||e.message||e;if("string"==typeof n)try{n=JSON.parse(n)}catch(i){}var r=n.Message||n,o="red";if(n.Severity)switch(n.Severity){case a:o="#FFCC00";break;case s:o="red";break;case l:case c:o="green"}var u=document.createElement("span");u.style.color=o,u.appendChild(document.createTextNode(r));var h=t.node(this.domId);t.empty(h),h.appendChild(u)},setProgressMessage:function(e){this._clickToDisMiss=!1,this._init(),this.progressMessage=e;var n=t.node(this.progressDomId);t.empty(n),n.appendChild(document.createTextNode(e));var i=t.node(this.notificationContainerDomId);if(i.classList.remove("notificationHide"),e&&e.length>0)i.classList.add("progressNormal"),i.classList.add("notificationShow");else{if(this._progressMonitors&&this._progressMonitors.length>0)return this._renderOngoingMonitors();i.classList.remove("notificationShow"),i.classList.add("notificationHide")}},setCancelFunction:function(e){this._cancelFunc=e},setProgressResult:function(n,i){this._clickToDisMiss=!1,this._cancelMsg=i,this.progressMessage=n;var r=n.responseText||n;if("string"==typeof r)try{r=JSON.parse(r)}catch(o){}this._init();var l=r.Message||r.toString();l===Object.prototype.toString()&&(l=e.UnknownError);var c=t.node(this.progressDomId);t.empty(c),c.appendChild(this.createMessage(r,l));var h="progressNormal",d=[];if(r.Severity)switch(r.Severity){case a:h="progressWarning",d.push("progressInfo"),d.push("progressError"),d.push("progressNormal"),this._clickToDisMiss=!0;break;case s:h="progressError",d.push("progressWarning"),d.push("progressInfo"),d.push("progressNormal"),this._clickToDisMiss=!0;break;default:h="progressNormal",d.push("progressWarning"),d.push("progressError"),d.push("progressNormal")}d.push("notificationHide");var p=t.node(this.notificationContainerDomId);if(h&&this.progressDomId!==this.domId){p.classList.add(h);for(var f=0;f<d.length;f++)p.classList.remove(d[f])}p.classList.add("notificationShow");var m=t.node(u);m&&(this._cancelMsg?(m.classList.add("cancelButton"),m.classList.remove("dismissButton"),m.classList.remove("core-sprite-close"),m.classList.remove("imageSprite"),m.innerHTML=this._cancelMsg):(m.innerHTML="",m.classList.remove("cancelButton"),m.classList.add("dismissButton"),m.classList.add("core-sprite-close"),m.classList.add("imageSprite")))},createMessage:function(e,n){if(e.HTML){var r=document.createElement("span");return r.innerHTML=n,r}var o;o="markdown"===e.type?e.content||n:n;var l=null;try{l=i(o,{sanitize:!0})}catch(c){}var u,h=[];return l?(u=document.createElement("div"),u.innerHTML=l,h=t.$$("a",u),Array.prototype.forEach.call(h,function(e){e.target="_blank"})):u=document.createTextNode(n),h.length||e.Severity===a||e.Severity===s||this._cancelMsg||(this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){this.setProgressMessage(""),this._timer=null}.bind(this),5e3)),u},showWhile:function(e,t){var n=this;if(t){n.setProgressMessage(t);var i=function(){t===n.progressMessage&&n.setProgressMessage("")};e.then(i,i)}return e},_lastProgressId:0,_progressMonitors:{length:0},createProgressMonitor:function(e,t){return new o(this,++this._lastProgressId,e,t)},_renderOngoingMonitors:function(){if(this._progressMonitors.length>0){var e="",t=!0;for(var n in this._progressMonitors)this._progressMonitors[n].status&&(t||(e+=", "),e+=this._progressMonitors[n].status,t=!1);this.setProgressMessage(e)}else this.setProgressMessage("")},_beginProgressMonitor:function(e){this._progressMonitors[e.progressId]=e,this._progressMonitors.length++,this._renderOngoingMonitors()},_workedProgressMonitor:function(e){this._progressMonitors[e.progressId]=e,this._renderOngoingMonitors()},_doneProgressMonitor:function(e){delete this._progressMonitors[e.progressId],this._progressMonitors.length--,e.status?this.setProgressResult(e.status):this._renderOngoingMonitors()}},r.prototype.constructor=r,o.prototype.begin=function(e){this.status=e,this.statusService._beginProgressMonitor(this)},o.prototype.done=function(e){this.status=e,this.statusService._doneProgressMonitor(this)},o.prototype.worked=function(e){this.status=e,this.statusService._workedProgressMonitor(this)},o.prototype.constructor=o,{StatusReportingService:r,ProgressMonitor:o}}),define("orion/operations/nls/messages",{root:!0}),define("orion/operations/nls/root/messages",{More:"More",NoMatchingOpSrvLocation:"No Matching OperationService for location:","could not find toolbar ":"could not find toolbar ","Remove Completed":"Remove Completed",rmCompleted:"Remove all completed operations",Remove:"Remove",rmFromOpList:"Remove operations from the operations list.",Cancel:"Cancel",CancelOp:"Cancel operations from the operations list.",OpWarning:"Operation resulted in a warning.",OpErr:"Operation resulted in an error.",OpRunning:"Operation is running.",OpCancelled:"Operation is canceled.","Operation failed.":"Operation failed.",Name:"Name",Actions:"Actions",Status:"Status",Scheduled:"Scheduled","Recent operations":"Recent operations","All Operations":"All Operations",NoPageOps:"No operations running on this page.",NoOperations:"No operations running."}),define("orion/webui/popupdialog",["i18n!orion/widgets/nls/messages","orion/webui/littlelib","orion/webui/tooltip"],function(e,t,n){function i(){}return i.prototype={_initialize:function(i,r,o,s,a){this._tooltip=new n.Tooltip({node:i,hideDelay:a||0,afterShowing:this._afterShowingFunction(r).bind(this),afterHiding:o,trigger:s?s:"click"}),this.$parent=this._tooltip.contentContainer(),this.$parent.role="dialog";var l=document.createRange();l.selectNode(this.$parent);var c=l.createContextualFragment(this.TEMPLATE);t.processTextNodes(c,this.messages||e),this.$parent.appendChild(c);var u=this._tooltip;this.$parent.addEventListener("keydown",function(e){e.keyCode===t.KEY.ESCAPE&&u.hide()},!1),this._bindElements(this.$parent),"function"==typeof this._bindToDom&&this._bindToDom(this.$parent)},_bindElements:function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];n.id&&(this["$"+n.id]=n),this._bindElements(n)}},_afterShowingFunction:function(e){return function(){if(e&&e.bind(this)(),!this.customFocus){var n=t.firstTabbable(this.$parent);n&&n.focus()}}},hide:function(){this._tooltip.hide()},show:function(){this._tooltip.show()},isShowing:function(){return this._tooltip.isShowing()}},i.prototype.constructor=i,{PopupDialog:i}}),define("orion/operationsCommands",["i18n!orion/operations/nls/messages","orion/webui/littlelib","orion/commands"],function(e,t,n){var i={};return function(){var r=!1;i.updateNavTools=function(n,i,o,s,a,l){var c=i,u=t.node(s);if(!u)throw e["could not find toolbar "]+s;if(c.destroy(u),c.renderCommands(s,u,l,o,"button"),a){var h=t.node(a);h&&(c.destroy(h),c.renderCommands(a,h,null,o,"button"))}r||(r=!0,n.getService("orion.page.selection").addEventListener("selectionChanged",function(e){var n=t.node(a);n&&(c.destroy(n),c.renderCommands(a,n,e.selections,o,"button"))}))},i.createOperationsCommands=function(t,i,r){function o(e){return e.operation&&e.operation.type?"loadstart"===e.operation.type||"progress"===e.operation.type:!1}function s(e){return e.operation&&e.operation.cancelable?!0:!1}var a=new n.Command({name:e["Remove Completed"],tooltip:e.rmCompleted,id:"eclipse.removeCompletedOperations",callback:function(){r.removeCompletedOperations().then(function(){i.loadOperations.bind(i)()})},visibleWhen:function(){return!0}});t.addCommand(a);var l=new n.Command({name:e.Remove,tooltip:e.rmFromOpList,imageClass:"core-sprite-delete",id:"eclipse.removeOperation",callback:function(e){for(var t=Array.isArray(e.items)?e.items:[e.items],n=0;n<t.length;n++){var o=t[n];r.removeOperation.bind(r)(o.Location).then(function(){i.loadOperations.bind(i)()},function(){i.loadOperations.bind(i)()})}},visibleWhen:function(e){if(!Array.isArray(e)||0===e.length)return!o(e);for(var t in e)if(o(e[t]))return!1;return!0}});t.addCommand(l);var c=new n.Command({name:e.Cancel,tooltip:e.CancelOp,imageClass:"core-sprite-stop",id:"eclipse.cancelOperation",callback:function(e){for(var t=Array.isArray(e.items)?e.items:[e.items],n=0;n<t.length;n++){var i=t[n];i.deferred&&i.deferred.cancel()}},visibleWhen:function(e){if(!Array.isArray(e)||0===e.length)return o(e)&&s(e);for(var t in e)if(!o(e[t])||!s(e[t]))return!1;return!0}});t.addCommand(c)}}(),i}),define("orion/webui/dialogs/OperationsDialog",["i18n!orion/operations/nls/messages","require","orion/webui/littlelib","orion/webui/popupdialog","orion/operationsCommands"],function(e,t,n,i,r){function o(e){this._options=e}return o.prototype=new i.PopupDialog,o.prototype.messages=e,o.prototype.TEMPLATE='<table style="width: 360px;"><tr><td><h2>${Recent operations}</h2></td><td style="text-align: right;"><a id="allOperationsLink" class="navlinkonpage">${All Operations}</a></td></tr></table><div id="operationsExist"><div style="padding-left: 7px" id="myOperationsListEmpty">${NoPageOps}</div><table id="myOperationsList" style="display: none;"></table></div><div style="padding-left: 7px" id="operationsDontExist">${NoOperations}</div>',o.prototype._init=function(e){this._myOperations=[],this._operationsDeferreds=[],this._commandService=e.commandRegistry,r.createOperationsCommands(this._commandService),this._commandService.registerCommandContribution("operationsDialogItems","eclipse.cancelOperation",1),this._initialize(e.triggerNode)},o.prototype._bindToDom=function(){this.$allOperationsLink.href=t.toUrl("operations/list.html"),this._setOperationsVisibility()},o.prototype.setOperations=function(e,t){if(this._myOperations||this._init(this._options),this._myOperations=[],this._operationsDeferreds=[],e)for(var n in e)this._myOperations.push(e[n]),this._operationsDeferreds.push(t[n]);this._renderOperations()},o.prototype.parseProgressResult=function(e){if(!e)return{};var t=e.responseText||e;try{t=JSON.parse(t)}catch(n){}var i={Message:t.Message||t,Severity:t.Severity};return t.DetailedMessage&&t.DetailedMessage!==i.Message&&(i.DetailedMessage=t.DetailedMessage),i},o.prototype._renderOperations=function(){this._renderOperationsTable(this.$myOperationsList,this._myOperations,this._operationsDeferreds)},o.prototype._renderOperationsTable=function(t,i,r){n.empty(t);for(var o=0;o<i.length;o++){var s=i[o],a=document.createElement("tr"),l=document.createElement("td");l.style.paddingLeft="5px",l.style.paddingRight="5px",l.textContent=s.Name,a.appendChild(l);var c=document.createElement("div");l.appendChild(c);var u=document.createElement("span");switch(u.style.paddingRight="5px",u.classList.add("imageSprite"),s.type){case"Warning":u.classList.add("core-sprite-warning"),u.setAttribute("aria-label",e.OpWarning);break;case"error":u.classList.add("core-sprite-error"),u.setAttribute("aria-label",e.OpErr);break;case"loadstart":case"progress":u.classList.add("core-sprite-start"),u.setAttribute("aria-label",e.OpRunning);break;case"abort":u.classList.add("core-sprite-stop"),u.setAttribute("aria-label",e.OpCancelled);break;case"load":case"loadend":u.classList.add("core-sprite-ok"),u.setAttribute("aria-label","Operation ok.")}c.appendChild(u);var h=document.createElement("span");if(h.classList.add("operationStatus"),h.textContent=s.Name,c.appendChild(h),s.error){var d=s.error.Message||s.error;s.error.DetailedMessage&&""!==s.error.DetailedMessage&&(d+=": "+s.error.DetailedMessage),h.textContent=d,h.classList.remove("operationStatus"),h.classList.add("operationError")}this._commandService.renderCommands("operationsDialogItems",c,{operation:s,deferred:r[o]},this,"tool"),t.appendChild(a)}this._setOperationsVisibility()},o.prototype._setOperationsVisibility=function(){this.$myOperationsList.style.display=this._myOperations.length>0?"":"none",this.$myOperationsListEmpty.style.display=this._myOperations.length>0?"none":"",this.$operationsDontExist.style.display=this._myOperations.length>0?"none":"",this.$operationsExist.style.display=this._myOperations.length>0?"":"none"},o.prototype.constructor=o,{OperationsDialog:o}}),define("orion/progress",["i18n!orion/nls/messages","orion/webui/littlelib","orion/webui/dialogs/OperationsDialog"],function(e,t,n){function i(e,i){if(!this._progressPane){this._progressPane=t.node(e),this._operationsDialog=new n.OperationsDialog({triggerNode:this._progressPane,commandRegistry:i});var r=this;this._progressPane.addEventListener("keydown",function(e){(" "===e.charOrCode||e.keyCode===t.KEY.ENTER)&&r._operationsDialog.show()}),this._progressPane.addEventListener("click",function(){r._operationsDialog.isShowing()?r._operationsDialog.hide():r._operationsDialog.show()}),this._operationsDialog.setOperations(null,null)}}function r(e,t,n,i){this._serviceRegistry=e,this._serviceRegistration=e.registerService("orion.page.progress",this),this._commandRegistry=n,this._operationsClient=t,this._operations={},this._operationDeferrds={},this._operationsIndex=0,this._lastOperation=null,this._lastIconClass=null,this._progressMonitorClass=i}return i.prototype={_switchIconTo:function(e){this._lastIconClass&&this._progressPane.classList.remove(this._lastIconClass),this._lastIconClass=e,this._progressPane.classList.add(this._lastIconClass)},generateOperationsInfo:function(t,n){var i={};for(var r in t)t[r].progressMonitor||(i[r]=t[r]);if(this._isEmpty(i))return this._switchIconTo("progressPane_empty"),this._progressPane.title=e.Operations,this._progressPane.alt=e.Operations,this._progressPane.hasAttribute("aria-valuetext")&&this._progressPane.removeAttribute("aria-valuetext"),void this._operationsDialog.setOperations(i,n);var o="";for(var s in i){var a=i[s];if(a.type&&("loadstart"===a.type||"progress"===a.type)){o="running";break}}switch(""===o&&null!=this._lastOperation&&this._lastOperation.type&&"error"===this._lastOperation.type,o){case"running":this._progressPane.title=e["Operations running"],this._progressPane.alt=e["Operations running"],this._progressPane.setAttribute("aria-valuetext",e["Operations running"]),this._switchIconTo("running");break;case"warning":this._progressPane.title=e.SomeOpWarning,this._progressPane.alt=e.SomeOpWarning,this._progressPane.setAttribute("aria-valuetext",e.SomeOpWarning),this._switchIconTo("warning");break;case"error":this._progressPane.title=e.SomeOpErr,this._progressPane.alt=e.SomeOpErr,this._progressPane.setAttribute("aria-valuetext",e.SomeOpErr),this._switchIconTo("error");break;default:this._progressPane.title=e.Operations,this._progressPane.alt=e.Operations,this._progressPane.hasAttribute("aria-valuetext")&&this._progressPane.removeAttribute("aria-valuetext"),this._switchIconTo("progressPane_empty")}this._operationsDialog.setOperations(i,n)},_isEmpty:function(e){for(var t in e)return!1;return!0}},i.prototype.constructor=i,r.prototype={init:function(e){this._progressMonitorClass||(this._progressMonitorTool=new i(e,this._commandRegistry))},progress:function(e,t,n){var i=this,r=this._operationsIndex++;return!n&&this._progressMonitorClass&&(n=new this._progressMonitorClass,n.begin(t)),e.then(function(){if(i._operations[r]){var o=i._operations[r];t&&(o.Name=t),i._lastOperation=o,o.type="loadend",n&&(o.progressMonitor=n),i.writeOperation.bind(i)(r,o,e),o.Location||i._removeOperationFromTheList.bind(i)(r)}},function(o){if(i._operations[r]){var s=i._operations[r];t&&(s.Name=t),n&&(s.progressMonitor=n),i._lastOperation=s,s.type=o.canceled?"abort":"error",s.error=o,i.writeOperation.bind(i)(r,s,e),s.Location||i._removeOperationFromTheList.bind(i)(r)}},function(o){t&&(o.Name=t),n&&(o.progressMonitor=n),i.writeOperation.bind(i)(r,o,e)}),e},removeOperation:function(e){var t=this;for(var n in this._operations)if(this._operations[n].Location&&this._operations[n].Location===e){this._removeOperationFromTheList(n);break}t._operationsClient.removeOperation.bind(t._operationsClient)(e)},_removeOperationFromTheList:function(e){var t=this._operations[e].progressMonitor;delete this._operations[e],delete this._operationDeferrds[e],t?t.done():this._progressMonitorTool.generateOperationsInfo(this._operations,this._operationDeferrds)},removeCompletedOperations:function(){for(var e in this._operations){var t=this._operations[e];if(t.type&&"loadstart"!==t.type&&"progress"!==t.type){var n=this._operations[e].progressMonitor;n&&n.done(),delete this._operations[e],delete this._operationDeferrds[e]}}this._progressMonitorTool.generateOperationsInfo(this._operations,this._operationDeferrds)},setProgressResult:function(e){this._serviceRegistry.getService("orion.page.message").setProgressResult(e)},showWhile:function(e,t,n){this._serviceRegistry.getService("orion.page.message").showWhile(e,t);var i=this;return e.then(null,function(e){n||i.setProgressResult(e)}),this.progress(e,t)},writeOperation:function(e,t,n){this._operations[e]=t,this._operationDeferrds[e]=n,t.Location&&this._serviceRegistry.getService("orion.core.preference").getPreferences("/operations").then(function(e){e.put(t.Location,{Name:t.Name,expires:t.expires})}),t.progressMonitor?t.progressMonitor.progress(t.Name):this._progressMonitorTool.generateOperationsInfo(this._operations,this._operationDeferrds)}},r.prototype.constructor=r,{ProgressService:r}}),define("orion/operationsClient",["i18n!orion/operations/nls/messages","orion/Deferred"],function(e,t){function n(e,t,n){return e[t].apply(e,n)}function i(e){this._location=e}function r(){var n=new t;return n.reject(e.NoMatchingOpSrvLocation+this._location),n}function o(e){this._services=[],this._patterns=[],this._operationListeners=[],this._currentLongpollingIds=[],this._preferenceService=e.getService("orion.core.preference");for(var t=e.getServiceReferences("orion.core.operation"),n=0;n<t.length;n++){var r=t[n],o=e.getService(r);this._services[n]=o;var s=t[n].getProperty("pattern")||".*";"^"!==s[0]&&(s="^"+s),this._patterns[n]=new RegExp(s)}this._getService=function(e){if(!e)return this._services[0];for(var t=0;t<this._patterns.length;++t)if(this._patterns[t].test(e))return this._services[t];return this._operations.remove(e),new i(e)}}return i.prototype={getOperation:r,getOperations:r,removeCompletedOperations:r,removeOperation:r,cancelOperation:r},i.prototype.constructor=i,o.prototype={getOperations:function(){var e=new t;if(this._operations)return e.resolve(this._operations),e;var n=this;return this._preferenceService.getPreferences("/operations").then(function(t){n._operations=t,e.resolve(n._operations)}),e},getOperation:function(e){return n(this._getService(e),"getOperation",arguments)},removeCompletedOperations:function(){for(var e=[],i=this,r=0;r<this._services.length;r++){var o=this._patterns[r],s=new t;e[r]=s.promise,n(this._services[r],"removeCompletedOperations").then(function(e){return function(t){Array.isArray(t)&&i.getOperations.bind(i)().then(function(n){for(var i=n.keys(),r=0;r<i.length;r++){var s=i[r];o.test(s)&&t.indexOf(s)<0&&n.remove(s)}e.resolve()})}}(s),function(e){return function(t){e.reject(t)}}(s))}return t.all(e)},removeOperation:function(e){var t=this;return n(this._getService(e),"removeOperation",arguments).then(function(){t.getOperations.bind(t)().then(function(t){t.remove(e)})},function(e){return e},function(e){return e})}},o.prototype.constructor=o,{OperationsClient:o}}),define("shell/shellPage",["require","i18n!orion/shell/nls/messages","orion/bootstrap","orion/commandRegistry","orion/fileClient","orion/searchClient","orion/globalCommands","orion/shell/Shell","orion/webui/treetable","shell/shellPageFileService","shell/paramType-file","shell/paramType-plugin","shell/paramType-service","orion/i18nUtil","orion/extensionCommands","orion/contentTypes","orion/PageUtil","orion/URITemplate","orion/Deferred","orion/status","orion/progress","orion/operationsClient","shell/resultWriters","orion/metrics","orion/URL-shim"],function(e,t,n,i,r,o,s,a,l,c,u,h,d,p,f,m,g,v,y,_,b,C,w,S){function E(){var e=g.matchResourceParameters(window.location.href).resource;return e.length>0?e:null}function x(e,n){var i=new v(ot),r=i.expand({resource:e.Location});n?window.location.replace(r):window.location.href=r,s.setPageTarget({task:t.Shell,serviceRegistry:Q,commandService:Y,target:e})}function L(e){var t=f.getOpenWithCommand(Y,e);return t?t.hrefCallback({items:e}):null}function T(e){var t=document.createElement("a");return e.Directory?(t.href="#"+e.Location,t.className="shellPageDirectory",t.textContent=e.Name,t):(t.href=L(e),t.target="_blank",t.textContent=e.Name,t)}function k(e,n){var i=document.createElement("span");i.appendChild(document.createTextNode(n?t["Initial directory: "]:t["Changed to: "]));var r=document.createElement("b");return r.appendChild(document.createTextNode(e)),i.appendChild(r),i}function N(e){var t=e.directory.value[0];W.setCurrentDirectory(t),nt=!0,x(t,!1);var n=W.computePathString(t);return k(n,!1)}function A(e){var t=L(e.file.getValue()[0]);window.open(t)}function P(e,t){var n=t.createPromise(),i=W.getCurrentDirectory(),r=i?i.Location:E()||rt;return W.loadWorkspace(r).then(function(e){W.setCurrentDirectory(e),W.withChildren(e,function(e){for(var t=document.createElement("div"),i=0;i<e.length;i++)t.appendChild(T(e[i])),t.appendChild(document.createElement("br"));n.resolve(t),setTimeout(function(){for(var e=J.querySelectorAll(".shellPageDirectory"),t=0;t<e.length;t++)e[t].setAttribute("target","_self"),e[t].className=""},1)},function(e){ut(n,e)})},function(e){ut(n,e)}),n}function O(e,t){var n=t.createPromise(),i=W.getCurrentDirectory();return W.loadWorkspace(i.Location).then(function(e){var t=W.computePathString(e),i=document.createElement("b");i.appendChild(document.createTextNode(t)),n.resolve(i)},function(e){ut(n,e)}),n}function R(e){var t=document.createElement("div"),n=e.plugin.getServiceReferences();return n.forEach(function(e){var n={values:[]},i=e.getPropertyKeys();if(i.forEach(function(t){"service.names"===t&&(n.name=e.getProperty(t).join()),"id"===t&&(n.id=e.getProperty(t)),n.values.push({name:t,value:e.getProperty(t)})}),n.name){n.elementId="serviceElement"+it++,n.values.forEach(function(e){e.elementId="serviceElement"+it++});var r=document.createElement("div");t.appendChild(r);var o=new ct,s=new l.TableTree({model:new lt(n),showRoot:!0,parent:r,renderer:o});o.tableTree=s}}),t}function I(){for(var e=et.getPlugins(),n=document.createElement("table"),i=0;i<e.length;i++){var r=document.createElement("tr");n.appendChild(r);var o=document.createElement("td");r.appendChild(o);var s=document.createElement("b");o.appendChild(s),s.textContent=e[i].name;var a=e[i].getState();if("active"!==a&&"starting"!==a){var l=document.createElement("span");o.appendChild(l),l.textContent=" ("+t.disabled+")"}}return n}function D(e,n){var i=n.createPromise();return e.plugin.stop().then(function(){i.resolve(t.Succeeded)},function(e){i.resolve(e)}),i}function M(e,n){var i=n.createPromise();return e.plugin.start({lazy:!0}).then(function(){i.resolve(t.Succeeded)},function(e){i.resolve(e)}),i}function F(e,n){var i=e.url.trim();if(/^\S+$/.test(i)){if(Z.getPlugin(i))return t.PlugAlreadyInstalled;var r=n.createPromise();return Z.installPlugin(i).then(function(e){e.start({lazy:!0}).then(function(){tt.getPreferences("/plugins").then(function(e){e.put(i,!0)}),r.resolve(t.Succeeded)},function(e){r.resolve(e)})},function(e){r.resolve(e)}),r}return t["Invalid plug-in URL"]}function B(e,n){var i=n.createPromise();return e.plugin.update().then(function(){i.resolve(t.Succeeded)},function(e){i.resolve(e)}),i}function $(e,n){var i=n.createPromise();if(e.plugin.isAllPlugin){var r=t.UninstallAllPlugsMsg;if(!window.confirm(r))return t.Aborted;e.plugin.uninstall().then(function(){tt.getPreferences("/plugins").then(function(t){for(var n=e.plugin.getPluginLocations(),i=0;i<n.length;i++)t.remove(n[i])}.bind(this)),i.resolve(t.Succeeded)},function(e){i.resolve(e)})}else{var o=e.plugin.getLocation(),s=Z.getPlugin(o);s.uninstall().then(function(){tt.getPreferences("/plugins").then(function(e){e.remove(o)}.bind(this)),i.resolve(t.Succeeded)},function(e){i.resolve(e)})}return i}function U(e){var t=e.id.trim(),n=document.createElement("div"),i=et.getPlugins();return i.forEach(function(e){var i=e.getServiceReferences();i.forEach(function(i){var r=i.getProperty("service.names");if(-1!==r.indexOf(t)){var o={name:e.name,values:[]},s=i.getPropertyKeys();s.forEach(function(e){"id"===e&&(o.id=i.getProperty(e)),o.values.push({name:e,value:i.getProperty(e)})}),o.elementId="serviceElement"+it++,o.values.forEach(function(e){e.elementId="serviceElement"+it++});var a=document.createElement("div");n.appendChild(a);var c=new ct,u=new l.TableTree({model:new lt(o),showRoot:!0,parent:a,renderer:c});c.tableTree=u}})}),n}function j(e,t){return"string"!=typeof e&&(e=e.xhr&&e.xhr.statusText?e.xhr.statusText:e.toString()),t.write(e)}function H(e,t,n,i){var r,o;n?o=new w.FileBlobWriter(n,W):(r=document.createElement("div"),o=new w.ShellBlobWriter(r));var s=t.getValue();t.isArray()||(s=[s]),s.forEach(function(e){o.addBlob(e)}),o.write().then(function(){i?e.progress(r):e.resolve(r)},function(t){r=r||document.createElement("div"),o=new w.ShellStringWriter(r),j(t,o).then(function(){e.reject(r)},function(){e.reject()})})}function K(e,t,n,i){var r,o;n?o=new w.FileStringWriter(n,W):(r=document.createElement("div"),o=new w.ShellStringWriter(r)),j(t.stringify(),o).then(function(){i?e.progress(r):e.resolve(r)},function(t){r=r||document.createElement("div"),o=new w.ShellStringWriter(r),j(t,o).then(function(){e.reject(r)},function(){e.reject()})})}function V(e,t,n,i){var r=t.getType();return"file"===r?void X.processResult(e,t,n,i):void("blob"===r?H(e,t,n,i):K(e,t,n,i))}function q(e,t,n,i,r){return"function"!=typeof e.callback?void 0:function(o){var s=new y,a=null;r&&(a=o.output,a&&(a=a.resourceExists()?a.getValue()[0]:a.getValue()),delete o.output);var l=function(e,t){var n=Object.keys(e);if(0===n.length)t(e);else{var i=0;n.forEach(function(r){!function(r){!function(e,t){e&&e.getPluginRepresentation?e.getPluginRepresentation().then(function(e){t(e)}):t(e)}(e[r],function(o){e[r]=o,++i===n.length&&t(e)})}(r)})}};return l(o,function(r){function l(e,t){var n=e;for(var i in t)n+=" ",n+=t[i];return n}var c=function(e){var t=new st(e,i);V(s,t,a)},u=function(e){ut(s,e)},h=function(e){if(e&&e.uriTemplate){var n=new v(e.uriTemplate),r=(W.getCurrentDirectory(),n.expand({})),o=document.createElement("iframe");o.id=t,o.name=t,o.type="text/html",o.sandbox="allow-scripts allow-same-origin allow-forms",o.frameborder=1,o.src=r,o.className="delegatedUI",e.width&&(o.style.width=e.width),e.height&&(o.style.height=e.height);var l=document.getElementsByClassName("gcli-row-out"),d=l[l.length-1];d.appendChild(o),window.addEventListener("message",function f(e){if(e.source===o.contentWindow&&"string"==typeof e.data){var n=JSON.parse(e.data);"orion.page.delegatedUI"===n.pageService&&n.source===t&&(window.removeEventListener("message",f,!1),n.error?u(n.error):(d.removeChild(o),n.result?c(n.result):n.progress&&h(n.progress)))}},!1)}else if("function"==typeof s.progress){var p=new st(e,i);V(s,p,a,!0)}};n.progress(e.callback(r,{cwd:E()}),"Executing command "+l(t,o)).then(c,u,h)}),s}}function z(e){return"function"!=typeof e?void 0:function(t,n,i){var r=new y;return i&&(i.cwd=E()),e(t,n,i).then(function(e){r.resolve(e)},function(e){r.reject(e)}),r}}var W,G,Y,J,X,Q,Z,et,tt,nt=!1,it=0,rt=new URL(e.toUrl("file"),window.location.href).pathname,ot=e.toUrl("shell/shellPage.html")+"#{,resource}",st=function(){function e(e,t){this.value=e,this.array=!1,0===t.indexOf("[")&&t.lastIndexOf("]")===t.length-1&&(this.array=!0,t=t.substring(1,t.length-1)),this.type=t}return e.prototype={getType:function(){return this.type},getValue:function(){return this.value},isArray:function(){return this.array},stringify:function(){if("string"!==this.type&&"markdown"!==this.type)return"("+(this.array?"[":"")+this.value+(this.array?"]":"")+")";if(!this.array)return this.value;for(var e="",t=0;t<this.value.length;t++)e+=this.value[t],t!==this.value.length-1&&(e+="\n");return e}},e}(),at=function(){function e(e,t,n){this.name=e,this.parseFn=t,this.stringifyFn=n}return e.prototype={getName:function(){return this.name},parse:function(e,t,n){var i=new y;return this.parseFn(e,t,n).then(function(e){i.resolve(e)},function(e){i.reject(e)}),i},stringify:function(e,t){var n=new y;return this.stringifyFn?(this.stringifyFn(e,t).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n):e?e.name:""}},e}(),lt=function(){function e(e){this.root=e}return e.prototype={getRoot:function(e){e(this.root)},getChildren:function(e,t){t(e.values)},getId:function(e){return e.elementId}},e}(),ct=function(){function e(){}return e.prototype={getTwistieElementId:function(e){return e+"__expand"},initTable:function(){},labelColumnIndex:function(){return 0},render:function(e,t){t.className+=" treeTableRow";var n=document.createElement("td");if(t.appendChild(n),!e.value){var i=document.createElement("span");n.appendChild(i);var r=document.createElement("span");r.id=this.getTwistieElementId(t.id),i.appendChild(r),r.className="modelDecorationSprite core-sprite-closedarrow",r.onclick=function(){this.tableTree.toggle(t.id)}.bind(this),n=document.createElement("td"),t.appendChild(n);var o=document.createElement("b");return n.appendChild(o),o.textContent=e.name,e.id&&(i=document.createElement("span"),n.appendChild(i),i.textContent=" ("+e.id+")"),void(n.colSpan="2")}n=document.createElement("td"),t.appendChild(n),n.textContent=e.name,n=document.createElement("td"),t.appendChild(n),n.textContent=e.value},updateExpandVisuals:function(e,t){var n=document.getElementById(this.getTwistieElementId(e.id));if(n){var i=n.className;t?(i+=" core-sprite-openarrow",i=i.replace(/\s?core-sprite-closedarrow/g,"")):(i+=" core-sprite-closedarrow",i=i.replace(/\s?core-sprite-openarrow/g,"")),n.className=i}}},e}(),ut=function(e,n){var i=n;try{i=JSON.parse(n.responseText)}catch(r){}i&&i.DetailedMessage?i=p.formatMessage(t.Err,i.DetailedMessage):i&&i.Message?i=p.formatMessage(t.Err,i.Message):"string"==typeof n.url&&(i=0===n.status?p.formatMessage(t.NoResponseFromServer,n.url):p.formatMessage(t.ServerError,n.url,n.status,n.statusText));var o=document.createElement("span");o.textContent=i,e.reject(o)};n.startup().then(function(e){Z=e.pluginRegistry,Q=e.serviceRegistry,tt=e.preferences,Y=new i.CommandRegistry({}),G=new r.FileClient(Q);var n=new o.Searcher({serviceRegistry:Q,commandService:Y,fileService:G}),l=new C.OperationsClient(Q);new _.StatusReportingService(Q,l,"statusPane","notifications","notificationArea"),new b.ProgressService(Q,l,Y),s.generateBanner("orion-shellPage",Q,Y,tt,n),s.setPageTarget({task:t.Shell,serviceRegistry:Q,commandService:Y}),J=document.getElementById("shell-output");var p=document.getElementById("shell-input"),y=new a.Shell({input:p,output:J}),w=2;J.onmousedown=function(e){J.onmouseup=null,0===e.button&&"DIV"===e.target.tagName.toUpperCase()&&(J.onmouseup=function(t){J.onmouseup=null,t.target===e.target&&Math.abs(t.clientX-e.clientX)<=w&&Math.abs(t.clientY-e.clientY)<=w&&y.setFocusToInput()})};var L=g.matchResourceParameters(window.location.href);if(L.command){y.setInputText(L.command),delete L.command;var T=new v(ot),j=T.expand(L);window.location.href=j}y.setFocusToInput(),W=new c.ShellPageFileService;var H=function(e,t){var n=function(e){x(e,t),W.setCurrentDirectory(e);var n=W.computePathString(e);y.output(k(n,!0))};e?W.loadWorkspace(e).then(n,function(){W.loadWorkspace(rt).then(n)}):W.loadWorkspace(rt).then(n)};H(E(),!0),X=new u.ParamTypeFile(W),y.registerType(X),et=new h.ParamTypePlugin(Z),y.registerType(et);var K=new d.ParamTypeService(Z);y.registerType(K),y.registerCommand({name:"cd",description:t.ChangeCurrDir,callback:N,parameters:[{name:"directory",type:{name:"file",directory:!0,exist:!0},description:t.DirName}],returnType:"html"}),y.registerCommand({name:"edit",description:t.EditFile,callback:A,parameters:[{name:"file",type:{name:"file",file:!0,exist:!0},description:t.FileName}]}),y.registerCommand({name:"ls",description:t.CurDirFileList,callback:P,returnType:"html"}),y.registerCommand({name:"pwd",description:t.CurDirLocation,callback:O,returnType:"html"}),y.registerCommand({name:"clear",description:t.ClearShellScreen,callback:function(){y.clear()
}}),y.registerCommand({name:"plugins",description:t.CmdForPlugs}),y.registerCommand({name:"plugins list",description:t.RegisteredPlugsList,callback:I,returnType:"html"}),y.registerCommand({name:"plugins install",description:t.InstallPlugFrmURL,callback:F,parameters:[{name:"url",type:"string",description:t["The plug-in URL"]}],returnType:"string"}),y.registerCommand({name:"plugins uninstall",description:t.UninstallContributedPlugFrmConfig,callback:$,parameters:[{name:"plugin",type:{name:"plugin",multiple:!0,excludeDefaultPlugins:!0},description:t.ContributedPlugName}],returnType:"string"}),y.registerCommand({name:"plugins reload",description:t["Reloads a plug-in"],callback:B,parameters:[{name:"plugin",type:{name:"plugin",multiple:!0,excludeDefaultPlugins:!1},description:t.PlugName}],returnType:"string"}),y.registerCommand({name:"plugins enable",description:t.EnableContributedPlug,callback:M,parameters:[{name:"plugin",type:{name:"plugin",multiple:!0,excludeDefaultPlugins:!0},description:t.ContributedPlugName}],returnType:"string"}),y.registerCommand({name:"plugins disable",description:t.DisableContributedPlug,callback:D,parameters:[{name:"plugin",type:{name:"plugin",multiple:!0,excludeDefaultPlugins:!0},description:t.ContributedPlugName}],returnType:"string"}),y.registerCommand({name:"plugins services",description:t.DisplayPlugServices,callback:R,parameters:[{name:"plugin",type:{name:"plugin",multiple:!1,excludeDefaultPlugins:!1},description:t.PlugName}],returnType:"html"}),y.registerCommand({name:"service",description:t.CmdsForService}),y.registerCommand({name:"service contributors",description:t.DisplayPlugsForService,callback:U,parameters:[{name:"id",type:"service",description:t["The service identifier"]}],returnType:"html"});var V=new m.ContentTypeRegistry(Q);f.createOpenWithCommands(Q,V,Y);for(var it=Q.getServiceReferences("orion.shell.type"),st=0;st<it.length;++st){var lt=it[st],ct=Q.getService(lt);if(ct){var ut=new at(lt.getProperty("name"),z(ct.parse),z(ct.stringify));y.registerType(ut)}}it=Q.getServiceReferences("orion.shell.command");var ht=Q.getService("orion.page.progress");for(st=0;st<it.length;++st)if(lt=it[st],ct=Q.getService(lt)){var dt="output";L=lt.getProperty("parameters")||[];for(var pt,ft=0;ft<L.length;ft++)if(L[ft].name===dt){pt=!0;break}pt||L.push({name:"output",type:{name:"file",file:!0,directory:!0},description:t.FileOrDirRedirectOutput,defaultValue:null});var mt=lt.getProperty("returnType")||"string",gt=lt.getProperty("name");y.registerCommand({name:gt,description:lt.getProperty("description")||lt.getProperty("descriptionKey"),callback:q(ct,gt,ht,mt,!pt),returnType:"html",parameters:L,manual:lt.getProperty("manual")})}window.addEventListener("hashchange",function(){if(nt)return void(nt=!1);var e=g.hash().substring(1);0===e.length&&(e=rt),W.loadWorkspace(e).then(function(e){if(W.getCurrentDirectory().Location!==e.Location){W.setCurrentDirectory(e);var t=W.computePathString(e);y.output(k(t,!1)),x(e,!1)}},function(){x(W.getCurrentDirectory(),!0)})}),S.logPageLoadTiming("interactive",window.location.pathname),S.logPageLoadTiming("complete",window.location.pathname)})});