!function(e,t){"function"==typeof define&&define.amd?define("orion/Deferred",t):"object"==typeof exports?module.exports=t():(e.orion=e.orion||{},e.orion.Deferred=t())}(this,function(){function e(){for(var e;e=i.shift();)e();a=!1}function t(e){i.push(e),a||(a=!0,s())}function n(e){return function(t){e(t)}}function r(e,t,r){try{var o=e(t),i=o&&("object"==typeof o||"function"==typeof o)&&o.then;if("function"==typeof i)if(o===r.promise)r.reject(new TypeError);else{var a=o.cancel;"function"==typeof a?r._parentCancel=a.bind(o):delete r._parentCancel,i.call(o,n(r.resolve),n(r.reject),n(r.progress))}else r.resolve(o)}catch(s){r.reject(s)}}function o(){function e(){for(var e;e=c.shift();){var t=e.deferred,n="fulfilled"===u?"resolve":"reject",o=e[n];"function"==typeof o?r(o,s,t):t[n](s)}}function n(n){delete l._parentCancel,u="rejected",s=n,c.length&&t(e)}function i(r){function a(e){return function(t){u&&"assumed"!==u||e(t)}}delete l._parentCancel;try{var f=r&&("object"==typeof r||"function"==typeof r)&&r.then;if("function"==typeof f)if(r===l)n(new TypeError);else{u="assumed";var p=r&&r.cancel;if("function"!=typeof p){var d=new o;r=d.promise;try{f(d.resolve,d.reject,d.progress)}catch(h){d.reject(h)}p=r.cancel,f=r.then}s=r,f.call(r,a(i),a(n)),l._parentCancel=p.bind(r)}else u="fulfilled",s=r,c.length&&t(e)}catch(m){a(n)(m)}}function a(){var e=l._parentCancel;if(e)delete l._parentCancel,e();else if(!u){var t=new Error("Cancel");t.name="Cancel",n(t)}}var s,u,c=[],l=this;this.resolve=function(e){return u||i(e),l},this.reject=function(e){return u||n(e),l},this.progress=function(e){return u||c.forEach(function(t){if(t.progress)try{t.progress(e)}catch(n){}}),l.promise},this.cancel=function(){return l._parentCancel?setTimeout(a,0):a(),l},this.then=function(n,r,i){var a=new o;return a._parentCancel=l.promise.cancel,c.push({resolve:n,reject:r,progress:i,deferred:a}),("fulfilled"===u||"rejected"===u)&&t(e),a.promise},this.promise={then:l.then,cancel:l.cancel}}var i=[],a=!1,s=function(){if("undefined"!=typeof process&&"function"==typeof process.nextTick){var t=process.nextTick;return function(){t(e)}}if("function"==typeof MutationObserver){var n=document.createElement("div"),r=new MutationObserver(e);return r.observe(n,{attributes:!0}),function(){n.setAttribute("class","_tick")}}return function(){setTimeout(e,0)}}();return o.all=function(e,t){function n(e,t){s||(a[e]=t,0===--i&&u.resolve(a))}function r(e,r){if(!s){if(t)try{return void n(e,t(r))}catch(o){r=o}u.reject(r)}}var i=e.length,a=[],s=!1,u=new o;return u.then(void 0,function(){s=!0,e.forEach(function(e){e.cancel&&e.cancel()})}),0===i?u.resolve(a):e.forEach(function(e,t){e.then(n.bind(void 0,t),r.bind(void 0,t))}),u.promise},o.when=function(e,t,n,r){var i,a;return e&&"function"==typeof e.then?i=e:(a=new o,a.resolve(e),i=a.promise),i.then(t,n,r)},o}),function(e,t){"function"==typeof define&&define.amd?define("orion/plugin",["orion/Deferred"],t):"object"==typeof exports?module.exports=t(require("orion/Deferred")):(e.orion=e.orion||{},e.orion.PluginProvider=t(e.orion.Deferred))}(this,function(e){function t(e,t){this.__objectId=e,this.__methods=t}function n(n){function r(e){C&&("undefined"==typeof ArrayBuffer&&(e=JSON.stringify(e)),C===self?C.postMessage(e):C.postMessage(e,"*"))}function o(){var e=[];return Object.keys(w).forEach(function(t){var n=w[t];e.push({serviceId:t,names:n.names,methods:n.methods,properties:n.properties})}),{headers:f||{},services:e}}function i(e,t){if(t&&t instanceof XMLHttpRequest){var n,r;try{n=t.status,r=t.statusText}catch(o){n=0,r=""}return{status:n||0,statusText:r}}return t}function a(e){var t=e?JSON.parse(JSON.stringify(e,i)):e;return e instanceof Error&&(t.__isError=!0,t.message=t.message||e.message,t.name=t.name||e.name),t}function s(n){if(!C)return(new e).reject(new Error("plugin not connected"));n.id=String(d++);var r=new e;g[n.id]=r,r.then(null,function(e){p&&e instanceof Error&&"Cancel"===e.name&&b({requestId:n.id,method:"cancel",params:e.message?[e.message]:[]})});var o=Object.prototype.toString;return n.params.forEach(function(e,i){if("[object Object]"===o.call(e)&&!(e instanceof t)){var a,s;for(a in e)"[object Function]"===o.call(e[a])&&(s=s||[],s.push(a));if(s){var u=h++;y[u]=e;var c=function(){delete y[u]};r.then(c,c),n.params[i]=new t(u,s)}}}),b(n),r.promise}function u(e,t){e||0===e?b({id:e,result:null,error:t}):console.log(t)}function c(e,t,n,r){r.forEach(function(e,t){if(e&&"undefined"!=typeof e.__objectId){var n={};e.__methods.forEach(function(t){n[t]=function(){return s({objectId:e.__objectId,method:t,params:Array.prototype.slice.call(arguments)})}}),r[t]=n}});var o="undefined"==typeof e?null:{id:e,result:null,error:null};try{var i=n.apply(t,r);if(!o)return;i&&"function"==typeof i.then?(v[e]=i,i.then(function(t){delete v[e],o.result=t,b(o)},function(t){v[e]&&(delete v[e],o.error=a(t),b(o))},function(){b({responseId:e,method:"progress",params:Array.prototype.slice.call(arguments)})})):(o.result=i,b(o))}catch(u){o&&(o.error=a(u),b(o))}}function l(e){if(e.source===C||"undefined"==typeof window){var t="string"!=typeof e.data?e.data:JSON.parse(e.data);try{if(t.method){var n=t.method,r=t.params||[];if("serviceId"in t){var o=w[t.serviceId];o||u(t.id,"service not found"),o=o.implementation,n in o?c(t.id,o,o[n],r):u(t.id,"method not found")}else if("objectId"in t){var i=y[t.objectId];i||u(t.id,"object not found"),!n in i?c(t.id,i,i[n],r):u(t.id,"method not found")}else if("requestId"in t){var a=v[t.requestId];a&&"cancel"===n&&a.cancel&&a.cancel.apply(a,r)}else{if(!("responseId"in t))throw new Error("Bad method: "+t.method);var s=g[t.responseId];s&&"progress"===n&&s.progress&&s.progress.apply(s,r)}}else{var l=g[String(t.id)];delete g[String(t.id)],t.error?l.reject(t.error):l.resolve(t.result)}}catch(f){console.log("Plugin._messageHandler "+f)}}}var f=n,p=!1,d=0,h=0,m=0,v={},g={},y={},w={},C=null;"undefined"==typeof window?C=self:window!==window.parent?C=window.parent:null!==window.opener&&(C=window.opener);var b=r;r({method:"loading"}),this.updateHeaders=function(e){if(p)throw new Error("Cannot update headers. Plugin Provider is connected");f=e},this.registerService=function(e,t,n){if(p)throw new Error("Cannot register service. Plugin Provider is connected");"string"==typeof e?e=[e]:Array.isArray(e)||(e=[]);var r=null,o=[];for(r in t)"function"==typeof t[r]&&o.push(r);w[m++]={names:e,methods:o,implementation:t,properties:n||{},listeners:{}}},this.registerServiceProvider=this.registerService,this.connect=function(e,t){if(p)return void(e&&e());if(!C)return void(t&&t("No valid plugin target"));addEventListener("message",l,!1);var n={method:"plugin",params:[o()]};r(n),p=!0,e&&e()},this.disconnect=function(){p&&(removeEventListener("message",l),C=null,p=!1)}}return n}),define("orion/xsrfUtils",[],function(){function e(){var e,t,n,o=document.cookie.split(";");for(e=0;e<o.length;e++)if(t=o[e].substr(0,o[e].indexOf("=")).trim(),n=o[e].substr(o[e].indexOf("=")+1).trim(),t==r)return n}function t(t){var n=e();n&&(t[r]=n)}function n(t){var n=e();n&&t.setRequestHeader(r,n)}var r="x-csrf-token";return{XSRF_TOKEN:r,getCSRFToken:e,setNonceHeader:t,addCSRFNonce:n}}),function(){function e(e){if("string"!=typeof e)throw new TypeError}function t(e){return e?e.split("&"):[]}function n(e){return 0===e.length?"":e.join("&")}function r(e){var t=/([^=]*)(?:=?)(.*)/.exec(e),n=t[1]?decodeURIComponent(t[1]):"",r=t[2]?decodeURIComponent(t[2]):"";return[n,r]}function o(e){var t=encodeURIComponent(e[0]);return e[1]&&(t+="="+encodeURIComponent(e[1])),t}function i(e,n){var o="",i=[],a=0;return{next:function(){if(o!==e.query&&(o=e.query,i=t(o)),a<i.length){var s=r(i[a++]);switch(n){case"keys":return s[0];case"values":return s[1];case"keys+values":return[s[0],s[1]];default:throw new TypeError}}throw x}}}function a(e){Object.defineProperty(this,"_url",{get:function(){return e._url}})}function s(e,t){if(!e.scheme&&t&&(e.scheme=t.scheme,!e.host&&t.host&&(e.userinfo=t.userinfo,e.host=t.host,e.port=t.port,e.pathRelative=!0)),e.pathRelative)if(e.path){if("/"!==e.path[0]){var n=/^(.*\/)[^\/]*$/.exec(t.path)[1]||"/";e.path=n+e.path}}else e.path=t.path}function u(e){return e.toLowerCase()}function c(e){return e?/[1-9]\d*$/.exec(e)[0]:""}function l(e){var t=[];return e.split("/").forEach(function(e){".."===e?t.pop():"."!==e&&t.push(e)}),t.join("/")}function f(e){e.scheme&&(e.scheme=u(e.scheme)),e.port&&(e.port=c(e.port)),e.host&&e.path&&(e.path=l(e.path))}function p(e){return e.replace(/\s/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function d(e,t){if("string"!=typeof e)throw new TypeError;e=p(e);var n=y.exec(e);if(!n)return null;var r={};if(r.scheme=n[1]||"",r.scheme&&!b.test(r.scheme))return null;var o=n[2];if(o){var i=w.exec(o);if(r.userinfo=i[1],r.host=i[2],r.port=i[3],r.port&&!S.test(r.port))return null}return r.path=n[3],r.query=n[4],r.fragment=n[5],s(r,t),f(r),r}function h(e){var t=e.scheme?e.scheme+":":"";return e.host&&(t+="//",e.userinfo&&(t+=e.userinfo+"@"),t+=e.host,e.port&&(t+=":"+e.port)),t+=e.path,e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t}function m(e,t){var n;if(t){if(t=t.href||t,n=d(t),!n||!n.scheme)throw new SyntaxError;Object.defineProperty(this,"_baseURL",{value:n})}var r=d(e,n);if(!r)throw new SyntaxError;Object.defineProperty(this,"_input",{value:e,writable:!0}),Object.defineProperty(this,"_url",{value:r,writable:!0});var o=new a(this);Object.defineProperty(this,"query",{get:function(){return this._url?o:null},enumerable:!0})}try{var v;if("function"==typeof window.URL&&0!==window.URL.length&&"http:"===(v=new window.URL("http://www.w3.org?q")).protocol&&v.query)return}catch(g){}var y=/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/,w=/^(?:(.*)@)?(\[[^\]]*\]|[^:]*)(?::(.*))?$/,C=/^\S*$/,b=/^([a-zA-Z](?:[a-zA-Z0-9+-.])*)$/,S=/^\d*$/,T=/^(\[[^\]\/?#\s]*\]|[^:\/?#\s]*)$/,O=/^(\[[^\]\/?#\s]*\]|[^:\/?#\s]*)(?::(\d*))?$/,_=/^([^?#\s]*)$/,j=/^([^\s]*)$/,E=C,k=/([^:]*):?(.*)/,x="undefined"!=typeof StopIteration?StopIteration:new Error("Stop Iteration"),F={"ftp:":"21","gopher:":"70","http:":"80","https:":"443","ws:":"80","wss:":"443"};Object.defineProperties(a.prototype,{get:{value:function(n){e(n);var o,i=t(this._url.query);return i.some(function(e){var t=r(e);return t[0]===n?(o=t[1],!0):void 0}),o},enumerable:!0},set:{value:function(i,a){e(i),e(a);var s=t(this._url.query),u=s.some(function(e,t){var n=r(e);return n[0]===i?(n[1]=a,s[t]=o(n),!0):void 0});u||s.push(o([i,a])),this._url.query=n(s)},enumerable:!0},has:{value:function(n){e(n);var o=t(this._url.query);return o.some(function(e){var t=r(e);return t[0]===n?!0:void 0})},enumerable:!0},"delete":{value:function(o){e(o);var i=t(this._url.query),a=i.filter(function(e){var t=r(e);return t[0]!==o});return a.length!==i.length?(this._url.query=n(a),!0):!1},enumerable:!0},clear:{value:function(){this._url.query=""},enumerable:!0},forEach:{value:function(e,t){if("function"!=typeof e)throw new TypeError;var n=i(this._url,"keys+values");try{for(;;){var r=n.next();e.call(t,r[1],r[0],this)}}catch(o){if(o!==x)throw o}},enumerable:!0},keys:{value:function(){return i(this._url,"keys")},enumerable:!0},values:{value:function(){return i(this._url,"values")},enumerable:!0},items:{value:function(){return i(this._url,"keys+values")}},size:{get:function(){return t(this._url.query).length},enumerable:!0},getAll:{value:function(n){e(n);var o=[],i=t(this._url.query);return i.forEach(function(e){var t=r(e);t[0]===n&&o.push(t[1])}),o},enumerable:!0},append:{value:function(r,i){e(r),e(i);var a=t(this._url.query);a.push(o([r,i])),this._url.query=n(a)},enumerable:!0}}),Object.defineProperties(m.prototype,{href:{get:function(){return this._url?h(this._url):this._input},set:function(t){e(t),this._input=t,this._url=d(this._input,this._baseURL)},enumerable:!0},origin:{get:function(){return this._url&&this._url.host?this.protocol+"//"+this.host:""},enumerable:!0},protocol:{get:function(){return this._url?this._url.scheme+":":":"},set:function(t){if(e(t),this._url){var n=":"===t.slice(-1)?t.substring(0,t.length-1):t;(""===n||b.test(n))&&(this._url.scheme=u(n))}},enumerable:!0},_userinfo:{get:function(){return this._url?this._url.userinfo:""},set:function(t){e(t),this._url&&(this._url.userinfo=t)}},username:{get:function(){if(!this._url)return"";var e=k.exec(this._userinfo),t=decodeURIComponent(e[1]||"");return t},set:function(t){if(e(t),this._url){var n=k.exec(this._userinfo),r=[encodeURIComponent(t||"")];n[2]&&r.push(n[2]),this._userinfo=r.join(":")}},enumerable:!0},password:{get:function(){if(!this._url)return"";var e=k.exec(this._userinfo),t=decodeURIComponent(e[2]||"");return t},set:function(t){if(e(t),this._url){var n=k.exec(this._userinfo),r=[n[1]||""];t&&r.push(encodeURIComponent(t)),this._userinfo=r.join(":")}},enumerable:!0},host:{get:function(){var e="";return this._url&&this._url.host&&(e+=this._url.host,this._url.port&&(e+=":"+this._url.port)),e},set:function(t){if(e(t),this._url){var n=O.exec(t);n&&(this._url.host=n[1],this._url.port=c(n[2]))}},enumerable:!0},hostname:{get:function(){return this._url?this._url.host:""},set:function(t){if(e(t),this._url){var n=T.exec(t);n&&(this._url.host=t)}},enumerable:!0},port:{get:function(){var e=this._url?this._url.port||"":"";return e&&e===F[this.protocol]&&(e=""),e},set:function(t){if(e(t),this._url){var n=S.exec(t);n&&(this._url.port=c(t))}},enumerable:!0},pathname:{get:function(){return this._url?this._url.path:""},set:function(t){if(e(t),this._url){var n=_.exec(t);n&&(this._url.host&&t&&"/"!==t[0]&&(t="/"+t),this._url.path=t?l(t):"")}},enumerable:!0},search:{get:function(){return this._url&&this._url.query?"?"+this._url.query:""},set:function(t){if(e(t),this._url){t&&"?"===t[0]&&(t=t.substring(1));var n=j.exec(t);n&&(this._url.query=t)}},enumerable:!0},hash:{get:function(){return this._url&&this._url.fragment?"#"+this._url.fragment:""},set:function(t){if(e(t),this._url){t&&"#"===t[0]&&(t=t.substring(1));var n=E.exec(t);n&&(this._url.fragment=t)}},enumerable:!0}});var L=window.URL||window.webkitURL;L&&L.createObjectURL&&(Object.defineProperty(m,"createObjectURL",{value:L.createObjectURL.bind(L),enumerable:!1}),Object.defineProperty(m,"revokeObjectURL",{value:L.revokeObjectURL.bind(L),enumerable:!1})),window.URL=m}(),define("orion/URL-shim",function(){}),define("orion/xhr",["orion/Deferred","orion/xsrfUtils","orion/URL-shim"],function(e,t){function n(e,t,n,r){var o,i="undefined"!=typeof n.response?n.response:n.responseText,a="string"==typeof i?i:null;try{o=n.status}catch(s){o=0}var u={args:t,response:i,responseText:a,status:o,url:e,xhr:n};return"undefined"!=typeof r&&(u.error=r),u}function r(e){return new URL(location.href).origin===new URL(e,location.href).origin}function o(o,i,a){a=a||{};var s=arguments.length>3&&arguments[3]?arguments[3]:new XMLHttpRequest,u=new e,c=a.headers||{};r(i)&&t.setNonceHeader(c);var l,f=a.log||!1;"undefined"==typeof c["X-Requested-With"]&&(c["X-Requested-With"]="XMLHttpRequest"),"undefined"==typeof a.data||"POST"!==o&&"PUT"!==o||(l=a.data);var p=!1,d=!1;u.promise.then(void 0,function(e){p=!0,!d&&e instanceof Error&&"Cancel"===e.name&&s.abort()}),s.onabort=function(){if(d=!0,!p){var e=new Error("Cancel");e.name="Cancel",u.reject(e)}},s.onload=function(){var e=n(i,a,s);200<=s.status&&s.status<400?u.resolve(e):(u.reject(e),f&&"undefined"!=typeof console&&console.log(new Error(s.statusText)))},s.onerror=function(){var e=n(i,a,s);u.reject(e),f&&"undefined"!=typeof console&&console.log(new Error(s.statusText))},s.onprogress=function(e){e.xhr=s,u.progress(e)};try{if(s.open(o,i,!0),"string"==typeof a.responseType&&(s.responseType=a.responseType),"number"==typeof a.timeout)if("number"==typeof s.timeout)s.timeout=a.timeout,s.addEventListener("timeout",function(){u.reject(n(i,a,s,"Timeout exceeded"))});else{var h=setTimeout(function(){u.reject(n(i,a,s,"Timeout exceeded"))},a.timeout);u.promise.then(clearTimeout.bind(null,h),clearTimeout.bind(null,h))}Object.keys(c).forEach(function(e){s.setRequestHeader(e,c[e])}),s.send(l||null)}catch(m){u.reject(n(i,a,s,m))}return u.promise}return o}),define("orion/operation",["orion/xhr","orion/Deferred"],function(e,t){function n(e){return e?"loadstart"===e||"progress"===e?!0:!1:!0}function r(t){e("DELETE",t,{headers:{"Orion-Version":"1"},timeout:15e3})}function o(t){e("PUT",t,{headers:{"Orion-Version":"1"},data:JSON.stringify({abort:!0}),timeout:15e3})}function i(t,o,a,s){e("GET",t.location,{headers:{"Orion-Version":"1"},timeout:15e3}).then(function(e){var u=e.response?JSON.parse(e.response):null;return o.progress(u),n(u.type)?(setTimeout(function(){i(t,o,a,s)},t.timeout),void(t.timeout=Math.min(2*t.timeout,2e3))):("error"===u.type||"abort"===u.type?o.reject(s?s(u):u.Result):o.resolve(a?a(u):u.Result.JsonData),void(u.Location||r(t.location)))},function(e){var t=e;if(void 0!==e.responseText){t=e.responseText;try{t=JSON.parse(e.responseText)}catch(n){}}void 0!==t.Message?(t.HttpCode=void 0===t.HttpCode?e.status:t.HttpCode,t.Severity=void 0===t.Severity?"Error":t.Severity,o.reject(t)):o.reject({Severity:"Error",Message:t,HttpCode:e.status})})}function a(e,t){t.then(null,function(t){t instanceof Error&&"Cancel"===t.name&&o(e)})}function s(e,n,r){var o=new t;return a(e,o),i({location:e,timeout:100},o,n,r),o}return{handle:s}}),define("orion/form",[],function(){function e(e){return encodeURIComponent(e).replace(/[!'()*]/g,escape).replace("%20","+")}return{encodeFormData:function(t){t=t||{};for(var n=Object.keys(t),r=[],o=0;o<n.length;o++){var i=n[o],a=t[i];r.push(e(i)+"="+e(a))}return r.join("&")},encodeSlug:function(e){return e.replace(/([^\u0020-\u007e]|%)+/g,encodeURIComponent)}}}),define("plugins/filePlugin/fileImpl",["orion/Deferred","orion/xhr","orion/URL-shim","orion/operation","orion/form"],function(e,t,n,r,o){function i(e){return m.href=e,m.href}function a(e){return e&&"object"==typeof e&&Object.keys(e).forEach(function(t){var n=e[t];-1!==t.indexOf("Location")?e[t]=i(n):a(n)}),e}function s(e){return e&&(e=e.replace(";","%3B")),e}function u(e,n,r){return t(e,s(n),r)}function c(){return u.apply(null,Array.prototype.slice.call(arguments)).then(function(t){if(t.xhr&&202===t.xhr.status){var n=t.response?JSON.parse(t.response):null,o=new e;return r.handle(n.Location,function(e){return e.Result}).then(o.resolve,o.reject,o.progress),o}return t.response?JSON.parse(t.response):null})}function l(e,t){for(var n="",r='+-&|!(){}[]^"~:\\'+(t?"":"*?"),o=0;o<e.length;o++){var i=e.charAt(o);r.indexOf(i)>=0&&(n+="\\"),n+=i}return n}function f(e){var t=l(e.keyword,!0),n=e.sort;if(e.nameSearch){var r=/\*$/.test(e.keyword)?"":"*";t="NameLower:"+t+r}else e.fileType&&"*.*"!==e.fileType?""!==t?(t.indexOf(" ")>=0&&(t='"'+t+'"'),t=encodeURIComponent(t)+"+NameLower:*."+e.fileType):(t="NameLower:*."+e.fileType,n=n.replace("Path","NameLower")):e.fileNamePatterns&&e.fileNamePatterns.length>0?""!==t?(t.indexOf(" ")>=0&&(t='"'+t+'"'),t=encodeURIComponent(t)+"+Name:"+e.fileNamePatterns.join("/")):(t="Name:"+e.fileNamePatterns.join("/"),n=n.replace("Path","Name")):t=encodeURIComponent(t.indexOf(" ")>=0?'"'+t+'"':t);return"?sort="+n+"&rows="+e.rows+"&start="+e.start+"&q="+t+"+Location:"+e.resource+"*"}function p(e,t){this.fileBase=e,this.workspaceBase=t,this.makeAbsolute=t&&-1!==t.indexOf("://")}function d(t){var n="Unknown Error";t.status&&404===t.status?n="File not found.":t.xhr&&t.xhr.statusText&&(n=t.xhr.statusText);var r={Severity:"Error",Message:n};return t.responseText=JSON.stringify(r),(new e).reject(t)}function h(e,t,n,r){var o={responseType:"arraybuffer",headers:n?n:{"Orion-Version":"1"},data:r,log:!1};return u(e,t,o).then(function(e){return e.response},function(e){return d(e)}).then(function(e){return this.makeAbsolute&&a(e),e}.bind(this))}var m=document.createElement("a");return p.prototype={fetchChildren:function(e){var t=e;return t===this.fileBase?this.loadWorkspace(t).then(function(e){return e.Children||[]}):(-1===t.indexOf("?depth=")&&(t+="?depth=1"),u("GET",t,{headers:{"Orion-Version":"1","Content-Type":"charset=UTF-8"},timeout:15e3}).then(function(e){var t=e.response?JSON.parse(e.response):{};return t.Children||[]}).then(function(e){return this.makeAbsolute&&a(e),e}.bind(this)))},_createWorkspace:function(e){return u("POST",this.workspaceBase,{headers:{"Orion-Version":"1",Slug:o.encodeSlug(e)},timeout:15e3}).then(function(e){var t=e.response?JSON.parse(e.response):{};return t})},loadWorkspaces:function(){return u("GET",this.workspaceBase,{headers:{"Orion-Version":"1"},timeout:15e3}).then(function(e){var t=e.response?JSON.parse(e.response):{};return t.Workspaces}).then(function(e){return this.makeAbsolute&&a(e),e}.bind(this))},loadWorkspace:function(e){return e===this.fileBase&&(e=null),u("GET",e?e:this.workspaceBase,{headers:{"Orion-Version":"1"},timeout:15e3,log:!1}).then(function(t){var n=t.response?JSON.parse(t.response):{};return e?n:n.Workspaces.length>0?this.loadWorkspace(n.Workspaces[0].Location):this._createWorkspace("Orion Content")}.bind(this)).then(function(e){return this.makeAbsolute&&a(e),e}.bind(this))},createProject:function(e,t,n,r){if(!e)return void console.error("url is undefined, make sure you're signed in before creating a project");var o={Name:t};return n&&(o.ContentLocation=n),r&&(o.CreateIfDoesntExist=r),u("POST",e,{headers:{"Orion-Version":"1","Content-Type":"application/json;charset=UTF-8"},timeout:15e3,data:JSON.stringify(o)}).then(function(e){return e.response?JSON.parse(e.response):null}).then(function(e){return this.makeAbsolute&&a(e),e}.bind(this))},createFolder:function(e,t){return u("POST",e,{headers:{"Orion-Version":"1","X-Create-Options":"no-overwrite",Slug:o.encodeSlug(t),"Content-Type":"application/json;charset=UTF-8"},data:JSON.stringify({Name:t,LocalTimeStamp:"0",Directory:"true"}),timeout:15e3}).then(function(e){return e.response?JSON.parse(e.response):null}).then(function(e){return this.makeAbsolute&&a(e),e}.bind(this))},createFile:function(e,t){return u("POST",e,{headers:{"Orion-Version":"1","X-Create-Options":"no-overwrite",Slug:o.encodeSlug(t),"Content-Type":"application/json;charset=UTF-8"},data:JSON.stringify({Name:t,LocalTimeStamp:"0",Directory:"false"}),timeout:15e3}).then(function(e){return e.response?JSON.parse(e.response):null}).then(function(e){return this.makeAbsolute&&a(e),e}.bind(this))},deleteFile:function(e){return u("DELETE",e,{headers:{"Orion-Version":"1"},timeout:15e3}).then(function(e){return e.response?JSON.parse(e.response):null}).then(function(e){return this.makeAbsolute&&a(e),e}.bind(this))},moveFile:function(e,t,n){return this._doCopyMove(e,t,!0,n).then(function(e){return this.makeAbsolute&&a(e),e}.bind(this))},copyFile:function(e,t,n){return this._doCopyMove(e,t,!1,n).then(function(e){return this.makeAbsolute&&a(e),e}.bind(this))},_doCopyMove:function(e,t,n,r){if(!r){var i=e.split("/");r=i.pop()||i.pop()}return u("POST",t,{headers:{"Orion-Version":"1",Slug:o.encodeSlug(r),"X-Create-Options":"no-overwrite,"+(n?"move":"copy"),"Content-Type":"application/json;charset=UTF-8"},data:JSON.stringify({Location:e,Name:r}),timeout:15e3}).then(function(e){return e.response?JSON.parse(e.response):null})},read:function(e,t,n){var r=new URL(e,window.location);return t&&r.query.set("parts","meta"),u("GET",r.href,{timeout:15e3,headers:{"Orion-Version":"1"},log:!1}).then(function(e){return t?e.response?JSON.parse(e.response):null:n?{result:e.response,acceptPatch:e.xhr.getResponseHeader("Accept-Patch")}:e.response}).then(function(e){return this.makeAbsolute&&a(n?e.result:e),e}.bind(this))},write:function(e,t,n){var r=new URL(e,window.location),o={"Orion-Version":"1","Content-Type":"text/plain;charset=UTF-8"};n&&n.ETag&&(o["If-Match"]=n.ETag);var i={timeout:15e3,headers:o,data:t,log:!1},s="PUT";return"string"!=typeof t&&(t.sourceLocation?(i.query={source:t.sourceLocation},i.data=null):t.diff?(s="POST",o["X-HTTP-Method-Override"]="PATCH",i.data=JSON.stringify(i.data)):r.query.set("parts","meta")),u(s,r.href,i).then(function(e){return e.response?JSON.parse(e.response):null}).then(function(e){return this.makeAbsolute&&a(e),e}.bind(this))},remoteImport:function(e,t){var n={"Orion-Version":"1"};return t.OptionHeader&&(n["X-Xfer-Options"]=t.OptionHeader,delete t.OptionHeader),c("POST",e,{headers:n,data:JSON.stringify(t),timeout:15e3}).then(function(e){return this.makeAbsolute&&a(e),e}.bind(this))},remoteExport:function(e,t){var n={"Orion-Version":"1"};return t.OptionHeader&&(n["X-Xfer-Options"]=t.OptionHeader,delete t.OptionHeader),c("POST",e,{headers:n,data:JSON.stringify(t),timeout:15e3}).then(function(e){return this.makeAbsolute&&a(e),e}.bind(this))},search:function(e){var t=f(e);return u("GET",this.fileBase+"/../filesearch"+t,{headers:{Accept:"application/json","Orion-Version":"1"},timeout:6e4}).then(function(e){return e.response?JSON.parse(e.response):{}}).then(function(e){return this.makeAbsolute&&a(e),e}.bind(this))}},window.Blob&&(p.prototype.readBlob=function(e){return h("GET",e).then(function(e){return e})},p.prototype.writeBlob=function(e,t,n){var r={};return n&&n.ETag&&(r["If-Match"]=n.ETag),h("PUT",e,r,t)}),p}),function(){function e(e,t,n,r,o,i){t[e]&&(n.push(e),(t[e]===!0||1===t[e])&&r.push(o+e+"/"+i))}function t(e,t,n,r,o){var i=r+t+"/"+o;require._fileExists(e.toUrl(i+".js"))&&n.push(i)}function n(e,t,r){var o;for(o in t)!t.hasOwnProperty(o)||e.hasOwnProperty(o)&&!r?"object"==typeof t[o]&&(!e[o]&&t[o]&&(e[o]={}),n(e[o],t[o],r)):e[o]=t[o]}var r=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(o){var i=o.config?o.config():{};return{version:"2.0.4",load:function(o,a,s,u){u=u||{},u.locale&&(i.locale=u.locale);var c,l,f,p=r.exec(o),d=p[1],h=p[4],m=p[5],v=h.split("-"),g=[],y={},w="";if(p[5]?(d=p[1],c=d+m):(c=o,m=p[4],h=i.locale,h||(h=i.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),v=h.split("-")),u.isBuild){for(g.push(c),t(a,"root",g,d,m),l=0;l<v.length;l++)f=v[l],w+=(w?"-":"")+f,t(a,w,g,d,m);if(u.locales){var C,b;for(C=0;C<u.locales.length;C++)for(h=u.locales[C],v=h.split("-"),w="",b=0;b<v.length;b++)f=v[b],w+=(w?"-":"")+f,t(a,w,g,d,m)}a(g,function(){s()})}else a([c],function(t){var r,o=[];for(e("root",t,o,g,d,m),l=0;l<v.length;l++)r=v[l],w+=(w?"-":"")+r,e(w,t,o,g,d,m);a(g,function(){var e,r,i;for(e=o.length-1;e>-1&&o[e];e--)i=o[e],r=t[i],(r===!0||1===r)&&(r=a(d+i+"/"+m)),n(y,r);s(y)})})}}})}(),define("orion/navigate/nls/messages",{root:!0}),define("orion/navigate/nls/root/messages",{Navigator:"Navigator","Strings Xtrnalizr":"Strings Xtrnalizr","Externalize strings":"Externalize strings from JavaScript files in this folder.",NotSupportFileSystem:"${0} is not supported in this file system",SrcNotSupportBinRead:"Source file service does not support binary read",TargetNotSupportBinWrite:"Target file service does not support binary write",NoFileSrv:"No matching file service for location: ${0}","Choose a Folder":"Choose a Folder","Copy of ${0}":"Copy of ${0}",EnterName:"Enter a new name for '${0}'",ChooseFolder:"Choose folder...",Rename:"Rename",RenameFilesFolders:"Rename the selected files or folders",CompareEach:"Compare with each other","Compare 2 files":"Compare the selected 2 files with each other","Compare with...":"Compare with...",CompareFolders:"Compare the selected folder with a specified folder",Delete:"Delete","Unknown item":"Unknown item","delete item msg":"Are you sure you want to delete these ${0} items?",DeleteTrg:"Are you sure you want to delete '${0}'?",Zip:"Zip",ZipDL:"Create a zip file of the folder contents and download it","New File":"File","Create a new file":"Create a new file","Name:":"Name:","New Folder":"Folder","Folder name:":"Folder name:","Create a new folder":"Create a new folder","Creating folder":"Creating folder",Folder:"Folder","Create an empty folder":"Create an empty folder",CreateEmptyMsg:"Create an empty folder on the Orion server. You can import, upload, or create content in the editor.","Sample HTML5 Site":"Sample HTML5 Site","Generate a sample":"Generate a sample",'Generate an HTML5 "Hello World" website, including JavaScript, HTML, and CSS files.':'Generate an HTML5 "Hello World" website, including JavaScript, HTML, and CSS files.',"Creating a folder for ${0}":"Creating a folder for ${0}","SFTP Import":"SFTP Import","Import content from SFTP":"Import content from SFTP","Imported Content":"Imported Content","Upload a Zip":"Upload a Zip","Upload content from a local zip file":"Upload content from a local zip file","Uploaded Content":"Uploaded Content","Clone Git Repository":"Clone Git Repository","Clone a git repository":"Clone a git repository","Link to Server":"Link to Server",LinkContent:"Link to existing content on the server",CreateLinkedFolder:"Create a folder that links to an existing folder on the server.","Server path:":"Server path:",NameLocationNotClear:"The name and server location were not specified.","Go Up":"Go Up",GoUpToParent:"Move up to the parent folder","Go Into":"Go Into",GoSelectedFolder:"Move into the selected folder","File or zip archive":"File or zip archive",ImportLcFile:"Import a file or zip archive from your local file system","SFTP from...":"SFTP",CpyFrmSftp:"Copy files and folders from a specified SFTP connection","Importing from ${0}":"Importing from ${0}","SFTP to...":"SFTP",CpyToSftp:"Copy files and folders to a specified SFTP location",Exporting:"Exporting to ${0}","Pasting ${0}":"Pasting ${0}","Copy to":"Copy to","Move to":"Move to","Copying ${0}":"Copying ${0}","Moving ${0}":"Moving ${0}","Renaming ${0}":"Renaming ${0}","Deleting ${0}":"Deleting ${0}","Creating ${0}":"Creating ${0}","Linking to ${0}":"Linking to ${0}",MvToLocation:"Move files and folders to a new location",Cut:"Cut",Copy:"Copy","Fetching children of ":"Fetching children of ",Paste:"Paste","Open With":"Open With","Loading ":"Loading ",New:"New",File:"File",Actions:"Actions","Orion Content":"Orion Content","Create new content":"Create new content","Import from HTTP...":"HTTP","File URL:":"File URL:",ImportURL:"Import a file from a URL and optionally unzip it","Unzip *.zip files:":"Unzip *.zip files:","Extracted from:":"Extracted from:",FolderDropNotSupported:"Did not drop ${0}. Folder drop is not supported in this browser.",CreateFolderErr:"You cannot copy files directly into the workspace. Create a folder first.","Unzip ${0}?":"Unzip ${0}?","Upload progress: ":"Upload progress: ","Uploading ":"Uploading ","Cancel upload":"Cancel upload",UploadingFileErr:"Uploading the following file failed: ","Enter project name:":"Enter project name:","Create new project":"Create new project","Creating project ${0}":"Creating project ${0}",NoFile:"Use the ${0} menu to create new files and folders. Click a file to start coding.",Download:"Download",Download_tooltips:"Download the file contents as the displayed name","Downloading...":"Reading file contents...","Download not supported":"Contents download is not supported in this browser.",gettingContentFrom:"Getting content from ",deletingLaunchConfiguration:"Deleting launch configuration...",deployTo:"Deploy to ",deploy:"Deploy ",connect:"Connect",fetchContent:"Fetch content",fetchContentOf:"Fetch content of ",disconnectFromProject:"Disconnect from project",doNotTreatThisFolder:"Do not treat this folder as a part of the project",checkStatus:"Check status",checkApplicationStatus:"Check application status",checkApplicationState:"Check application state",stop:"Stop",start:"Start",stopApplication:"Stop application",startApplication:"Start application",manage:"Manage",manageThisApplicationOnRemote:"Manage this application on remote server",deleteLaunchConfiguration:"Delete this launch configuration",deployThisApplication:"Deploy this application",associatedFolder:"Associated Folder",associateAFolderFromThe:"Associate a folder from the workspace with this project.",convertToProject:"Convert to project",convertThisFolderIntoA:"Convert this folder into a project",thisFolderIsAProject:"This folder is a project already.",basic:"Basic","createAnEmptyProject.":"Create an empty project.",sFTP:"SFTP",createAProjectFromAn:"Create a project from an SFTP site.",readMeCommandName:"Readme File",readMeCommandTooltip:"Create a README.md file in this project",zipArchiveCommandName:"Zip archive",zipArchiveCommandTooltip:"Create a project from a local zip archive.","Url:":"Url:",notZip:"The following files are not zip files: ${0}. Would you like to continue the import?",notZipMultiple:"There are multiple non-zip files being uploaded. Would you like to continue the import?",Cancel:"Cancel",Ok:"Ok",missingCredentials:"Enter the ${0} authentication credentials associated with ${1} to check its status.",deploying:"deploying",starting:"starting",stopping:"stopping",checkingStateShortMessage:"checking status"}),define("domReady",[],function(){function e(e){var t;
for(t=0;t<e.length;t+=1)e[t](c)}function t(){var t=l;u&&t.length&&(l=[],e(t))}function n(){u||(u=!0,a&&clearInterval(a),t())}function r(e){return u?e(c):l.push(e),r}var o,i,a,s="undefined"!=typeof window&&window.document,u=!s,c=s?document:null,l=[];if(s){if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(window.attachEvent){window.attachEvent("onload",n),i=document.createElement("div");try{o=null===window.frameElement}catch(f){}i.doScroll&&o&&window.external&&(a=setInterval(function(){try{i.doScroll(),n()}catch(e){}},30))}"complete"===document.readyState&&n()}return r.version="2.0.1",r.load=function(e,t,n,o){o.isBuild?n(null):r(n)},r}),define("plugins/fileClientPlugin",["orion/Deferred","orion/plugin","plugins/filePlugin/fileImpl","i18n!orion/navigate/nls/messages","domReady!"],function(e,t,n,r){function o(e){if(i)try{if(window.location.host===parent.location.host&&window.location.protocol===parent.location.protocol)return e.substring(parent.location.href.indexOf(parent.location.host)+parent.location.host.length);i=!1}catch(t){i=!1}return e}var i=!0,a=document.createElement("a");a.href="../mixloginstatic/LoginWindow.html";var s=a.href,u={name:"Orion File Service",version:"1.0",description:"This plugin provides file access to a user's workspace.",login:s},c=new t(u);a.href="../file";var l=o(a.href);a.href="../workspace";var f=o(a.href),p=new n(l,f);c.registerService("orion.core.file",p,{Name:r["Orion Content"],nls:"orion/navigate/nls/messages",top:l,ranking:-1,pattern:[l,f]}),c.connect()});