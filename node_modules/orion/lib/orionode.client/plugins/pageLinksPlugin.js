!function(e,n){"function"==typeof define&&define.amd?define("orion/Deferred",n):"object"==typeof exports?module.exports=n():(e.orion=e.orion||{},e.orion.Deferred=n())}(this,function(){function e(){for(var e;e=i.shift();)e();a=!1}function n(e){i.push(e),a||(a=!0,s())}function r(e){return function(n){e(n)}}function t(e,n,t){try{var o=e(n),i=o&&("object"==typeof o||"function"==typeof o)&&o.then;if("function"==typeof i)if(o===t.promise)t.reject(new TypeError);else{var a=o.cancel;"function"==typeof a?t._parentCancel=a.bind(o):delete t._parentCancel,i.call(o,r(t.resolve),r(t.reject),r(t.progress))}else t.resolve(o)}catch(s){t.reject(s)}}function o(){function e(){for(var e;e=u.shift();){var n=e.deferred,r="fulfilled"===l?"resolve":"reject",o=e[r];"function"==typeof o?t(o,s,n):n[r](s)}}function r(r){delete c._parentCancel,l="rejected",s=r,u.length&&n(e)}function i(t){function a(e){return function(n){l&&"assumed"!==l||e(n)}}delete c._parentCancel;try{var f=t&&("object"==typeof t||"function"==typeof t)&&t.then;if("function"==typeof f)if(t===c)r(new TypeError);else{l="assumed";var p=t&&t.cancel;if("function"!=typeof p){var d=new o;t=d.promise;try{f(d.resolve,d.reject,d.progress)}catch(h){d.reject(h)}p=t.cancel,f=t.then}s=t,f.call(t,a(i),a(r)),c._parentCancel=p.bind(t)}else l="fulfilled",s=t,u.length&&n(e)}catch(g){a(r)(g)}}function a(){var e=c._parentCancel;if(e)delete c._parentCancel,e();else if(!l){var n=new Error("Cancel");n.name="Cancel",r(n)}}var s,l,u=[],c=this;this.resolve=function(e){return l||i(e),c},this.reject=function(e){return l||r(e),c},this.progress=function(e){return l||u.forEach(function(n){if(n.progress)try{n.progress(e)}catch(r){}}),c.promise},this.cancel=function(){return c._parentCancel?setTimeout(a,0):a(),c},this.then=function(r,t,i){var a=new o;return a._parentCancel=c.promise.cancel,u.push({resolve:r,reject:t,progress:i,deferred:a}),("fulfilled"===l||"rejected"===l)&&n(e),a.promise},this.promise={then:c.then,cancel:c.cancel}}var i=[],a=!1,s=function(){if("undefined"!=typeof process&&"function"==typeof process.nextTick){var n=process.nextTick;return function(){n(e)}}if("function"==typeof MutationObserver){var r=document.createElement("div"),t=new MutationObserver(e);return t.observe(r,{attributes:!0}),function(){r.setAttribute("class","_tick")}}return function(){setTimeout(e,0)}}();return o.all=function(e,n){function r(e,n){s||(a[e]=n,0===--i&&l.resolve(a))}function t(e,t){if(!s){if(n)try{return void r(e,n(t))}catch(o){t=o}l.reject(t)}}var i=e.length,a=[],s=!1,l=new o;return l.then(void 0,function(){s=!0,e.forEach(function(e){e.cancel&&e.cancel()})}),0===i?l.resolve(a):e.forEach(function(e,n){e.then(r.bind(void 0,n),t.bind(void 0,n))}),l.promise},o.when=function(e,n,r,t){var i,a;return e&&"function"==typeof e.then?i=e:(a=new o,a.resolve(e),i=a.promise),i.then(n,r,t)},o}),define("orion/PageUtil",[],function(){function e(){var e=window.location.href.split("#")[1];return e=e?"#"+e:""}function n(e){e=e||window.location.toString();var n={resource:""},r=e.indexOf("#");if(-1!==r){var t=e.substring(r+1);if(0!==t.length){var o=t.split(",");n.resource=decodeURIComponent(o[0]);for(var i=1;i<o.length;i++){var a=o[i],s=/([^=]*)(=?)(.*)/.exec(a),l=decodeURIComponent(s[1]||""),u=decodeURIComponent(s[3]||"");""!==l&&"resource"!==l&&(n[l]=u)}}}return n}function r(e,n){var r=e;if(-1===e.indexOf("://")){var o=document.createElement("a");o.href=e,r=o.href}var i=!1;return i=n?n.some(function(e){return new RegExp("^"+e+":","i").test(r)}):t.test(r),i?e:(console.log("Illegal URL Scheme: '"+e+"'"),"")}var t=new RegExp("^http[s]?","i");return{hash:e,matchResourceParameters:n,validateURLScheme:r}}),define("orion/URITemplate",[],function(){function e(e){this._text=e}function n(e){return e.replace("%25","%")}function r(e,r){if("U"===r)return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()});if("U+R"===r)return encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(f,n);if("U+R-,"===r)return encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/,/g,"%2C");throw new Error("Unknown allowed character set: "+r)}function t(e,n,t){for(var o=[],i=0;i<e.length;i++)"undefined"!=typeof e[i]&&o.push(r(e[i],n));return o.join(t)}function o(e,n,t,o){for(var i=Object.keys(e),a=[],s=0;s<i.length;s++)"undefined"!=typeof e[i[s]]&&a.push(r(i[s],n)+t+r(e[i[s]],n));return a.join(o)}function i(e){for(var n=[],r=e.split(","),t=0;t<r.length;t++){var o=r[t].match(c);if(null===o)throw new Error("Bad VarSpec: "+e);n.push({name:o[1],explode:!!o[2],prefix:o[3]?parseInt(o[3],10):-1})}return n}function a(e){if(0===e.length)throw new Error("Invalid Expression: 0 length expression");this._operator=u[e[0]],this._operator?e=e.substring(1):this._operator=u.NUL,this._varSpecList=i(e)}function s(n){for(var r=[],t=0,o=n.indexOf("{",t);-1!==o;){r.push(new e(n.substring(t,o)));var i=n.indexOf("}",o+1);if(-1===i)throw new Error("Invalid template: "+n);r.push(new a(n.substring(o+1,i))),t=i+1,o=n.indexOf("{",t)}return r.push(new e(n.substring(t))),r}function l(e){this._templateComponents=s(e)}var u={NUL:{first:"",sep:",",named:!1,ifemp:"",allow:"U"},"+":{first:"",sep:",",named:!1,ifemp:"",allow:"U+R"},".":{first:".",sep:",",named:!1,ifemp:"",allow:"U"},"/":{first:"/",sep:"/",named:!1,ifemp:"",allow:"U"},";":{first:";",sep:";",named:!0,ifemp:"",allow:"U"},"?":{first:"?",sep:"&",named:!0,ifemp:"=",allow:"U"},"&":{first:"&",sep:"&",named:!0,ifemp:"=",allow:"U"},"#":{first:"#",sep:",",named:!1,ifemp:"",allow:"U+R"},",":{first:"",sep:",",named:!1,ifemp:"",allow:"U+R-,"}},c=/^((?:(?:[a-zA-Z0-9_])|(?:%[0-9A-F][0-9A-F]))(?:(?:[a-zA-Z0-9_.])|(?:%[0-9A-F][0-9A-F]))*)(?:(\*)|:([0-9]+))?$/,f=/%25[0-9A-F][0-9A-F]/g;return e.prototype={expand:function(){return encodeURI(this._text)}},a.prototype={expand:function(e){for(var n=[],i=0;i<this._varSpecList.length;i++){var a=this._varSpecList[i],s=a.name,l=e[s],u=typeof l;if("undefined"!==u&&null!==l){var c=0===n.length?this._operator.first:this._operator.sep;if("string"===u)this._operator.named&&(c+=r(s,"U+R"),c+=0===l.length?this._operator.ifemp:"="),-1!==a.prefix&&a.prefix<l.length&&(l=l.substring(0,a.prefix)),c+=r(l,this._operator.allow);else if(Array.isArray(l)){if(0===l.length)continue;if(a.explode)c+=t(l,this._operator.allow,this._operator.sep);else{var f=t(l,this._operator.allow,",");this._operator.named&&(c+=r(s,"U+R"),c+=0===f.length?this._operator.ifemp:"="),c+=f}}else{if("object"!==u)throw new Error("bad param type: "+s+" : "+u);if(0===Object.keys(l).length)continue;if(a.explode)c+=o(l,this._operator.allow,"=",this._operator.sep);else{var p=o(l,this._operator.allow,",",",");this._operator.named&&(c+=r(s,"U+R"),c+=0===p.length?this._operator.ifemp:"="),c+=p}}n.push(c)}}return n.join("")}},l.prototype={expand:function(e){for(var n=[],r=0;r<this._templateComponents.length;r++)n.push(this._templateComponents[r].expand(e));return n.join("")}},l}),define("orion/i18nUtil",["require","orion/Deferred"],function(){function e(e){var n=/\$\{([^\}]+)\}/g,r=arguments;return 2===r.length&&r[1]&&"object"==typeof r[1]?e.replace(n,function(e,n){return r[1][n]}):e.replace(n,function(e,n){return r[(n<<0)+1]})}return{formatMessage:e}}),define("orion/objects",[],function(){function e(e){for(var n=Object.prototype.hasOwnProperty,r=1,t=arguments.length;t>r;r++){var o=arguments[r];for(var i in o)n.call(o,i)&&(e[i]=o[i])}return e}return{clone:function(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=Object.create(Object.getPrototypeOf(n));return e(r,n),r},mixin:e,toArray:function(e){return Array.isArray(e)?e:[e]}}}),function(){function e(e){if("string"!=typeof e)throw new TypeError}function n(e){return e?e.split("&"):[]}function r(e){return 0===e.length?"":e.join("&")}function t(e){var n=/([^=]*)(?:=?)(.*)/.exec(e),r=n[1]?decodeURIComponent(n[1]):"",t=n[2]?decodeURIComponent(n[2]):"";return[r,t]}function o(e){var n=encodeURIComponent(e[0]);return e[1]&&(n+="="+encodeURIComponent(e[1])),n}function i(e,r){var o="",i=[],a=0;return{next:function(){if(o!==e.query&&(o=e.query,i=n(o)),a<i.length){var s=t(i[a++]);switch(r){case"keys":return s[0];case"values":return s[1];case"keys+values":return[s[0],s[1]];default:throw new TypeError}}throw T}}}function a(e){Object.defineProperty(this,"_url",{get:function(){return e._url}})}function s(e,n){if(!e.scheme&&n&&(e.scheme=n.scheme,!e.host&&n.host&&(e.userinfo=n.userinfo,e.host=n.host,e.port=n.port,e.pathRelative=!0)),e.pathRelative)if(e.path){if("/"!==e.path[0]){var r=/^(.*\/)[^\/]*$/.exec(n.path)[1]||"/";e.path=r+e.path}}else e.path=n.path}function l(e){return e.toLowerCase()}function u(e){return e?/[1-9]\d*$/.exec(e)[0]:""}function c(e){var n=[];return e.split("/").forEach(function(e){".."===e?n.pop():"."!==e&&n.push(e)}),n.join("/")}function f(e){e.scheme&&(e.scheme=l(e.scheme)),e.port&&(e.port=u(e.port)),e.host&&e.path&&(e.path=c(e.path))}function p(e){return e.replace(/\s/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function d(e,n){if("string"!=typeof e)throw new TypeError;e=p(e);var r=w.exec(e);if(!r)return null;var t={};if(t.scheme=r[1]||"",t.scheme&&!S.test(t.scheme))return null;var o=r[2];if(o){var i=y.exec(o);if(t.userinfo=i[1],t.host=i[2],t.port=i[3],t.port&&!_.test(t.port))return null}return t.path=r[3],t.query=r[4],t.fragment=r[5],s(t,n),f(t),t}function h(e){var n=e.scheme?e.scheme+":":"";return e.host&&(n+="//",e.userinfo&&(n+=e.userinfo+"@"),n+=e.host,e.port&&(n+=":"+e.port)),n+=e.path,e.query&&(n+="?"+e.query),e.fragment&&(n+="#"+e.fragment),n}function g(e,n){var r;if(n){if(n=n.href||n,r=d(n),!r||!r.scheme)throw new SyntaxError;Object.defineProperty(this,"_baseURL",{value:r})}var t=d(e,r);if(!t)throw new SyntaxError;Object.defineProperty(this,"_input",{value:e,writable:!0}),Object.defineProperty(this,"_url",{value:t,writable:!0});var o=new a(this);Object.defineProperty(this,"query",{get:function(){return this._url?o:null},enumerable:!0})}try{var m;if("function"==typeof window.URL&&0!==window.URL.length&&"http:"===(m=new window.URL("http://www.w3.org?q")).protocol&&m.query)return}catch(v){}var w=/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/,y=/^(?:(.*)@)?(\[[^\]]*\]|[^:]*)(?::(.*))?$/,b=/^\S*$/,S=/^([a-zA-Z](?:[a-zA-Z0-9+-.])*)$/,_=/^\d*$/,O=/^(\[[^\]\/?#\s]*\]|[^:\/?#\s]*)$/,k=/^(\[[^\]\/?#\s]*\]|[^:\/?#\s]*)(?::(\d*))?$/,L=/^([^?#\s]*)$/,E=/^([^\s]*)$/,C=b,R=/([^:]*):?(.*)/,T="undefined"!=typeof StopIteration?StopIteration:new Error("Stop Iteration"),P={"ftp:":"21","gopher:":"70","http:":"80","https:":"443","ws:":"80","wss:":"443"};Object.defineProperties(a.prototype,{get:{value:function(r){e(r);var o,i=n(this._url.query);return i.some(function(e){var n=t(e);return n[0]===r?(o=n[1],!0):void 0}),o},enumerable:!0},set:{value:function(i,a){e(i),e(a);var s=n(this._url.query),l=s.some(function(e,n){var r=t(e);return r[0]===i?(r[1]=a,s[n]=o(r),!0):void 0});l||s.push(o([i,a])),this._url.query=r(s)},enumerable:!0},has:{value:function(r){e(r);var o=n(this._url.query);return o.some(function(e){var n=t(e);return n[0]===r?!0:void 0})},enumerable:!0},"delete":{value:function(o){e(o);var i=n(this._url.query),a=i.filter(function(e){var n=t(e);return n[0]!==o});return a.length!==i.length?(this._url.query=r(a),!0):!1},enumerable:!0},clear:{value:function(){this._url.query=""},enumerable:!0},forEach:{value:function(e,n){if("function"!=typeof e)throw new TypeError;var r=i(this._url,"keys+values");try{for(;;){var t=r.next();e.call(n,t[1],t[0],this)}}catch(o){if(o!==T)throw o}},enumerable:!0},keys:{value:function(){return i(this._url,"keys")},enumerable:!0},values:{value:function(){return i(this._url,"values")},enumerable:!0},items:{value:function(){return i(this._url,"keys+values")}},size:{get:function(){return n(this._url.query).length},enumerable:!0},getAll:{value:function(r){e(r);var o=[],i=n(this._url.query);return i.forEach(function(e){var n=t(e);n[0]===r&&o.push(n[1])}),o},enumerable:!0},append:{value:function(t,i){e(t),e(i);var a=n(this._url.query);a.push(o([t,i])),this._url.query=r(a)},enumerable:!0}}),Object.defineProperties(g.prototype,{href:{get:function(){return this._url?h(this._url):this._input},set:function(n){e(n),this._input=n,this._url=d(this._input,this._baseURL)},enumerable:!0},origin:{get:function(){return this._url&&this._url.host?this.protocol+"//"+this.host:""},enumerable:!0},protocol:{get:function(){return this._url?this._url.scheme+":":":"},set:function(n){if(e(n),this._url){var r=":"===n.slice(-1)?n.substring(0,n.length-1):n;(""===r||S.test(r))&&(this._url.scheme=l(r))}},enumerable:!0},_userinfo:{get:function(){return this._url?this._url.userinfo:""},set:function(n){e(n),this._url&&(this._url.userinfo=n)}},username:{get:function(){if(!this._url)return"";var e=R.exec(this._userinfo),n=decodeURIComponent(e[1]||"");return n},set:function(n){if(e(n),this._url){var r=R.exec(this._userinfo),t=[encodeURIComponent(n||"")];r[2]&&t.push(r[2]),this._userinfo=t.join(":")}},enumerable:!0},password:{get:function(){if(!this._url)return"";var e=R.exec(this._userinfo),n=decodeURIComponent(e[2]||"");return n},set:function(n){if(e(n),this._url){var r=R.exec(this._userinfo),t=[r[1]||""];n&&t.push(encodeURIComponent(n)),this._userinfo=t.join(":")}},enumerable:!0},host:{get:function(){var e="";return this._url&&this._url.host&&(e+=this._url.host,this._url.port&&(e+=":"+this._url.port)),e},set:function(n){if(e(n),this._url){var r=k.exec(n);r&&(this._url.host=r[1],this._url.port=u(r[2]))}},enumerable:!0},hostname:{get:function(){return this._url?this._url.host:""},set:function(n){if(e(n),this._url){var r=O.exec(n);r&&(this._url.host=n)}},enumerable:!0},port:{get:function(){var e=this._url?this._url.port||"":"";return e&&e===P[this.protocol]&&(e=""),e},set:function(n){if(e(n),this._url){var r=_.exec(n);r&&(this._url.port=u(n))}},enumerable:!0},pathname:{get:function(){return this._url?this._url.path:""},set:function(n){if(e(n),this._url){var r=L.exec(n);r&&(this._url.host&&n&&"/"!==n[0]&&(n="/"+n),this._url.path=n?c(n):"")}},enumerable:!0},search:{get:function(){return this._url&&this._url.query?"?"+this._url.query:""},set:function(n){if(e(n),this._url){n&&"?"===n[0]&&(n=n.substring(1));var r=E.exec(n);r&&(this._url.query=n)}},enumerable:!0},hash:{get:function(){return this._url&&this._url.fragment?"#"+this._url.fragment:""},set:function(n){if(e(n),this._url){n&&"#"===n[0]&&(n=n.substring(1));var r=C.exec(n);r&&(this._url.fragment=n)}},enumerable:!0}});var U=window.URL||window.webkitURL;U&&U.createObjectURL&&(Object.defineProperty(g,"createObjectURL",{value:U.createObjectURL.bind(U),enumerable:!1}),Object.defineProperty(g,"revokeObjectURL",{value:U.revokeObjectURL.bind(U),enumerable:!1})),window.URL=g}(),define("orion/URL-shim",function(){}),define("orion/PageLinks",["require","orion/Deferred","orion/PageUtil","orion/URITemplate","orion/i18nUtil","orion/objects","orion/URL-shim"],function(e,n,r,t,o,i){function a(){if(e.toUrl){var n=new URL(e.toUrl("orion/"),window.location.href);return new URL("../",n).href.slice(0,-1)}return new URL("/",window.location.href).href.slice(0,-1)}function s(e,n){return u(e,n).then(function(e){return new p(e)})}function l(e){var n={};return e.getPropertyKeys().forEach(function(r){"objectClass"!==r&&"service.names"!==r&&"service.id"!==r&&"__plugin__"!==r&&(n[r]=e.getProperty(r))}),n}function u(e,o){o=o||"orion.page.link";var i=e.getServiceReferences(o),s=r.matchResourceParameters(window.location.href),u=a(),c={OrionHome:u,Location:s.resource},f=[];return i.forEach(function(e){var o=l(e);if(o.uriTemplate&&(o.nls||o.name)){var i=new t(o.uriTemplate),a=i.expand(c);a=r.validateURLScheme(a),o.href=a,o.textContent=o.name||o.nameKey,f.push((new n).resolve(o))}}),n.all(f)}function c(e){var r;if(!g){r=[];var t=e.getServiceReferences("orion.page.link.category");return t.forEach(function(t){var o=l(t);o.id&&(o.name||o.nameKey)&&(o.service=e.getService(t),o.textContent=o.name,r.push((new n).resolve(o)))}),n.all(r).then(function(e){return g=new f(e)})}return(new n).resolve(g)}function f(e){var n=this.categories=Object.create(null);e.forEach(function(e){n[e.id]=e})}function p(e){this.allPageLinks=e,this.allPageLinks.sort(d)}function d(e,n){var r=e.textContent&&e.textContent.toLowerCase(),t=n.textContent&&n.textContent.toLowerCase();return t>r?-1:r>t?1:0}function h(e,n,r){var t=document.createElement("a");return t.href=e,t.target=n,t.classList.add("targetSelector"),t.textContent=r,t}var g;return i.mixin(f.prototype,{getCategoryIDs:function(){return Object.keys(this.categories)},getCategory:function(e){return this.categories[e]||null}}),i.mixin(p.prototype,{createLinkElements:function(){return this.allPageLinks.map(function(e){return h(e.href,"_self",e.textContent)})},getAllLinks:function(){return this.allPageLinks}}),{getCategoriesInfo:c,getPageLinksInfo:s,getOrionHome:a}}),function(e,n){"function"==typeof define&&define.amd?define("orion/plugin",["orion/Deferred"],n):"object"==typeof exports?module.exports=n(require("orion/Deferred")):(e.orion=e.orion||{},e.orion.PluginProvider=n(e.orion.Deferred))}(this,function(e){function n(e,n){this.__objectId=e,this.__methods=n}function r(r){function t(e){b&&("undefined"==typeof ArrayBuffer&&(e=JSON.stringify(e)),b===self?b.postMessage(e):b.postMessage(e,"*"))}function o(){var e=[];return Object.keys(y).forEach(function(n){var r=y[n];e.push({serviceId:n,names:r.names,methods:r.methods,properties:r.properties})}),{headers:f||{},services:e}}function i(e,n){if(n&&n instanceof XMLHttpRequest){var r,t;try{r=n.status,t=n.statusText}catch(o){r=0,t=""}return{status:r||0,statusText:t}}return n}function a(e){var n=e?JSON.parse(JSON.stringify(e,i)):e;return e instanceof Error&&(n.__isError=!0,n.message=n.message||e.message,n.name=n.name||e.name),n}function s(r){if(!b)return(new e).reject(new Error("plugin not connected"));r.id=String(d++);var t=new e;v[r.id]=t,t.then(null,function(e){p&&e instanceof Error&&"Cancel"===e.name&&S({requestId:r.id,method:"cancel",params:e.message?[e.message]:[]})});var o=Object.prototype.toString;return r.params.forEach(function(e,i){if("[object Object]"===o.call(e)&&!(e instanceof n)){var a,s;for(a in e)"[object Function]"===o.call(e[a])&&(s=s||[],s.push(a));if(s){var l=h++;w[l]=e;var u=function(){delete w[l]};t.then(u,u),r.params[i]=new n(l,s)}}}),S(r),t.promise}function l(e,n){e||0===e?S({id:e,result:null,error:n}):console.log(n)}function u(e,n,r,t){t.forEach(function(e,n){if(e&&"undefined"!=typeof e.__objectId){var r={};e.__methods.forEach(function(n){r[n]=function(){return s({objectId:e.__objectId,method:n,params:Array.prototype.slice.call(arguments)})}}),t[n]=r}});var o="undefined"==typeof e?null:{id:e,result:null,error:null};try{var i=r.apply(n,t);if(!o)return;i&&"function"==typeof i.then?(m[e]=i,i.then(function(n){delete m[e],o.result=n,S(o)},function(n){m[e]&&(delete m[e],o.error=a(n),S(o))},function(){S({responseId:e,method:"progress",params:Array.prototype.slice.call(arguments)})})):(o.result=i,S(o))}catch(l){o&&(o.error=a(l),S(o))}}function c(e){if(e.source===b||"undefined"==typeof window){var n="string"!=typeof e.data?e.data:JSON.parse(e.data);try{if(n.method){var r=n.method,t=n.params||[];if("serviceId"in n){var o=y[n.serviceId];o||l(n.id,"service not found"),o=o.implementation,r in o?u(n.id,o,o[r],t):l(n.id,"method not found")}else if("objectId"in n){var i=w[n.objectId];i||l(n.id,"object not found"),!r in i?u(n.id,i,i[r],t):l(n.id,"method not found")}else if("requestId"in n){var a=m[n.requestId];a&&"cancel"===r&&a.cancel&&a.cancel.apply(a,t)}else{if(!("responseId"in n))throw new Error("Bad method: "+n.method);var s=v[n.responseId];s&&"progress"===r&&s.progress&&s.progress.apply(s,t)}}else{var c=v[String(n.id)];delete v[String(n.id)],n.error?c.reject(n.error):c.resolve(n.result)}}catch(f){console.log("Plugin._messageHandler "+f)}}}var f=r,p=!1,d=0,h=0,g=0,m={},v={},w={},y={},b=null;"undefined"==typeof window?b=self:window!==window.parent?b=window.parent:null!==window.opener&&(b=window.opener);var S=t;t({method:"loading"}),this.updateHeaders=function(e){if(p)throw new Error("Cannot update headers. Plugin Provider is connected");f=e},this.registerService=function(e,n,r){if(p)throw new Error("Cannot register service. Plugin Provider is connected");"string"==typeof e?e=[e]:Array.isArray(e)||(e=[]);var t=null,o=[];for(t in n)"function"==typeof n[t]&&o.push(t);y[g++]={names:e,methods:o,implementation:n,properties:r||{},listeners:{}}},this.registerServiceProvider=this.registerService,this.connect=function(e,n){if(p)return void(e&&e());if(!b)return void(n&&n("No valid plugin target"));addEventListener("message",c,!1);var r={method:"plugin",params:[o()]};t(r),p=!0,e&&e()},this.disconnect=function(){p&&(removeEventListener("message",c),b=null,p=!1)}}return r}),function(){function e(e,n,r,t,o,i){n[e]&&(r.push(e),(n[e]===!0||1===n[e])&&t.push(o+e+"/"+i))}function n(e,n,r,t,o){var i=t+n+"/"+o;require._fileExists(e.toUrl(i+".js"))&&r.push(i)}function r(e,n,t){var o;for(o in n)!n.hasOwnProperty(o)||e.hasOwnProperty(o)&&!t?"object"==typeof n[o]&&(!e[o]&&n[o]&&(e[o]={}),r(e[o],n[o],t)):e[o]=n[o]}var t=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(o){var i=o.config?o.config():{};return{version:"2.0.4",load:function(o,a,s,l){l=l||{},l.locale&&(i.locale=l.locale);var u,c,f,p=t.exec(o),d=p[1],h=p[4],g=p[5],m=h.split("-"),v=[],w={},y="";if(p[5]?(d=p[1],u=d+g):(u=o,g=p[4],h=i.locale,h||(h=i.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),m=h.split("-")),l.isBuild){for(v.push(u),n(a,"root",v,d,g),c=0;c<m.length;c++)f=m[c],y+=(y?"-":"")+f,n(a,y,v,d,g);if(l.locales){var b,S;for(b=0;b<l.locales.length;b++)for(h=l.locales[b],m=h.split("-"),y="",S=0;S<m.length;S++)f=m[S],y+=(y?"-":"")+f,n(a,y,v,d,g)}a(v,function(){s()})}else a([u],function(n){var t,o=[];for(e("root",n,o,v,d,g),c=0;c<m.length;c++)t=m[c],y+=(y?"-":"")+t,e(y,n,o,v,d,g);a(v,function(){var e,t,i;for(e=o.length-1;e>-1&&o[e];e--)i=o[e],t=n[i],(t===!0||1===t)&&(t=a(d+i+"/"+g)),r(w,t);s(w)})})}}})}(),define("orion/nls/messages",{root:!0}),define("orion/nls/root/messages",{Navigator:"Navigator",Sites:"Sites",Shell:"Shell",ShellLinkWorkspace:"Shell","Get Plugins":"Get Plugins",Global:"Global",Editor:"Editor",EditorRelatedLink:"Show Current Folder",EditorRelatedLinkParent:"Show Enclosing Folder",EditorLinkWorkspace:"Edit",EditorRelatedLinkProj:"Show Project","Filter bindings":"Filter bindings","Orion Editor":"Orion Editor","Orion Image Viewer":"Orion Image Viewer","Orion Markdown Editor":"Orion Markdown Editor","Orion Markdown Viewer":"Orion Markdown Viewer","Orion JSON Editor":"Orion JSON Editor","View on Site":"View on Site","View this file or folder on a web site hosted by Orion":"View this file or folder on a web site hosted by Orion.",ShowAllKeyBindings:"Show a list of all the keybindings on this page","Show Keys":"Show Keys",HideShowBannerFooter:"Hide or show the page banner and footer","Toggle banner and footer":"Toggle banner and footer",ChooseFileOpenEditor:"Choose a file by name and open an editor on it",FindFile:"Find File Named...","System Configuration Details":"System Configuration Details","System Config Tooltip":"Go to the System Configuration Details page","Background Operations":"Background Operations","Background Operations Tooltip":"Go to the Background Operations page","Operation status is unknown":"Operation status is unknown","Unknown item":"Unknown item",NoSearchAvailableErr:"Can't search: no search service is available",Related:"Related",Options:"Options",FAQ:"FAQ","Report a Bug":"Bugs","Privacy Policy":"Privacy","Terms of Use":"Terms","Copyright Agent":"Copyright","Orion Logo":"Orion Logo","Orion is in Beta. Please try it out but BEWARE your data may be lost.":"@buildLabel@","LOG: ":"LOG: ",View:"View","no parent":"no parent","no tree model":"no tree model","no renderer":"no renderer","could not find table row ":"could not find table row ",Operations:"Operations","Operations running":"Operations running",SomeOpWarning:"Some operations finished with warning",SomeOpErr:"Some operations finished with error","no service registry":"no service registry",Tasks:"Tasks",Close:"Close","Expand all":"Expand all","Collapse all":"Collapse all",Search:"Search","Advanced search":"Advanced search",Submit:"Submit",More:"More","Recent searches":"Recent searches","Regular expression":"Regular expression","Search options":"Search options","Global search":"Global search","Orion Home":"Orion Home","Close notification":"Close notification",OpPressSpaceMsg:"Operations - Press spacebar to show current operations","Toggle side panel":"Toggle side panel","Open or close the side panel":"Open or close the side panel",Projects:"Projects","Toggle Sidebar":"Toggle Sidebar","Sample HTML5 Site":"Sample HTML5 Site","Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.":"Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.","Sample Orion Plugin":"Sample Orion Plugin","Generate a sample plugin for integrating with Orion.":"Generate a sample plugin for integrating with Orion.",Browser:"Web Browser",OutlineProgress:"Getting outline for ${0} from ${1}",outlineTimeout:"Outline service timed out. Try reloading the page and opening the outline again.",UnknownError:"An unknown error occurred.",UnknownWarning:"An unknown warning occurred.",Filter:"Filter (* = any string, ? = any character)",TemplateExplorerLabel:"Templates",OpenTemplateExplorer:"Open Template Explorer",Edit:"Edit",CentralNavTooltip:"Toggle Navigation Menu","Wrote: ${0}":"Wrote: ${0}",GenerateHTML:"Generate HTML file",GenerateHTMLTooltip:"Write an HTML file generated from the current Markdown editor content","alt text":"alt text",blockquote:"blockquote",code:"code","code (block)":"code (block)","code (span)":"code (span)",emphasis:"emphasis","fenced code (${0})":"fenced code (${0})","header (${0})":"header (${0})","horizontal rule":"horizontal rule",label:"label","link (auto)":"link (auto)","link (image)":"link (image)","link (inline)":"link (inline)","link label":"link label","link label (optional)":"link label (optional)","link (ref)":"link (ref)","list item (bullet)":"list item (bullet)","list item (numbered)":"list item (numbered)","strikethrough (${0})":"strikethrough (${0})",strong:"strong","table (${0})":"table (${0})",text:"text","title (optional)":"title (optional)",url:"url",TogglePaneOrientationTooltip:"Toggle split pane orientation",WarningHeaderTooDeep:"Header level cannot exceed 6",WarningUnorderedListItem:"Unordered list item within ordered list",WarningOrderedListItem:"Ordered list item within unordered list",WarningOrderedListShouldStartAt1:"The first item in an ordered list should have index 1",WarningLinkHasNoText:"Link has no text",WarningLinkHasNoURL:"Link has no URL",WarningUndefinedLinkId:"Undefined link ID: ${0}",PageTitleFormat:"${0} - ${1}",KeyCTRL:"Ctrl",KeySHIFT:"Shift",KeyALT:"Alt",KeyBKSPC:"Backspace",KeyDEL:"Del",KeyEND:"End",KeyENTER:"Enter",KeyESCAPE:"Esc",KeyHOME:"Home",KeyINSERT:"Ins",KeyPAGEDOWN:"Page Down",KeyPAGEUP:"Page Up",KeySPACE:"Space",KeyTAB:"Tab"}),define("orion/widgets/nls/messages",{root:!0}),define("orion/widgets/nls/root/messages",{"Choose a Folder":"Choose a Folder",OK:"OK",Profile:"Profile","Sign out":"Sign out","N/A":"N/A","logged in since ":"logged in since ","Sign in":"Sign in","Authentication required!":"Authentication required!","Name:":"Name:","Plug-ins":"Plug-ins",Properties:"Properties",Services:"Services","SFTP Transfer":"SFTP Transfer","Remote host:":"Remote host:","Port:":"SFTP Port:","Remote path:":"Remote path:","User name:":"User name:","Password:":"Password:","Start Transfer":"Start Transfer","Location:":"Location:","orion.sftpConnections":"orion.sftpConnections","Drag a file here":"Drag a file here","unzip zips":"Unzip *.zip files","or if you prefer":"(or upload a file using the buttons below)",Upload:"Upload","Browse...":"Browse...","Import a file or zip":"Import a file or zip",MissingSearchRenderer:"Missing required argument: searchRenderer","Find File Named":"Find File Named",Search:"Search","FileName FolderName":"FileName FolderName(Optional)","Searching...":"Searching...",SearchOccurences:'Searching for occurrences of: "${0}"',name:"name",test:"test","Type the name of a file to open (? = any character, * = any string):":"Type the name of a file to open (? = any character, * = any string):","Sign Out":"Sign Out","Sign In":"Sign In",Help:"Help","Report a Bug":"Report a Bug","Keyboard Shortcuts":"Keyboard Shortcuts",Settings:"Settings","View profile of ":"View profile of ",Profiles:"Profiles","Information Needed":"Information Needed",Cancel:"Cancel","If the same file exists in both the source and destination:":"If the same file exists in both the source and destination:","Cancel the transfer":"Cancel the transfer","Always overwrite destination":"Always overwrite destination","Overwrite if source is newer":"Overwrite if source is newer",New:"New","Building file skeleton...":"Building file skeleton...",Add:"Add","Upload...":"Upload...",AvailableCmdsType:"For a list of available commands type '${0}'.","Main Pages":"Main Pages","Related Links":"Related Links",Yes:"Yes",No:"No",DeleteSearchTrmMsg:"Click or use delete key to delete the search term",Application:"Application",selectLaunchConfig:"Create new launch configuration",createNew:"Create New",Running:"Running",checkingStateMessage:"Checking status of ${0}",checkingStateShortMessage:"checking status",Status:"Status",appInfoStopped:"stopped",appInfoRunning:"running",appInfoUnknown:"unknown",displayNameSeparator:" on ",openAppTooltip:"Open URL"}),define("plugins/pageLinksPlugin",["orion/PageLinks","orion/plugin","orion/URITemplate","i18n!orion/nls/messages","i18n!orion/widgets/nls/messages","orion/plugin"],function(e,n,r,t,o){var i={},a={name:"Orion Page Links",version:"1.0",description:"This plugin provides the top-level page links for Orion."},s=new n(a);s.registerService("orion.page.link.category",null,{id:"edit",name:t.Editor,nls:"orion/nls/messages",imageClass:"core-sprite-edit",order:10}),s.registerService("orion.page.link.category",null,{id:"shell",name:t.Shell,nls:"orion/nls/messages",imageClass:"core-sprite-shell",order:40}),s.registerService("orion.page.link.category",null,{id:"settings",name:o.Settings,nls:"orion/widgets/nls/messages",imageClass:"core-sprite-gear",order:60}),s.registerService("orion.page.link",null,{name:t.EditorLinkWorkspace,nls:"orion/nls/messages",tooltip:"Edit code",category:"edit",order:1e3,uriTemplate:"{+OrionHome}/edit/edit.html"}),s.registerService("orion.page.link",i,{name:t.ShellLinkWorkspace,id:"orion.shell",nls:"orion/nls/messages",category:"shell",order:1e3,uriTemplate:"{+OrionHome}/shell/shellPage.html"}),s.registerService("orion.page.link",null,{name:o.Settings,id:"orion.settings",nls:"orion/widgets/nls/messages",category:"settings",order:1e3,uriTemplate:"{+OrionHome}/settings/settings.html"}),s.registerService("orion.page.link.related",null,{id:"orion.editFromMetadata",name:t.EditorRelatedLink,nls:"orion/nls/messages",tooltip:"Open Editor page",category:"edit",order:1,validationProperties:[{source:"ChildrenLocation|ContentLocation",variableName:"EditorLocation",replacements:[{pattern:"\\?depth=1$",replacement:""}]}],uriTemplate:"{+OrionHome}/edit/edit.html#{,EditorLocation}"}),s.registerService("orion.page.link.related",null,{id:"orion.editParent",name:t.EditorRelatedLinkParent,nls:"orion/nls/messages",category:"edit",order:3,validationProperties:[{source:"Parents[0]:Location",variableName:"EditorLocation",replacements:[{pattern:"\\?depth=1$",replacement:""}]}],uriTemplate:"{+OrionHome}/edit/edit.html#{,EditorLocation}"}),s.registerService("orion.page.link.related",null,{id:"orion.editProjectRoot",name:t.EditorRelatedLinkProj,nls:"orion/nls/messages",category:"edit",order:5,validationProperties:[{source:"Parents[-1]:Location",variableName:"EditorLocation",replacements:[{pattern:"\\?depth=1$",replacement:""}]}],uriTemplate:"{+OrionHome}/edit/edit.html#{,EditorLocation}"}),s.registerService("orion.page.link.user",null,{id:"orion.help",name:o.Help,nls:"orion/widgets/nls/messages",uriTemplate:"{+OrionHome}/help/help.html",category:"user.0"}),s.registerService("orion.page.link.user",null,{id:"orion.report.bug",name:o["Report a Bug"],nls:"orion/widgets/nls/messages",uriTemplate:"https://bugs.eclipse.org/bugs/enter_bug.cgi?product=Orion&component=Client&version=5.0",category:"user.0"});
var l=document.createElement("a");l.href="./contentTemplates/helloWorld.zip";var u=document.createElement("a");u.href="./contentTemplates/pluginHelloWorld.zip",s.registerService("orion.core.content",null,{id:"orion.content.html5",name:t["Sample HTML5 Site"],nls:"orion/nls/messages",description:t["Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files."],contentURITemplate:l.href}),s.registerService("orion.core.content",null,{id:"orion.content.plugin",name:t["Sample Orion Plugin"],nls:"orion/nls/messages",description:t["Generate a sample plugin for integrating with Orion."],contentURITemplate:u.href});var c="http://orion-plugins.googlecode.com/git/index.html#?target={InstallTarget}&version={Version}&OrionHome={OrionHome}";s.registerService("orion.core.getplugins",null,{uri:decodeURIComponent(new r(c).expand({Version:"5.0",InstallTarget:e.getOrionHome()+"/settings/settings.html",OrionHome:e.getOrionHome()}))}),s.connect()});